(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{1829:function(e,t){},1831:function(e,t){},2046:function(e,t,s){"use strict";s.r(t);var n=s(1),a=s.n(n),i=s(258),r=s(1388),o=s(1300),c=s(45),d=s.n(c),l=s(930),p=s(1364),u=s(18),h=s(1322),g=s(1371),y=s(1230),m=s.n(y),S=s(950),b=s(132),A=s(259),T=(s(1665),s(1667)),k=s.n(T);const P=function(){return{wrapComponents:{info:()=>()=>null,authorizeBtn:()=>()=>null}}},w=e=>{const{spec:t,accessTokenProvider:s,authorizationHeader:n,api:i,securitySchemeType:r}=e,o={spec:t,validatorUrl:null,defaultModelsExpandDepth:-1,docExpansion:"list",requestInterceptor:e=>{const{url:t}=e,{context:a}=i,o=`${a}/*`;if(e.headers[n]="apikey"===n?s():"BASIC"===r?"Basic "+s():"TEST"===r?s():"Bearer "+s(),t.endsWith(o))e.url=t.substring(0,t.length-2);else if(t.includes(o+"?")){const s=t.split("/*?");e.url=s.length>1?s[0]+"?"+s[1]:s[0]}return e},defaultModelExpandDepth:-1,plugins:[P]};return a.a.createElement(k.a,o)};w.propTypes={accessTokenProvider:d.a.func.isRequired,authorizationHeader:d.a.string.isRequired,api:d.a.shape({context:d.a.string.isRequired}).isRequired,spec:d.a.string.isRequired};var K=w,f=s(1501),E=s(981);function v(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function I(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class x extends a.a.Component{constructor(e){super(e),this.state={securitySchemeType:"OAUTH",username:"",password:"",scopes:[],selectedKeyType:"PRODUCTION",keys:[],productionApiKey:"",sandboxApiKey:"",selectedKeyManager:"Resident Key Manager"},this.accessTokenProvider=this.accessTokenProvider.bind(this),this.updateSwagger=this.updateSwagger.bind(this),this.setSecurityScheme=this.setSecurityScheme.bind(this),this.setSelectedEnvironment=this.setSelectedEnvironment.bind(this),this.setProductionAccessToken=this.setProductionAccessToken.bind(this),this.setSandboxAccessToken=this.setSandboxAccessToken.bind(this),this.setUsername=this.setUsername.bind(this),this.setPassword=this.setPassword.bind(this),this.setSelectedKeyType=this.setSelectedKeyType.bind(this),this.setSectedKeyManager=this.setSelectedKeyManager.bind(this),this.setKeys=this.setKeys.bind(this),this.updateAccessToken=this.updateAccessToken.bind(this),this.setProductionApiKey=this.setProductionApiKey.bind(this),this.setSandboxApiKey=this.setSandboxApiKey.bind(this)}componentDidMount(){const{api:e}=this.context,t=e.id,s=u.a.getUser();let n,a,i,r,o,c;this.apiClient=new A.a,this.apiClient.getAPIById(t).then(e=>{if((n=e.obj).endpointURLs&&(a=n.endpointURLs.map(e=>e.environmentName)),i=n.ingressURLs,n.labels&&(r=n.labels.map(e=>e.name)),n.scopes){const e=n.scopes.map(e=>e.key);this.setState({scopes:e})}if(a&&a.length>0)return[o]=a,this.apiClient.getSwaggerByAPIIdAndEnvironment(t,o);if(i&&i.some(e=>e.clusterDetails.length>0)){const{clusterDetails:[{clusterName:e}]}=i.find(e=>e.clusterDetails.length>0);return o=e,this.apiClient.getSwaggerByAPIIdAndClusterName(t,e)}return r&&r.length>0?([o]=r,this.apiClient.getSwaggerByAPIIdAndLabel(t,o)):this.apiClient.getSwaggerByAPIId(t)}).then(e=>(c=e.obj,this.setState({api:n,swagger:c,environments:a,containerMngEnvironments:i,labels:r,productionAccessToken:void 0,sandboxAccessToken:void 0,selectedEnvironment:o}),null!=s?this.apiClient.getSubscriptions(t):null)).catch(e=>{const{status:t}=e;404===t&&this.setState({notFound:!0})})}setSecurityScheme(e){this.setState({securitySchemeType:e})}setSelectedEnvironment(e){this.setState({selectedEnvironment:e})}setProductionAccessToken(e){this.setState({productionAccessToken:e})}setSandboxAccessToken(e){this.setState({sandboxAccessToken:e})}setProductionApiKey(e){this.setState({productionApiKey:e})}setSandboxApiKey(e){this.setState({sandboxApiKey:e})}setUsername(e){this.setState({username:e})}setPassword(e){this.setState({password:e})}setSelectedKeyType(e,t,s){t?this.setState({selectedKeyType:e},this.updateAccessToken(s)):this.setState({selectedKeyType:e})}setSelectedKeyManager(e,t,s){t?this.setState({selectedKeyManager:e},this.updateAccessToken(s)):this.setState({selectedKeyManager:e})}setKeys(e){this.setState({keys:e})}updateAccessToken(e){const{selectedKeyType:t,selectedKeyManager:s,keys:n}=this.state;let a;n.get(s)&&n.get(s).keyType===t?(({accessToken:a}=n.get(s).token),"PRODUCTION"===t?this.setProductionAccessToken(a):this.setSandboxAccessToken(a)):E.a.get(e).then(e=>e.getKeys(t)).then(e=>{e.get(s)&&e.get(s).keyType===t&&({accessToken:a}=e.get(s).token),"PRODUCTION"===e.get(s).keyType?this.setProductionAccessToken(a):this.setSandboxAccessToken(a),this.setKeys(e)})}accessTokenProvider(){const{securitySchemeType:e,username:t,password:s,productionAccessToken:n,sandboxAccessToken:a,selectedKeyType:i,productionApiKey:r,sandboxApiKey:o}=this.state;if("BASIC"===e){return btoa(t+":"+s)}return"API-KEY"===e?"PRODUCTION"===i?r:o:"PRODUCTION"===i?n:a}updateSwagger(e){const{api:t,environments:s,containerMngEnvironments:n}=this.state;let a;(a=e?s.includes(e)?this.apiClient.getSwaggerByAPIIdAndEnvironment(t.id,e):n.some(t=>t.clusterDetails.length>0&&t.clusterDetails.some(t=>t.clusterName===e))?this.apiClient.getSwaggerByAPIIdAndClusterName(t.id,e):this.apiClient.getSwaggerByAPIIdAndLabel(t.id,e):this.apiClient.getSwaggerByAPIId(t.id)).then(e=>{this.setState({swagger:e.obj})})}render(){const{classes:e}=this.props,{api:t,notFound:s,swagger:n,securitySchemeType:c,selectedEnvironment:d,labels:l,environments:y,scopes:S,username:A,password:T,productionAccessToken:k,sandboxAccessToken:P,selectedKeyType:w,sandboxApiKey:E,productionApiKey:x,selectedKeyManager:C,containerMngEnvironments:O}=this.state,M=u.a.getUser(),R=JSON.stringify(function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?v(Object(s),!0).forEach((function(t){I(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):v(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({},n)),N="data:text/json;charset=utf-8, "+encodeURIComponent(R);if(null==t||null==n)return a.a.createElement(b.a,null);if(s)return"API Not found !";let U=!1,j=t.authorizationHeader?t.authorizationHeader:"Authorization";t&&t.securityScheme&&(U=t.securityScheme.includes("api_key"))&&"API-KEY"===c&&(j="apikey");const D=t.lifeCycleStatus&&"prototyped"===t.lifeCycleStatus.toLowerCase();return a.a.createElement(a.a.Fragment,null,a.a.createElement(o.a,{variant:"h4",className:e.titleSub},a.a.createElement(i.a,{id:"Apis.Details.ApiConsole.ApiConsole.title",defaultMessage:"Try Out"})),a.a.createElement(h.a,{className:e.paper},a.a.createElement(r.a,{container:!0,className:e.grid},!D&&!M&&a.a.createElement(r.a,{item:!0,md:6},a.a.createElement(h.a,{className:e.userNotificationPaper},a.a.createElement(o.a,{variant:"h5",component:"h3"},a.a.createElement(p.a,null,"warning")," ",a.a.createElement(i.a,{id:"notice",defaultMessage:"Notice"})),a.a.createElement(o.a,{component:"p"},a.a.createElement(i.a,{id:"api.console.require.access.token",defaultMessage:"You need an access token to try the API. Please log in and subscribe to the API to generate an access token. If you already have an access token, please provide it below."}))))),a.a.createElement(f.a,{setSecurityScheme:this.setSecurityScheme,securitySchemeType:c,setSelectedEnvironment:this.setSelectedEnvironment,selectedEnvironment:d,productionAccessToken:k,setProductionAccessToken:this.setProductionAccessToken,sandboxAccessToken:P,setSandboxAccessToken:this.setSandboxAccessToken,swagger:n,labels:l,containerMngEnvironments:O,environments:y,scopes:S,setUsername:this.setUsername,setPassword:this.setPassword,username:A,password:T,setSelectedKeyType:this.setSelectedKeyType,selectedKeyType:w,setSelectedKeyManager:this.setSelectedKeyManager,selectedKeyManager:C,updateSwagger:this.updateSwagger,setKeys:this.setKeys,setProductionApiKey:this.setProductionApiKey,setSandboxApiKey:this.setSandboxApiKey,productionApiKey:x,sandboxApiKey:E,api:this.state.api}),a.a.createElement(r.a,{container:!0},a.a.createElement(r.a,{xs:10,item:!0}),a.a.createElement(r.a,{xs:2,item:!0},a.a.createElement("a",{href:N,download:"swagger.json"},a.a.createElement(g.a,{size:"small"},a.a.createElement(m.a,{className:e.buttonIcon}),a.a.createElement(i.a,{id:"Apis.Details.APIConsole.APIConsole.download.swagger",defaultMessage:"Swagger ( /swagger.json )"})))))),a.a.createElement(h.a,{className:e.swaggerUIPaper},a.a.createElement(K,{api:this.state.api,accessTokenProvider:this.accessTokenProvider,spec:n,authorizationHeader:j,securitySchemeType:c})))}}x.propTypes={classes:d.a.shape({paper:d.a.string.isRequired,titleSub:d.a.string.isRequired,grid:d.a.string.isRequired,userNotificationPaper:d.a.string.isRequired,buttonIcon:d.a.string.isRequired}).isRequired},x.contextType=S.a;t.default=Object(l.a)(e=>({buttonIcon:{marginRight:10},paper:{margin:e.spacing(1),padding:e.spacing(1),"& span, & h5, & label, & td, & li, & div, & input":{color:e.palette.getContrastText(e.palette.background.paper)}},grid:{marginTop:e.spacing(4),marginBottom:e.spacing(4),paddingRight:e.spacing(2),justifyContent:"center"},userNotificationPaper:{padding:e.spacing(2)},titleSub:{marginLeft:e.spacing(2),paddingTop:e.spacing(2),paddingBottom:e.spacing(2),color:e.palette.getContrastText(e.palette.background.default)},swaggerUIPaper:{backgroundColor:e.custom.apiDetailPages.swaggerUIBackground}}))(x)}}]);
//# sourceMappingURL=APIConsole.f14210583cd72adbddef.bundle.js.map