(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{2378:function(e,t,a){var n={"./af":1513,"./af.js":1513,"./ar":1514,"./ar-dz":1515,"./ar-dz.js":1515,"./ar-kw":1516,"./ar-kw.js":1516,"./ar-ly":1517,"./ar-ly.js":1517,"./ar-ma":1518,"./ar-ma.js":1518,"./ar-sa":1519,"./ar-sa.js":1519,"./ar-tn":1520,"./ar-tn.js":1520,"./ar.js":1514,"./az":1521,"./az.js":1521,"./be":1522,"./be.js":1522,"./bg":1523,"./bg.js":1523,"./bm":1524,"./bm.js":1524,"./bn":1525,"./bn.js":1525,"./bo":1526,"./bo.js":1526,"./br":1527,"./br.js":1527,"./bs":1528,"./bs.js":1528,"./ca":1529,"./ca.js":1529,"./cs":1530,"./cs.js":1530,"./cv":1531,"./cv.js":1531,"./cy":1532,"./cy.js":1532,"./da":1533,"./da.js":1533,"./de":1534,"./de-at":1535,"./de-at.js":1535,"./de-ch":1536,"./de-ch.js":1536,"./de.js":1534,"./dv":1537,"./dv.js":1537,"./el":1538,"./el.js":1538,"./en-SG":1539,"./en-SG.js":1539,"./en-au":1540,"./en-au.js":1540,"./en-ca":1541,"./en-ca.js":1541,"./en-gb":1542,"./en-gb.js":1542,"./en-ie":1543,"./en-ie.js":1543,"./en-il":1544,"./en-il.js":1544,"./en-nz":1545,"./en-nz.js":1545,"./eo":1546,"./eo.js":1546,"./es":1547,"./es-do":1548,"./es-do.js":1548,"./es-us":1549,"./es-us.js":1549,"./es.js":1547,"./et":1550,"./et.js":1550,"./eu":1551,"./eu.js":1551,"./fa":1552,"./fa.js":1552,"./fi":1553,"./fi.js":1553,"./fo":1554,"./fo.js":1554,"./fr":1555,"./fr-ca":1556,"./fr-ca.js":1556,"./fr-ch":1557,"./fr-ch.js":1557,"./fr.js":1555,"./fy":1558,"./fy.js":1558,"./ga":1559,"./ga.js":1559,"./gd":1560,"./gd.js":1560,"./gl":1561,"./gl.js":1561,"./gom-latn":1562,"./gom-latn.js":1562,"./gu":1563,"./gu.js":1563,"./he":1564,"./he.js":1564,"./hi":1565,"./hi.js":1565,"./hr":1566,"./hr.js":1566,"./hu":1567,"./hu.js":1567,"./hy-am":1568,"./hy-am.js":1568,"./id":1569,"./id.js":1569,"./is":1570,"./is.js":1570,"./it":1571,"./it-ch":1572,"./it-ch.js":1572,"./it.js":1571,"./ja":1573,"./ja.js":1573,"./jv":1574,"./jv.js":1574,"./ka":1575,"./ka.js":1575,"./kk":1576,"./kk.js":1576,"./km":1577,"./km.js":1577,"./kn":1578,"./kn.js":1578,"./ko":1579,"./ko.js":1579,"./ku":1580,"./ku.js":1580,"./ky":1581,"./ky.js":1581,"./lb":1582,"./lb.js":1582,"./lo":1583,"./lo.js":1583,"./lt":1584,"./lt.js":1584,"./lv":1585,"./lv.js":1585,"./me":1586,"./me.js":1586,"./mi":1587,"./mi.js":1587,"./mk":1588,"./mk.js":1588,"./ml":1589,"./ml.js":1589,"./mn":1590,"./mn.js":1590,"./mr":1591,"./mr.js":1591,"./ms":1592,"./ms-my":1593,"./ms-my.js":1593,"./ms.js":1592,"./mt":1594,"./mt.js":1594,"./my":1595,"./my.js":1595,"./nb":1596,"./nb.js":1596,"./ne":1597,"./ne.js":1597,"./nl":1598,"./nl-be":1599,"./nl-be.js":1599,"./nl.js":1598,"./nn":1600,"./nn.js":1600,"./pa-in":1601,"./pa-in.js":1601,"./pl":1602,"./pl.js":1602,"./pt":1603,"./pt-br":1604,"./pt-br.js":1604,"./pt.js":1603,"./ro":1605,"./ro.js":1605,"./ru":1606,"./ru.js":1606,"./sd":1607,"./sd.js":1607,"./se":1608,"./se.js":1608,"./si":1609,"./si.js":1609,"./sk":1610,"./sk.js":1610,"./sl":1611,"./sl.js":1611,"./sq":1612,"./sq.js":1612,"./sr":1613,"./sr-cyrl":1614,"./sr-cyrl.js":1614,"./sr.js":1613,"./ss":1615,"./ss.js":1615,"./sv":1616,"./sv.js":1616,"./sw":1617,"./sw.js":1617,"./ta":1618,"./ta.js":1618,"./te":1619,"./te.js":1619,"./tet":1620,"./tet.js":1620,"./tg":1621,"./tg.js":1621,"./th":1622,"./th.js":1622,"./tl-ph":1623,"./tl-ph.js":1623,"./tlh":1624,"./tlh.js":1624,"./tr":1625,"./tr.js":1625,"./tzl":1626,"./tzl.js":1626,"./tzm":1627,"./tzm-latn":1628,"./tzm-latn.js":1628,"./tzm.js":1627,"./ug-cn":1629,"./ug-cn.js":1629,"./uk":1630,"./uk.js":1630,"./ur":1631,"./ur.js":1631,"./uz":1632,"./uz-latn":1633,"./uz-latn.js":1633,"./uz.js":1632,"./vi":1634,"./vi.js":1634,"./x-pseudo":1635,"./x-pseudo.js":1635,"./yo":1636,"./yo.js":1636,"./zh-cn":1637,"./zh-cn.js":1637,"./zh-hk":1638,"./zh-hk.js":1638,"./zh-tw":1639,"./zh-tw.js":1639};function i(e){var t=r(e);return a(t)}function r(e){var t=n[e];if(!(t+1)){var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}return t}i.keys=function(){return Object.keys(n)},i.resolve=r,e.exports=i,i.id=2378},2549:function(e,t){},2660:function(e,t){},2664:function(e,t){},2666:function(e,t){},2853:function(e,t,a){var n=a(2854);"string"==typeof n&&(n=[[e.i,n,""]]);var i={transform:void 0};a(522)(n,i);n.locals&&(e.exports=n.locals)},2854:function(e,t,a){(e.exports=a(521)(!1)).push([e.i,".MuiTypography-caption,.MuiTypography-h4{font-family:Open Sans,Helvetica,Arial,sans-serif!important}.MuiTypography-h4{font-size:1.3rem!important;font-weight:400!important;line-height:1.17!important}.MuiSvgIcon-root{width:1em!important;height:1em!important;display:inline-block!important;font-size:1.5rem!important;transition:fill .2s cubic-bezier(.4,0,.2,1) 0ms!important;flex-shrink:0!important;user-select:none!important}.MuiTypography-body1{font-size:.8571428571428571rem!important;font-family:Open Sans,Helvetica,Arial,sans-serif!important;font-weight:400!important;line-height:1.5!important}.MuiTypography-caption{font-size:.6428571428571428rem!important;font-family:Roboto,Helvetica,Arial,sans-serif!important;font-weight:400!important;line-height:1.66!important;letter-spacing:.03333em!important}.MuiListItemIcon-root svg{font-size:20px!important}.MuiTypography-subtitle1{font-size:.8571428571428571rem!important;font-family:Open Sans,Helvetica,Arial,sans-serif!important;font-weight:400!important;line-height:1.75!important}.jss4039{margin:5!important;padding:20px!important}",""])},3318:function(e,t){},3320:function(e,t){},3731:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),r=a(17),s=a.n(r),o=a(69),l=a(3336),c=a.n(l),p=a(3334),d=a.n(p),m=a(3337),u=a.n(m),g=a(3330),h=a.n(g),f=a(3338),E=a.n(f),b=a(3340),y=a.n(b),v=a(3339),C=a.n(v),A=a(3329),S=a.n(A),O=a(3332),D=a.n(O),P=a(3333),w=a.n(P),T=a(1148),x=a.n(T),I=a(3335),M=a.n(I),R=a(3341),k=a.n(R),N=a(3342),j=a.n(N),_=a(3331),L=a.n(_),q=a(52),W=a(13),U=a(53),B=a(123),F=a(1156),z=a.n(F),V=a(16),H=a(670),G=a(811),K=a(720),Y=a.n(K),J=a(508);function Q(e){const[t,a]=Object(n.useState)(!1),{classes:r,theme:s,Icon:o,to:l,history:c,text:p,route:d}=e,m=d||p,{leftMenu:u}=s.custom,g=s.palette.getContrastText(s.palette.background.leftMenu),h=s.custom.leftMenuIconSize,f=e=>{const{pathname:t}=e,n=new RegExp("/"+m+"$","g"),i=new RegExp("/"+m+"/","g");t.match(n)||t.match(i)?a(!0):a(!1)};return Object(n.useEffect)(()=>{const{location:e}=c;f(e)},[]),c.listen(e=>{f(e)}),i.a.createElement(B.b,{className:Y()(r.leftLInk,{[r.leftLink_IconLeft]:"icon left"===u},"leftLInk"),to:l,style:{backgroundColor:t?s.palette.background.appBarSelected:""}},o?i.a.cloneElement(o,{className:Y()(r.leftLink_Icon,{[r.noIcon]:"no icon"===u},"leftLink_Icon")}):i.a.createElement(G.a,{strokeColor:g,width:h,height:h,icon:e.iconText,className:Y()(r.leftLInk,{[r.noIcon]:"no icon"===u},"leftLink_Icon")}),i.a.createElement(J.a,{className:Y()(r.leftLInkText,{[r.leftLInkText_IconLeft]:"icon left"===u,[r.leftLInkText_NoText]:"no text"===u},"leftLInkText")},p))}Q.defaultProps={route:null,iconText:null},Q.propTypes={classes:s.a.shape({divider:s.a.string,leftLInk:s.a.string,leftLink_IconLeft:s.a.string,noIcon:s.a.string,leftLink_Icon:s.a.string,leftLInkText:s.a.string,leftLInkText_IconLeft:s.a.string,leftLInkText_NoText:s.a.string}).isRequired,theme:s.a.shape({custom:s.a.shape({leftMenu:s.a.string,leftMenuIconSize:s.a.number}),palette:s.a.shape({getContrastText:s.a.func,background:s.a.shape({leftMenu:s.a.string,appBar:s.a.string}),leftMenu:s.a.string})}).isRequired,Icon:s.a.element.isRequired,text:s.a.string.isRequired,to:s.a.string.isRequired,route:s.a.string,history:s.a.shape({listen:s.a.func.isRequired,location:s.a.string.isRequired}).isRequired,iconText:s.a.string};var Z=Object(U.withRouter)(Object(q.a)(e=>({leftLInkText:{color:e.palette.getContrastText(e.palette.background.leftMenu),textTransform:e.custom.leftMenuTextStyle,width:"100%",textAlign:"left",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},leftLInkText_IconLeft:{paddingLeft:10},LeftMenu:{backgroundColor:e.palette.background.leftMenu,width:e.custom.leftMenuWidth,textAlign:"center",fontFamily:e.typography.fontFamily,position:"absolute",bottom:0,left:0,top:0},leftLInk:{paddingTop:e.spacing(1),paddingBottom:e.spacing(1),paddingLeft:e.spacing(1),paddingRight:e.spacing(1),fontSize:e.typography.caption.fontSize,cursor:"pointer",textDecoration:"none"},leftLink_Icon:{color:e.palette.getContrastText(e.palette.background.leftMenu),fontSize:e.custom.leftMenuIconSize+"px"},leftLink_IconLeft:{display:"flex",alignItems:"center"},noIcon:{display:"none"},leftLInkText_NoText:{diplay:"none"}}),{withTheme:!0})(Q)),X=a(517),$=a(614),ee=a(629),te=a(529),ae=a(160),ne=a(607),ie=a(514),re=a.n(ie),se=a(1408);function oe(e){const{lastUpdatedTime:t}=e;return i.a.createElement("div",{style:{float:"right"}},i.a.createElement(se.a,{title:re()(t).calendar(),"aria-label":"add"},i.a.createElement(J.a,{variant:"caption",display:"block"},i.a.createElement(W.a,{id:"Apis.Details.components.APIDetailsTopMenu.last.updated.time",defaultMessage:"Last updated:"})," ",re()(t).fromNow())))}oe.propTypes={lastUpdatedTime:s.a.shape({content:s.a.string}).isRequired};var le=oe,ce=a(643),pe=a.n(ce),de=a(510),me=a(1317),ue=a(523),ge=a(1457),he=a(1967),fe=a(504),Ee=a(682),be=a.n(Ee),ye=a(62);function ve(e){const{theme:t,method:a}=e;let n=t.custom.resourceChipColors?t.custom.resourceChipColors[a]:null,r="#000000";return n?r=t.palette.getContrastText(t.custom.resourceChipColors[a]):(console.log("Check the theme settings. The resourceChipColors is not populated properly"),n="#cccccc"),i.a.createElement(he.a,{label:a.toUpperCase(),style:{backgroundColor:n,color:r,height:20,marginRight:5}})}ve.propTypes={method:s.a.string.isRequired,theme:s.a.shape({}).isRequired,classes:s.a.shape({}).isRequired};const Ce=Object(ge.a)(ve);class Ae extends i.a.Component{constructor(e){super(e),this.state={paths:null},this.restApi=new X.a}componentDidMount(){const{id:e}=this.props.api;this.restApi.getSwagger(e).then(e=>{void 0!==e.obj.paths&&this.setState({paths:e.obj.paths})}).catch(e=>{const{status:t}=e;404===t?this.setState({notFound:!0}):401===t&&Object(ae.doRedirectToLogin)()})}render(){const{paths:e}=this.state;if(this.state.notFound)return i.a.createElement("div",null,i.a.createElement(W.a,{id:"Apis.Details.NewOverview.Resources.resource.not.found",defaultMessage:"resource not found..."}));if(!e)return i.a.createElement("div",null,i.a.createElement(W.a,{id:"Apis.Details.NewOverview.Resources.loading",defaultMessage:"loading..."}));const{classes:t,parentClasses:a,api:n}=this.props;return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:a.titleWrapper},"GraphQL"===n.type?i.a.createElement(J.a,{variant:"h5",component:"h3",className:a.title},i.a.createElement(W.a,{id:"Apis.Details.NewOverview.Operations.operations",defaultMessage:"Operation"})):i.a.createElement(J.a,{variant:"h5",component:"h3",className:a.title},i.a.createElement(W.a,{id:"Apis.Details.NewOverview.Resources.resources",defaultMessage:"Resources"}))),i.a.createElement(fe.a,{p:1},i.a.createElement("div",{className:t.contentWrapper},Object.keys(e).map(a=>{const n=e[a];return i.a.createElement("div",{className:t.root},i.a.createElement(J.a,{className:t.heading,variant:"body1"},a),Object.keys(n).map(e=>ye.a.HTTP_METHODS.includes(e)?i.a.createElement(Ce,{method:e}):null))})),i.a.createElement(B.b,{to:"/apis/"+n.id+"/resources"},i.a.createElement(J.a,{className:t.subHeading,color:"primary",display:"inline",variant:"caption"},i.a.createElement(W.a,{id:"Apis.Details.NewOverview.Operations.ShowMore",defaultMessage:"Show More"}),i.a.createElement(be.a,{style:{marginLeft:"2px"},fontSize:"small"})))))}}Ae.propTypes={classes:s.a.shape({}).isRequired,theme:s.a.shape({}).isRequired,history:s.a.shape({push:s.a.shape({})}).isRequired,location:s.a.shape({pathname:s.a.shape({})}).isRequired,parentClasses:s.a.shape({}).isRequired,api:s.a.shape({id:s.a.string}).isRequired};var Se=Object(q.a)({root:{display:"flex",flexDirection:"row",alignItems:"center",marginBottom:10},heading:{marginRight:20},contentWrapper:{maxHeight:"125px",overflowY:"auto"}})(Ae),Oe=a(1449),De=a(1453),Pe=a(1452);function we(e){const{theme:t,method:a}=e,n=a.toLowerCase();let r=t.custom.operationChipColor?t.custom.operationChipColor[n]:null,s="#000000";return r?s=t.palette.getContrastText(t.custom.operationChipColor[n]):(console.log("Check the theme settings. The resourceChipColors is not populated properlly"),r="#cccccc"),i.a.createElement(he.a,{label:a,style:{backgroundColor:r,color:s,height:20,fontSize:9,width:95}})}we.propTypes={method:s.a.string.isRequired,theme:s.a.shape({}).isRequired,classes:s.a.shape({}).isRequired};const Te=Object(ge.a)(we);function xe(e){const{classes:t,parentClasses:a}=e;return i.a.createElement(ue.c.Consumer,null,e=>{let{api:n}=e;return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:a.titleWrapper},i.a.createElement(J.a,{variant:"h5",component:"h3",className:a.title},i.a.createElement(W.a,{id:"Apis.Details.NewOverview.Operations.operation",defaultMessage:"Operations"}))),i.a.createElement("div",null,i.a.createElement("div",{className:t.contentWrapper},i.a.createElement(Oe.a,{style:{padding:20}},n.operations&&0!==n.operations.length&&n.operations.map(e=>i.a.createElement(Pe.a,{style:{borderStyle:"hidden"}},i.a.createElement(De.a,{style:{padding:8}},i.a.createElement(J.a,{className:a.heading,component:"p",variant:"body1"},e.target)),i.a.createElement(De.a,{style:{padding:8}},i.a.createElement(Te,{method:e.verb})))))),i.a.createElement(fe.a,{py:2},i.a.createElement(B.b,{to:"/apis/"+n.id+"/operations"},i.a.createElement(J.a,{className:t.subHeading,color:"primary",display:"inline",variant:"caption"},i.a.createElement(W.a,{id:"Apis.Details.NewOverview.Operations.ShowMore",defaultMessage:"Show More"}),i.a.createElement(be.a,{style:{marginLeft:"2px"},fontSize:"small"}))))))})}xe.propTypes={parentClasses:s.a.shape({}).isRequired,classes:s.a.shape({}).isRequired};var Ie=Object(q.a)(e=>({contentWrapper:{marginTop:e.spacing(2),maxHeight:"250px",overflowY:"auto"}}))(xe);function Me(e){const{theme:t,method:a}=e,n=a.toLowerCase();let r=t.custom.resourceChipColors?t.custom.resourceChipColors[n]:null,s="#000000";return r?s=t.palette.getContrastText(t.custom.resourceChipColors[n]):(console.log("Check the theme settings. The resourceChipColors is not populated properly"),r="#cccccc"),i.a.createElement(he.a,{label:a.toUpperCase(),style:{backgroundColor:r,color:s,height:20}})}Me.propTypes={method:s.a.string.isRequired,theme:s.a.shape({}).isRequired,classes:s.a.shape({}).isRequired};const Re=Object(ge.a)(Me);class ke extends i.a.PureComponent{render(){const{classes:e,parentClasses:t,api:a}=this.props,n=a.apis;return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:t.titleWrapper,style:{margin:"20px 0 0"}},i.a.createElement(J.a,{variant:"h5",component:"h3",className:t.title},i.a.createElement(W.a,{id:"Apis.Details.Overview.ProductResources.resources",defaultMessage:"Resources"}))),i.a.createElement("div",{className:e.root},i.a.createElement("div",{className:e.contentWrapper},Object.keys(n).map(t=>{const a=n[t];return i.a.createElement("div",{className:e.root},i.a.createElement(J.a,{className:e.heading,variant:"body1"},a.name+" : "+a.version),Object.keys(a.operations).map(t=>{const n=a.operations[t];return i.a.createElement("div",{className:e.resourceRow},i.a.createElement(J.a,{className:e.heading,variant:"body1"},n.target),i.a.createElement(Re,{method:n.verb}))}))}))))}}ke.propTypes={classes:s.a.shape({}).isRequired,theme:s.a.shape({}).isRequired,history:s.a.shape({push:s.a.shape({})}).isRequired,location:s.a.shape({pathname:s.a.shape({})}).isRequired,parentClasses:s.a.shape({}).isRequired,api:s.a.shape({id:s.a.string}).isRequired};var Ne=Object(q.a)({root:{display:"flex",flexDirection:"column",alignItems:"left",marginBottom:10,padding:5},heading:{marginRight:20,paddingBottom:10},resourceRow:{display:"flex",flexDirection:"row",marginLeft:10}})(ke),je=a(1318),_e=a(591),Le=a.n(_e);function qe(e){return e&&e.charAt(0).toUpperCase()+e.slice(1)}function We(e){return e.toLowerCase()}function Ue(e){const{parentClasses:t,api:a}=e;return i.a.createElement(i.a.Fragment,null,i.a.createElement(me.a,{item:!0,xs:12,md:6,lg:4},i.a.createElement(J.a,{component:"p",variant:"subtitle2",className:t.subtitle},i.a.createElement(W.a,{id:"Apis.Details.NewOverview.Policies.business.plans",defaultMessage:"Business Plans:"}))),i.a.createElement(me.a,{item:!0,xs:12,md:6,lg:8},i.a.createElement(J.a,{component:"p",variant:"body1"},a.policies&&0!==a.policies.length&&a.policies.map((e,t)=>i.a.createElement("span",null,e,a.policies.length!==t+1&&", "," ")))))}Ue.propTypes={parentClasses:s.a.shape({}).isRequired,api:s.a.shape({}).isRequired};var Be=Object(ue.e)(Ue);const Fe={oauth2:"OAuth2",basic_auth:"Basic Auth",mutualssl:"Mutual TLS",api_key:"API Key"};function ze(e){const{parentClasses:t}=e,{api:a}=Object(n.useContext)(ue.c);return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",null,i.a.createElement(J.a,{variant:"h5",component:"h3",className:t.title},i.a.createElement(W.a,{id:"Apis.Details.NewOverview.MetaData.config",defaultMessage:"Configuration"}))),i.a.createElement(fe.a,{p:1},i.a.createElement(me.a,{container:!0,spacing:2},i.a.createElement(me.a,{item:!0,xs:12,md:6,lg:4},i.a.createElement(J.a,{component:"p",variant:"subtitle2",className:t.subtitle},i.a.createElement(W.a,{id:"Apis.Details.NewOverview.MetaData.transports",defaultMessage:"Transports"}),i.a.createElement(se.a,{placement:"top",tabIndex:"-1",classes:{tooltip:t.htmlTooltip},title:i.a.createElement(i.a.Fragment,null,i.a.createElement(W.a,{id:"Apis.Details.NewOverview.MetaData.transport.tooltip",defaultMessage:"HTTP is less secure than HTTPS and makes your API vulnerable to security threats."}))},i.a.createElement(je.a,{className:t.helpButton},i.a.createElement(Le.a,{className:t.helpIcon}))))),i.a.createElement(me.a,{item:!0,xs:12,md:6,lg:8},i.a.createElement(J.a,{component:"p",variant:"body1"},a.transport&&0!==a.transport.length&&i.a.createElement(i.a.Fragment,null,a.transport.map((e,t)=>i.a.createElement("span",null,function(e){return e.toUpperCase()}(e),a.transport.length!==t+1&&", "))),!a.transport&&i.a.createElement(i.a.Fragment,null,i.a.createElement(J.a,{component:"p",variant:"body1",className:t.notConfigured},i.a.createElement(W.a,{id:"Apis.Details.NewOverview.MetaData.transports.not.set",defaultMessage:"-"}))))),i.a.createElement(me.a,{item:!0,xs:12,md:6,lg:4},i.a.createElement(J.a,{component:"p",variant:"subtitle2",className:t.subtitle},i.a.createElement(W.a,{id:"Apis.Details.NewOverview.MetaData.securityScheme",defaultMessage:"API Security"}),i.a.createElement(se.a,{placement:"top",tabIndex:"-1",classes:{tooltip:t.htmlTooltip},title:i.a.createElement(i.a.Fragment,null,i.a.createElement(W.a,{id:"Apis.Details.NewOverview.MetaData.securityScheme.tooltip",defaultMessage:"OAuth2 is used as the default security schema."}))},i.a.createElement(je.a,{className:t.helpButton},i.a.createElement(Le.a,{className:t.helpIcon}))))),i.a.createElement(me.a,{item:!0,xs:12,md:6,lg:8},i.a.createElement(J.a,{component:"p",variant:"body1"},a.securityScheme&&0!==a.securityScheme.length&&i.a.createElement(i.a.Fragment,null,a.securityScheme.filter(e=>!e.includes("mandatory")).map(e=>Fe[e]).join(" , ")),!a.securityScheme&&i.a.createElement(i.a.Fragment,null,i.a.createElement(J.a,{component:"p",variant:"body1",className:t.notConfigured},i.a.createElement(W.a,{id:"Apis.Details.NewOverview.MetaData.securityScheme.not.set",defaultMessage:"-"}))))),i.a.createElement(me.a,{item:!0,xs:12,md:6,lg:4},i.a.createElement(J.a,{component:"p",variant:"subtitle2",className:t.subtitle},i.a.createElement(W.a,{id:"Apis.Details.NewOverview.MetaData.access.control",defaultMessage:"Access Control"}),i.a.createElement(se.a,{placement:"top",tabIndex:"-1",classes:{tooltip:t.htmlTooltip},title:i.a.createElement(i.a.Fragment,null,i.a.createElement(W.a,{id:"Apis.Details.NewOverview.MetaData.access.control.all.tooltip",defaultMessage:"All : The API is viewable, modifiable by all the publishers and creators."}),i.a.createElement("br",null),i.a.createElement(W.a,{id:"Apis.Details.NewOverview.MetaData.access.control.tooltip",defaultMessage:"Restricted by roles : The API can be viewable and modifiable by only specific publishers and creators with the roles that you specify"}))},i.a.createElement(je.a,{className:t.helpButton},i.a.createElement(Le.a,{className:t.helpIcon}))))),i.a.createElement(me.a,{item:!0,xs:12,md:6,lg:8},i.a.createElement(J.a,{component:"p",variant:"body1"},a.accessControl&&i.a.createElement(i.a.Fragment,null,qe(We(a.accessControl))),"RESTRICTED"===a.accessControl&&" ( Visible to ","RESTRICTED"===a.accessControl&&a.accessControlRoles.join(),"RESTRICTED"===a.accessControl&&" ) ")),i.a.createElement(me.a,{item:!0,xs:12,md:6,lg:4},i.a.createElement(J.a,{component:"p",variant:"subtitle2",className:t.subtitle},i.a.createElement(W.a,{id:"Apis.Details.NewOverview.MetaData.workflow.status",defaultMessage:"Workflow Status"}))),i.a.createElement(me.a,{item:!0,xs:12,md:6,lg:8},i.a.createElement(J.a,{component:"p",variant:"body1"},a.workflowStatus&&i.a.createElement(i.a.Fragment,null,a.workflowStatus),!a.workflowStatus&&i.a.createElement(i.a.Fragment,null,i.a.createElement(J.a,{component:"p",variant:"body1",className:t.notConfigured},i.a.createElement(W.a,{id:"Apis.Details.NewOverview.MetaData.workflowStatus.not.set",defaultMessage:"-"}))))),i.a.createElement(me.a,{item:!0,xs:12,md:6,lg:4},i.a.createElement(J.a,{component:"p",variant:"subtitle2",className:t.subtitle},i.a.createElement(W.a,{id:"Apis.Details.NewOverview.MetaData.visibility.store",defaultMessage:"Visibility on Developer Portal"}),i.a.createElement(se.a,{placement:"top",tabIndex:"-1",classes:{tooltip:t.htmlTooltip},title:i.a.createElement(i.a.Fragment,null,i.a.createElement(W.a,{id:"Apis.Details.NewOverview.MetaData.visibility.store.all.tooltip",defaultMessage:"Public: The API is accessible to everyone and can be advertised in multiple developer portals - a central developer portal and/or non-WSO2 developer portals."}),i.a.createElement("br",null),i.a.createElement(W.a,{id:"Apis.Details.NewOverview.MetaData.visibility.store.res.tooltip",defaultMessage:"Restricted by roles: The API is visible only to specific user roles in the tenant Developer Portal that you specify."}))},i.a.createElement(je.a,{className:t.helpButton},i.a.createElement(Le.a,{className:t.helpIcon}))))),i.a.createElement(me.a,{item:!0,xs:12,md:6,lg:8},i.a.createElement(J.a,{component:"p",variant:"body1"},a.visibility&&"PRIVATE"===a.visibility?i.a.createElement(i.a.Fragment,null,"Visible to my domain"):i.a.createElement(i.a.Fragment,null,qe(We(a.visibility))),"RESTRICTED"===a.visibility&&" ( Visible to ","RESTRICTED"===a.visibility&&a.visibleRoles.join(),"RESTRICTED"===a.visibility&&" ) ")),i.a.createElement(Be,{parentClasses:t}),a.apiType===X.a.CONSTS.APIProduct?null:i.a.createElement(i.a.Fragment,null,i.a.createElement(me.a,{item:!0,xs:12,md:6,lg:4},i.a.createElement(J.a,{component:"p",variant:"subtitle2",className:t.subtitle},i.a.createElement(W.a,{id:"Apis.Details.NewOverview.MetaData.tags",defaultMessage:"Tags"}))),i.a.createElement(me.a,{item:!0,xs:12,md:6,lg:8},a.tags&&a.tags.map(e=>i.a.createElement(he.a,{key:e,label:e,style:{"font-size":13,height:20,marginRight:5}})),0===a.tags.length&&i.a.createElement(i.a.Fragment,null,i.a.createElement(J.a,{component:"p",variant:"body1",className:t.notConfigured},i.a.createElement(W.a,{id:"Apis.Details.NewOverview.MetaData.tags.not.set",defaultMessage:"-"}))))))))}ze.propTypes={parentClasses:s.a.shape({}).isRequired};var Ve=ze,He=a(506),Ge=a(1481),Ke=a(1478),Ye=a(1479),Je=a(901),Qe=a.n(Je),Ze=a(978),Xe=a.n(Ze),$e=a(1435);const et=Object(He.a)(e=>({root:{width:"90%"},button:{color:e.palette.secondary,marginRight:e.spacing(1)},gridRequirements:{display:"flex",justifyContent:"center",alignItems:"center",marginTop:e.spacing(2)},gridSmall:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",marginLeft:0,marginTop:e.spacing(1)},gridEndpoint:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",marginLeft:0,marginRight:e.spacing(4.2),marginTop:e.spacing(.5)},iconTrue:{color:pe.a[500],display:"block",justifyContent:"flex-start",alignItems:"center",marginRight:e.spacing(1)},iconFalse:{color:e.palette.grey[500],display:"block",justifyContent:"flex-start",alignItems:"center",marginRight:e.spacing(1)},arrowIcon:{position:"absolute",top:"16px",right:"-76px",fontSize:"7.9461rem",color:e.palette.background.default,zIndex:e.zIndex.overviewArrow},label:{paddingLeft:"0",paddingRight:"0",flexBasis:"33.3333%",maxWidth:"33.3333%"},stepper:{background:"transparent",marginLeft:e.spacing(10)},box:{display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"transparent",padding:"2px",height:"82px",borderRight:"0",marginRight:"0"},pointerStart:{height:82,position:"relative",background:e.custom.overviewStepper.backgrounds.completed,marginRight:"21px","&:before":{content:'""',position:"absolute",right:"-41px",bottom:0,width:0,height:0,borderLeft:"41px solid",borderLeftColor:e.custom.overviewStepper.backgrounds.completed,borderTop:"41px solid transparent",borderBottom:"41px solid transparent"}},pointerMiddle:{height:82,position:"relative",background:e.custom.overviewStepper.backgrounds.active,margin:"0 20px","&:before":{content:'""',position:"absolute",right:"-41px",bottom:0,width:0,height:0,borderLeft:"41px solid",borderLeftColor:e.custom.overviewStepper.backgrounds.active,borderTop:"41px solid transparent",borderBottom:"41px solid transparent"},"&:after":{content:'""',position:"absolute",left:0,bottom:0,width:0,height:0,borderLeft:"41px solid",borderLeftColor:e.custom.wrapperBackground,borderTop:"41px solid transparent",borderBottom:"41px solid transparent"}},pointerEnd:{height:82,position:"relative",background:e.custom.overviewStepper.backgrounds.inactive,marginLeft:"21px","&:after":{content:'""',position:"absolute",left:0,bottom:0,width:0,height:0,borderLeft:"41px solid",borderLeftColor:e.custom.wrapperBackground,borderTop:"41px solid transparent",borderBottom:"41px solid transparent"}},pointerMiddleCompleted:{background:e.custom.overviewStepper.backgrounds.completed,"&:before":{borderLeftColor:e.custom.overviewStepper.backgrounds.completed}},pointerEndActive:{background:e.custom.overviewStepper.backgrounds.active},pointerEndCompleted:{background:e.custom.overviewStepper.backgrounds.completed},stepIcon:{fontSize:e.custom.overviewStepper.iconSize}}));function tt(){const[e,t]=Object(ue.d)(),a=et(),{settings:r,user:s}=Object(ne.c)(),l=null!==e.endpointConfig,c=0!==e.policies.length,p=null!==e.endpointConfig&&"prototyped"===e.endpointConfig.implementation_status,[d,m]=Object(n.useState)([]),[u,g]=Object(n.useState)(!1),{tenantList:h}=Object(n.useContext)(ue.c),f=s.name.split("@"),E=f[f.length-1];let b="".concat(r.storeUrl,"/apis/").concat(e.id,"/overview");function y(a,n){g(!0),e.updateLcState(a,n).then(()=>{t().then().catch(e=>{e.response?te.a.error(e.response.body.description):te.a.error("Something went wrong while updating the API"),console.error(e)}),te.a.info("Lifecycle state updated successfully")}).finally(()=>g(!1)).catch(e=>{console.log(e),te.a.error(JSON.stringify(e.message))})}h&&h.length>0&&(b="".concat(r.storeUrl,"/apis/").concat(e.id,"/overview?tenant=").concat(E)),Object(n.useEffect)(()=>{e.getLcState(e.id).then(e=>{m(e.body.state)})},[]);let v=0;"Created"===d&&(l&&c||p)?v=2:"Created"===d?v=1:"Created"!==d&&(v=3);const C=v>1?a.pointerMiddleCompleted:"";let A;return A=2===v?a.pointerEndActive:3===v?a.pointerEndCompleted:"",i.a.createElement("div",{className:a.root},i.a.createElement(Ge.a,{alternativeLabel:!0,activeStep:v,className:a.stepper},i.a.createElement(Ke.a,{className:a.label},i.a.createElement(Ye.a,{style:{position:"relative"},StepIconProps:{classes:{root:a.stepIcon}}},i.a.createElement("div",{className:a.pointerStart},i.a.createElement(fe.a,{className:a.box},i.a.createElement(J.a,{variant:"h5"},i.a.createElement(W.a,{id:"Apis.Details.Overview.CustomizedStepper.create",defaultMessage:"Created"})))))),i.a.createElement(Ke.a,{className:a.label},i.a.createElement(Ye.a,{style:{position:"relative"},StepIconProps:{classes:{root:a.stepIcon}}},i.a.createElement("div",{className:"".concat(a.pointerMiddle," ").concat(C)},i.a.createElement(fe.a,{p:2,borderLeft:"0",borderRight:"0"},i.a.createElement(se.a,{title:l?"":"You have to specify an endpoint for the API",placement:"top"},i.a.createElement(me.a,{className:a.gridEndpoint},l?i.a.createElement(Qe.a,{className:a.iconTrue}):i.a.createElement(Xe.a,{className:a.iconFalse}),i.a.createElement(J.a,{variant:"h7"},i.a.createElement(W.a,{id:"Apis.Details.Overview.CustomizedStepper.business.plan.endpoint",defaultMessage:"Endpoint"})),i.a.createElement(B.b,{to:"/apis/"+e.id+"/endpoints"},i.a.createElement(be.a,{style:{marginLeft:"5px"},color:"primary",fontSize:"small"})))),i.a.createElement(se.a,{title:c?"":"You have to select the business plan for the API",placement:"bottom"},i.a.createElement(me.a,{xs:12,className:a.gridSmall},c?i.a.createElement(Qe.a,{className:a.iconTrue}):i.a.createElement(Xe.a,{className:a.iconFalse}),i.a.createElement(J.a,{variant:"h7"},i.a.createElement(W.a,{id:"Apis.Details.Overview.CustomizedStepper.business.plan.businessPlans",defaultMessage:" Business plans"})),i.a.createElement(B.b,{to:"/apis/"+e.id+"/subscriptions"},i.a.createElement(be.a,{style:{marginLeft:"5px"},color:"primary",fontSize:"small"})))))))),i.a.createElement(Ke.a,{className:a.label},i.a.createElement(Ye.a,{style:{position:"relative"},StepIconProps:{classes:{root:a.stepIcon}}},i.a.createElement("div",{className:"".concat(a.pointerEnd," ").concat(A)},i.a.createElement(fe.a,{className:a.box},function(t){switch(t){case"Published":return i.a.createElement(me.a,{xs:12,display:"block"},i.a.createElement(me.a,{xs:12},i.a.createElement(J.a,{variant:"h5"},i.a.createElement(W.a,{id:"Apis.Details.Overview.CustomizedStepper.published",defaultMessage:"Published"}))),i.a.createElement(me.a,{xs:12},i.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:b,className:a.viewInStoreLauncher},i.a.createElement(J.a,{variant:"h6",color:"primary"},i.a.createElement(W.a,{id:"Apis.Details.components.APIDetailsTopMenu.view.in.portal",defaultMessage:"View in Dev Portal"}),i.a.createElement(be.a,{style:{marginLeft:"5px"},fontSize:"small"})))));case"Prototyped":return i.a.createElement(J.a,{variant:"h5"},i.a.createElement(W.a,{id:"Apis.Details.Overview.CustomizedStepper.prototyped",defaultMessage:"Prototyped"}));case"Blocked":return i.a.createElement(J.a,{variant:"h5"},i.a.createElement(W.a,{id:"Apis.Details.Overview.CustomizedStepper.blocked",defaultMessage:"Blocked"}));case"Deprecated":return i.a.createElement(J.a,{variant:"h5"},i.a.createElement(W.a,{id:"Apis.Details.Overview.CustomizedStepper.deprecated",defaultMessage:"Deprecated"}));case"Retired":return i.a.createElement(J.a,{variant:"h5"},i.a.createElement(W.a,{id:"Apis.Details.Overview.CustomizedStepper.retired",defaultMessage:"Retired"}));default:return i.a.createElement(me.a,{xs:12,display:"block"},i.a.createElement(me.a,{xs:12},p?i.a.createElement(je.a,{variant:"contained",color:"primary",onClick:()=>y(e.id,"Deploy as a Prototype"),disabled:"CREATED"===e.workflowStatus||o.a.isNotPublisher()},"Deploy as a prototype",u&&i.a.createElement($e.a,{size:20})):i.a.createElement(je.a,{variant:"contained",color:"primary",onClick:()=>y(e.id,"Publish"),disabled:!l||!c||o.a.isNotPublisher()||"CREATED"===e.workflowStatus},"Publish",u&&i.a.createElement($e.a,{size:20}))),"CREATED"===e.workflowStatus&&i.a.createElement(me.a,{xs:12},i.a.createElement(J.a,{variant:"caption",color:"error"},i.a.createElement(W.a,{id:"Apis.Details.Overview.CustomizedStepper.pending",defaultMessage:"The request is pending"}))))}}(d)))))))}function at(e){const{parentClasses:t,api:a}=e;return i.a.createElement(i.a.Fragment,null,i.a.createElement(me.a,{item:!0,xs:12,md:6,lg:4},i.a.createElement(J.a,{component:"p",variant:"subtitle2",className:t.subtitle},i.a.createElement(W.a,{id:"Apis.Details.NewOverview.BusinessInformation.business.owner",defaultMessage:"Business Owner"}))),i.a.createElement(me.a,{item:!0,xs:12,md:6,lg:8},i.a.createElement(J.a,{component:"p",variant:"body1"},a.businessInformation.businessOwner&&i.a.createElement(i.a.Fragment,null,a.businessInformation.businessOwner)),i.a.createElement(J.a,{component:"p",variant:"body1",className:t.notConfigured},!a.businessInformation.businessOwner&&i.a.createElement(i.a.Fragment,null,i.a.createElement(W.a,{id:"Apis.Details.NewOverview.BusinessInformation.business.owner.not.set",defaultMessage:"-"})))),i.a.createElement(me.a,{item:!0,xs:12,md:6,lg:4},i.a.createElement(J.a,{component:"p",variant:"subtitle2",className:t.subtitle},i.a.createElement(W.a,{id:"Apis.Details.NewOverview.BusinessInformation.technical.owner",defaultMessage:"Technical Owner"}))),i.a.createElement(me.a,{item:!0,xs:12,md:6,lg:8},i.a.createElement(J.a,{component:"p",variant:"body1"},a.businessInformation.technicalOwner&&i.a.createElement(i.a.Fragment,null,a.businessInformation.technicalOwner)),i.a.createElement(J.a,{component:"p",variant:"body1",className:t.notConfigured},!a.businessInformation.technicalOwner&&i.a.createElement(i.a.Fragment,null,i.a.createElement(W.a,{id:"Apis.Details.NewOverview.BusinessInformation.technical.owner.not.set",defaultMessage:"-"})))))}tt.propTypes={classes:s.a.shape({}).isRequired,api:s.a.shape({id:s.a.string}).isRequired},tt.contextType=ue.c,at.propTypes={parentClasses:s.a.shape({}).isRequired,api:s.a.shape({}).isRequired};var nt=Object(ue.e)(at);function it(e){const{parentClasses:t}=e,[a]=Object(ue.d)();return i.a.createElement(i.a.Fragment,null,i.a.createElement(J.a,{variant:"h5",component:"h3",className:t.title},i.a.createElement(W.a,{id:"Apis.Details.NewOverview.MetaData.metadata",defaultMessage:"Metadata"})),i.a.createElement(fe.a,{p:1},i.a.createElement(me.a,{container:!0,spacing:1},i.a.createElement(me.a,{item:!0,xs:12,md:6,lg:4},i.a.createElement(J.a,{component:"p",variant:"subtitle2",className:t.subtitle},i.a.createElement(W.a,{id:"Apis.Details.NewOverview.MetaData.description",defaultMessage:"Description"}))),i.a.createElement(me.a,{item:!0,xs:12,md:6,lg:8},i.a.createElement(J.a,{component:"p",variant:"body1"},a.description&&i.a.createElement(i.a.Fragment,null,qe(a.description))),i.a.createElement(J.a,{component:"p",variant:"body1",className:t.notConfigured},!a.description&&i.a.createElement(i.a.Fragment,null,i.a.createElement(J.a,{component:"p",variant:"body1",className:t.notConfigured},i.a.createElement(W.a,{id:"Apis.Details.NewOverview.MetaData.description.not.set",defaultMessage:"-"}))))),i.a.createElement(me.a,{item:!0,xs:12,md:6,lg:4},i.a.createElement(J.a,{component:"p",variant:"subtitle2",className:t.subtitle},i.a.createElement(W.a,{id:"Apis.Details.NewOverview.MetaData.provider",defaultMessage:"Provider"}))),i.a.createElement(me.a,{item:!0,xs:12,md:6,lg:8},i.a.createElement(J.a,{component:"p",variant:"body1"},a.provider&&i.a.createElement(i.a.Fragment,null,a.provider))),i.a.createElement(me.a,{item:!0,xs:12,md:6,lg:4},i.a.createElement(J.a,{component:"p",variant:"subtitle2",className:t.subtitle},i.a.createElement(W.a,{id:"Apis.Details.NewOverview.MetaData.context:",defaultMessage:"Context:"}))),i.a.createElement(me.a,{item:!0,xs:12,md:6,lg:8},i.a.createElement(J.a,{component:"p",variant:"body1"},a.context&&i.a.createElement(i.a.Fragment,null,a.context))),a.apiType===X.a.CONSTS.API&&i.a.createElement(i.a.Fragment,null,i.a.createElement(me.a,{item:!0,xs:12,md:6,lg:4},i.a.createElement(J.a,{component:"p",variant:"subtitle2",className:t.subtitle},i.a.createElement(W.a,{id:"Apis.Details.NewOverview.MetaData.version",defaultMessage:"Version"}))),i.a.createElement(me.a,{item:!0,xs:12,md:6,lg:8},i.a.createElement(J.a,{component:"p",variant:"body1"},a.version&&i.a.createElement(i.a.Fragment,null,a.version)))),a.apiType===X.a.CONSTS.APIProduct?null:i.a.createElement(i.a.Fragment,null,i.a.createElement(me.a,{item:!0,xs:12,md:6,lg:4},i.a.createElement(i.a.Fragment,null,i.a.createElement(J.a,{component:"p",variant:"subtitle2",className:t.subtitle},i.a.createElement(W.a,{id:"Apis.Details.NewOverview.MetaData.type:",defaultMessage:"Type:"})))),i.a.createElement(me.a,{item:!0,xs:12,md:6,lg:8},i.a.createElement(J.a,{component:"p",variant:"body1"},a.type&&i.a.createElement(i.a.Fragment,null,a.type),!a.type&&i.a.createElement(i.a.Fragment,null,i.a.createElement(J.a,{component:"p",variant:"body1",className:t.notConfigured},i.a.createElement(W.a,{id:"Apis.Details.NewOverview.MetaData.type.not.set",defaultMessage:"-"})))))),i.a.createElement(me.a,{item:!0,xs:12,md:6,lg:4},i.a.createElement(J.a,{component:"p",variant:"subtitle2",className:t.subtitle},i.a.createElement(W.a,{id:"Apis.Details.NewOverview.MetaData.created.time",defaultMessage:"Created Time"}))),i.a.createElement(me.a,{item:!0,xs:12,md:6,lg:8},i.a.createElement(J.a,{component:"p",variant:"body1"},a.createdTime&&i.a.createElement(i.a.Fragment,null,i.a.createElement(se.a,{title:re()(a.createdTime).calendar(),"aria-label":"add",interactive:!0,placement:"top-start",tabIndex:"-1"},i.a.createElement(J.a,{variant:"body1",display:"block"},qe(re()(a.createdTime).fromNow())))),!a.createdTime&&i.a.createElement(i.a.Fragment,null,i.a.createElement(J.a,{component:"p",variant:"body1",className:t.notConfigured},i.a.createElement(W.a,{id:"Apis.Details.NewOverview.MetaData.createdTime.not.set",defaultMessage:"-"}))))),i.a.createElement(me.a,{item:!0,xs:12,md:6,lg:4},i.a.createElement(J.a,{component:"p",variant:"subtitle2",className:t.subtitle},i.a.createElement(W.a,{id:"Apis.Details.NewOverview.MetaData.last.updated.time",defaultMessage:"Last Updated Time"}))),i.a.createElement(me.a,{item:!0,xs:12,md:6,lg:8},i.a.createElement(J.a,{component:"p",variant:"body1"},a.lastUpdatedTime&&i.a.createElement(i.a.Fragment,null,i.a.createElement(se.a,{title:re()(a.lastUpdatedTime).calendar(),"aria-label":"add",interactive:!0,placement:"top-start",tabIndex:"-1"},i.a.createElement(J.a,{variant:"body1",display:"block"},qe(re()(a.lastUpdatedTime).fromNow())))),!a.lastUpdatedTime&&i.a.createElement(i.a.Fragment,null,i.a.createElement(J.a,{component:"p",variant:"body1",className:t.notConfigured},i.a.createElement(W.a,{id:"Apis.Details.NewOverview.MetaData.lastUpdatedTime.not.set",defaultMessage:"-"}))))),i.a.createElement(nt,{parentClasses:t}))))}it.propTypes={parentClasses:s.a.shape({}).isRequired};var rt=it;const st=(e,t)=>{if(e.endpointConfig){if("prod"===t)return e.getProductionEndpoint();if("sand"===t)return e.getSandboxEndpoint()}return null};function ot(e){const{parentClasses:t,api:a}=e,n=null!==a.endpointConfig&&"prototyped"===a.endpointConfig.implementation_status;return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",null,i.a.createElement(J.a,{variant:"h5",component:"h3",className:t.title},i.a.createElement(W.a,{id:"Apis.Details.NewOverview.Endpoints.endpoints",defaultMessage:"Endpoints"}))),i.a.createElement(fe.a,{p:1},i.a.createElement(me.a,{container:!0,spacing:2},i.a.createElement(me.a,{item:!0,xs:12,md:6,lg:4},n?i.a.createElement(J.a,{component:"p",variant:"subtitle2",className:t.subtitle},i.a.createElement(W.a,{id:"Apis.Details.NewOverview.Endpoints.prototype.endpoint",defaultMessage:"Prototype Endpoint"})):i.a.createElement(J.a,{component:"p",variant:"subtitle2",className:t.subtitle},i.a.createElement(W.a,{id:"Apis.Details.NewOverview.Endpoints.production.endpoint",defaultMessage:"Production Endpoint"}))),i.a.createElement(me.a,{item:!0,xs:12,md:6,lg:8},i.a.createElement(se.a,{placement:"top",classes:{tooltip:t.htmlTooltip},title:st(a,"prod")&&i.a.createElement(i.a.Fragment,null,st(a,"prod"))},i.a.createElement(J.a,{component:"p",variant:"body1",className:t.url},st(a,"prod")&&i.a.createElement(i.a.Fragment,null,st(a,"prod")))),i.a.createElement(J.a,{component:"p",variant:"body1",className:t.notConfigured},!st(a,"prod")&&i.a.createElement(i.a.Fragment,null,i.a.createElement(W.a,{id:"Apis.Details.NewOverview.Endpoints.not.set",defaultMessage:"-"})))),!n&&i.a.createElement(me.a,{item:!0,xs:12,md:6,lg:4},i.a.createElement(J.a,{component:"p",variant:"subtitle2",className:t.subtitle},i.a.createElement(W.a,{id:"Apis.Details.NewOverview.Endpoints.sandbox.endpoint",defaultMessage:"Sandbox Endpoint"}))),!n&&i.a.createElement(me.a,{item:!0,xs:12,md:6,lg:8},i.a.createElement(se.a,{placement:"top",classes:{tooltip:t.htmlTooltip},title:st(a,"sand")&&i.a.createElement(i.a.Fragment,null,st(a,"sand"))},i.a.createElement(J.a,{component:"p",variant:"body1",className:t.url},st(a,"sand")&&i.a.createElement(i.a.Fragment,null,st(a,"sand")))),i.a.createElement(J.a,{component:"p",variant:"body1",className:t.notConfigured},!st(a,"sand")&&i.a.createElement(i.a.Fragment,null,i.a.createElement(W.a,{id:"Apis.Details.NewOverview.Endpoints.sandbox.not.set",defaultMessage:"-"})))),i.a.createElement(me.a,{item:!0,xs:12,md:6,lg:4},i.a.createElement(J.a,{component:"p",variant:"subtitle2",className:t.subtitle},i.a.createElement(W.a,{id:"Apis.Details.NewOverview.Endpoints.endpoint.security",defaultMessage:"Endpoint Security"}))),i.a.createElement(me.a,{item:!0,xs:12,md:6,lg:8},i.a.createElement(J.a,{component:"p",variant:"body1"},a.endpointSecurity&&i.a.createElement(i.a.Fragment,null,a.endpointSecurity.type)),i.a.createElement(J.a,{component:"p",variant:"body1",className:t.notConfigured},!a.endpointSecurity&&i.a.createElement(i.a.Fragment,null,i.a.createElement(W.a,{id:"Apis.Details.NewOverview.Endpoints.security.not.set",defaultMessage:"-"})))))))}ot.propTypes={parentClasses:s.a.shape({}).isRequired,api:s.a.shape({}).isRequired};var lt=Object(ue.e)(ot);function ct(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function pt(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ct(a,!0).forEach(function(t){dt(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ct(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function dt(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function mt(e){const{classes:t,api:a}=e,{api:r}=Object(n.useContext)(ue.c);let s;return r.apiType===X.a.CONSTS.API&&(s=i.a.createElement(lt,{parentClasses:t,api:r})),a.apiType===X.a.CONSTS.APIProduct&&(r.type=X.a.CONSTS.APIProduct),i.a.createElement(i.a.Fragment,null,i.a.createElement(J.a,{variant:"h4",align:"left",className:t.mainTitle},i.a.createElement(W.a,{id:"Apis.Details.Overview.Overview.topic.header",defaultMessage:"Overview"})),r.type!==X.a.CONSTS.APIProduct&&i.a.createElement(me.a,{container:!0,spacing:12},i.a.createElement(me.a,{item:!0,xs:12,s:12,md:12,lg:12},i.a.createElement(tt,null))),i.a.createElement("div",{className:t.contentWrapper},i.a.createElement(de.a,{className:t.root},i.a.createElement(me.a,{container:!0,spacing:24},i.a.createElement(me.a,{item:!0,xs:12,md:12,lg:12},i.a.createElement(me.a,{container:!0,spacing:24},i.a.createElement(me.a,{item:!0,xs:12,md:6,lg:6},i.a.createElement(rt,{parentClasses:t})),i.a.createElement(me.a,{item:!0,xs:12,md:6,lg:6},i.a.createElement(Ve,{parentClasses:t})))),i.a.createElement(me.a,{item:!0,xs:12,md:12,lg:12},i.a.createElement("div",{className:t.specialGap},i.a.createElement(me.a,{container:!0,spacing:24},i.a.createElement(me.a,{item:!0,xs:12,md:6,lg:6},i.a.createElement(me.a,{item:!0,xs:12,md:8,lg:8},function(e){switch(e){case"GRAPHQL":return i.a.createElement(Ie,{parentClasses:t,api:r});case"APIProduct":return i.a.createElement(Ne,{parentClasses:t,api:r});case"WS":return"";default:return i.a.createElement(Se,{parentClasses:t,api:r})}}(r.type))),i.a.createElement(me.a,{item:!0,xs:12,md:6,lg:6},s))))))))}mt.propTypes={classes:s.a.shape({}).isRequired,api:s.a.shape({id:s.a.string}).isRequired};var ut=Object(q.a)(e=>({root:pt({},e.mixins.gutters(),{paddingTop:e.spacing(2),paddingBottom:e.spacing(2)}),contentWrapper:{marginTop:e.spacing(2)},buttonSuccess:{backgroundColor:pe.a[500],"&:hover":{backgroundColor:pe.a[700]}},checkItem:{textAlign:"center"},divider:{marginTop:20,marginBottom:20},chip:{margin:e.spacing(.5),padding:0,height:"auto","& span":{padding:"0 5px"}},imageContainer:{display:"flex"},imageWrapper:{marginRight:e.spacing(3)},subtitle:{marginTop:e.spacing(0)},specialGap:{marginTop:e.spacing(3)},resourceTitle:{marginBottom:e.spacing(3)},ListRoot:{padding:0,margin:0},titleWrapper:{display:"flex"},title:{flex:1},helpButton:{padding:0,minWidth:20},helpIcon:{fontSize:16},htmlTooltip:{backgroundColor:"#f5f5f9",color:"rgba(0, 0, 0, 0.87)",maxWidth:220,fontSize:e.typography.pxToRem(14),border:"1px solid #dadde9","& b":{fontWeight:e.typography.fontWeightMedium}},lifecycleWrapper:{display:"flex",alignItems:"center"},lifecycleIcon:{fontSize:36,color:"green",marginRight:e.spacing(1)},leftSideWrapper:{paddingRight:e.spacing(2)},notConfigured:{color:"rgba(0, 0, 0, 0.40)"},url:{maxWidth:"100%",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}}))(mt),gt=a(509),ht=a(1404),ft=a.n(ht),Et=a(1411),bt=a(1434),yt=a(1417),vt=a(1961),Ct=a(1477),At=a(1472),St=a(1444),Ot=a(1971),Dt=a(1436),Pt=a(1399),wt=a(944),Tt=a(2380),xt=a(512),It=a.n(xt),Mt=a(27),Rt=a.n(Mt),kt=a(1507),Nt=a(1508),jt=a(1155);function _t(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Lt(){return(Lt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}const qt=window.URL||window.webkitURL,Wt={border:"1px dashed ",borderRadius:"5px",cursor:"pointer",height:75,padding:"8px 0px",position:"relative",textAlign:"center",width:"100%",margin:"10px 0"};function Ut(e){return i.a.createElement(St.a,Lt({direction:"up"},e))}class Bt extends n.Component{constructor(e){super(e),_t(this,"handleClick",(e,t)=>()=>{if("btnEditAPIThumb"===e)this.setState({open:!0});else if("btnUploadAPIThumb"===e){const{api:e}=this.props,{selectedTab:a,selectedIconUpdate:n,category:i,colorUpdate:r,backgroundIndexUpdate:s,file:o}=this.state;let l;if("upload"===a){if(!e.id&&!o)return void te.a.error(t.formatMessage({id:"Apis.Listing.components.ImageGenerator.ThumbnailView.thumbnail.validation.error",defaultMessage:"Invalid file or API information is not set correctly."}));l=o[0]}else{if(!n&&!r&&!s)return void te.a.error(t.formatMessage({id:"the.icon.is.not.modified",defaultMessage:"The icon is not modified"}));const e={key:n,category:i,color:r,backgroundIndex:s},a=new Blob([JSON.stringify(e)],{type:"application/json"});l=new File([a],"FileName.json",{type:"application/json"})}this.uploadThumbnail(a,e.id,l,t)}}),_t(this,"handleChange",(e,t)=>{this.setState({selectedTab:t})}),_t(this,"handleSelectionChange",e=>t=>{this.setState({[e]:t.target.value})}),_t(this,"selectIcon",e=>{this.setState({selectedIconUpdate:e})}),_t(this,"handleChangeComplete",e=>{this.setState({colorUpdate:e.hex})}),_t(this,"selectBackground",e=>{this.setState({backgroundIndexUpdate:e})}),this.state={open:!1,file:null,thumbnail:null,selectedTab:"design",category:It.a.categories[0].name,selectedIcon:null,selectedIconUpdate:null,color:null,colorUpdate:null,backgroundIndex:null,backgroundIndexUpdate:null,uploading:!1},this.handleClick=this.handleClick.bind(this),this.handleClose=this.handleClose.bind(this)}componentWillUnmount(){this.state.thumbnail&&qt.revokeObjectURL(this.state.thumbnail)}onDrop(e){this.setState({file:e})}handleClose(){const{file:e,preview:t}=this.state;e&&qt.revokeObjectURL(t),this.setState(e=>({open:!1,file:null,colorUpdate:e.color,backgroundIndexUpdate:e.background,selectedIconUpdate:e.selectedIcon}))}uploadThumbnail(e,t,a,n){this.setState({uploading:!0});const{api:{apiType:i,id:r}}=this.props;(i===X.a.CONSTS.APIProduct?(new $.a).addAPIProductThumbnail(r,a):(new X.a).addAPIThumbnail(r,a)).then(()=>{te.a.info(n.formatMessage({id:"Apis.Listing.components.ImageGenerator.ThumbnailView.thumbnail.upload.success",defaultMessage:"Thumbnail uploaded successfully"})),"upload"===e?this.setState({open:!1,thumbnail:qt.createObjectURL(a)}):this.setState(e=>({open:!1,thumbnail:a.preview,selectedIcon:e.selectedIconUpdate,color:e.colorUpdate,backgroundIndex:e.backgroundIndexUpdate}))}).catch(e=>{te.a.error(n.formatMessage({id:"Apis.Listing.components.ImageGenerator.ThumbnailView.thumbnail.upload.error",defaultMessage:"Error occurred while uploading new thumbnail. Please try again."}))}).finally(()=>{this.setState({uploading:!1})})}saveDisableEnable(){const{file:e,selectedTab:t,selectedIconUpdate:a,colorUpdate:n,backgroundIndexUpdate:i,uploading:r}=this.state;return"upload"===t?!(e&&e[0])||r:!(a||i||n)||r}render(){const{api:e,classes:t,width:a,height:n,isEditable:r,theme:s,intl:o}=this.props,l=s.custom.thumbnail.backgrounds,{file:c,thumbnail:p,selectedTab:d,selectedIcon:m,selectedIconUpdate:u,color:g,colorUpdate:h,backgroundIndex:f,backgroundIndexUpdate:E,uploading:b}=this.state;let{category:y}=this.state;return y||(y=It.a.categories[0].name),i.a.createElement(i.a.Fragment,null,i.a.createElement(jt.a,{isEditable:r,onClick:this.handleClick("btnEditAPIThumb",o),thumbnail:p,selectedIcon:m,color:g,backgroundIndex:f,category:y,api:e,width:a,height:n}),i.a.createElement(Et.a,{TransitionComponent:Ut,"aria-labelledby":"thumb-dialog-title",disableBackdropClick:!0,open:this.state.open,onClose:this.handleClose,fullWidth:"true",maxWidth:"lg",fullScreen:!0},i.a.createElement(de.a,{square:!0,className:t.popupHeader},i.a.createElement(Pt.a,{color:"inherit",onClick:this.handleClose,"aria-label":"Close"},i.a.createElement(Dt.a,null,"close")),i.a.createElement(Ct.a,{"aria-label":"APIThumbnail",name:"apiThumbnail",className:t.group,value:this.state.selectedTab,onChange:this.handleChange},i.a.createElement(At.a,{value:"design",control:i.a.createElement(vt.a,{color:"primary"}),label:i.a.createElement(W.a,{id:"Apis.Listing.components.ImageGenerator.ThumbnailView.design",defaultMessage:"Design"})}),i.a.createElement(At.a,{value:"upload",control:i.a.createElement(vt.a,{color:"primary"}),label:i.a.createElement(W.a,{id:"Apis.Listing.components.ImageGenerator.ThumbnailView.upload",defaultMessage:"Upload"})}))),i.a.createElement(yt.a,null,"upload"===d&&i.a.createElement(me.a,{container:!0,spacing:4},i.a.createElement(me.a,{item:!0,xs:3},i.a.createElement("div",{className:t.imageContainer},i.a.createElement("img",{className:t.preview,src:c&&c.length>0?qt.createObjectURL(c[0]):Rt.a.app.context+"/site/public/images/api/api-default.png",alt:"Thumbnail Preview"}))),i.a.createElement(me.a,{item:!0,xs:9},i.a.createElement(wt.a,{multiple:!1,accept:"image/*",className:t.dropzone,activeClassName:t.acceptDrop,rejectClassName:t.rejectDrop,onDrop:e=>{this.onDrop(e)}},e=>{let{getRootProps:a,getInputProps:n}=e;return i.a.createElement("div",a({style:Wt}),i.a.createElement("input",n()),i.a.createElement("div",{className:t.dropZoneWrapper},i.a.createElement(Dt.a,{className:t.dropIcon},"cloud_upload"),i.a.createElement(J.a,null,i.a.createElement(W.a,{id:"upload.image",defaultMessage:"Click or drag the image to upload."}))))}))),"design"===d&&i.a.createElement(me.a,{container:!0,spacing:4},i.a.createElement(me.a,{item:!0,xs:3,className:t.imageGenWrapper},i.a.createElement(kt.a,{width:a,height:n,api:e,fixedIcon:{key:u,color:h,backgroundIndex:E,category:y,api:e}})),i.a.createElement(me.a,{item:!0,xs:9},i.a.createElement("div",{className:t.subtitleWrapper},i.a.createElement(J.a,{component:"p",variant:"subtitle2",className:t.subtitle},i.a.createElement(W.a,{id:"Apis.Listing.components.ImageGenerator.ThumbnailView.select.category",defaultMessage:"Select Category"})),i.a.createElement(Ot.a,{native:!0,value:this.state.category,onChange:this.handleSelectionChange("category")},It.a.categories.map(e=>i.a.createElement("option",{value:e.name},e.name)))),i.a.createElement(J.a,{component:"p",variant:"body1",className:t.body},i.a.createElement(W.a,{id:"Apis.Listing.components.ImageGenerator.ThumbnailView.select.an.icon",defaultMessage:"Select an icon from the Material Icons for your API."})),i.a.createElement("div",{style:{background:"#efefef",maxHeight:180,overflow:"scroll"}},function(e){for(let t=0;t<It.a.categories.length;t++)if(It.a.categories[t].name===e)return It.a.categories[t].icons}(y).map(e=>i.a.createElement(Dt.a,{className:t.iconView,onClick:()=>this.selectIcon(e.id)},e.id))),i.a.createElement("div",{className:t.subtitleWrapper},i.a.createElement(J.a,{component:"p",variant:"subtitle2",className:t.subtitle},i.a.createElement(W.a,{id:"Apis.Listing.components.ImageGenerator.ThumbnailView.select.color.for.the.icon",defaultMessage:"Select a color for the icon"}))),i.a.createElement(Tt.SketchPicker,{color:this.state.color||"#ffffff",onChangeComplete:this.handleChangeComplete}),i.a.createElement("div",{className:t.subtitleWrapper},i.a.createElement(J.a,{component:"p",variant:"subtitle2",className:t.subtitle},i.a.createElement(W.a,{id:"Apis.Listing.components.ImageGenerator.ThumbnailView.select.background",defaultMessage:"Select a Background"}))),l.map((e,a)=>i.a.createElement("div",{className:t.backgroundSelection,onClick:()=>this.selectBackground(a),onKeyDown:()=>{}},i.a.createElement(Nt.a,{width:100,height:100,colorPair:e})))))),i.a.createElement(bt.a,{className:t.actionBox},i.a.createElement(je.a,{disabled:this.saveDisableEnable(),variant:"contained",color:"primary",size:"small",onClick:this.handleClick("btnUploadAPIThumb",o)},"design"===d&&b&&i.a.createElement(i.a.Fragment,null,i.a.createElement(W.a,{id:"Apis.Listing.components.ImageGenerator.ThumbnailView.saving.btn",defaultMessage:"Saving"}),i.a.createElement($e.a,{size:16})),"design"===d&&!b&&i.a.createElement(W.a,{id:"Apis.Listing.components.ImageGenerator.ThumbnailView.save.btn",defaultMessage:"Save"}),"design"!==d&&b&&i.a.createElement(i.a.Fragment,null,i.a.createElement(W.a,{id:"Apis.Listing.components.ImageGenerator.ThumbnailView.uploading.btn",defaultMessage:"Uploading"}),i.a.createElement($e.a,{size:16})),"design"!==d&&!b&&i.a.createElement(W.a,{id:"Apis.Listing.components.ImageGenerator.ThumbnailView.upload.btn",defaultMessage:"Upload"})),i.a.createElement(je.a,{variant:"contained",size:"small",onClick:this.handleClose},i.a.createElement(W.a,{id:"Apis.Listing.components.ImageGenerator.ThumbnailView.cancel.btn",defaultMessage:"CANCEL"})))))}}Bt.defaultProps={height:190,width:250,isEditable:!1},Bt.propTypes={api:s.a.shape({}).isRequired,classes:s.a.shape({}).isRequired,height:s.a.number,width:s.a.number,isEditable:s.a.bool,intl:s.a.shape({}).isRequired,theme:s.a.shape({}).isRequired};var Ft=Object(W.d)(Object(ue.e)(Object(q.a)(e=>({acceptDrop:{backgroundColor:pe.a[50]},dropzone:{border:"1px dashed "+e.palette.primary.main,borderRadius:"5px",cursor:"pointer",height:"calc(100vh - 10em)",padding:"".concat(e.spacing(2),"px 0px"),position:"relative",textAlign:"center",width:"100%",margin:"10px 0"},dropZoneWrapper:{height:"100%",display:"flex",alignItems:"center",justifyContent:"center","& span":{fontSize:100,color:e.palette.primary.main}},preview:{height:e.spacing(25)},rejectDrop:{backgroundColor:ft.a[50]},group:{display:"flex",flexDirection:"row",padding:"0 0 0 20px"},popupHeader:{display:"flex",flexDirection:"row"},iconView:{width:30,margin:10,cursor:"pointer"},subtitle:{marginRight:20},subtitleWrapper:{display:"flex",flexDirection:"row",alignItems:"center",marginTop:20,marginBottom:10},body:{marginBottom:10},imageGenWrapper:{"& > div":{position:"fixed",marginTop:20}},backgroundSelection:{cursor:"pointer",marginRight:10,display:"inline-block",border:"solid 1px #ccc"},actionBox:{boxShadow:"0px 1px 5px 0px rgba(0,0,0,0.2), 0px 2px 2px 0px rgba(0,0,0,0.14), 0px 3px 1px -2px rgba(0,0,0,0.12)",justifyContent:"flex-start",padding:"10px 0 10px 10px"},imageContainer:{paddingTop:10}}),{withTheme:!0})(Bt))),zt=a(1425),Vt=a(1427);function Ht(e){const{api:t,configDispatcher:a}=e,[n]=Object(ue.d)();return i.a.createElement(me.a,{container:!0,spacing:1,alignItems:"flex-start",xs:11},i.a.createElement(me.a,{item:!0},i.a.createElement(fe.a,{mt:4},i.a.createElement(zt.a,{component:"fieldset",style:{display:"flex"}},i.a.createElement(Vt.a,{component:"legend"},i.a.createElement(W.a,{id:"Apis.Details.Configuration.Configuration.isdefault.label",defaultMessage:"Make this the default version"})),i.a.createElement(Ct.a,{"aria-label":"Make this the default version",value:t.isDefaultVersion,onChange:e=>{let{target:{value:t}}=e;return a({action:"isDefaultVersion",value:"true"===t})},style:{display:"flow-root"}},i.a.createElement(At.a,{disabled:Object(o.b)(["apim:api_create"],n),value:!0,control:i.a.createElement(vt.a,{color:"primary"}),label:i.a.createElement(W.a,{id:"Apis.Details.Configuration.Configuration.isdefault.yes",defaultMessage:"Yes"})}),i.a.createElement(At.a,{disabled:Object(o.b)(["apim:api_create"],n),value:!1,control:i.a.createElement(vt.a,{color:"primary"}),label:i.a.createElement(W.a,{id:"Apis.Details.Configuration.Configuration.isdefault.no",defaultMessage:"No"})}))))),i.a.createElement(me.a,{item:!0,xs:1},i.a.createElement(fe.a,{mt:3},i.a.createElement(se.a,{title:i.a.createElement(W.a,{id:"Apis.Details.Configuration.Configuration.defaultversion.tooltip",defaultMessage:"Indicates if this is the default version of the API. If an API is invoked without specifying a version, the API Gateway will route the request to the default version of the API."}),"aria-label":"add",placement:"right-end",interactive:!0},i.a.createElement(Le.a,null)))))}Ht.propTypes={api:s.a.shape({}).isRequired,configDispatcher:s.a.func.isRequired};var Gt=a(1420);function Kt(e){const{api:t,configDispatcher:a}=e,[n]=Object(ue.d)();return i.a.createElement(Gt.a,{id:"outlined-multiline-static",label:"Description",multiline:!0,rows:"4",value:t.description,margin:"0",fullWidth:!0,variant:"outlined",onChange:e=>a({action:"description",value:e.target.value}),disabled:Object(o.b)(["apim:api_create"],n)})}Kt.propTypes={api:s.a.shape({}).isRequired,configDispatcher:s.a.func.isRequired};var Yt=a(1437),Jt=a(695),Qt=a.n(Jt),Zt=a(621),Xt=a(759),$t=a.n(Xt),ea=a(807),ta=a.n(ea),aa=a(1439),na=a(118);function ia(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}const ra=Object(He.a)(e=>({tooltip:{position:"absolute",right:e.spacing(-4),top:e.spacing(1)}}));function sa(e){const[t,a]=Object(n.useState)(!0),[r,s]=Object(n.useState)(!0),{api:l,configDispatcher:c}=e,p="NONE"===l.accessControl,[d]=Object(ue.d)(),m=ra(),[u,g]=Object(n.useState)([]),[h,f]=Object(n.useState)([]);Object(n.useEffect)(()=>{0===u.length&&a(!0)},[u]),Object(n.useEffect)(()=>{h.length===l.accessControlRoles.length&&0!==h.length&&h.every(e=>l.accessControlRoles.includes(e))?s(!1):s(!0)},[h]);return i.a.createElement(i.a.Fragment,null,i.a.createElement(fe.a,{style:{position:"relative",marginBottom:-12}},i.a.createElement(Gt.a,{fullWidth:!0,id:"accessControl-selector",select:!0,label:i.a.createElement(W.a,{id:"Apis.Details.Configuration.components.AccessControl.head.topic",defaultMessage:"Publisher Access Control"}),value:l.accessControl,name:"accessControl",onChange:e=>{let{target:{value:t}}=e;return c({action:"accessControl",value:t})},SelectProps:{MenuProps:{className:m.menu}},helperText:i.a.createElement(W.a,{id:"Apis.Details.Configuration.components.AccessControl.form.helper.text",defaultMessage:"There are no access restrictions by default"}),margin:"normal",variant:"outlined",disabled:Object(o.b)(["apim:api_create"],d)},i.a.createElement(Yt.a,{value:"NONE"},i.a.createElement(W.a,{id:"Apis.Details.Configuration.components.AccessControl.dropdown.none",defaultMessage:"All"})),i.a.createElement(Yt.a,{value:"RESTRICTED"},i.a.createElement(W.a,{id:"Apis.Details.Configuration.components.AccessControl.dropdown.restricted",defaultMessage:"Restrict by role(s)"}))),i.a.createElement(se.a,{title:i.a.createElement(i.a.Fragment,null,i.a.createElement("p",null,i.a.createElement("strong",null,i.a.createElement(W.a,{id:"Apis.Details.Configuration.components.AccessControl.tooltip.all",defaultMessage:"All :"})),"  ",i.a.createElement(W.a,{id:"Apis.Details.Configuration.components.AccessControl.tooltip.all.desc",defaultMessage:"The API is viewable, modifiable by all the publishers and creators."}),i.a.createElement("br",null),i.a.createElement("br",null),i.a.createElement("strong",null,i.a.createElement(W.a,{id:"Apis.Details.Configuration.components.AccessControl.tooltip.restrict",defaultMessage:"Restricted by roles :"})),"  ",i.a.createElement(W.a,{id:"Apis.Details.Configuration.components.AccessControl.tooltip.restrict. desc",defaultMessage:"The API can be viewed and modified only by specific publishers and creators with the roles that you specify"}))),"aria-label":"Publisher Access Control",placement:"right-end",interactive:!0,className:m.tooltip},i.a.createElement(Le.a,null))),!p&&i.a.createElement(fe.a,{py:1,style:{marginTop:10}},i.a.createElement(Qt.a,{fullWidth:!0,variant:"outlined",label:i.a.createElement(W.a,{id:"Apis.Details.Configuration.components.AccessControl.roles",defaultMessage:"Roles"}),disabled:Object(o.b)(["apim:api_create"],d),value:l.accessControlRoles.concat(u),alwaysShowPlaceholder:!1,placeholder:"Enter roles and press Enter",blurBehavior:"clear",InputProps:{endAdornment:(!t||!r)&&i.a.createElement(aa.a,{position:"end"},i.a.createElement(ta.a,{color:"error",style:{paddingBottom:8}}))},onAdd:e=>{const t=Zt.a.role.validate($t.a.encode(e)),n=Zt.a.userRole.validate($t.a.encode(e));t.then(()=>{a(!0),n.then(()=>{s(!0),c({action:"accessControlRoles",value:[].concat(ia(l.accessControlRoles),[e])})}).catch(t=>{404===t.status?(c({action:"accessControlRoles",value:[].concat(ia(l.accessControlRoles),[e])}),f([].concat(ia(h),[e]))):(te.a.error("Error when validating role: "+e),console.error("Error when validating user roles "+t))})}).catch(t=>{404===t.status?(a(!1),g([].concat(ia(u),[e]))):(te.a.error("Error when validating role: "+e),console.error("Error when validating roles "+t))})},error:!t||!r,helperText:(()=>t?r?i.a.createElement(W.a,{id:"Apis.Details.Scopes.CreateScope.roles.help",defaultMessage:"Enter valid role and press enter"}):i.a.createElement(W.a,{id:"Apis.Details.Scopes.Roles.User.Invalid",defaultMessage:"At least one role must be associated with the API creator"}):i.a.createElement(W.a,{id:"Apis.Details.Scopes.Roles.Invalid",defaultMessage:"Role is invalid"}))(),chipRenderer:(e,t)=>{let{value:a}=e;return i.a.createElement(he.a,{key:t,size:"small",label:a,onDelete:()=>{(e=>{f(h.filter(t=>t!==e)),g(u.filter(t=>t!==e)),c({action:"accessControlRoles",value:l.accessControlRoles.filter(t=>t!==e)})})(a)},style:{backgroundColor:u.includes(a)?na.a[300]:null,margin:"0 8px 12px 0",float:"left"}})}})))}function oa(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}sa.propTypes={api:s.a.shape({}).isRequired,configDispatcher:s.a.func.isRequired};const la=Object(He.a)(e=>({tooltip:{position:"absolute",right:e.spacing(-4),top:e.spacing(1)}}));function ca(e){const[t,a]=Object(n.useState)(!0),[r,s]=Object(n.useState)(!0),{api:l,configDispatcher:c}=e,[p,d]=Object(n.useState)([]),m="RESTRICTED"===l.visibility,[u]=Object(ue.d)(),g=la(),h=new X.a,[f,E]=Object(n.useState)([]);Object(n.useEffect)(()=>{h.getTenantsByState(ye.a.TENANT_STATE_ACTIVE).then(e=>{E(e.body.count)})},[]),Object(n.useEffect)(()=>{0===p.length&&a(!0),"RESTRICTED"===l.visibility&&0!==l.visibleRoles.length&&s(!0)},[p]);return i.a.createElement(i.a.Fragment,null,i.a.createElement(fe.a,{style:{position:"relative"}},i.a.createElement(Gt.a,{fullWidth:!0,id:"storeVisibility-selector",select:!0,label:i.a.createElement(W.a,{id:"Apis.Details.Configuration.components.storeVisibility.head.topic",defaultMessage:"Developer Portal Visibility"}),value:l.visibility,name:"storeVisibility",onChange:e=>{let{target:{value:t}}=e;return c({action:"visibility",value:t})},SelectProps:{MenuProps:{className:g.menu}},helperText:i.a.createElement(W.a,{id:"Apis.Details.Configuration.components.storeVisibility.form.helper.text",defaultMessage:"By default API is visible to all developer portal users"}),margin:"normal",variant:"outlined",disabled:Object(o.b)(["apim:api_create","apim:api_publish"],u)},i.a.createElement(Yt.a,{value:"PUBLIC"},i.a.createElement(W.a,{id:"Apis.Details.Configuration.components.StoreVisibility.dropdown.public",defaultMessage:"Public"})),i.a.createElement(Yt.a,{value:"RESTRICTED"},i.a.createElement(W.a,{id:"Apis.Details.Configuration.components.storeVisibility.dropdown.restrict",defaultMessage:"Restrict by role(s)"})),0!==f&&i.a.createElement(Yt.a,{value:"PRIVATE"},i.a.createElement(W.a,{id:"Apis.Details.Configuration.components.storeVisibility.dropdown.private",defaultMessage:"Visible to my domain"}))),i.a.createElement(se.a,{title:i.a.createElement(i.a.Fragment,null,i.a.createElement("p",null,i.a.createElement("strong",null,i.a.createElement(W.a,{id:"Apis.Details.Configuration.components.storeVisibility.tooltip.public",defaultMessage:"Public :"})),"  ",i.a.createElement(W.a,{id:"Apis.Details.Configuration.components.storeVisibility.tooltip.public.desc",defaultMessage:"The API is accessible to everyone and can be advertised in multiple developer portals - a central developer portal and/or non-WSO2 developer portals."}),i.a.createElement("br",null),i.a.createElement("br",null),i.a.createElement("strong",null,i.a.createElement(W.a,{id:"Apis.Details.Configuration.components.storeVisibility.tooltip.restrict",defaultMessage:"Restricted by roles(s) :"})),"  ",i.a.createElement(W.a,{id:"Apis.Details.Configuration.components.storeVisibility.tooltip.restrict.desc",defaultMessage:"The API is visible only to specific user roles in the tenant developer portal that you specify."}))),"aria-label":"Store Visibility",placement:"right-end",className:g.tooltip,interactive:!0},i.a.createElement(Le.a,null))),m&&i.a.createElement(fe.a,{py:2,style:{marginTop:-10,marginBottom:10}},i.a.createElement(Qt.a,{fullWidth:!0,variant:"outlined",label:i.a.createElement(W.a,{id:"Apis.Details.Configuration.components.storeVisibility.roles",defaultMessage:"Roles"}),disabled:Object(o.b)(["apim:api_create","apim:api_publish"],u),value:l.visibleRoles.concat(p),alwaysShowPlaceholder:!1,placeholder:"Enter roles and press Enter",blurBehavior:"clear",InputProps:{endAdornment:!t&&i.a.createElement(aa.a,{position:"end"},i.a.createElement(ta.a,{color:"error",style:{paddingBottom:8}}))},onAdd:e=>{Zt.a.role.validate($t.a.encode(e)).then(()=>{s(!0),a(!0),c({action:"visibleRoles",value:[].concat(oa(l.visibleRoles),[e])})}).catch(t=>{404===t.status?(a(!1),d([].concat(oa(p),[e]))):(te.a.error("Error when validating role: "+e),console.error("Error when validating roles "+t))})},error:!t||!r,helperText:t?i.a.createElement(W.a,{id:"Apis.Details.Scopes.CreateScope.roles.help",defaultMessage:"Enter valid role and press enter"}):i.a.createElement(W.a,{id:"Apis.Details.Scopes.Roles.Invalid",defaultMessage:"Role is invalid"}),chipRenderer:(e,t)=>{let{value:a}=e;return i.a.createElement(he.a,{key:t,size:"small",label:a,onDelete:()=>{(e=>{p.includes(e)&&d(p.filter(t=>t!==e)),"RESTRICTED"===l.visibility&&l.visibleRoles.length>1?s(!0):s(!1),c({action:"visibleRoles",value:l.visibleRoles.filter(t=>t!==e)})})(a)},style:{backgroundColor:p.includes(a)?na.a[300]:null,margin:"0 8px 12px 0",float:"left"}})}})))}function pa(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function da(e){const{api:t,configDispatcher:a}=e,[r]=Object(ue.d)(),[s,l]=Object(n.useState)(!0),[c,p]=Object(n.useState)([]),d=/([~!@#;%^&*+=|\\<>"'\/,])/;return i.a.createElement(i.a.Fragment,{style:{marginTop:10}},i.a.createElement(Qt.a,{fullWidth:!0,variant:"outlined",label:i.a.createElement(W.a,{id:"Apis.Details.Configuration.components.Tags.title",defaultMessage:"Tags"}),disabled:Object(o.b)(["apim:api_create","apim:api_publish"],r),value:t.tags,error:!s,helperText:s?i.a.createElement(W.a,{id:"Apis.Details.Configuration.components.Tags.helper",defaultMessage:"Press `Enter` after typing the tag name to add a new tag"}):i.a.createElement(W.a,{id:"Apis.Details.Configuration.components.Tags.error",defaultMessage:"The tag contains one or more illegal characters ( ~ ! @ # ; % ^ & * + = { } | < > , ' \" \\\\ / ) ."}),onAdd:e=>{d.test(e)&&(l(!1),p([].concat(pa(c),[e]))),a({action:"tags",value:[].concat(pa(t.tags),[e.length>30?e.substring(0,30):e])})},chipRenderer:(e,n)=>{let{value:r}=e;return i.a.createElement(he.a,{key:n,size:"small",label:r,onDelete:()=>{if(c.includes(r)){const e=c.filter(e=>e!==r);p(e),0===e.length&&l(!0)}a({action:"tags",value:t.tags.filter(e=>e!==r)})},style:{backgroundColor:d.test(r)?na.a[300]:null,margin:"0 8px 12px 0",float:"left"}})},style:{display:"flex"}}))}ca.propTypes={api:s.a.shape({}).isRequired,configDispatcher:s.a.func.isRequired},da.propTypes={api:s.a.shape({}).isRequired,configDispatcher:s.a.func.isRequired};var ma=a(1442),ua=a(1962);const ga=Object(He.a)(e=>({tooltip:{position:"absolute",right:e.spacing(-4),top:e.spacing(1)}}));function ha(e){const[t,a]=Object(n.useState)({}),{api:r,configDispatcher:s}=e,l=ga(),[c]=Object(ue.d)();return Object(n.useEffect)(()=>{X.a.apiCategories().then(e=>a(e.body))},[]),t.list?0===t.list.length?i.a.createElement(fe.a,{style:{position:"relative",marginTop:10}},i.a.createElement(Gt.a,{fullWidth:!0,select:!0,label:i.a.createElement(i.a.Fragment,null,i.a.createElement(W.a,{id:"Apis.Details.Configurations.api.categories",defaultMessage:"API Categories"})),margin:"normal",variant:"outlined",disabled:!0,value:"emptyMessage"},i.a.createElement(Yt.a,{dense:!0,disableGutters:!0,value:"emptyMessage"},i.a.createElement(ma.a,{primary:i.a.createElement(W.a,{id:"Apis.Details.Configurations.api.categories.empty",defaultMessage:"No API Categories defined yet. Please create an API Category first."})})))):i.a.createElement(fe.a,{style:{position:"relative",marginTop:10}},i.a.createElement(Gt.a,{fullWidth:!0,select:!0,label:i.a.createElement(i.a.Fragment,null,i.a.createElement(W.a,{id:"Apis.Details.Configurations.api.categories",defaultMessage:"API Categories"})),name:"categories",margin:"normal",variant:"outlined",disabled:Object(o.b)(["apim:api_create","apim:api_publish"],c),value:r.categories,SelectProps:{multiple:!0,renderValue:e=>Array.isArray(e)?e.join(", "):e},onChange:e=>s({action:"categories",value:e.target.value}),InputProps:{id:"itest-id-categories-input"},helperText:"Select API Categories for the API"},t.list.map(e=>i.a.createElement(Yt.a,{dense:!0,disableGutters:!0,id:e.id,key:e.name,value:e.name},i.a.createElement(ua.a,{color:"primary",checked:r.categories.includes(e.name)}),i.a.createElement(ma.a,{primary:e.name,secondary:e.description})))),i.a.createElement(se.a,{title:i.a.createElement(i.a.Fragment,null,i.a.createElement("p",null,i.a.createElement(W.a,{id:"Api.category.dropdown.tooltip",defaultMessage:"API categories can be added via the Admin portal UI or the Admin REST API. There has to be pre-defined API categories in the environment in order to be attached to an API."}))),"aria-label":"API Categories",placement:"right-end",interactive:!0,className:l.tooltip},i.a.createElement(Le.a,null))):null}ha.defaultProps={categories:[],api:s.a.shape({}).isRequired,configDispatcher:s.a.func.isRequired};var fa=Object(ue.e)(ha);function Ea(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function ba(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ea(a,!0).forEach(function(t){ya(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ea(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function ya(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function va(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}const Ca=Object(He.a)(e=>({root:{padding:e.spacing(3,2)},titleWrapper:{display:"flex",flexDirection:"row",alignItems:"center",marginBottom:e.spacing(3)},mainTitle:{paddingLeft:0},paper:{padding:e.spacing(3)},paperCenter:{padding:e.spacing(3),display:"flex",alignItems:"center",justifyContent:"center"},heading:{fontSize:"1.1rem",fontWeight:400,marginBottom:e.spacing(0)},itemPadding:{marginBottom:e.spacing(3)},arrowForwardIcon:{fontSize:50,color:"#ccc",position:"absolute",top:90,right:-43},arrowBackIcon:{fontSize:50,color:"#ccc",position:"absolute",top:30,right:-71},expansionPanel:{marginBottom:e.spacing(1)},expansionPanelDetails:{flexDirection:"column"},subHeading:{fontSize:"1rem",fontWeight:400,margin:0,display:"inline-flex",lineHeight:"38px"},btnSpacing:{marginRight:e.spacing(1)}}));function Aa(e){return{id:e.id,name:e.name,description:e.description,lifeCycleStatus:e.lifeCycleStatus,accessControl:e.accessControl,authorizationHeader:e.authorizationHeader,responseCachingEnabled:e.responseCachingEnabled,cacheTimeout:e.cacheTimeout,visibility:e.visibility,isDefaultVersion:e.isDefaultVersion,enableSchemaValidation:e.enableSchemaValidation,accessControlRoles:va(e.accessControlRoles),visibleRoles:va(e.visibleRoles),tags:va(e.tags),maxTps:e.maxTps,transport:va(e.transport),wsdlUrl:e.wsdlUrl,securityScheme:va(e.securityScheme),categories:va(e.categories),corsConfiguration:{corsConfigurationEnabled:e.corsConfiguration.corsConfigurationEnabled,accessControlAllowCredentials:e.corsConfiguration.accessControlAllowCredentials,accessControlAllowOrigins:va(e.corsConfiguration.accessControlAllowOrigins),accessControlAllowHeaders:va(e.corsConfiguration.accessControlAllowHeaders),accessControlAllowMethods:va(e.corsConfiguration.accessControlAllowMethods)}}}function Sa(){const{api:e,updateAPI:t}=Object(n.useContext)(ue.a),[a,r]=Object(n.useState)(!1),[s,l]=Object(n.useReducer)(function(e,t){const{action:a,value:n}=t,i=Aa(e);switch(a){case"description":case"isDefaultVersion":case"authorizationHeader":case"responseCachingEnabled":case"cacheTimeout":case"enableSchemaValidation":case"visibility":case"maxTps":case"categories":case"tags":return i[a]=n,i;case"accessControl":return i[a]=n,"NONE"===n&&(i.accessControlRoles=[]),i;case"accessControlRoles":case"visibleRoles":return ba({},Aa(e),{[a]:n});default:return e}},Aa(e)),c=Ca(),p=s.tags.find(e=>/([~!@#;%^&*+=|\\<>"'\/,])/.test(e));return i.a.createElement(i.a.Fragment,null,i.a.createElement(gt.a,{maxWidth:"md"},i.a.createElement(me.a,{container:!0,spacing:2},i.a.createElement(me.a,{item:!0,md:12},i.a.createElement(J.a,{variant:"h5"},i.a.createElement(W.a,{id:"Apis.Details.Configuration.Configuration.Design.topic.header",defaultMessage:"Design Configurations"})),e.apiType===X.a.CONSTS.APIProduct?i.a.createElement(J.a,{variant:"caption"},i.a.createElement(W.a,{id:"Apis.Details.Configuration.Configuration.Design.APIProduct.sub.heading",defaultMessage:"Configure API Product visibility."})):i.a.createElement(J.a,{variant:"caption"},i.a.createElement(W.a,{id:"Apis.Details.Configuration.Configuration.Design.sub.heading",defaultMessage:"Configure API visibility."}))),i.a.createElement(me.a,{item:!0,md:12},i.a.createElement(de.a,{elevation:0},i.a.createElement("div",null,i.a.createElement(fe.a,{px:8,py:5},i.a.createElement(fe.a,{py:1},i.a.createElement(me.a,{container:!0,spacing:0},i.a.createElement(me.a,{item:!0,xs:12,md:2},i.a.createElement(Ft,{api:e,width:100,height:100,isEditable:!Object(o.b)(["apim:api_publish","apim:api_create"],e)})),i.a.createElement(me.a,{item:!0,xs:12,md:10},i.a.createElement(Kt,{api:s,configDispatcher:l})))),i.a.createElement(fe.a,{py:1},i.a.createElement(sa,{api:s,configDispatcher:l})),i.a.createElement(fe.a,{py:1},i.a.createElement(ca,{api:s,configDispatcher:l})),i.a.createElement(fe.a,{py:1},i.a.createElement(da,{api:s,configDispatcher:l})),i.a.createElement(fe.a,{py:1},i.a.createElement(fa,{api:s,configDispatcher:l,categories:e.categories})),i.a.createElement(fe.a,{py:1},"APIProduct"!==e.apiType&&i.a.createElement(Ht,{api:s,configDispatcher:l})),i.a.createElement(fe.a,{pt:2},i.a.createElement(je.a,{disabled:a||p||"RESTRICTED"===s.visibility&&0===s.visibleRoles.length,type:"submit",variant:"contained",color:"primary",className:c.btnSpacing,onClick:function(){r(!0),t(s).catch(e=>{e.response&&te.a.error(e.response.body.description)}).finally(()=>r(!1))}},i.a.createElement(W.a,{id:"Apis.Details.Configuration.Configuration.save",defaultMessage:"Save"}),a&&i.a.createElement($e.a,{size:15})),i.a.createElement(B.b,{to:"/apis/"+e.id+"/overview"},i.a.createElement(je.a,null,i.a.createElement(W.a,{id:"Apis.Details.Configuration.Configuration.cancel",defaultMessage:"Cancel"})))),Object(o.b)(["apim:api_create"],e)&&i.a.createElement(fe.a,{py:1},i.a.createElement(J.a,{variant:"body2",color:"primary"},i.a.createElement(W.a,{id:"Apis.Details.Configuration.Configuration.update.not.allowed",defaultMessage:"* You are not authorized to update particular fields of the API due to insufficient permissions"}))))))))))}var Oa=a(2527),Da=a.n(Oa),Pa=a(2528),wa=a.n(Pa),Ta=a(641),xa=a.n(Ta),Ia=a(1482),Ma=a(1468),Ra=a(1471),ka=a(1470),Na=a(620),ja=a.n(Na);const _a=Object(He.a)(e=>({expansionPanel:{marginBottom:e.spacing(3)},expansionPanelDetails:{flexDirection:"column"},iconSpace:{marginLeft:e.spacing(.5)},actionSpace:{margin:"-7px auto"},subHeading:{fontSize:"1rem",fontWeight:400,margin:0,display:"inline-flex",lineHeight:1.5},paper:{padding:e.spacing(0,3)}}));function La(e){const{api:t,configDispatcher:a}=e,n=_a(),[r]=Object(ue.d)(),s=t.responseCachingEnabled;return i.a.createElement(i.a.Fragment,null,i.a.createElement(Ma.a,{className:n.expansionPanel},i.a.createElement(Ra.a,{expandIcon:i.a.createElement(ja.a,null)},i.a.createElement(J.a,{className:n.subHeading,variant:"h6"},i.a.createElement(W.a,{id:"Apis.Details.Configuration.Configuration.response.caching",defaultMessage:"Response Caching"}),i.a.createElement(se.a,{title:i.a.createElement(W.a,{id:"Apis.Details.Configuration.components.ResponseCaching.tooltip",defaultMessage:"If enabled, the API response will be cached at the gateway level to improve the response time and minimize the backend load"}),"aria-label":"Response cache",placement:"right-end",interactive:!0},i.a.createElement(Le.a,{className:n.iconSpace}))),i.a.createElement(At.a,{className:n.actionSpace,control:i.a.createElement(Ia.a,{disabled:Object(o.b)(["apim:api_create"],r),checked:t.responseCachingEnabled,onChange:e=>{let{target:{checked:t}}=e;return a({action:"responseCachingEnabled",value:t})},color:"primary"})})),i.a.createElement(ka.a,{className:n.expansionPanelDetails},i.a.createElement(me.a,{container:!0,spacing:1,alignItems:"flex-start"},i.a.createElement(me.a,{item:!0},s&&i.a.createElement(Gt.a,{value:t.cacheTimeout,onChange:e=>{let{target:{value:t}}=e;return a({action:"cacheTimeout",value:t})},margin:"normal",helperText:i.a.createElement(W.a,{id:"Apis.Details.Configuration.Configuration.cache.timeout",defaultMessage:"Cache Timeout (seconds)"})}))))))}function qa(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}La.propTypes={api:s.a.shape({}).isRequired,configDispatcher:s.a.func.isRequired};const Wa=Object(He.a)(e=>({expansionPanel:{marginBottom:e.spacing(3)},expansionPanelDetails:{flexDirection:"column"},iconSpace:{marginLeft:e.spacing(.5)},actionSpace:{margin:"-7px auto"},subHeading:{fontSize:"1rem",fontWeight:400,margin:0,display:"inline-flex",lineHeight:1.5}}));function Ua(e){const[t]=Object(ue.d)(),{configDispatcher:a,api:{corsConfiguration:n}}=e,r=n.corsConfigurationEnabled,s="*"===n.accessControlAllowOrigins[0]&&1===n.accessControlAllowOrigins.length,l=Wa();return i.a.createElement(Ma.a,{className:l.expansionPanel},i.a.createElement(Ra.a,{expandIcon:i.a.createElement(ja.a,null)},i.a.createElement(J.a,{className:l.subHeading,variant:"h6"},i.a.createElement(W.a,{id:"Apis.Details.Configuration.components.CORSConfiguration.cors.configuration",defaultMessage:"CORS Configuration"}),i.a.createElement(se.a,{title:i.a.createElement(W.a,{id:"Apis.Details.Configuration.components.CORSConfiguration.tooltip",defaultMessage:"If enabled, the CORS configuration for the API will be enabled."}),"aria-label":"Response cache",placement:"right-end",interactive:!0},i.a.createElement(Le.a,{className:l.iconSpace}))),i.a.createElement(At.a,{className:l.actionSpace,control:i.a.createElement(Ia.a,{disabled:Object(o.b)(["apim:api_create"],t),checked:n.corsConfigurationEnabled,onChange:e=>{let{target:{checked:t}}=e;return a({action:"corsConfigurationEnabled",value:t})},color:"primary"})})),i.a.createElement(ka.a,{className:l.expansionPanelDetails},i.a.createElement(me.a,{container:!0},i.a.createElement(me.a,{item:!0,md:12},r&&i.a.createElement(me.a,{container:!0},i.a.createElement(me.a,{item:!0,md:12},i.a.createElement(J.a,{variant:"subtitle1"},i.a.createElement(W.a,{id:"Apis.Details.Configuration.components.CORSConfiguration.allow. origins",defaultMessage:"Access Control Allow Origins"}))),i.a.createElement(me.a,{item:!0,md:12},i.a.createElement(me.a,{container:!0},i.a.createElement(me.a,{item:!0,md:12},i.a.createElement(At.a,{style:{display:"flex"},control:i.a.createElement(ua.a,{disabled:Object(o.b)(["apim:api_create"],t),checked:s,onChange:e=>{let{target:{checked:t,value:n}}=e;return a({action:"accessControlAllowOrigins",event:{checked:t,value:n}})},value:"*",color:"primary"}),label:"Allow All Origins"})),!s&&i.a.createElement(me.a,{item:!0,md:12},i.a.createElement(Qt.a,{style:{marginBottom:40,display:"flex"},value:n.accessControlAllowOrigins,helperText:i.a.createElement(W.a,{id:"Apis.Details.Configuration.components.CORSConfigurations.origin.helper",defaultMessage:"Press `Enter` after typing the origin name,to add a new origin"}),onAdd:e=>{a({action:"accessControlAllowOrigins",event:{value:[].concat(qa(n.accessControlAllowOrigins),[e])}})},onDelete:e=>{a({action:"accessControlAllowOrigins",event:{value:n.accessControlAllowOrigins.filter(t=>t!==e)}})}})))),i.a.createElement(me.a,{item:!0,md:12},i.a.createElement(J.a,{variant:"subtitle1"},i.a.createElement(W.a,{id:"Apis.Details.Configuration.components.CORSConfiguration.allow. headers",defaultMessage:"Access Control Allow Headers"}))),i.a.createElement(me.a,{item:!0,md:12},i.a.createElement(Qt.a,{style:{marginBottom:40,display:"flex"},value:n.accessControlAllowHeaders,disabled:Object(o.b)(["apim:api_create"],t),helperText:i.a.createElement(W.a,{id:"Apis.Details.Configuration.components.CORSConfigurations.header.helper",defaultMessage:"Press `Enter` after typing the header name, to add a new header"}),onAdd:e=>{a({action:"accessControlAllowHeaders",value:[].concat(qa(n.accessControlAllowHeaders),[e])})},onDelete:e=>{a({action:"accessControlAllowHeaders",value:n.accessControlAllowHeaders.filter(t=>t!==e)})}})),i.a.createElement(me.a,{item:!0,md:12},i.a.createElement(J.a,{variant:"subtitle1"},i.a.createElement(W.a,{id:"Apis.Details.Configuration.components.CORSConfiguration.allow. methods",defaultMessage:"Access Control Allow Methods"}))),i.a.createElement(me.a,{item:!0,md:12},i.a.createElement(Qt.a,{style:{marginBottom:40,display:"flex"},value:n.accessControlAllowMethods,disabled:Object(o.b)(["apim:api_create"],t),helperText:i.a.createElement(W.a,{id:"Apis.Details.Configuration.components.CORSConfigurations.method.helper",defaultMessage:"Press `Enter` after typing the method name, to add a new method"}),onAdd:e=>{let t=[].concat(qa(n.accessControlAllowMethods),[e.toUpperCase()]);n.accessControlAllowMethods.find(t=>t===e.toUpperCase())&&(t=qa(n.accessControlAllowMethods)),a({action:"accessControlAllowMethods",value:t})},onDelete:e=>{a({action:"accessControlAllowMethods",value:n.accessControlAllowMethods.filter(t=>t!==e)})}})),i.a.createElement(me.a,{item:!0},i.a.createElement(At.a,{control:i.a.createElement(ua.a,{disabled:Object(o.b)(["apim:api_create"],t),checked:n.accessControlAllowCredentials,onChange:e=>{let{target:{checked:t}}=e;return a({action:"accessControlAllowCredentials",value:t})},color:"primary"}),label:i.a.createElement(W.a,{id:"Apis.Details.Configuration.components.CORSConfiguration.allow.credentials",defaultMessage:"Access Control Allow Credentials"})})))))))}Ua.propTypes={api:s.a.shape({}).isRequired,configDispatcher:s.a.func.isRequired};var Ba=a(1419),Fa=a(1416);class za extends i.a.Component{constructor(e){super(e),this.state={isOpen:!1},this.setIsOpen=this.setIsOpen.bind(this)}componentDidUpdate(e){const{api:t}=this.props;!e.api.enableSchemaValidation&&t.enableSchemaValidation&&this.setIsOpen(!0)}setIsOpen(e){this.setState({isOpen:e})}render(){const{api:e,configDispatcher:t,classes:a}=this.props,{isOpen:n}=this.state,{api:r}=this.context;return i.a.createElement(de.a,{className:a.paper},i.a.createElement(me.a,{container:!0,spacing:1,alignItems:"flex-start"},i.a.createElement(me.a,{item:!0,md:12},i.a.createElement(J.a,{className:a.subHeading,variant:"h6"},i.a.createElement(W.a,{id:"Apis.Details.Configuration.Configuration.schema.validation",defaultMessage:"Schema Validation"}),i.a.createElement(se.a,{title:i.a.createElement(W.a,{id:"Apis.Details.Configuration.components.schema.validation.tooltip",defaultMessage:"Enable the request and response validation against the OpenAPI definition"}),"aria-label":"Schema Validation",placement:"right-end",interactive:!0},i.a.createElement(Le.a,{className:a.iconSpace}))),i.a.createElement(At.a,{className:a.actionSpace,control:i.a.createElement(Ia.a,{disabled:Object(o.b)(["apim:api_create"],r),checked:void 0!==e.enableSchemaValidation&&e.enableSchemaValidation,onChange:e=>{let{target:{checked:a}}=e;return t({action:"enableSchemaValidation",value:a})},color:"primary"})}))),i.a.createElement(Et.a,{open:n,onClose:()=>this.setIsOpen(!1),"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},i.a.createElement(Fa.a,{id:"alert-dialog-title"},i.a.createElement(W.a,{id:"Apis.Details.Configuration.components.SchemaValidation.title",defaultMessage:"Caution!"})),i.a.createElement(yt.a,null,i.a.createElement(Ba.a,{id:"alert-dialog-description"},i.a.createElement(J.a,{variant:"subtitle1",display:"block",gutterBottom:!0},i.a.createElement(W.a,{id:"Apis.Details.Configuration.components.SchemaValidation.description",defaultMessage:"Enabling JSON schema validation will cause to build the payload in every request and response. This will impact the round trip time of an API request!"})),i.a.createElement(J.a,{variant:"subtitle2",display:"block",gutterBottom:!0},i.a.createElement("b",null,i.a.createElement(W.a,{id:"Apis.Details.Configuration.components.SchemaValidation.description.question",defaultMessage:"Do you want to enable schema validation?"}))))),i.a.createElement(bt.a,null,i.a.createElement(je.a,{color:"primary",variant:"contained",onClick:()=>this.setIsOpen(!1)},"Yes"),i.a.createElement(je.a,{onClick:()=>{this.setIsOpen(!1),t({action:"enableSchemaValidation",value:!1})},color:"primary"},"No"))))}}za.propTypes={api:s.a.shape({enableSchemaValidation:s.a.bool}).isRequired,configDispatcher:s.a.func.isRequired,classes:s.a.shape({}).isRequired},za.contextType=ue.c;var Va=Object(q.a)(e=>({subHeading:{fontSize:"1rem",fontWeight:400,margin:0,display:"inline-flex",lineHeight:2.5},iconSpace:{marginLeft:e.spacing(.5)},actionSpace:{margin:e.spacing(0,-1),float:"right"},paper:{padding:e.spacing(0,3),marginBottom:e.spacing(3)}}))(za),Ha=a(1433),Ga=a(1447);function Ka(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function Ya(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ka(a,!0).forEach(function(t){Ja(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ka(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function Ja(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Qa=Object(He.a)(e=>({expansionPanel:{marginBottom:e.spacing(1)},expansionPanelDetails:{flexDirection:"column"},iconSpace:{marginLeft:e.spacing(.5)},subHeading:{fontSize:"1rem",fontWeight:400,margin:0,display:"inline-flex",lineHeight:1.5}}));function Za(e){const{api:t,configDispatcher:a}=e,n=Qa();return i.a.createElement(i.a.Fragment,null,i.a.createElement(me.a,{item:!0,xs:12},i.a.createElement(Ma.a,{className:n.expansionPanel,defaultExpanded:!0},i.a.createElement(Ra.a,{expandIcon:i.a.createElement(ja.a,null)},i.a.createElement(J.a,{className:n.subHeading,variant:"h6"},i.a.createElement(W.a,{id:"Apis.Details.Configuration.Components.MaxBackendTps.maximum.backend.throughput",defaultMessage:"Backend Throughput"}),i.a.createElement(se.a,{title:i.a.createElement(W.a,{id:"Apis.Details.Configuration.components.MaxBackendTps.tooltip",defaultMessage:"Limits the total number of calls the API Manager is allowed to make to the backend"}),"aria-label":"APISecurity",placement:"right-end",interactive:!0},i.a.createElement(Le.a,{className:n.iconSpace})))),i.a.createElement(ka.a,{className:n.expansionPanelDetails},i.a.createElement(zt.a,{component:"fieldset"},i.a.createElement(Vt.a,{component:"legend"},"Maximum Throughput"),i.a.createElement(Ct.a,{"aria-label":"change-max-TPS",value:null===t.maxTps?"unlimited":"specify",onChange:e=>{a({action:"maxTps",value:"specify"===e.target.value?{production:null,sandbox:null}:null})},row:!0},i.a.createElement(At.a,{value:"unlimited",control:i.a.createElement(vt.a,{color:"primary",disabled:Object(o.b)(["apim:api_create"],t)}),label:"Unlimited",labelPlacement:"end"}),i.a.createElement(At.a,{value:"specify",control:i.a.createElement(vt.a,{color:"primary",disabled:Object(o.b)(["apim:api_create"],t)}),label:"Specify",labelPlacement:"end",disabled:Object(o.b)(["apim:api_create"],t)}))),i.a.createElement(Ga.a,{in:null!==t.maxTps},i.a.createElement(me.a,{item:!0,xs:12,style:{marginBottom:10,position:"relative"}},i.a.createElement(Gt.a,{label:"Max Production TPS",margin:"normal",variant:"outlined",onChange:e=>{a({action:"maxTps",value:Ya({},t.maxTps,{production:e.target.value})})},value:null!==t.maxTps?t.maxTps.production:"",disabled:Object(o.b)(["apim:api_create"],t),InputProps:{endAdornment:i.a.createElement(aa.a,{position:"end"},"TPS")}})),i.a.createElement(me.a,{item:!0,xs:12,style:{marginBottom:10,position:"relative"}},i.a.createElement(Gt.a,{label:"Max Sandbox TPS",margin:"normal",variant:"outlined",onChange:e=>{a({action:"maxTps",value:Ya({},t.maxTps,{sandbox:e.target.value})})},value:null!==t.maxTps?t.maxTps.sandbox:"",disabled:Object(o.b)(["apim:api_create"],t),InputProps:{endAdornment:i.a.createElement(aa.a,{position:"end"},"TPS")}}),i.a.createElement(Ha.a,null,i.a.createElement(W.a,{id:"Apis.Details.Configuration.components.MaxBackendTps.formattedMessage",defaultMessage:"Maximum backend transactions per second in integers"}))))))))}function Xa(){return(Xa=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function $a(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}Za.propTypes={api:s.a.shape({}).isRequired,configDispatcher:s.a.func.isRequired};const en={border:"1px dashed ",borderRadius:"5px",cursor:"pointer",height:75,padding:"8px 0px",position:"relative",textAlign:"center",width:"100%",margin:"10px 0"};function tn(e){const{classes:t,updateMediationPolicy:a,selectedMediationPolicy:r,setEditing:s,editing:o,type:l,intl:c}=e,{api:p}=Object(n.useContext)(ue.c),[d,m]=Object(n.useState)(null),[u,g]=Object(n.useState)(null),[h,f]=Object(n.useState)(),{id:E}=p,b="none",[y,v]=Object(n.useState)(r);function C(){const e=X.a.getGlobalMediationPolicies(),t=X.a.getMediationPolicies(E);Promise.all([e,t]).then(e=>{m($a(e[0].obj.list.filter(e=>e.type===l))),g($a(e[1].obj.list.filter(e=>e.type===l)))}).catch(e=>{0})}function A(e){e.name!==b?(Object.assign(e,{content:""}),v(e)):(Object.assign(e,{content:"",id:b}),v(e))}Object(n.useEffect)(()=>{if(r){const{shared:e}=r;e?f("global"):r.name===b?f("none"):f("custom")}else f("none")},[r]),Object(n.useEffect)(()=>{C()},[]),Object(n.useEffect)(()=>{"custom"===h&&u&&u.length>0?A(u[0]):"global"===h&&d&&d.length>0&&A(d[0])},[h]);const S=e=>{const t=e[0];t&&(e=>{X.a.addMediationPolicy(e,E,l).then(e=>{const{body:{id:t,type:a,name:n}}=e;C(),v({id:t,type:a,name:n,shared:!1,content:""}),te.a.info(c.formatMessage({id:"Apis.Details.MediationPolicies.Edit.EditMediationPolicy.success",defaultMessage:"Mediation policy added successfully"}))}).catch(e=>{console.error(e),null!==e.response.body.description?te.a.error(e.response.body.description):te.a.error(c.formatMessage({id:"Apis.Details.MediationPolicies.Edit.AddMediationPolicy.error",defaultMessage:"Error while adding mediation policy"}))})})(t)};function O(e){A({name:e.target.getAttribute("seq_name"),id:e.target.getAttribute("seq_id"),type:e.target.getAttribute("seq_type")})}const D=e=>{d.filter(t=>t.id===e).length>0?function(e){X.a.getGlobalMediationPolicyContent(e).then(e=>{V.a.forceDownload(e)}).catch(e=>{})}(e):function(e){X.a.getMediationPolicyContent(e,E).then(e=>{V.a.forceDownload(e,document)}).catch(e=>{})}(e)},P=e=>{d.filter(t=>t.id===e).length>0?te.a.error(i.a.createElement(W.a,{id:"Apis.Details.MediationPolicies.Edit.EditMediationPolicy.global.delete",defaultMessage:"Cannot delete Global mediation policies."})):function(e){X.a.deleteMediationPolicy(e,p.id).then(()=>{g(u.filter(t=>t.id!==e)),te.a.info(i.a.createElement(W.a,{id:"Apis.Details.MediationPolicies.Edit.EditMediationPolicy.delete.success",defaultMessage:"Mediation policy deleted successfully."}))}).catch(e=>{})}(e)};return i.a.createElement(Et.a,{disableBackdropClick:!0,disableEscapeKeyDown:!0,maxWidth:"sm",fullWidth:!0,"aria-labelledby":"confirmation-dialog-title",open:o},i.a.createElement(Fa.a,{id:"confirmation-dialog-title"},i.a.createElement(W.a,{id:"Apis.Details.MediationPolicies.Edit.EditMediationPolicy.select.policy",defaultMessage:"Select a Mediation Policy"})),d&&u&&i.a.createElement(yt.a,{dividers:!0},i.a.createElement(Ct.a,{value:h,onChange:function(e){const t=e.target.value;f(t),A({})},className:t.radioWrapper},i.a.createElement(At.a,{value:"none",control:i.a.createElement(vt.a,{color:"primary"}),label:i.a.createElement(W.a,{id:"Apis.Details.MediationPolicies.Edit.EditMediationPolicy.none",defaultMessage:"None"})}),i.a.createElement(At.a,{value:"global",control:i.a.createElement(vt.a,{color:"primary"}),label:i.a.createElement(W.a,{id:"Apis.Details.MediationPolicies.Edit.EditMediationPolicy.common.policies",defaultMessage:"Common Policies"})}),i.a.createElement(At.a,{value:"custom",control:i.a.createElement(vt.a,{color:"primary"}),label:i.a.createElement(W.a,{id:"Apis.Details.MediationPolicies.Edit.EditMediationPolicy.custom.policies",defaultMessage:"Custom Policies"})})),"custom"===h&&i.a.createElement(i.a.Fragment,null,i.a.createElement(wt.a,{multiple:!1,className:t.dropzone,activeClassName:t.acceptDrop,rejectClassName:t.rejectDrop,onDrop:e=>{S(e)}},e=>{let{getRootProps:a,getInputProps:n}=e;return i.a.createElement("div",a({style:en}),i.a.createElement("input",Xa({},n(),{accept:"application/xml,text/xml"})),i.a.createElement("div",{className:t.dropZoneWrapper},i.a.createElement(Dt.a,{className:t.dropIcon},"cloud_upload"),i.a.createElement(J.a,null,i.a.createElement(W.a,{id:"Apis.Details.MediationPolicies.Edit.EditMediationPolicy.click.or.drop.to.upload.file",defaultMessage:"Click or drag the mediation file to upload."}))))}),i.a.createElement(Ct.a,{"aria-label":"inflow",name:"inflow",className:t.radioGroup,value:y.name,onChange:O},i.a.createElement(Vt.a,{component:"customPolicies"},i.a.createElement(W.a,{id:"Apis.Details.Edit.MediationPolicies.EditMediationPolicies.custom.mediation.policies",defaultMessage:"Custom Mediation Policies"})),u.map(e=>i.a.createElement("div",null,i.a.createElement(Pt.a,{onClick:()=>P(e.id)},i.a.createElement(Dt.a,null,"delete")),i.a.createElement(je.a,{onClick:()=>D(e.id)},i.a.createElement(Dt.a,null,"arrow_downward")),i.a.createElement(At.a,{control:i.a.createElement(vt.a,{inputProps:{seq_id:e.id,seq_name:e.name,seq_type:e.type},color:"primary"}),label:e.name,value:e.name,checked:y.name===e.name}))))),"global"===h&&i.a.createElement(Ct.a,{"aria-label":"inflow",name:"inflow",className:t.radioGroup,value:y.name,onChange:O},d.map(e=>i.a.createElement("div",null,i.a.createElement(je.a,{onClick:()=>D(e.id)},i.a.createElement(Dt.a,null,"arrow_downward")),i.a.createElement(At.a,{control:i.a.createElement(vt.a,{inputProps:{seq_id:e.id,seq_name:e.name,seq_type:e.type},color:"primary"}),label:e.name,value:e.name,checked:y.name===e.name}))))),i.a.createElement(bt.a,null,i.a.createElement(je.a,{onClick:function(){s(!1)},color:"primary"},i.a.createElement(W.a,{id:"Apis.Details.MediationPolicies.Edit.EditMediationPolicy.cancel.btn",defaultMessage:"Cancel"})),i.a.createElement(je.a,{onClick:function(){a(y),s(!1)},color:"primary",variant:"contained",disabled:"custom"===h&&u&&0===u.length},i.a.createElement(W.a,{id:"Apis.Details.MediationPolicies.Edit.EditMediationPolicy.select.btn",defaultMessage:"Select"}))))}tn.propTypes={classes:s.a.shape({}).isRequired,selectedMediationPolicy:s.a.shape({}).isRequired,type:s.a.string.isRequired,updateMediationPolicy:s.a.func.isRequired,setEditing:s.a.func.isRequired,editing:s.a.bool.isRequired,intl:s.a.shape({formatMessage:s.a.func}).isRequired};var an=Object(W.d)(Object(q.a)(e=>({formControl:{display:"flex",flexDirection:"row",padding:"".concat(e.spacing(2),"px 2px")},dropzone:{border:"1px dashed "+e.palette.primary.main,borderRadius:"5px",cursor:"pointer",height:"calc(100vh - 50em)",padding:"".concat(e.spacing(2),"px ").concat(e.spacing(2),"px"),position:"relative",textAlign:"center",width:"100%",margin:"10px 0"},dropZoneWrapper:{height:"100%",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column","& span":{fontSize:64,color:e.palette.primary.main}},radioWrapper:{flexDirection:"row"}}))(tn)),nn=a(1172),rn=a.n(nn);function sn(e){const{classes:t,updateMediationPolicy:a,selectedMediationPolicy:r,type:s,isRestricted:o}=e,[l,c]=Object(n.useState)(!1);return i.a.createElement(i.a.Fragment,null,i.a.createElement(de.a,{className:t.paper},i.a.createElement(me.a,{container:!0,spacing:2,alignItems:"flex-start"},i.a.createElement(me.a,{item:!0,md:12,style:{position:"relative",display:"inline-flex"}},i.a.createElement(J.a,{className:t.subHeading,variant:"h6"},i.a.createElement(W.a,{id:"Apis.Details.MediationPolicies.Mediation",defaultMessage:"Message Mediation"})),i.a.createElement(J.a,{className:t.heading},r&&r.name?i.a.createElement("span",null,r.name):i.a.createElement("span",null,"none")),i.a.createElement(je.a,{size:"small",onClick:function(){c(!0)},disabled:o},i.a.createElement(rn.a,null))))),i.a.createElement(an,{setEditing:c,editing:l,updateMediationPolicy:a,selectedMediationPolicy:r,type:s}))}sn.propTypes={classes:s.a.shape({}).isRequired,updateMediationPolicy:s.a.func.isRequired,selectedMediationPolicy:s.a.shape({}).isRequired,type:s.a.string.isRequired,api:s.a.shape({}).isRequired};var on=Object(q.a)({content:{flexGrow:1},itemWrapper:{width:"auto",display:"flex"},FormControl:{padding:10,width:"100%",marginTop:0,display:"flex",flexDirection:"row"},subTitle:{marginTop:20},subTitleDescription:{marginBottom:10},flowWrapper:{display:"flex",flexDirection:"row",alignItems:"center",marginBottom:10},subHeading:{fontSize:"1rem",fontWeight:400,margin:0,display:"inline-flex",lineHeight:1.5},heading:{margin:"auto",color:"rgba(0, 0, 0, 0.40)",wordBreak:"break-all",whiteSpace:"normal"},paper:{padding:"10px 24px",width:"auto"}})(sn);const ln=function(e,t){if(e.endpointConfig){if("prod"===t)return e.getProductionEndpoint();if("sand"===t)return e.getSandboxEndpoint()}return null},cn=Object(He.a)(e=>({subtitle:{marginTop:e.spacing(0)},expansionPanel:{marginBottom:e.spacing(1)},expansionPanelDetails:{flexDirection:"column"},notConfigured:{color:"rgba(0, 0, 0, 0.40)"},subHeading:{fontSize:"1rem",fontWeight:400,margin:0,display:"inline-flex",lineHeight:1.5},textTrim:{overflow:"hidden",textOverflow:"ellipsis"}}));function pn(e){const{api:t}=e,a=cn(),n=null!==t.endpointConfig&&"prototyped"===t.endpointConfig.implementation_status;return i.a.createElement(i.a.Fragment,null,i.a.createElement(Ma.a,{className:a.expansionPanel,defaultExpanded:!0},i.a.createElement(Ra.a,{expandIcon:i.a.createElement(ja.a,null)},i.a.createElement(J.a,{className:a.subHeading,variant:"h6"},i.a.createElement(W.a,{id:"Apis.Details.Configuration.components.Endpoints.endpoints",defaultMessage:"Endpoints"}))),i.a.createElement(ka.a,{className:a.expansionPanelDetails},(e=>!(!e||!e.production_endpoints||Array.isArray(e.production_endpoints)||"default"!==e.production_endpoints.url))(t.endpointConfig)?i.a.createElement(fe.a,{pb:2},i.a.createElement(J.a,{component:"p",variant:"body1",className:a.subtitle},i.a.createElement(W.a,{id:"Apis.Details.Configuration.components.Endpoints.dynamic",defaultMessage:"Dynamic"}))):i.a.createElement(i.a.Fragment,null,i.a.createElement(fe.a,{pb:2},n?i.a.createElement(J.a,{component:"p",variant:"subtitle2",className:a.subtitle},i.a.createElement(W.a,{id:"Apis.Details.Configuration.components.Endpoints.prototype",defaultMessage:"Prototype"})):i.a.createElement(J.a,{component:"p",variant:"subtitle2",className:a.subtitle},i.a.createElement(W.a,{id:"Apis.Details.Configuration.components.Endpoints.production",defaultMessage:"Production"})),ln(t,"prod")&&i.a.createElement(se.a,{title:ln(t,"prod"),interactive:!0},i.a.createElement(J.a,{component:"p",variant:"body1",className:a.textTrim},i.a.createElement(i.a.Fragment,null,ln(t,"prod")))),i.a.createElement(J.a,{component:"p",variant:"body1",className:a.notConfigured},!ln(t,"prod")&&i.a.createElement(i.a.Fragment,null,i.a.createElement(W.a,{id:"Apis.Details.Configuration.components.Endpoints.not.set",defaultMessage:"-"})))),!n&&i.a.createElement(fe.a,{pb:2},i.a.createElement(J.a,{component:"p",variant:"subtitle2",className:a.subtitle},i.a.createElement(W.a,{id:"Apis.Details.Configuration.components.Endpoints.sandbox",defaultMessage:"Sandbox"})),ln(t,"sand")&&i.a.createElement(se.a,{title:ln(t,"sand"),interactive:!0},i.a.createElement(J.a,{component:"p",variant:"body1",className:a.textTrim},i.a.createElement(i.a.Fragment,null,ln(t,"sand")))),i.a.createElement(J.a,{component:"p",variant:"body1",className:a.notConfigured},!ln(t,"sand")&&i.a.createElement(i.a.Fragment,null,i.a.createElement(W.a,{id:"Apis.Details.Configuration.components.Endpoints.sandbox.not.set",defaultMessage:"-"}))))),i.a.createElement(fe.a,{width:"100%",textAlign:"right",m:1},i.a.createElement(B.b,{to:"/apis/"+t.id+"/endpoints"},i.a.createElement(J.a,{style:{marginLeft:"10px"},color:"primary",variant:"caption"},i.a.createElement(W.a,{id:"Apis.Details.Configuration.Configuration.Endpoints.edit.api.endpoints",defaultMessage:"Edit API Endpoints"}),i.a.createElement(be.a,{style:{marginLeft:"2px"},fontSize:"small"})))))))}pn.propTypes={api:s.a.shape({}).isRequired};var dn=Object(ue.e)(pn);const mn="oauth2",un="basic_auth",gn="api_key",hn="mutualssl",fn="oauth_basic_auth_api_key_mandatory",En="mutualssl_mandatory";var bn=a(1473);function yn(e){const{api:t,configDispatcher:a}=e,[n]=Object(ue.d)();let r;if("APIProduct"===n.apiType){const e=n.apis;for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)&&(r=e[t].operations.findIndex(e=>"None"!==e.authType)>-1))break}else r=n.operations.findIndex(e=>"None"!==e.authType)>-1;return r||""===t.authorizationHeader||a({action:"authorizationHeader",value:""}),i.a.createElement(me.a,{container:!0,spacing:1,alignItems:"center"},i.a.createElement(me.a,{item:!0,xs:11},i.a.createElement(Gt.a,{disabled:Object(o.b)(["apim:api_create"],n)||!r,id:"outlined-name",label:i.a.createElement(W.a,{id:"Apis.Details.Configuration.Configuration.auth.header.label",defaultMessage:"Authorization Header"}),value:r?t.authorizationHeader||" ":"",margin:"normal",variant:"outlined",onChange:e=>{let{target:{value:t}}=e;return a({action:"authorizationHeader",value:t})},style:{display:"flex"}})),i.a.createElement(me.a,{item:!0,xs:1},i.a.createElement(se.a,{title:i.a.createElement(W.a,{id:"Apis.Details.Configuration.Configuration.AuthHeader.tooltip",defaultMessage:' The header name that is used to send the authorization information. "Authorization" is the default header.'}),"aria-label":"Auth Header",placement:"right-end",interactive:!0},i.a.createElement(Le.a,null))))}function vn(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}yn.propTypes={api:s.a.shape({}).isRequired,configDispatcher:s.a.func.isRequired};const Cn=Object(He.a)(e=>({expansionPanel:{marginBottom:e.spacing(3)},expansionPanelDetails:{flexDirection:"column"},iconSpace:{marginLeft:e.spacing(.5)},actionSpace:{margin:"-7px auto"},subHeading:{fontSize:"1rem",fontWeight:400,margin:0,display:"inline-flex",lineHeight:1.5},keyManagerSelect:{minWidth:180}}));function An(e){const[t,a]=Object(n.useState)([]),{configDispatcher:r,api:{keyManagers:s,securityScheme:o}}=e,l=Cn(),c=e=>{const t=vn(s),{target:{checked:a,name:n}}=e;-1===t.indexOf(n)&&a?t.push(n):-1===t.indexOf(n)||a||t.splice(t.indexOf(n),1),r({action:"keymanagers",value:t})};return Object(n.useEffect)(()=>{X.a.keyManagers().then(e=>a(e.body.list))},[]),o.includes("oauth2")?i.a.createElement(i.a.Fragment,null,i.a.createElement(J.a,{className:l.subHeading,variant:"subtitle2"},i.a.createElement(W.a,{id:"Apis.Details.Configuration.components.KeyManager.configuration",defaultMessage:"Key Manager Configuration"})),i.a.createElement(fe.a,{ml:1},i.a.createElement(Ct.a,{value:s.includes("all")?"all":"selected",onChange:e=>{let{target:{value:t}}=e;return r({action:"allKeyManagersEnabled",value:"all"===t})},style:{flexDirection:"row"}},i.a.createElement(At.a,{value:"all",control:i.a.createElement(vt.a,null),label:i.a.createElement(W.a,{id:"Apis.Details.Configuration.components.KeyManager.allow.all",defaultMessage:"Allow all"})}),i.a.createElement(At.a,{value:"selected",control:i.a.createElement(vt.a,null),label:i.a.createElement(W.a,{id:"Apis.Details.Configuration.components.KeyManager.allow.selected",defaultMessage:"Allow selected"})})),!s.includes("all")&&i.a.createElement(fe.a,{display:"flex",flexDirection:"column",m:2},i.a.createElement(zt.a,{required:!0,error:!s||s&&0===s.length,component:"fieldset",className:l.formControl},i.a.createElement(Vt.a,{component:"legend"},i.a.createElement(W.a,{id:"Apis.Details.Configuration.components.KeyManager.more.than.one.info",defaultMessage:"Select one or more Key Managers"})),i.a.createElement(bn.a,{style:{flexDirection:"row"}},t.map(e=>i.a.createElement(At.a,{control:i.a.createElement(ua.a,{color:"primary",checked:s.includes(e.name),disabled:!e.enabled,onChange:c,name:e.name}),label:e.displayName||e.name}))),i.a.createElement(Ha.a,null,i.a.createElement(W.a,{id:"Apis.Details.Configuration.components.KeyManager.more.than.one.error",defaultMessage:"Select at least one Key Manager"})))))):i.a.createElement(i.a.Fragment,null,i.a.createElement(J.a,{className:l.subHeading,variant:"subtitle2"},i.a.createElement(W.a,{id:"Apis.Details.Configuration.components.KeyManager.configuration",defaultMessage:"Key Manager Configuration"})),i.a.createElement(fe.a,{ml:1,mb:2},i.a.createElement(J.a,{variant:"caption"},i.a.createElement(W.a,{id:"Apis.Details.Configuration.components.oauth.disabled",defaultMessage:"Key Manager configuration only valid when OAuth2 security is enabled."}))))}An.propTypes={api:s.a.shape({}).isRequired,configDispatcher:s.a.func.isRequired};const Sn=Object(He.a)(e=>({expansionPanel:{marginBottom:e.spacing(1)},expansionPanelDetails:{flexDirection:"column"},iconSpace:{marginLeft:e.spacing(.5)},bottomSpace:{marginBottom:e.spacing(4)},subHeading:{fontSize:"1rem",fontWeight:400,margin:0,display:"inline-flex",lineHeight:1.5}}));function On(e){const{haveMultiLevelSecurity:t,securityScheme:a,configDispatcher:n,api:r}=e,[s]=Object(ue.d)(),l=Sn();let c,p=null;if("APIProduct"===s.apiType){const e=s.apis;for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)&&(c=e[t].operations.findIndex(e=>"None"!==e.authType)>-1))break}else c=s.operations.findIndex(e=>"None"!==e.authType)>-1;return c?(p="optional",a.includes(mn)||a.includes(un)||a.includes(gn)?a.includes(hn)?a.includes(fn)&&(p=fn):p=fn:p=null):a.length>0&&n({action:"securityScheme",event:{checked:!1,value:mn}}),i.a.createElement(i.a.Fragment,null,i.a.createElement(me.a,{item:!0,xs:12},i.a.createElement(Ma.a,{className:l.expansionPanel},i.a.createElement(Ra.a,{expandIcon:i.a.createElement(ja.a,null)},i.a.createElement(J.a,{className:l.subHeading,variant:"h6"},i.a.createElement(W.a,{id:"Apis.Details.Configuration.Components.APISecurity.Components. ApplicationLevel.http",defaultMessage:"Application Level Security"}),i.a.createElement(se.a,{title:i.a.createElement(W.a,{id:"Apis.Details.Configuration.components.APISecurity.tooltip",defaultMessage:"This option determines the type of security that will be used to secure this API. An API can be secured with either OAuth2/Basic/ApiKey or it can be secured with all of them. If OAuth2 option is selected, relevant API will require a valid OAuth2 token for successful invocation."}),"aria-label":"APISecurity",placement:"right-end",interactive:!0},i.a.createElement(Le.a,{className:l.iconSpace})))),i.a.createElement(ka.a,{className:l.expansionPanelDetails},i.a.createElement(bn.a,{style:{display:"flow-root"}},i.a.createElement(At.a,{control:i.a.createElement(ua.a,{disabled:Object(o.b)(["apim:api_create"],s)||!c,checked:a.includes(mn),onChange:e=>{let{target:{checked:t,value:a}}=e;return n({action:"securityScheme",event:{checked:t,value:a}})},value:mn,color:"primary"}),label:"OAuth2"}),i.a.createElement(At.a,{control:i.a.createElement(ua.a,{disabled:Object(o.b)(["apim:api_create"],s)||!c,checked:a.includes(un),onChange:e=>{let{target:{checked:t,value:a}}=e;return n({action:"securityScheme",event:{checked:t,value:a}})},value:un,color:"primary"}),label:"Basic"}),i.a.createElement(At.a,{control:i.a.createElement(ua.a,{checked:a.includes(gn),disabled:Object(o.b)(["apim:api_create"],s)||!c,onChange:e=>{let{target:{checked:t,value:a}}=e;return n({action:"securityScheme",event:{checked:t,value:a}})},value:gn,color:"primary"}),label:"Api Key"})),i.a.createElement(zt.a,{className:l.bottomSpace,component:"fieldset"},i.a.createElement(Ct.a,{"aria-label":"HTTP security HTTP mandatory selection",name:fn,value:p,onChange:e=>{let{target:{name:t,value:a}}=e;return n({action:"securityScheme",event:{name:t,value:a}})},row:!0},i.a.createElement(At.a,{value:fn,control:i.a.createElement(vt.a,{disabled:!t||Object(o.b)(["apim:api_create"],s),color:"primary"}),label:"Mandatory",labelPlacement:"end"}),i.a.createElement(At.a,{value:"optional",control:i.a.createElement(vt.a,{disabled:!t||Object(o.b)(["apim:api_create"],s),color:"primary"}),label:"Optional",labelPlacement:"end"})),i.a.createElement(Ha.a,null,i.a.createElement(W.a,{id:"Apis.Details.Configuration.components.APISecurity.application.mandatory",defaultMessage:"Choose whether Application level security is mandatory or optional"}))),s.apiType===X.a.CONSTS.API&&i.a.createElement(An,{api:r,configDispatcher:n}),i.a.createElement(yn,{api:r,configDispatcher:n}),i.a.createElement(zt.a,null,!c&&i.a.createElement(Ha.a,null,i.a.createElement(W.a,{id:"Apis.Details.Configuration.components.APISecurity.api.unsecured",defaultMessage:"Application level security is not required since API has no secured resources"})))))))}On.propTypes={configDispatcher:s.a.func.isRequired,haveMultiLevelSecurity:s.a.bool.isRequired,securityScheme:s.a.arrayOf(s.a.string).isRequired,api:s.a.shape({}).isRequired};var Dn=a(1432),Pn=a(1438),wn=a(1474),Tn=a(1456),xn=a(997),In=a.n(xn);function Mn(e){const{onChange:t,endpoint:a,isEndpointEmpty:n,endpoints:r}=e;return i.a.createElement(Gt.a,{autoFocus:!0,error:n||0===r.length,helperText:0===r.length?i.a.createElement(W.a,{id:"Apis.Details.Endpoints.GeneralConfiguration.UploadCertificate.endpoint.empty.error",defaultMessage:"Save endpoints before adding the Certificate"}):((e,t,a)=>e?t:a)(n,i.a.createElement(W.a,{id:"Apis.Details.Endpoints.GeneralConfiguration.UploadCertificate.endpoint.error",defaultMessage:"Endpoint should not be empty"}),i.a.createElement(W.a,{id:"Apis.Details.Endpoints.GeneralConfiguration.UploadCertificate.endpoint.helpertext",defaultMessage:"Endpoint for the Certificate"})),required:!0,id:"certificateEndpoint",label:i.a.createElement(W.a,{id:"Apis.Details.Endpoints.GeneralConfiguration.UploadCertificate.endpoint",defaultMessage:"Endpoint"}),value:a,placeholder:"Endpoint",onChange:e=>t(e.target.value),margin:"normal",variant:"outlined",fullWidth:!0,select:!0},null!==r&&r.map(e=>e?i.a.createElement(Yt.a,{value:e.url},e.url):null))}Mn.propTypes={endpoints:s.a.shape({}).isRequired,onChange:s.a.func.isRequired,classes:s.a.shape({}).isRequired,endpoint:s.a.string.isRequired,isEndpointEmpty:s.a.string.isRequired};var Rn=a(1671);const kn={border:"1px dashed #c4c4c4",borderRadius:"5px",cursor:"pointer",height:75,padding:"8px 0px",position:"relative",textAlign:"center",width:"100%",margin:"10px 0"},Nn=Object(He.a)(e=>({fileinput:{display:"none"},dropZoneWrapper:{height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center","& span.material-icons":{color:e.palette.primary.main}},uploadedFile:{fontSize:11},certificatesHeader:{fontWeight:600,marginTop:20},addCertificateBtn:{borderColor:"#c4c4c4",borderRadius:"8px",borderStyle:"dashed",borderWidth:"thin"},certificateList:{maxHeight:"250px",overflow:"scroll"},certDetailsHeader:{fontWeight:"600"},uploadCertDialogHeader:{fontWeight:"600"}}));function jn(e){const{endpoints:t,uploadCertificate:a,isMutualSSLEnabled:r,uploadCertificateOpen:s,setUploadCertificateOpen:o,aliasList:l}=e,[c,p]=Object(n.useState)(""),[d,m]=Object(n.useState)(""),[u,g]=Object(n.useState)(""),[h,f]=Object(n.useState)(!1),[E,b]=Object(n.useState)({name:"",content:{}}),[y,v]=Object(n.useState)(!1),[C,A]=Object(n.useState)(!1),[S,O]=Object(n.useState)(),D=Nn(),[P,w]=Object(n.useState)(!1),T=()=>{o(!1),O(),b({name:"",content:""}),p(""),g(""),m("")};return i.a.createElement(Et.a,{open:s},i.a.createElement(Fa.a,null,i.a.createElement(J.a,{className:D.uploadCertDialogHeader},i.a.createElement(W.a,{id:"Apis.Details.Endpoints.GeneralConfiguration.UploadCertificate.uploadCertificate",defaultMessage:"Upload Certificate"}))),i.a.createElement(yt.a,null,i.a.createElement(me.a,null,i.a.createElement("div",null,r?i.a.createElement(Rn.a,{multiple:!1,policies:d,helperText:"Select a throttling policy for the certificate",onChange:function(e){const{value:t}=e.target;m(t)},required:!0,validate:e=>{A(""===e)}}):i.a.createElement(Mn,{endpoints:t,onChange:e=>{g(e),v(!e)},endpoint:u,isEndpointEmpty:y,required:!0}),i.a.createElement(Gt.a,{required:!0,id:"certificateAlias",label:i.a.createElement(W.a,{id:"Apis.Details.Endpoints.GeneralConfiguration.UploadCertificate.alias",defaultMessage:"Alias"}),value:c,placeholder:"My Alias",onChange:e=>p(e.target.value),onBlur:()=>(()=>{const e=Zt.a.alias.required().validate(c).error;O(e?{isValid:!1,message:e.details[0].message}:{isValid:!0,message:""})})(),margin:"normal",variant:"outlined",error:S&&!S.isValid||l&&l.includes(c),helperText:(()=>S&&!S.isValid?S.message:l&&l.includes(c)?i.a.createElement(W.a,{id:"Apis.Details.Endpoints.GeneralConfiguration.UploadCertificate.alias.exist.error",defaultMessage:"Alias already exists"}):i.a.createElement(W.a,{id:"Apis.Details.Endpoints.GeneralConfiguration.UploadCertificate.alias.default.message",defaultMessage:"Alias for the Certificate"}))(),fullWidth:!0,inputProps:{maxLength:45}}),i.a.createElement(wt.a,{multiple:!1,accept:"application/pkcs8,application/pkcs10, application/pkix-crl,application/pkcs7-mime,application/x-x509-ca-cert,application/x-x509-user-cert,application/x-pkcs7-crl,application/x-pkcs12,application/x-pkcs7-certificates,application/x-pkcs7-certreqresp,.p8, .p10, .cer, .cert, .p7c, .crt, .der, .p12, .pfx, .p7b, .spc, .p7r",className:D.dropzone,activeClassName:D.acceptDrop,rejectClassName:D.rejectDrop,onDrop:e=>{(e=>{const t=e[0],a=t.name.split(".");["pem","txt","jks","key","ca-bundle"].includes(a[1])?w(!0):w(!1),t&&b({name:t.name,content:t})})(e)}},e=>{let{getRootProps:t,getInputProps:a}=e;return i.a.createElement("div",t({style:kn}),i.a.createElement("input",a()),i.a.createElement("div",{className:D.dropZoneWrapper},""===E.name?i.a.createElement("div",null,i.a.createElement(Dt.a,{style:{fontSize:56}},"cloud_upload"),i.a.createElement(J.a,null,i.a.createElement(W.a,{id:"Apis.Details.Endpoints.GeneralConfiguration.UploadCertificate.click.or.drop.to.upload.file",defaultMessage:"Click or drag the certificate file to upload."}))):((e,t,a)=>e?t:a)(P,i.a.createElement("div",{classNames:D.uploadedFile},i.a.createElement(In.a,{color:"error",fontSize:"large"}),i.a.createElement(fe.a,{fontSize:"h6.fontSize",color:"error",fontWeight:"fontWeightLight"},i.a.createElement(me.a,{xs:12},E.name),i.a.createElement(me.a,{xs:12},i.a.createElement(J.a,{variant:"caption",color:"error"},i.a.createElement(W.a,{id:"Apis.Details.Endpoints.GeneralConfiguration.UploadCertificate.invalid.file",defaultMessage:"Invalid file type"}))))),i.a.createElement("div",{className:D.uploadedFile},i.a.createElement(In.a,{color:"primary",fontSize:"large"}),i.a.createElement(fe.a,{fontSize:"h6.fontSize",fontWeight:"fontWeightLight"},i.a.createElement(J.a,null,E.name))))))})))),i.a.createElement(bt.a,null,i.a.createElement(je.a,{onClick:T},i.a.createElement(W.a,{id:"Apis.Details.Endpoints.GeneralConfiguration.UploadCertificate.cancel.button",defaultMessage:"Close"})),i.a.createElement(je.a,{onClick:()=>{f(!0),r?a(E.content,d,c).then(T).finally(()=>f(!1)):a(E.content,u,c).then(T).finally(()=>f(!1))},variant:"contained",color:"primary",autoFocus:!0,disabled:""===c||S&&!S.isValid||!r&&""===u||""===E.name||r&&C||h||l&&l.includes(c)||P},i.a.createElement(W.a,{id:"Apis.Details.Endpoints.GeneralConfiguration.UploadCertificate.config.save.button",defaultMessage:"Save"}),h&&i.a.createElement($e.a,{size:24}))))}jn.defaultProps={isMutualSSLEnabled:!1,endpoints:[]},jn.propTypes={certificates:s.a.shape({}).isRequired,uploadCertificate:s.a.func.isRequired,isMutualSSLEnabled:s.a.bool,setUploadCertificateOpen:s.a.func.isRequired,uploadCertificateOpen:s.a.bool.isRequired,endpoints:s.a.shape([]),aliasList:s.a.shape([]).isRequired};const _n=Object(He.a)(e=>({fileinput:{display:"none"},dropZoneWrapper:{height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center","& span.material-icons":{color:e.palette.primary.main}},uploadedFile:{fontSize:11},certificatesHeader:{fontWeight:600,marginTop:e.spacing(1)},addCertificateBtn:{borderColor:"#c4c4c4",borderRadius:"8px",borderStyle:"dashed",borderWidth:"thin"},certificateList:{maxHeight:"250px",overflow:"auto"},certDetailsHeader:{fontWeight:"600"},uploadCertDialogHeader:{fontWeight:"600"},alertWrapper:{display:"flex",flexDirection:"row",alignItems:"center"},warningIcon:{marginRight:13,color:e.custom.warningColor,"& .material-icons":{fontSize:30}},deleteIcon:{color:e.palette.error.dark,cursor:"pointer"},deleteIconDisable:{color:e.palette.disabled}}));function Ln(e){const{certificates:t,uploadCertificate:a,deleteCertificate:r,isMutualSSLEnabled:s,apiId:l,endpoints:c,aliasList:p}=e,[d,m]=Object(n.useState)([]),[u,g]=Object(n.useState)({open:!1,anchor:null,details:{}}),[h,f]=Object(n.useState)({open:!1,alias:""}),[E,b]=Object(n.useState)(!1),[y,v]=Object(n.useState)(!1),C=_n(),[A]=Object(ue.d)();return Object(n.useEffect)(()=>{m(t)},[t]),i.a.createElement(me.a,{container:!0,direction:"column"},i.a.createElement(me.a,null,i.a.createElement(J.a,{className:C.certificatesHeader},i.a.createElement(W.a,{id:"Apis.Details.Endpoints.GeneralConfiguration.Certificates.certificates",defaultMessage:"Certificates"}))),i.a.createElement(me.a,{item:!0},i.a.createElement(Dn.a,null,i.a.createElement(Pn.a,{button:!0,disabled:Object(o.b)(["apim:api_create"],A),className:C.addCertificateBtn,onClick:()=>v(!0)},i.a.createElement(wn.a,null,i.a.createElement(Pt.a,null,i.a.createElement(Dt.a,null,"add"))),i.a.createElement(ma.a,{primary:"Add Certificate"}))),i.a.createElement(Dn.a,{className:C.certificateList},d.length>0?d.map(e=>i.a.createElement(Pn.a,null,i.a.createElement(wn.a,null,i.a.createElement(Dt.a,null,"lock")),s?i.a.createElement(ma.a,{primary:e.alias,secondary:e.tier}):i.a.createElement(ma.a,{primary:e.alias,secondary:e.endpoint}),i.a.createElement(Tn.a,null,i.a.createElement(Pt.a,{edge:"end",onClick:t=>((e,t)=>{s?X.a.getClientCertificateStatus(t,l).then(a=>{g({details:a.body,open:!0,alias:t,anchor:e.currentTarget})}).catch(e=>{console.error(e)}):X.a.getCertificateStatus(t).then(a=>{g({details:a.body,open:!0,alias:t,anchor:e.currentTarget})}).catch(e=>{console.error(e)})})(t,e.alias)},i.a.createElement(Dt.a,null,"info")),i.a.createElement(Pt.a,{disabled:Object(o.b)(["apim:api_create"],A),onClick:()=>f({open:!0,alias:e.alias})},i.a.createElement(Dt.a,{className:Object(o.b)(["apim:api_create"],A)?C.deleteIconDisable:C.deleteIcon}," ","delete"))))):i.a.createElement(Pn.a,null,i.a.createElement(wn.a,null,i.a.createElement(Dt.a,{color:"primary"},"info")),i.a.createElement(ma.a,null,"You do not have any certificates uploaded")))),i.a.createElement(Et.a,{open:h.open},i.a.createElement(Fa.a,null,i.a.createElement(J.a,{className:C.uploadCertDialogHeader},i.a.createElement(W.a,{id:"Apis.Details.Endpoints.GeneralConfiguration.Certificates.deleteCertificate",defaultMessage:"Delete Certificate"}))),i.a.createElement(yt.a,{className:C.alertWrapper},i.a.createElement(J.a,null,i.a.createElement(W.a,{id:"Apis.Details.Endpoints.GeneralConfiguration.Certificates.confirm.certificate.delete",defaultMessage:"Do you want to delete "})," ",h.alias+"?")),i.a.createElement(bt.a,null,i.a.createElement(je.a,{onClick:()=>(e=>{b(!0),r(e).then(()=>f({open:!1,alias:""})).finally(()=>b(!1))})(h.alias),variant:"contained",color:"primary",disabled:E,autoFocus:!0},i.a.createElement(W.a,{id:"Apis.Details.Endpoints.GeneralConfiguration.Certificates.delete.ok.button",defaultMessage:"OK"}),E&&i.a.createElement($e.a,{size:24})),i.a.createElement(je.a,{onClick:()=>f({open:!1,alias:""})},i.a.createElement(W.a,{id:"Apis.Details.Endpoints.GeneralConfiguration.Certificates.delete.cancel.button",defaultMessage:"Cancel"})))),i.a.createElement(Et.a,{open:u.open},i.a.createElement(Fa.a,null,i.a.createElement(J.a,{className:C.certDetailsHeader},i.a.createElement(W.a,{id:"Apis.Details.Endpoints.GeneralConfiguration.Certificates.certificate.details.of",defaultMessage:"Details of"})," "+u.alias)),i.a.createElement(yt.a,null,i.a.createElement(J.a,null,i.a.createElement(W.a,{id:"Apis.Details.Endpoints.GeneralConfiguration.Certificates.status",defaultMessage:"Status"})," : "+u.details.status),i.a.createElement(J.a,null,i.a.createElement(W.a,{id:"Apis.Details.Endpoints.GeneralConfiguration.Certificates.subject",defaultMessage:"Subject"})," : "+u.details.subject)),i.a.createElement(bt.a,null,i.a.createElement(je.a,{onClick:()=>g({open:!1,anchor:null,details:{}}),color:"primary"},i.a.createElement(W.a,{id:"Apis.Details.Endpoints.GeneralConfiguration.Certificates.details.close.button",defaultMessage:"Close"})))),i.a.createElement(jn,{endpoints:c,certificates:t,uploadCertificate:a,isMutualSSLEnabled:s,setUploadCertificateOpen:v,uploadCertificateOpen:y,aliasList:p}))}Ln.defaultProps={isMutualSSLEnabled:!1,apiId:""},Ln.propTypes={classes:s.a.shape({fileinput:s.a.shape({}),button:s.a.shape({})}).isRequired,certificates:s.a.shape({}).isRequired,uploadCertificate:s.a.func.isRequired,deleteCertificate:s.a.func.isRequired,apiId:s.a.string,isMutualSSLEnabled:s.a.bool,endpoints:s.a.shape([]).isRequired,aliasList:s.a.shape([]).isRequired};var qn=Object(W.d)(Ln);const Wn=Object(He.a)(e=>({error:{color:e.palette.error.main}}));function Un(e){const{api:t,configDispatcher:a,securityScheme:n}=e,[r]=Object(ue.d)(),s=Wn(),l=n.includes(hn);return i.a.createElement(me.a,{container:!0,spacing:1,alignItems:"flex-start"},i.a.createElement(me.a,{item:!0},i.a.createElement(zt.a,{component:"fieldset"},i.a.createElement(Vt.a,{component:"legend"},i.a.createElement(W.a,{id:"Apis.Details.Configuration.Configuration.transports",defaultMessage:"Transports"})),i.a.createElement(bn.a,{style:{display:"flow-root"}},i.a.createElement(At.a,{control:i.a.createElement(ua.a,{disabled:Object(o.b)(["apim:api_create"],r),checked:t.transport?t.transport.includes("http"):null,onChange:e=>{let{target:{checked:t}}=e;return a({action:"transport",event:{checked:t,value:"http"}})},value:"http",color:"primary"}),label:"HTTP"}),i.a.createElement(At.a,{control:i.a.createElement(ua.a,{disabled:Object(o.b)(["apim:api_create"],r),checked:t.transport?t.transport.includes("https"):null,onChange:e=>{let{target:{checked:t}}=e;return a({action:"transport",event:{checked:t,value:"https"}})},value:"https",color:"primary"}),label:"HTTPS"})))),i.a.createElement(me.a,{item:!0},i.a.createElement(se.a,{title:i.a.createElement(W.a,{id:"Apis.Details.Configuration.components.Transports.tooltip",defaultMessage:"API will be exposed in selected transport(s) in the gateway(s) If Mutual SSL option is selected, a trusted client certificate should be presented to access the API"}),"aria-label":"Transports",placement:"right-end",interactive:!0},i.a.createElement(Le.a,null))),i.a.createElement(me.a,{item:!0},i.a.createElement("span",{className:s.error},i.a.createElement(()=>t.transport&&0===t.transport.length?i.a.createElement(J.a,null,i.a.createElement(W.a,{id:"Apis.Details.Configuration.components.transport.empty",defaultMessage:"Please select at least one transport!"})):l&&!t.transport.includes("https")?i.a.createElement(W.a,{id:"Apis.Details.Configuration.components.transport.sslHttps",defaultMessage:"Please select Https as transport with mutual SSL!"}):null,null))))}function Bn(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}Un.propTypes={api:s.a.shape({}).isRequired,configDispatcher:s.a.func.isRequired};const Fn=Object(He.a)(e=>({expansionPanel:{marginBottom:e.spacing(1)},expansionPanelDetails:{flexDirection:"column"},bottomSpace:{marginBottom:e.spacing(4)},subHeading:{fontSize:"1rem",fontWeight:400,margin:0,display:"inline-flex",lineHeight:1.5}}));function zn(e){const{haveMultiLevelSecurity:t,securityScheme:a,configDispatcher:r,intl:s,id:l,api:c}=e,p=a.includes(hn),[d]=Object(ue.d)(),[m,u]=Object(n.useState)([]),g=Fn();Object(n.useEffect)(()=>{X.a.getAllClientCertificates(l).then(e=>{const{certificates:t}=e.obj;u(t)}).catch(e=>{console.error(e),u([])})},[]);let h="optional";return p?a.includes(mn)||a.includes(un)||a.includes(gn)?a.includes(En)&&(h=En):h=En:h="null",i.a.createElement(i.a.Fragment,null,i.a.createElement(me.a,{item:!0,xs:12},i.a.createElement(Ma.a,{className:g.expansionPanel},i.a.createElement(Ra.a,{expandIcon:i.a.createElement(ja.a,null)},i.a.createElement(J.a,{className:g.subHeading,variant:"h6"},i.a.createElement(W.a,{id:"Apis.Details.Configuration.Components.APISecurity.Components. TransportLevel.transport.level.security",defaultMessage:"Transport Level Security"}))),i.a.createElement(ka.a,{className:g.expansionPanelDetails},i.a.createElement(Un,{api:c,configDispatcher:r,securityScheme:a}),i.a.createElement(At.a,{control:i.a.createElement(ua.a,{disabled:Object(o.b)(["apim:api_create"],d),checked:p,onChange:e=>{let{target:{checked:t,value:a}}=e;return r({action:"securityScheme",event:{checked:t,value:a}})},value:hn,color:"primary"}),label:"Mutual SSL"}),p&&i.a.createElement(zt.a,{component:"fieldset"},i.a.createElement(Ct.a,{"aria-label":"HTTP security SSL mandatory selection",name:En,value:h,onChange:e=>{let{target:{name:t,value:a}}=e;return r({action:"securityScheme",event:{name:t,value:a}})},row:!0},i.a.createElement(At.a,{value:En,control:i.a.createElement(vt.a,{disabled:!t||Object(o.b)(["apim:api_create"],d),color:"primary"}),label:"Mandatory",labelPlacement:"end"}),i.a.createElement(At.a,{value:"optional",control:i.a.createElement(vt.a,{disabled:!t||Object(o.b)(["apim:api_create"],d),color:"primary"}),label:"Optional",labelPlacement:"end"})),i.a.createElement(Ha.a,null,i.a.createElement(W.a,{id:"Apis.Details.Configuration.components.APISecurity.http.mandatory",defaultMessage:"Choose whether Transport level security is mandatory or optional"}))),p&&i.a.createElement(qn,{isMutualSSLEnabled:p,certificates:m,uploadCertificate:(e,t,a)=>X.a.addClientCertificate(l,e,t,a).then(e=>{if(201===e.status){te.a.info(s.formatMessage({id:"Apis.Details.Configuration.components.APISecurity.TranportLevel.certificate.add.success",defaultMessage:"Certificate added successfully"}));const t=Bn(m);t.push({apiId:e.obj.apiId,alias:e.obj.alias,tier:e.obj.tier}),u(t)}}).catch(e=>{e.response?te.a.error(e.response.body.description):te.a.error(s.formatMessage({id:"Apis.Details.Configuration.components.APISecurity.TranportLevel.certificate.alias.error",defaultMessage:"Something went wrong while adding the API certificate"}))}),deleteCertificate:e=>X.a.deleteClientCertificate(e,l).then(t=>{u(()=>200===t.status?m.filter(t=>t.alias!==e):-1),te.a.info(s.formatMessage({id:"Apis.Details.Configuration.components.APISecurity.TranportLevel.certificate.delete.success",defaultMessage:"Certificate Deleted Successfully"}))}).catch(e=>{e.response?te.a.error(e.response.body.description):te.a.info(s.formatMessage({id:"Apis.Details.Configuration.components.APISecurity.TranportLevel.certificate.delete.error",defaultMessage:"Error while deleting certificate"}))}),apiId:l})))))}zn.propTypes={configDispatcher:s.a.func.isRequired,haveMultiLevelSecurity:s.a.bool.isRequired,securityScheme:s.a.arrayOf(s.a.string).isRequired,intl:s.a.shape({}).isRequired,id:s.a.string.isRequired,api:s.a.shape({}).isRequired};var Vn=Object(W.d)(zn);const Hn=Object(He.a)(e=>({error:{color:e.palette.error.main},bottomSpace:{marginBottom:e.spacing(4)}}));function Gn(e){const{api:{securityScheme:t,id:a},configDispatcher:r,api:s}=e,o=Object(n.useContext)(ue.c),l="APIProduct"===o.api.apiType;let c,p;l?(c=!1,p=!1):(c=null!==o.api.endpointConfig,p=null!==o.api.endpointConfig&&"prototyped"===o.api.endpointConfig.implementation_status);const d=t.includes(hn)&&(t.includes(un)||t.includes(mn)||t.includes(gn)),m=Hn(),[u]=Object(ue.d)();return i.a.createElement(i.a.Fragment,null,i.a.createElement(me.a,{container:!0,spacing:2,alignItems:"flex-start"},(l||!c||c&&!p)&&i.a.createElement(i.a.Fragment,null,i.a.createElement(Vn,{haveMultiLevelSecurity:d,securityScheme:t,configDispatcher:r,api:s,id:a}),i.a.createElement(On,{haveMultiLevelSecurity:d,securityScheme:t,api:s,configDispatcher:r,id:a}),i.a.createElement(me.a,{item:!0},i.a.createElement("span",{className:m.error},i.a.createElement(()=>{let e;if("APIProduct"===u.apiType){const t=u.apis;for(const a in t)if(Object.prototype.hasOwnProperty.call(t,a)&&(e=t[a].operations.findIndex(e=>"None"!==e.authType)>-1))break}else e=u.operations.findIndex(e=>"None"!==e.authType)>-1;return t.includes(hn)||t.includes(un)||t.includes(mn)||t.includes(gn)||!e?!d||t.includes(En)||t.includes(fn)?null:i.a.createElement(J.a,{className:m.bottomSpace},i.a.createElement(W.a,{id:"Apis.Details.Configuration.components.APISecurity.allOptional",defaultMessage:"Please select at least one API security level as 'Mandatory'!"})):i.a.createElement(J.a,{className:m.bottomSpace},i.a.createElement(W.a,{id:"Apis.Details.Configuration.components.APISecurity.emptySchemas",defaultMessage:"Please select at least one API security method!"}))},null))))))}Gn.propTypes={api:s.a.shape({}).isRequired,configDispatcher:s.a.func.isRequired};var Kn=a(1454),Yn=a(1451);function Jn(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}const Qn=Object(He.a)(e=>({searchWrapper:{width:"100%",marginBottom:e.spacing(2)}}));function Zn(e){const t=Qn(),[a,r]=Object(n.useState)(""),{setList:s,typelist:o,list:l}=e;return i.a.createElement(i.a.Fragment,null,i.a.createElement(me.a,{item:!0,md:2},i.a.createElement(fe.a,{mt:4,pb:2},i.a.createElement("div",{className:t.searchWrapper},i.a.createElement(Gt.a,{id:"outlined-full-width",label:"Type",placeholder:"Search By Types",onChange:e=>(e=>{r(e.target.value.toLowerCase())})(e),fullWidth:!0,variant:"outlined",InputLabelProps:{shrink:!0}})))),i.a.createElement(me.a,{item:!0,md:12},i.a.createElement(Oe.a,{stickyHeader:!0},i.a.createElement(Yn.a,null,i.a.createElement(Pe.a,null,i.a.createElement(De.a,null,i.a.createElement(J.a,{variant:"subtitle2"},i.a.createElement(W.a,{id:"Apis.Details.QueryAnalysis.UpdateComplexity.typeName",defaultMessage:"Type"}))),i.a.createElement(De.a,null,i.a.createElement(J.a,{variant:"subtitle2"},i.a.createElement(W.a,{id:"Apis.Details.QueryAnalysis.UpdateComplexity.fieldcomplexity",defaultMessage:"Fields"}))),i.a.createElement(De.a,null,i.a.createElement(J.a,{variant:"subtitle2"},i.a.createElement(W.a,{id:"Apis.Details.QueryAnalysis.UpdateComplexity.fieldcomplexitysum",defaultMessage:"Sum of the Complexity"}))))),i.a.createElement(Kn.a,null,o.filter(e=>e.type.toLowerCase().includes(a)).map(e=>i.a.createElement(Pe.a,{style:{borderStyle:"hidden"}},i.a.createElement(De.a,null,i.a.createElement(J.a,{variant:"body1"},e.type)),i.a.createElement(De.a,null,i.a.createElement(Ma.a,null,i.a.createElement(Ra.a,{expandIcon:i.a.createElement(ja.a,null),"aria-controls":"panel1a-content",id:"panel1a-header"}),i.a.createElement(ka.a,null,i.a.createElement(me.a,{item:!0,md:12},i.a.createElement(Oe.a,null,i.a.createElement(Pe.a,null,i.a.createElement(De.a,null,i.a.createElement("b",null,"Field")),i.a.createElement(De.a,null,i.a.createElement("b",null,"ComplexityValue"))),l.map((t,a)=>t.type===e.type&&i.a.createElement(Pe.a,null,i.a.createElement(De.a,null,t.field),i.a.createElement(De.a,null,i.a.createElement(Gt.a,{id:"complexityValue",label:"complexityValue",margin:"normal",variant:"outlined",value:t.complexityValue,onChange:e=>{const n=Jn(l);n[a]={type:t.type,field:t.field,complexityValue:+e.target.value},s(n)}}))))))))),i.a.createElement(De.a,null,i.a.createElement(J.a,{variant:"body1"},e.summation))))))))}function Xn(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}Zn.propTypes={setList:s.a.func.isRequired,list:s.a.arrayOf(s.a.shape({type:s.a.string,field:s.a.string,complexityValue:s.a.number})).isRequired,typelist:s.a.arrayOf(s.a.shape({type:s.a.string,summation:s.a.number})).isRequired};const $n=Object(He.a)(()=>({content:{flexGrow:1},itemWrapper:{width:"auto",display:"flex"},FormControl:{padding:10,width:"100%",marginTop:0,display:"flex",flexDirection:"row"},subTitle:{marginTop:20},subTitleDescription:{marginBottom:10},flowWrapper:{display:"flex",flexDirection:"row",alignItems:"center",marginBottom:10},subHeading:{fontSize:"1rem",fontWeight:400,margin:0,display:"inline-flex",lineHeight:1.5},heading:{margin:"auto",color:"rgba(0, 0, 0, 0.40)"},paper:{padding:"10px 24px",width:"auto"},editIcon:{position:"absolute",top:8,right:0},dialogPaper:{minHeight:"95vh",maxHeight:"95vh",minWidth:"150vh",maxWidth:"150vh"}}));function ei(e){const{api:t,setUpdateComplexityList:a}=e,[r,s]=Object(n.useState)(!1),o=$n(),[l,c]=Object(n.useState)(null),[p,d]=Object(n.useState)([]);function m(e){const t=Xn(new Set(e.map(e=>e.type))),a=[];t.map(t=>{const n={};return n.type=t,n.summation=0,e.map(e=>(e.type===t&&(n.summation+=e.complexityValue),n)),a.push(n),a}),d(a)}Object(n.useEffect)(()=>{const e=t.id;(new X.a).getGraphqlPoliciesComplexity(e).then(e=>{c(e.list),m(e.list),0===e.list.length&&function(){const e=t.id;(new X.a).getGraphqlPoliciesComplexityTypes(e).then(e=>{const t=[];e.typeList.map(e=>(e.fieldList.map(a=>{const n={};return n.type=e.type,n.field=a,n.complexityValue=1,t.push(n),a}),t)),c(t),m(t)})}()}).catch(e=>{const{response:t}=e;if(t.body){const{description:e}=t.body;te.a.error(e)}})},[]);return null===l?i.a.createElement(ee.a,null):i.a.createElement(i.a.Fragment,null,i.a.createElement(de.a,{className:o.paper,spacing:2},i.a.createElement(me.a,{container:!0,spacing:2,alignItems:"flex-start"},i.a.createElement(me.a,{item:!0,md:12,style:{position:"relative",display:"inline-flex"}},i.a.createElement(J.a,{className:o.subHeading,variant:"h6"},i.a.createElement(W.a,{id:"Apis.Details.Configurartion.components.QueryAnalysis",defaultMessage:"Query Analysis"})),i.a.createElement(J.a,{className:o.heading},i.a.createElement("span",null,"update complexity")),i.a.createElement(je.a,{className:o.editIcon,size:"small",onClick:()=>{s(!0)}},i.a.createElement(rn.a,null))))),i.a.createElement(Et.a,{classes:{paper:o.dialogPaper},open:r,"aria-labelledby":"responsive-dialog-title"},i.a.createElement(Fa.a,{id:"responsive-dialog-title"},i.a.createElement(J.a,{className:o.subHeading,variant:"h4"},i.a.createElement(W.a,{id:"Apis.Details.Configurartion.components.QueryAnalysis.edit",defaultMessage:"Edit Complexity Values"}))),i.a.createElement(yt.a,{dividers:!0},i.a.createElement(Ba.a,null,i.a.createElement(gt.a,{fixed:!0},i.a.createElement(Zn,{list:l,setList:c,typelist:p})))),i.a.createElement(bt.a,null,i.a.createElement(me.a,{item:!0},i.a.createElement(je.a,{variant:"contained",color:"primary",onClick:function(){a(l),m(l),s(!1)},className:o.saveButton},i.a.createElement(W.a,{id:"Apis.Details.QyeryAnalysis.UpdateComplexity.save",defaultMessage:"Set"}))),i.a.createElement(je.a,{onClick:()=>{s(!1)},color:"primary"},i.a.createElement(W.a,{id:"Apis.Details.Configurartion.components.QueryAnalysis.cancle.btn",defaultMessage:"Cancel"})))))}function ti(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function ai(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ti(a,!0).forEach(function(t){ni(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ti(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function ni(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function ii(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}ei.propTypes={api:s.a.shape({}).isRequired,setUpdateComplexityList:s.a.func.isRequired};const ri=Object(He.a)(e=>({root:{padding:e.spacing(3,2)},titleWrapper:{display:"flex",flexDirection:"row",alignItems:"center",marginBottom:e.spacing(3)},mainTitle:{paddingLeft:0},paper:{padding:e.spacing(3)},paperCenter:{padding:e.spacing(3),display:"flex",alignItems:"center",justifyContent:"center"},heading:{fontSize:"1.1rem",fontWeight:400,marginBottom:e.spacing(0)},itemPadding:{marginBottom:e.spacing(3)},arrowForwardIcon:{fontSize:50,color:"#ccc",position:"absolute",top:90,right:-43},arrowBackIcon:{fontSize:50,color:"#ccc",position:"absolute",top:30,right:-71},expansionPanel:{marginBottom:e.spacing(1)},expansionPanelDetails:{flexDirection:"column"},subHeading:{fontSize:"1rem",fontWeight:400,margin:0,display:"inline-flex",lineHeight:"38px"},info:{display:"flex",height:"100%"}}));function si(e){return{id:e.id,name:e.name,description:e.description,lifeCycleStatus:e.lifeCycleStatus,accessControl:e.accessControl,authorizationHeader:e.authorizationHeader,responseCachingEnabled:e.responseCachingEnabled,cacheTimeout:e.cacheTimeout,visibility:e.visibility,isDefaultVersion:e.isDefaultVersion,enableSchemaValidation:e.enableSchemaValidation,accessControlRoles:ii(e.accessControlRoles),visibleRoles:ii(e.visibleRoles),tags:ii(e.tags),maxTps:e.maxTps,wsdlUrl:e.wsdlUrl,transport:ii(e.transport),securityScheme:ii(e.securityScheme),keyManagers:ii(e.keyManagers||[]),corsConfiguration:{corsConfigurationEnabled:e.corsConfiguration.corsConfigurationEnabled,accessControlAllowCredentials:e.corsConfiguration.accessControlAllowCredentials,accessControlAllowOrigins:ii(e.corsConfiguration.accessControlAllowOrigins),accessControlAllowHeaders:ii(e.corsConfiguration.accessControlAllowHeaders),accessControlAllowMethods:ii(e.corsConfiguration.accessControlAllowMethods)}}}function oi(){const[e,t]=Object(n.useState)([]);const{api:a,updateAPI:r}=Object(n.useContext)(ue.a),[s,l]=Object(n.useState)(!1),[c,p]=Object(n.useState)(null),[d,m]=Object(n.useReducer)(function(t,a){const{action:n,value:i,event:r}=a,s=ai({},si(t));switch(n){case"description":case"isDefaultVersion":case"authorizationHeader":case"responseCachingEnabled":case"cacheTimeout":case"enableSchemaValidation":case"accessControl":case"visibility":case"maxTps":case"tags":return s[n]=i,s;case"accessControlRoles":case"visibleRoles":return ai({},si(t),{[n]:i});case"securityScheme":if([En,fn].includes(r.name))return"optional"===r.value?ai({},si(t),{[n]:t[n].filter(e=>e!==r.name)}):t[n].includes(r.name)?t:ai({},si(t),{[n]:[].concat(ii(t[n]),[r.name])});if(r.checked)return t[n].includes(r.value)?t:ai({},si(t),{[n]:[].concat(ii(t[n]),[r.value])});if(t[n].includes(r.value)){const e=ai({},si(t),{[n]:t[n].filter(e=>e!==r.value)});if(!(e[n].includes(mn)||e[n].includes(un)||e[n].includes(gn))){const t=e[n].filter(e=>e!==fn);return ai({},e,{[n]:t})}if(!e[n].includes(hn)){const t=e[n].filter(e=>e!==En);return ai({},e,{[n]:t})}return e}return t;case"transport":return r.checked?ai({},si(t),{transport:[].concat(ii(t.transport),[r.value])}):ai({},si(t),{transport:t.transport.filter(e=>e!==r.value)});case"accessControlAllowHeaders":case"accessControlAllowMethods":case"accessControlAllowCredentials":case"corsConfigurationEnabled":return s.corsConfiguration[n]=i,s;case"accessControlAllowOrigins":return r.checked?s.corsConfiguration[n]=[r.value]:s.corsConfiguration[n]=!1===r.checked?[]:r.value,s;case"keymanagers":return s.keyManagers=i,s;case"allKeyManagersEnabled":return s.keyManagers=i?["all"]:e,s;default:return t}},si(a)),u=ri(),g=xa()(a.mediationPolicies||[]),[h,f]=Object(n.useState)(g.filter(e=>"IN"===e.type)[0]),[E,b]=Object(n.useState)(g.filter(e=>"OUT"===e.type)[0]),[y,v]=Object(n.useState)(g.filter(e=>"FAULT"===e.type)[0]),C=Object(W.e)();Object(n.useEffect)(()=>{X.a.keyManagers().then(e=>{const a=[];e.body.list&&e.body.list.forEach(e=>a.push(e.name)),t(a)}).catch(e=>{const{response:t}=e;if(t.body){const{description:e}=t.body;te.a.error(e)}})},[]);const A=()=>{const e=[];return z()(h)||"none"===h.name||e.push(h),z()(E)||"none"===E.name||e.push(E),z()(y)||"none"===y.name||e.push(y),e};return i.a.createElement(i.a.Fragment,null,i.a.createElement(fe.a,{pb:3},i.a.createElement(J.a,{variant:"h5"},i.a.createElement(W.a,{id:"Apis.Details.Configuration.RuntimeConfiguration.topic.header",defaultMessage:"Runtime Configurations"}))),i.a.createElement("div",{className:u.contentWrapper},i.a.createElement(me.a,{container:!0,direction:"row",justify:"space-around",alignItems:"stretch",spacing:8},i.a.createElement(me.a,{item:!0,xs:12,md:7},i.a.createElement(J.a,{className:u.heading,variant:"h6"},i.a.createElement(W.a,{id:"Apis.Details.Configuration.Configuration.section.request",defaultMessage:"Request"})),i.a.createElement(me.a,{direction:" column",justify:"space-between",alignItems:"stretch",spacing:6},i.a.createElement(me.a,{item:!0,xs:12,style:{marginBottom:30,position:"relative"}},i.a.createElement(de.a,{className:u.paper,elevation:0},i.a.createElement(Gn,{api:d,configDispatcher:m}),i.a.createElement(Ua,{api:d,configDispatcher:m}),"GRAPHQL"!==a.type&&i.a.createElement(Va,{api:d,configDispatcher:m}),!a.isAPIProduct()&&i.a.createElement(on,{api:d,type:"IN",updateMediationPolicy:e=>{f({id:e.id,name:e.name,type:e.type})},selectedMediationPolicy:h,isRestricted:Object(o.b)(["apim:api_create"],a)}),"GRAPHQL"===a.type&&i.a.createElement(fe.a,{mt:3},i.a.createElement(ei,{api:d,setUpdateComplexityList:p,isRestricted:Object(o.b)(["apim:api_create"],a)}))),i.a.createElement(Da.a,{className:u.arrowForwardIcon})),i.a.createElement(J.a,{className:u.heading,variant:"h6"},i.a.createElement(W.a,{id:"Apis.Details.Configuration.Configuration.section.response",defaultMessage:"Response"})),i.a.createElement(me.a,{item:!0,xs:12,style:{position:"relative"}},i.a.createElement(fe.a,{mb:3},i.a.createElement(de.a,{className:u.paper,elevation:0},!a.isAPIProduct()&&i.a.createElement(fe.a,{mb:3},i.a.createElement(on,{api:d,type:"OUT",updateMediationPolicy:e=>{b({id:e.id,name:e.name,type:e.type})},selectedMediationPolicy:E,isRestricted:Object(o.b)(["apim:api_create"],a)})),i.a.createElement(La,{api:d,configDispatcher:m})),i.a.createElement(wa.a,{className:u.arrowBackIcon}))),!a.isAPIProduct()&&i.a.createElement(i.a.Fragment,null,i.a.createElement(J.a,{className:u.heading,variant:"h6"},i.a.createElement(W.a,{id:"Apis.Details.Configuration.RuntimeConfiguration.section.fault",defaultMessage:"Fault"})),i.a.createElement(me.a,{item:!0,xs:12,style:{position:"relative"}},i.a.createElement(de.a,{className:u.paper,elevation:0},i.a.createElement(on,{api:d,type:"FAULT",updateMediationPolicy:e=>{v({id:e.id,name:e.name,type:e.type})},selectedMediationPolicy:y,isRestricted:Object(o.b)(["apim:api_create"],a)})))))),i.a.createElement(me.a,{item:!0,xs:12,md:5},i.a.createElement(J.a,{className:u.heading,variant:"h6"},i.a.createElement(W.a,{id:"Apis.Details.Configuration.Configuration.section.backend",defaultMessage:"Backend"})),i.a.createElement(de.a,{className:u.paper,style:{height:"calc(100% - 75px)"},elevation:0},!a.isAPIProduct()&&i.a.createElement(i.a.Fragment,null,i.a.createElement(Za,{api:d,configDispatcher:m}),i.a.createElement(dn,{api:a})),a.isAPIProduct()&&i.a.createElement(fe.a,{alignItems:"center",justifyContent:"center",className:u.info},i.a.createElement(J.a,{variant:"body1"},i.a.createElement(W.a,{id:"Apis.Details.Configuration.RuntimeConfiguration.backend.api.product. endpoint",defaultMessage:"Please refer respective APIs for endpoint information"})))))),i.a.createElement(me.a,{container:!0},i.a.createElement(me.a,{container:!0,direction:"row",alignItems:"center",spacing:1,style:{marginTop:20}},i.a.createElement(me.a,{item:!0},i.a.createElement(je.a,{disabled:s||"RESTRICTED"===d.visibility&&0===d.visibleRoles.length||Object(o.b)(["apim:api_create"],a),type:"submit",variant:"contained",color:"primary",onClick:function(){const e=A();a.isAPIProduct()?delete d.keyManagers:d.mediationPolicies=e,null!==c&&function(){const e=d.id;(new X.a).updateGraphqlPoliciesComplexity(e,{list:c}).catch(e=>{const{response:t}=e;if(t.body){const{description:e}=t.body;te.a.error(e)}})}(),a.isAPIProduct()||!d.securityScheme.includes("oauth2")||d.keyManagers.includes("all")||!d.keyManagers||0!==d.keyManagers.length?(l(!0),r(d).catch(e=>{e.response&&te.a.error(e.response.body.description)}).finally(()=>l(!1))):te.a.error(C.formatMessage({id:"Apis.Details.Configuration.RuntimeConfiguration.no.km.error",defaultMessage:"Select one or more Key Managers"}))}},i.a.createElement(W.a,{id:"Apis.Details.Configuration.Configuration.save",defaultMessage:"Save"}),s&&i.a.createElement($e.a,{size:15}))),i.a.createElement(me.a,{item:!0},i.a.createElement(B.b,{to:"/apis/"+a.id+"/overview"},i.a.createElement(je.a,null,i.a.createElement(W.a,{id:"Apis.Details.Configuration.Configuration.cancel",defaultMessage:"Cancel"})))),Object(o.b)(["apim:api_create"],a)&&i.a.createElement(me.a,{item:!0},i.a.createElement(J.a,{variant:"body2",color:"primary"},i.a.createElement(W.a,{id:"Apis.Details.Configuration.Configuration.update.not.allowed",defaultMessage:"* You are not authorized to update particular fields of the API due to insufficient permissions"})))))))}var li=a(2529),ci=a.n(li);const pi=Object(He.a)(e=>({expansionPanel:{marginBottom:e.spacing(3)},expansionPanelDetails:{flexDirection:"column",display:"inline-flex"},iconSpace:{marginLeft:e.spacing(.5)},actionSpace:{margin:"-7px auto"},subHeading:{fontSize:"1rem",fontWeight:400,margin:0,display:"inline-flex",lineHeight:1.5},keyManagerSelect:{minWidth:180}}));function di(e){const[t]=Object(ue.d)(),a=pi(),{configDispatcher:r,api:{apiThrottlingPolicy:s}}=e,[l,c]=Object(n.useState)([]);return Object(n.useEffect)(()=>{X.a.policies("api").then(e=>c(e.body.list))},[]),i.a.createElement(Ma.a,{className:a.expansionPanel,defaultExpanded:!0},i.a.createElement(Ra.a,{expandIcon:i.a.createElement(ja.a,null)},i.a.createElement(J.a,{className:a.subHeading,variant:"h6"},i.a.createElement(W.a,{id:"Apis.Details.Configuration.components.APILevelRateLimitingPolicies.configuration",defaultMessage:"Rate Limiting Configuration"}),i.a.createElement(se.a,{title:i.a.createElement(W.a,{id:"Apis.Details.APILevelRateLimitingPolicies.components.Configuration.tooltip",defaultMessage:"Selected Rate Limiting Policy will be applied to all the requests of this API."}),"aria-label":"Rate Limiting Policies",placement:"right-end",interactive:!0},i.a.createElement(Le.a,{className:a.iconSpace}))),i.a.createElement(At.a,{className:a.actionSpace,control:i.a.createElement(Ia.a,{disabled:Object(o.b)(["apim:api_create"],t),checked:!(null===s),onChange:e=>{let{target:{checked:t}}=e;return r({action:"throttlingPoliciesEnabled",value:t})},color:"primary"})})),i.a.createElement(ka.a,{className:a.expansionPanelDetails},i.a.createElement(me.a,{container:!0,spacing:1,alignItems:"center"},i.a.createElement(me.a,{item:!0,md:6,xs:12},!(null===s)&&i.a.createElement(Gt.a,{disabled:Object(o.b)(["apim:api_create"],t),id:"operation_throttling_policy",select:!0,value:s,onChange:e=>{r({action:"apiThrottlingPolicy",value:e.target.value})},label:"Rate limiting policies",margin:"dense",variant:"outlined",style:{display:"flex",minWidth:180}},l.map(e=>i.a.createElement(Yt.a,{key:e.name,value:e.name},e.displayName)))))))}function mi(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function ui(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function gi(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}di.propTypes={api:s.a.shape({}).isRequired,configDispatcher:s.a.func.isRequired};const hi=Object(He.a)(e=>({root:{padding:e.spacing(3,2)},titleWrapper:{display:"flex",flexDirection:"row",alignItems:"center",marginBottom:e.spacing(3)},boxFlex:{display:"flex",flexDirection:"row",flexWrap:"wrap"},mainTitle:{paddingLeft:0},paper:{padding:e.spacing(3),minHeight:"250px"},paperCenter:{padding:e.spacing(3),display:"flex",alignItems:"center",justifyContent:"center"},heading:{fontSize:"1.1rem",fontWeight:400,marginBottom:e.spacing(1)},itemPadding:{marginBottom:e.spacing(3)},arrowForwardIcon:{fontSize:50,color:"#ccc",position:"absolute",top:175,right:-55},expansionPanel:{marginBottom:e.spacing(1)},expansionPanelDetails:{flexDirection:"column"},subHeading:{fontSize:"1rem",fontWeight:400,margin:0,display:"inline-flex",lineHeight:"38px"},info:{display:"flex",height:"100%"}}));function fi(e){const t="APIProduct"===e.apiType?["all"]:gi(e.keyManagers);return{id:e.id,name:e.name,description:e.description,lifeCycleStatus:e.lifeCycleStatus,accessControl:e.accessControl,authorizationHeader:e.authorizationHeader,responseCachingEnabled:e.responseCachingEnabled,cacheTimeout:e.cacheTimeout,visibility:e.visibility,apiThrottlingPolicy:e.apiThrottlingPolicy,isDefaultVersion:e.isDefaultVersion,enableSchemaValidation:e.enableSchemaValidation,accessControlRoles:gi(e.accessControlRoles),visibleRoles:gi(e.visibleRoles),tags:gi(e.tags),maxTps:e.maxTps,wsdlUrl:e.wsdlUrl,transport:gi(e.transport),securityScheme:gi(e.securityScheme),corsConfiguration:{corsConfigurationEnabled:e.corsConfiguration.corsConfigurationEnabled,accessControlAllowCredentials:e.corsConfiguration.accessControlAllowCredentials,accessControlAllowOrigins:gi(e.corsConfiguration.accessControlAllowOrigins),accessControlAllowHeaders:gi(e.corsConfiguration.accessControlAllowHeaders),accessControlAllowMethods:gi(e.corsConfiguration.accessControlAllowMethods)},keyManagers:t}}function Ei(){const{api:e,updateAPI:t}=Object(n.useContext)(ue.a),[a,r]=Object(n.useState)(!1),[s,l]=Object(n.useReducer)(function(e,t){const{action:a,value:n}=t,i=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?mi(a,!0).forEach(function(t){ui(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):mi(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},fi(e));switch(a){case"apiThrottlingPolicy":case"maxTps":return i[a]=n,i;case"keymanagers":return i.keyManagers=n,i;case"throttlingPoliciesEnabled":return i.apiThrottlingPolicy=n?"":null,i;case"allKeyManagersEnabled":return i.keyManagers=n?[]:["all"],i;default:return e}},fi(e)),c=hi();return i.a.createElement(i.a.Fragment,null,i.a.createElement(fe.a,{pb:3},i.a.createElement(J.a,{variant:"h5"},i.a.createElement(W.a,{id:"Apis.Details.Configuration.RuntimeConfigurationWebSocket.topic.header",defaultMessage:"Runtime Configurations"}))),i.a.createElement("div",{className:c.contentWrapper},i.a.createElement(me.a,{container:!0,direction:"row",justify:"space-around",alignItems:"stretch",spacing:8},i.a.createElement(me.a,{item:!0,xs:12,md:7,style:{marginBottom:30,position:"relative"}},i.a.createElement(J.a,{className:c.heading,variant:"h6"},i.a.createElement(W.a,{id:"Apis.Details.Configuration.RuntimeConfigurationWebSocket.section.client.websocket",defaultMessage:"Client Websocket"})),i.a.createElement("div",{className:c.boxFlex},i.a.createElement(de.a,{className:c.paper,elevation:0,style:{display:"flex",alignItems:"center"}},i.a.createElement(fe.a,{pr:3},i.a.createElement(An,{api:s,configDispatcher:l})),i.a.createElement(fe.a,{pr:3},i.a.createElement(di,{api:s,configDispatcher:l}))),i.a.createElement(ci.a,{className:c.arrowForwardIcon}))),i.a.createElement(me.a,{item:!0,xs:12,md:4},i.a.createElement(J.a,{className:c.heading,variant:"h6"},i.a.createElement(W.a,{id:"Apis.Details.Configuration.RuntimeConfigurationWebSocket.section.backend.websocket",defaultMessage:"Backend Websocket"})),i.a.createElement(de.a,{className:c.paper,style:{height:"calc(100% - 75px)"},elevation:0},!e.isAPIProduct()&&i.a.createElement(i.a.Fragment,null,i.a.createElement(dn,{api:e}))))),i.a.createElement(me.a,{container:!0},i.a.createElement(me.a,{container:!0,direction:"row",alignItems:"center",spacing:1,style:{marginTop:20}},i.a.createElement(me.a,{item:!0},i.a.createElement(je.a,{disabled:a||"RESTRICTED"===s.visibility&&0===s.visibleRoles.length||Object(o.b)(["apim:api_create"],e),type:"submit",variant:"contained",color:"primary",onClick:function(){r(!0),t(s).catch(e=>{e.response&&te.a.error(e.response.body.description)}).finally(()=>r(!1))}},i.a.createElement(W.a,{id:"Apis.Details.Configuration.Configuration.save",defaultMessage:"Save"}),a&&i.a.createElement($e.a,{size:15}))),i.a.createElement(me.a,{item:!0},i.a.createElement(B.b,{to:"/apis/"+e.id+"/overview"},i.a.createElement(je.a,null,i.a.createElement(W.a,{id:"Apis.Details.Configuration.Configuration.cancel",defaultMessage:"Cancel"})))),Object(o.b)(["apim:api_create"],e)&&i.a.createElement(me.a,{item:!0},i.a.createElement(J.a,{variant:"body2",color:"primary"},i.a.createElement(W.a,{id:"Apis.Details.Configuration.Configuration.update.not.allowed",defaultMessage:"* You are not authorized to update particular fields of the API due to insufficient permissions"})))))))}var bi=a(897),yi=a(683);class vi extends i.a.Component{highLightMe(e){const t={};return e.startsWith(this.props.lifeCycleStatus.toLowerCase())||(t.opacity=.2),t}render(){const{classes:e}=this.props;return i.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"633",height:"244",viewBox:"0 0 743.09858 287.34519",id:"svg5953",className:e.root},i.a.createElement("defs",{id:"defs5955"},i.a.createElement("path",{transform:"scale(.26458)",id:"path5588",d:"m 1738.3694,290.45336 a 290.37688,290.37688 0 0 1 268.3994,-179.55952 290.37688,290.37688 0 0 1 5.8758,0.0595",style:{isolation:"auto",mixBlendMode:"normal"},color:"#000",overflow:"visible",fill:"none",strokeWidth:"6.633",strokeLinejoin:"round"}),i.a.createElement("path",{transform:"scale(.26458)",id:"path5578",d:"m 2103.6746,127.54094 a 290.37688,290.37688 0 0 1 193.3409,265.03704",style:{isolation:"auto",mixBlendMode:"normal"},color:"#000",overflow:"visible",fill:"none",strokeWidth:"6.633",strokeLinejoin:"round"}),i.a.createElement("path",{transform:"scale(.26458)",id:"path5547",d:"m 1748.9295,534.82816 a 290.37688,290.37688 0 0 0 257.8393,156.81941 290.37688,290.37688 0 0 0 5.8709,-0.0593",style:{isolation:"auto",mixBlendMode:"normal"},color:"#000",overflow:"visible",fill:"none",strokeWidth:"6.633",strokeLinejoin:"round"}),i.a.createElement("path",{transform:"scale(.26458)",id:"path4189",d:"m 1748.9295,534.82816 a 290.37688,290.37688 0 0 0 257.8393,156.81941 290.37688,290.37688 0 0 0 5.8709,-0.0593",style:{isolation:"auto",mixBlendMode:"normal"},color:"#000",overflow:"visible",fill:"none",strokeWidth:"6.633",strokeLinejoin:"round"})),i.a.createElement("g",{id:"layer1",transform:"translate(51.512 4.77)"},i.a.createElement("path",{d:"m 99,13.3622 24,0 0,24 -24,0 z",id:"path6746",fill:"none"}),i.a.createElement("g",{id:"prototyped",style:this.highLightMe("prototyped")},i.a.createElement("text",{id:"text6729",y:"6.362",x:"61",style:{lineHeight:"125%"},fontWeight:"400",fontSize:"15",fontFamily:"sans-serif",letterSpacing:"0",wordSpacing:"0",fill:"#2b2b2b"},i.a.createElement("tspan",{y:"6.362",x:"61",id:"tspan6731"},"PROTOTYPED")),i.a.createElement("path",{id:"path6748",d:"m 118,16.3622 -4.18,0 c -0.42,-1.16 -1.52,-2 -2.82,-2 -1.3,0 -2.4,0.84 -2.82,2 l -4.18,0 c -1.1,0 -2,0.9 -2,2 l 0,14 c 0,1.1 0.9,2 2,2 l 14,0 c 1.1,0 2,-0.9 2,-2 l 0,-14 c 0,-1.1 -0.9,-2 -2,-2 z m -7,0 c 0.55,0 1,0.45 1,1 0,0.55 -0.45,1 -1,1 -0.55,0 -1,-0.45 -1,-1 0,-0.55 0.45,-1 1,-1 z m -2,14 -4,-4 1.41,-1.41 2.59,2.58 6.59,-6.59 1.41,1.42 -8,8 z"})),i.a.createElement("path",{d:"m 224.5,133.8622 24,0 0,24 -24,0 z",id:"path6762",fill:"none"}),i.a.createElement("g",{id:"published",style:this.highLightMe("published")},i.a.createElement("text",{id:"text6524",y:"125.476",x:"207",style:{lineHeight:"125%"},fontWeight:"400",fontSize:"15",fontFamily:"sans-serif",letterSpacing:"0",wordSpacing:"0"},i.a.createElement("tspan",{y:"125.476",x:"207",id:"tspan6526"},"PUBLISHED")),i.a.createElement("path",{id:"path6764",d:"m 240.5,144.8622 c 1.66,0 2.99,-1.34 2.99,-3 0,-1.66 -1.33,-3 -2.99,-3 -1.66,0 -3,1.34 -3,3 0,1.66 1.34,3 3,3 z m -8,0 c 1.66,0 2.99,-1.34 2.99,-3 0,-1.66 -1.33,-3 -2.99,-3 -1.66,0 -3,1.34 -3,3 0,1.66 1.34,3 3,3 z m 0,2 c -2.33,0 -7,1.17 -7,3.5 l 0,2.5 14,0 0,-2.5 c 0,-2.33 -4.67,-3.5 -7,-3.5 z m 8,0 c -0.29,0 -0.62,0.02 -0.97,0.05 1.16,0.84 1.97,1.97 1.97,3.45 l 0,2.5 6,0 0,-2.5 c 0,-2.33 -4.67,-3.5 -7,-3.5 z"})),i.a.createElement("g",{id:"created",style:this.highLightMe("created")},i.a.createElement("text",{id:"text6520",y:"282.362",x:"68",style:{lineHeight:"125%"},fontWeight:"400",fontSize:"15",fontFamily:"sans-serif",letterSpacing:"0",wordSpacing:"0"},i.a.createElement("tspan",{y:"282.362",x:"68",id:"tspan6522"},"CREATED")),i.a.createElement("path",{id:"path6778",d:"m 97,238.8622 c -1.1,0 -1.99,0.9 -1.99,2 l -0.01,16 c 0,1.1 0.89,2 1.99,2 l 12.01,0 c 1.1,0 2,-0.9 2,-2 l 0,-12 -6,-6 -8,0 z m 7,7 0,-5.5 5.5,5.5 -5.5,0 z"})),i.a.createElement("path",{d:"m 91,236.8622 24,0 0,24 -24,0 z",id:"path6780",fill:"none"}),i.a.createElement("g",{id:"deprecated",style:this.highLightMe("deprecated")},i.a.createElement("text",{id:"text6536",y:"125.476",x:"397.858",style:{lineHeight:"125%"},fontWeight:"400",fontSize:"15",fontFamily:"sans-serif",letterSpacing:"0",wordSpacing:"0"},i.a.createElement("tspan",{y:"125.476",x:"397.858",id:"tspan6538"},"DEPRECATED")),i.a.createElement("path",{id:"path6794",d:"m 433.52944,97.811947 c 0,1.1 0.9,2 2,2 l 8,0 c 1.1,0 2,-0.9 2,-2 l 0,-12 -12,0 0,12 z m 13,-15 -3.5,0 -1,-1 -5,0 -1,1 -3.5,0 0,2 14,0 0,-2 z"}),i.a.createElement("path",{id:"path6796",d:"m 427.52944,78.811947 24,0 0,24.000003 -24,0 z",fill:"none"})),i.a.createElement("path",{d:"m 427.52944,236.8622 24,0 0,24 -24,0 z",id:"path6810",clipRule:"evenodd",fill:"none"}),i.a.createElement("g",{id:"blocked",style:this.highLightMe("blocked")},i.a.createElement("text",{id:"text6532",y:"282.362",x:"386.858",style:{lineHeight:"125%"},fontWeight:"400",fontSize:"15",fontFamily:"sans-serif",letterSpacing:"0",wordSpacing:"0"},i.a.createElement("tspan",{y:"282.362",x:"386.858",id:"tspan6534"},"BLOCKED")),i.a.createElement("path",{id:"path6812",d:"m 450.22944,255.8622 -9.1,-9.1 c 0.9,-2.3 0.4,-5 -1.5,-6.9 -2,-2 -5,-2.4 -7.4,-1.3 l 4.3,4.3 -3,3 -4.4,-4.3 c -1.2,2.4 -0.7,5.4 1.3,7.4 1.9,1.9 4.6,2.4 6.9,1.5 l 9.1,9.1 c 0.4,0.4 1,0.4 1.4,0 l 2.3,-2.3 c 0.5,-0.4 0.5,-1.1 0.1,-1.4 z"})),i.a.createElement("g",{id:"retired",style:this.highLightMe("retired")},i.a.createElement("text",{id:"text6540",y:"125.483",x:"627.485",style:{lineHeight:"125%"},fontWeight:"400",fontSize:"15",fontFamily:"sans-serif",letterSpacing:"0",wordSpacing:"0"},i.a.createElement("tspan",{y:"125.483",x:"627.485",id:"tspan6542"},"RETIRED")),i.a.createElement("path",{id:"path6826",d:"m 663.36667,89.811947 0,2 -13,0 0,-6 9,0 c 2.21,0 4,1.79 4,4 z m -20,3 0,2 6,0 0,2 8,0 0,-2 6,0 0,-2 -20,0 z m 5.14,-1.9 c 1.16,-1.19 1.14,-3.08 -0.04,-4.24 -1.19,-1.16 -3.08,-1.14 -4.24,0.04 -1.16,1.19 -1.14,3.08 0.04,4.24 1.19,1.16 3.08,1.14 4.24,-0.04 z"}),i.a.createElement("path",{id:"path6828",d:"m 641.36667,78.811947 24,0 0,24.000003 -24,0 z",fill:"none"})),i.a.createElement("g",{id:"published_to_created",style:this.highLightMe("published_to_created")},i.a.createElement("path",{id:"path6872",d:"m 235.84375,184.86133 c -11.86654,31.99459 -35.12697,58.48216 -65.32031,74.38281 l -5.4624,15.71344 14.85695,3.63617 c 35.16928,-17.95415 62.42125,-48.3249 76.47461,-85.22656 l -15.28708,7.18109 z",style:{isolation:"auto",mixBlendMode:"normal"},color:"#000",overflow:"visible",fill:"#065381"}),i.a.createElement("path",{id:"path6985",d:"m 178.61585,255.22337 -4.875,15.375 14.5,3.625",fill:"none",fillRule:"evenodd",stroke:"#fff"}),i.a.createElement("path",{d:"m 187.11585,249.22337 -4.875,15.375 14.5,3.625",id:"path6987",fill:"none",fillRule:"evenodd",stroke:"#fff"})),i.a.createElement("g",{id:"created_to_published",style:this.highLightMe("created_to_published")},i.a.createElement("path",{id:"path6850",d:"m 202.80469,171.18359 c -8.60566,23.79669 -25.78994,43.52064 -48.1836,55.30469 l 15.33148,4.4495 -5.74163,15.30245 c 27.19915,-14.16065 48.15744,-37.93366 58.79687,-66.69335 l -4.08764,-14.98782 z",style:{isolation:"auto",mixBlendMode:"normal"},color:"#000",overflow:"visible",fill:"#34b2e4"}),i.a.createElement("path",{d:"m 200.07828,178.47337 15.66836,-6.25318 3.78013,13.89858",id:"path6979",fill:"none",fillRule:"evenodd",stroke:"#fff"}),i.a.createElement("path",{id:"path6991",d:"m 195.3937,187.48898 15.66836,-6.25318 3.78013,13.89858",fill:"none",fillRule:"evenodd",stroke:"#fff"})),i.a.createElement("g",{id:"prototyped_to_published",style:this.highLightMe("prototyped_to_published")},i.a.createElement("path",{id:"path6874",d:"m 181.42383,-4.0683594 5.18392,15.3553234 -15.14681,3.480614 c 26.97521,14.497097 48.38501,37.525806 60.88086,65.484375 l 16.41911,5.795641 4.09261,-14.231188 C 238.22018,39.231643 213.06477,12.507292 181.42383,-4.0683594 Z",style:{isolation:"auto",mixBlendMode:"normal"},color:"#000",overflow:"visible",fill:"#fe912a"}),i.a.createElement("path",{id:"path6993",d:"m 228.26421,71.982698 16.39604,5.833631 3.93328,-14.097941",fill:"none",fillRule:"evenodd",stroke:"#fff"}),i.a.createElement("path",{d:"m 224.76421,65.357698 16.39604,5.833631 3.93328,-14.097941",id:"path6995",fill:"none",fillRule:"evenodd",stroke:"#fff"})),i.a.createElement("g",{id:"published_to_prototyped",style:this.highLightMe("published_to_prototyped")},i.a.createElement("path",{id:"path6855",d:"m 164.61328,27.712891 -16.76273,3.798407 6.57718,15.455499 c 19.64736,10.327117 35.3679,26.809879 44.75391,46.923828 l 6.94786,-12.105746 13.33339,3.763949 C 208.07457,60.73778 188.78631,40.399355 164.61328,27.712891 Z",style:{isolation:"auto",mixBlendMode:"normal"},color:"#000",overflow:"visible",fill:"#ffc95c"}),i.a.createElement("path",{id:"path6997",d:"m 163.43006,52.336437 -6.45235,-15.202795 16.61701,-3.535534",fill:"none",fillRule:"evenodd",stroke:"#fff"}),i.a.createElement("path",{d:"M 171.82695,57.993291 165.3746,42.790496 181.99161,39.254962",id:"path6999",fill:"none",fillRule:"evenodd",stroke:"#fff"})),i.a.createElement("g",{id:"created_to_prototyped",style:this.highLightMe("created_to_prototyped")},i.a.createElement("path",{id:"path6870",d:"M 35.433594,-4.7226562 C -17.800688,22.43674 -51.366944,77.095386 -51.511719,136.85742 c 0.08726,60.42038 34.333636,115.59607 88.439453,142.48828 l -5.963174,-14.43529 14.818643,-3.6858 C -1.8626488,238.10436 -32.152993,189.83798 -32.251953,136.87891 -32.191581,84.271252 -2.3316563,36.239603 44.818359,12.90625 l 7.576833,-14.3582512 z",style:{isolation:"auto",mixBlendMode:"normal"},color:"#000",overflow:"visible",fill:"#8b103e"}),i.a.createElement("path",{id:"path7001",d:"m 25.625,1.1122031 16.25,3 -7.125,13.7499999",fill:"none",fillRule:"evenodd",stroke:"#fff"}),i.a.createElement("path",{d:"m 16.375,7.1122031 16.25,2.9999999 -7.125,13.75",id:"path7003",fill:"none",fillRule:"evenodd",stroke:"#fff"})),i.a.createElement("g",{id:"prototyped_to_created",style:this.highLightMe("prototyped_to_created")},i.a.createElement("path",{id:"path6840",d:"M 52.171875,26.720703 C 10.473112,47.61586 -15.897048,90.22032 -16,136.86133 c 0.06835,46.84095 26.630186,89.61173 68.585938,110.43945 l 18.169686,-5.17409 -8.489999,-14.63841 C 27.868397,210.36444 6.0894455,175.28511 6,136.86133 6.0597413,98.328986 27.932967,63.153267 62.464844,46.056641 l -14.466177,-4.2932 z",style:{isolation:"auto",mixBlendMode:"normal"},color:"#000",overflow:"visible",fill:"#e34856"}),i.a.createElement("path",{id:"path7005",d:"m 39.421204,240.07329 17.677669,-4.94975 -7.778174,-14.49569",fill:"none",fillRule:"evenodd",stroke:"#fff"}),i.a.createElement("path",{d:"m 27.930719,230.8809 17.677669,-4.94975 -7.778174,-14.49569",id:"path7007",fill:"none",fillRule:"evenodd",stroke:"#fff"})),i.a.createElement("g",{id:"deprecated_to_retired",style:this.highLightMe("deprecated_to_retired")},i.a.createElement("path",{id:"rect7009",d:"m 530.25049,110.51652 68.24164,0 9.89949,9.52539 -9.89949,9.40863 -68.24164,0 9.54594,-9.76218 z",style:{isolation:"auto",mixBlendMode:"normal"},color:"#000",overflow:"visible",fill:"#5c5c5c",strokeWidth:"6.016",strokeLinecap:"round",strokeLinejoin:"round"}),i.a.createElement("path",{id:"path7016",d:"m 589.97554,111.03345 9.31051,8.95242 -9.42988,8.89273",fill:"none",fillRule:"evenodd",stroke:"#fff",strokeWidth:".955"}),i.a.createElement("path",{d:"m 581.28804,111.03345 9.31051,8.95242 -9.42988,8.89273",id:"path7018",fill:"none",fillRule:"evenodd",stroke:"#fff",strokeWidth:".955"})),i.a.createElement("g",{id:"published_to_deprecated",style:this.highLightMe("published_to_deprecated")},i.a.createElement("path",{style:{isolation:"auto",mixBlendMode:"normal"},d:"m 306.25049,110.51652 68.24164,0 9.89949,9.52539 -9.89949,9.40863 -68.24164,0 9.54594,-9.76218 z",id:"path7020",color:"#000",overflow:"visible",fill:"#5c5c5c",strokeWidth:"6.016",strokeLinecap:"round",strokeLinejoin:"round"}),i.a.createElement("path",{d:"m 365.97554,111.03345 9.31051,8.95242 -9.42988,8.89273",id:"path7022",fill:"none",fillRule:"evenodd",stroke:"#fff",strokeWidth:".955"}),i.a.createElement("path",{id:"path7024",d:"m 357.28804,111.03345 9.31051,8.95242 -9.42988,8.89273",fill:"none",fillRule:"evenodd",stroke:"#fff",strokeWidth:".955"})),i.a.createElement("g",{id:"published_to_blocked",style:this.highLightMe("published_to_blocked")},i.a.createElement("path",{style:{isolation:"auto",mixBlendMode:"normal"},d:"m 306.92162,149.0749 92.7941,75.49823 1.41692,13.66474 -13.63383,0.80053 -92.79411,-75.49822 13.59185,-1.29876 z",id:"path7026",color:"#000",overflow:"visible",fill:"#65daad",strokeWidth:"6.016",strokeLinecap:"round",strokeLinejoin:"round"}),i.a.createElement("path",{d:"m 392.87565,219.47284 1.33665,12.84698 -12.94218,0.70939",id:"path7028",fill:"none",fillRule:"evenodd",stroke:"#fff",strokeWidth:".955"}),i.a.createElement("path",{id:"path7030",d:"m 386.23855,213.86735 1.33664,12.84698 -12.94218,0.70939",fill:"none",fillRule:"evenodd",stroke:"#fff",strokeWidth:".955"})),i.a.createElement("g",{id:"blocked_to_published",transform:"rotate(180 338.919 207.057)",style:this.highLightMe("blocked_to_published")},i.a.createElement("path",{id:"path7039",d:"m 306.92162,149.0749 92.7941,75.49823 1.41692,13.66474 -13.63383,0.80053 -92.79411,-75.49822 13.59185,-1.29876 z",style:{isolation:"auto",mixBlendMode:"normal"},color:"#000",overflow:"visible",fill:"#64d0da",strokeWidth:"6.016",strokeLinecap:"round",strokeLinejoin:"round"}),i.a.createElement("path",{id:"path7041",d:"m 392.87565,219.47284 1.33665,12.84698 -12.94218,0.70939",fill:"none",fillRule:"evenodd",stroke:"#fff",strokeWidth:".955"}),i.a.createElement("path",{d:"m 386.23855,213.86735 1.33664,12.84698 -12.94218,0.70939",id:"path7043",fill:"none",fillRule:"evenodd",stroke:"#fff",strokeWidth:".955"})),i.a.createElement("g",{id:"blocked_to_deprecated",style:this.highLightMe("blocked_to_deprecated")},i.a.createElement("path",{style:{isolation:"auto",mixBlendMode:"normal"},d:"m 427.85405,225.05409 0,-68.24164 9.52539,-9.89949 9.40863,9.89949 0,68.24164 -9.76218,-9.54594 z",id:"path7045",color:"#000",overflow:"visible",fill:"#5c5c5c",strokeWidth:"6.016",strokeLinecap:"round",strokeLinejoin:"round"}),i.a.createElement("path",{d:"m 428.37098,165.32904 8.95242,-9.31051 8.89273,9.42988",id:"path7047",fill:"none",fillRule:"evenodd",stroke:"#fff",strokeWidth:".955"}),i.a.createElement("path",{id:"path7049",d:"m 428.37098,174.01654 8.95242,-9.31051 8.89273,9.42988",fill:"none",fillRule:"evenodd",stroke:"#fff",strokeWidth:".955"}))))}}vi.propTypes={classes:s.a.shape({}).isRequired,lifeCycleStatus:s.a.string.isRequired};var Ci=Object(q.a)(()=>({root:{marginTop:30}}))(vi),Ai=a(2530),Si=a.n(Ai),Oi=a(2531),Di=a.n(Oi);const Pi=Object(He.a)(e=>({stateButton:{marginRight:e.spacing()},paperCenter:{padding:e.spacing(2),display:"block",alignItems:"left",justifyContent:"center"},iconTrue:{color:pe.a[500],marginRight:e.spacing(1),display:"block",justifyContent:"flex-start",alignItems:"center"},iconFalse:{color:e.palette.grey[500],marginRight:e.spacing(1),display:"block",justifyContent:"flex-start",alignItems:"center"},iconWarn:{color:Si.a[700],marginRight:e.spacing(1),display:"block",justifyContent:"flex-start",alignItems:"center"},grid:{marginTop:e.spacing(2),display:"flex",flexDirection:"row",justifyContent:"left",alignItems:"left"},labelsGrid:{fontWeight:600,marginTop:e.spacing(3)}}));function wi(e){const t=Pi(),{api:a,isMutualSSLEnabled:n,isCertAvailable:r,isAppLayerSecurityMandatory:s,isBusinessPlanAvailable:o}=e,l=null!==a.endpointConfig&&!a.endpointConfig.implementation_status,c=0!==a.gatewayEnvironments.length,p=a.deploymentEnvironments&&a.deploymentEnvironments.some(e=>e.clusterName.length>0),d=null!==a.endpointConfig&&"prototyped"===a.endpointConfig.implementation_status||"INLINE"===a.endpointImplementationType;return i.a.createElement(de.a,{className:t.paperCenter},i.a.createElement(me.a,{xs:12},i.a.createElement(J.a,{variant:"h6"},i.a.createElement(W.a,{id:"Apis.Details.Configuration.Configuration.requirements",defaultMessage:"Requirements"})),i.a.createElement(J.a,{variant:"caption"},i.a.createElement(W.a,{id:"Apis.Details.Configuration.Configuration.requirements.state.transition",defaultMessage:"Requirements for next state transition"}))),("CREATED"===a.lifeCycleStatus||"PROTOTYPED"===a.lifeCycleStatus)&&i.a.createElement(i.a.Fragment,null,i.a.createElement(me.a,{xs:12,className:t.labelsGrid},i.a.createElement(J.a,{variant:"subtitle2"},i.a.createElement(W.a,{id:"Apis.Details.Configuration.Configuration.publisher",defaultMessage:"Publish"}))),i.a.createElement(me.a,{xs:12},i.a.createElement(me.a,{xs:12,className:t.grid},l?i.a.createElement(Qe.a,{className:t.iconTrue}):i.a.createElement(Xe.a,{className:t.iconFalse}),i.a.createElement(J.a,null,i.a.createElement(W.a,{id:"Apis.Details.LifeCycle.CheckboxLabels.endpoints.provided",defaultMessage:"Endpoint provided"})),i.a.createElement(B.b,{to:"/apis/"+a.id+"/endpoints"},i.a.createElement(be.a,{style:{marginLeft:"2px"},color:"primary",fontSize:"small"}))),i.a.createElement(i.a.Fragment,null,s&&i.a.createElement(me.a,{xs:12,className:t.grid},o?i.a.createElement(Qe.a,{className:t.iconTrue}):i.a.createElement(Xe.a,{className:t.iconFalse}),i.a.createElement(J.a,null,i.a.createElement(W.a,{id:"Apis.Details.LifeCycle.CheckboxLabels.business.plans.selected",defaultMessage:"Business Plan(s) selected"})),i.a.createElement(B.b,{to:"/apis/"+a.id+"/subscriptions"},i.a.createElement(be.a,{style:{marginLeft:"2px"},color:"primary",fontSize:"small"}))),n&&i.a.createElement(me.a,{xs:12,className:t.grid},r?i.a.createElement(Qe.a,{className:t.iconTrue}):i.a.createElement(Xe.a,{className:t.iconFalse}),i.a.createElement(J.a,null,i.a.createElement(W.a,{id:"Apis.Details.LifeCycle.CheckboxLabels.cert.provided",defaultMessage:"Certificate provided"})),i.a.createElement(B.b,{to:"/apis/"+a.id+"/runtime-configuration"},i.a.createElement(be.a,{style:{marginLeft:"2px"},color:"primary",fontSize:"small"})))),i.a.createElement(me.a,{xs:12,className:t.grid},c||p?i.a.createElement(Qe.a,{className:t.iconTrue}):i.a.createElement(Di.a,{className:t.iconWarn}),i.a.createElement(J.a,null,i.a.createElement(W.a,{id:"Apis.Details.LifeCycle.CheckboxLabels.gateway.environments.selected",defaultMessage:"Gateway Environment(s) selected"})),i.a.createElement(B.b,{to:"/apis/"+a.id+"/environments"},i.a.createElement(be.a,{style:{marginLeft:"2px"},color:"primary",fontSize:"small"})))),"GRAPHQL"!==a.type&&i.a.createElement(i.a.Fragment,null,i.a.createElement(me.a,{xs:12,className:t.labelsGrid},i.a.createElement(J.a,{variant:"subtitle2"},i.a.createElement(W.a,{id:"Apis.Details.Configuration.Configuration.prototype",defaultMessage:"Deploy as a Prototype"}))),i.a.createElement(me.a,{xs:12},i.a.createElement(me.a,{xs:12,className:t.grid},d?i.a.createElement(Qe.a,{className:t.iconTrue}):i.a.createElement(Xe.a,{className:t.iconFalse}),i.a.createElement(J.a,null,i.a.createElement(W.a,{id:"Apis.Details.Configuration.Configuration.prototype.endpoints.provided",defaultMessage:"Prototype Endpoint provided"})),i.a.createElement(B.b,{to:"/apis/"+a.id+"/endpoints"},i.a.createElement(be.a,{style:{marginLeft:"2px"},color:"primary",fontSize:"small"}))),i.a.createElement(me.a,{xs:12,className:t.grid},c||p?i.a.createElement(Qe.a,{className:t.iconTrue}):i.a.createElement(Di.a,{className:t.iconWarn}),i.a.createElement(J.a,null,i.a.createElement(W.a,{id:"Apis.Details.LifeCycle.CheckboxLabels.gateway.environments.selected",defaultMessage:"Gateway Environment(s) selected"})),i.a.createElement(B.b,{to:"/apis/"+a.id+"/environments"},i.a.createElement(be.a,{style:{marginLeft:"2px"},color:"primary",fontSize:"small"})))))),"PUBLISHED"===a.lifeCycleStatus&&i.a.createElement(i.a.Fragment,null,i.a.createElement(me.a,{xs:12,className:t.labelsGrid},i.a.createElement(J.a,{variant:"subtitle2"},i.a.createElement(W.a,{id:"Apis.Details.Configuration.Configuration.prototype",defaultMessage:"Deploy as a Prototype"}))),i.a.createElement(me.a,{xs:12},i.a.createElement(me.a,{xs:12,className:t.grid},d?i.a.createElement(Qe.a,{className:t.iconTrue}):i.a.createElement(Xe.a,{className:t.iconFalse}),i.a.createElement(J.a,null,i.a.createElement(W.a,{id:"Apis.Details.Configuration.Configuration.prototype.endpoints.provided",defaultMessage:"Prototype Endpoint provided"})),i.a.createElement(B.b,{to:"/apis/"+a.id+"/endpoints"},i.a.createElement(be.a,{style:{marginLeft:"2px"},color:"primary",fontSize:"small"}))))))}wi.propTypes={classes:s.a.shape({}).isRequired,api:s.a.shape({}).isRequired,intl:s.a.shape({formatMessage:s.a.func}).isRequired};const Ti=e=>{const{currentState:t}=e,a=Object(W.e)(),[r,s]=Object(n.useState)(!1),[o,l]=Object(ue.d)();return i.a.createElement(de.a,null,i.a.createElement(fe.a,{display:"block",p:2,mt:2},i.a.createElement(fe.a,{display:"block"},i.a.createElement(J.a,{variant:"h6"},i.a.createElement(W.a,{id:"Apis.Details.LifeCycle.LifeCycleUpdate.LifecyclePending.pending",defaultMessage:"Pending lifecycle state change."}))),i.a.createElement(fe.a,{display:"block",mt:.5},i.a.createElement(J.a,{variant:"subtitle2"},i.a.createElement(W.a,{id:"Apis.Details.LifeCycle.LifeCycleUpdate.LifecyclePending.current.state",defaultMessage:"Current state is"})," ",t)),i.a.createElement(fe.a,{display:"flex",mt:2},i.a.createElement(je.a,{size:"small",variant:"contained",color:"primary",onClick:()=>s(!0)},i.a.createElement(W.a,{id:"Apis.Details.LifeCycle.LifeCycleUpdate.LifecyclePending.delete.task",defaultMessage:"Delete Task"})))),i.a.createElement(Et.a,{open:r,transition:St.a},i.a.createElement(Fa.a,null,i.a.createElement(W.a,{id:"Apis.Details.LifeCycle.LifeCycleUpdate.LifecyclePending.dialog.title",defaultMessage:"Delete Task"})),i.a.createElement(yt.a,null,i.a.createElement(Ba.a,null,i.a.createElement(W.a,{id:"Apis.Details.LifeCycle.LifeCycleUpdate.LifecyclePending.dialog.text.description",defaultMessage:"The life cycle task will be removed"}))),i.a.createElement(bt.a,null,i.a.createElement(je.a,{dense:!0,onClick:()=>s(!1)},i.a.createElement(W.a,{id:"Apis.Details.LifeCycle.LifeCycleUpdate.LifecyclePending.dialog.cancel",defaultMessage:"Cancel"})),i.a.createElement(je.a,{size:"small",variant:"text",color:"primary",onClick:()=>{const{id:e}=o;o.cleanupPendingTask(e).then(()=>{te.a.info(a.formatMessage({id:"Apis.Details.LifeCycle.LifeCycleUpdate.LifecyclePending.success",defaultMessage:"Lifecycle task deleted successfully"})),l()}).catch(e=>{console.error(e),te.a.error(a.formatMessage({id:"Apis.Details.LifeCycle.LifeCycleUpdate.LifecyclePending.error",defaultMessage:"Error while deleting task"}))})}},i.a.createElement(W.a,{id:"Apis.Details.LifeCycle.LifeCycleUpdate.LifecyclePending.dialog,delete",defaultMessage:"Delete"})))))};Ti.propTypes={currentState:s.a.string.isRequired};var xi=Ti;function Ii(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function Mi(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ii(a,!0).forEach(function(t){Ri(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ii(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function Ri(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function ki(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}class Ni extends n.Component{constructor(e){super(e),this.updateLifeCycleState=this.updateLifeCycleState.bind(this),this.api=new X.a,this.WORKFLOW_STATUS={CREATED:"CREATED",APPROVED:"APPROVED"},this.state={newState:null,isUpdating:null,pageError:null}}updateLCStateOfAPI(e,t){let a;this.setState({isUpdating:t});const n=this.props.checkList.map(e=>e.value+":"+e.checked);(a=n.length>0?this.api.updateLcState(e,t,n):this.api.updateLcState(e,t)).then(e=>{this.props.handleUpdate(!0);const t=e.body.lifecycleState.state,{workflowStatus:a}=e.body;this.context.updateAPI({enableStore:!0}),this.setState({newState:t});const{intl:n}=this.props;a===this.WORKFLOW_STATUS.CREATED?te.a.info(n.formatMessage({id:"Apis.Details.LifeCycle.LifeCycleUpdate.success.createStatus",defaultMessage:"Lifecycle state change request has been sent"})):te.a.info(n.formatMessage({id:"Apis.Details.LifeCycle.LifeCycleUpdate.success.otherStatus",defaultMessage:"Lifecycle state updated successfully"}))}).catch(e=>{if(e.response)te.a.error(e.response.body.description),this.setState({pageError:e.response.body});else{const t="Something went wrong while updating the lifecycle";te.a.error(t),this.setState({pageError:e.response.body})}console.error(e)}).finally(()=>{this.setState({isUpdating:null})})}updateLifeCycleState(e){e.preventDefault();let t=e.currentTarget.getAttribute("data-value");"Deploy To Test"===t&&(t="Deploy as a Prototype");const{api:{id:a}}=this.props;this.updateLCStateOfAPI(a,t)}render(){const{api:e,lcState:t,classes:a,theme:n,handleChangeCheckList:r,checkList:s,certList:o}=this.props,l=ki(t.availableTransitions),{newState:c,pageError:p}=this.state,d=e.workflowStatus&&e.workflowStatus===this.WORKFLOW_STATUS.CREATED,m=new Map;m.set("Published","Publish"),m.set("Prototyped","Deploy as a prototype"),m.set("Deprecated","Deprecate"),m.set("Blocked","Block"),m.set("Created","Create"),m.set("Retired","Retire");const u=e.endpointConfig&&"prototyped"===e.endpointConfig.implementation_status,g=e.securityScheme.includes(En),h=e.securityScheme.includes(fn),f=0!==o.length,E=0!==e.policies.length,b=l.map(a=>{const n=Mi({},a,{displayName:a.event});if("Deploy as a Prototype"===n.event){let{displayName:a}=n;return"Prototyped"===t.state&&(a="Redeploy"),Mi({},n,{displayName:a,disabled:!u||null==e.endpointConfig})}if("Publish"===n.event){let{displayName:a}=n;return"Published"===t.state&&(a="Redeploy"),Mi({},n,{displayName:a,disabled:null===e.endpointConfig||g&&!f||h&&!E||"prototyped"===e.endpointConfig.implementation_status})}return Mi({},n,{disabled:!1})});return i.a.createElement(me.a,{container:!0},d?i.a.createElement(me.a,{item:!0,xs:12},i.a.createElement(xi,{currentState:t.state})):i.a.createElement(me.a,{item:!0,xs:12},n.custom.lifeCycleImage?i.a.createElement("img",{src:n.custom.lifeCycleImage,alt:"life cycles"}):i.a.createElement(me.a,{container:!0,spacing:3},i.a.createElement(me.a,{item:!0,xs:8},i.a.createElement(Ci,{lifeCycleStatus:c||e.lifeCycleStatus})),("CREATED"===e.lifeCycleStatus||"PROTOTYPED"===e.lifeCycleStatus)&&i.a.createElement(me.a,{item:!0,xs:3},i.a.createElement(wi,{api:e,isMutualSSLEnabled:g,isAppLayerSecurityMandatory:h,isCertAvailable:f,isBusinessPlanAvailable:E})))),i.a.createElement(me.a,{item:!0,xs:12},!d&&i.a.createElement(bn.a,{row:!0},s.map((e,t)=>i.a.createElement(At.a,{key:s[t].value,control:i.a.createElement(ua.a,{checked:s[t].checked,onChange:r(t),value:s[t].value,color:"primary"}),label:s[t].label}))),i.a.createElement(bi.a,{resourcePath:bi.c.API_CHANGE_LC,resourceMethod:bi.b.POST},i.a.createElement("div",{className:a.buttonsWrapper},!d&&b.map(e=>i.a.createElement(je.a,{disabled:e.disabled||this.state.isUpdating,variant:"contained",color:"primary",className:a.stateButton,key:e.event,"data-value":e.event,onClick:this.updateLifeCycleState},e.displayName,this.state.isUpdating===e.event&&i.a.createElement($e.a,{size:18})))))),p&&i.a.createElement(me.a,{item:!0,xs:11},i.a.createElement(yi.a,{onClose:()=>this.setState({pageError:null}),disableActions:!0,dense:!0,paperProps:{elevation:1},type:"error",message:p})))}}Ni.propTypes={classes:s.a.shape({}).isRequired,api:s.a.shape({}).isRequired,checkList:s.a.arrayOf(s.a.shape({})).isRequired,lcState:s.a.shape({}).isRequired,handleChangeCheckList:s.a.func.isRequired,handleUpdate:s.a.func.isRequired,theme:s.a.shape({}).isRequired,intl:s.a.shape({formatMessage:s.a.func}).isRequired},Ni.contextType=ue.c;var ji=Object(q.a)(e=>({buttonsWrapper:{marginTop:40},stateButton:{marginRight:e.spacing()},paperCenter:{padding:e.spacing(2),display:"flex",alignItems:"left",justifyContent:"left"},subHeading:{fontSize:"1rem",fontWeight:400,margin:0,display:"inline-flex",lineHeight:"38px"}}),{withTheme:!0})(Object(W.d)(Ni)),_i=a(1970),Li=a(1672),qi=a.n(Li);const Wi=e=>{const{classes:t}=e;return i.a.createElement(de.a,null,i.a.createElement(Oe.a,{className:t.table},i.a.createElement(Yn.a,null,i.a.createElement(Pe.a,null,i.a.createElement(De.a,{className:t.firstCol},i.a.createElement(W.a,{id:"Apis.Details.LifeCycle.LifeCycleHistory.user",defaultMessage:"User"})),i.a.createElement(De.a,null,i.a.createElement(W.a,{id:"Apis.Details.LifeCycle.LifeCycleHistory.action",defaultMessage:"Action"})),i.a.createElement(De.a,null,i.a.createElement(W.a,{id:"Apis.Details.LifeCycle.LifeCycleHistory.time",defaultMessage:"Time"})))),i.a.createElement(Kn.a,null,e.lcHistory.reverse().map(e=>e.previousState&&i.a.createElement(Pe.a,{key:e.postState},i.a.createElement(De.a,{component:"th",scope:"row"},i.a.createElement(_i.a,{className:t.avatar},i.a.createElement(qi.a,{className:t.personIcon})),i.a.createElement("div",null,e.user)),i.a.createElement(De.a,null,i.a.createElement(W.a,{id:"Apis.Details.LifeCycle.LifeCycleHistory.lifecycle.state.history",defaultMessage:"LC has changed from {previous} to {post}",values:{previous:e.previousState,post:e.postState}})),i.a.createElement(De.a,null,re()(e.updatedTime).fromNow()))))))};Wi.propTypes={classes:s.a.shape({}).isRequired,lcHistory:s.a.arrayOf(s.a.shape({})).isRequired};var Ui=Object(q.a)(e=>({firstCol:{width:100},personIcon:{fontSize:e.typography.fontSize},avatar:{width:25,height:25}}))(Wi);function Bi(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}class Fi extends n.Component{constructor(e){var t,a,n;super(e),n=e=>(t,a)=>{const{checkList:n}=this.state;n[e].checked=a,this.setState({checkList:n})},(a="handleChangeCheckList")in(t=this)?Object.defineProperty(t,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[a]=n,this.api=new X.a,this.state={lcHistory:null,checkList:[],certList:[]},this.updateData=this.updateData.bind(this),this.handleChangeCheckList=this.handleChangeCheckList.bind(this)}componentDidMount(){this.updateData()}updateData(){const{api:{id:e}}=this.props,t=X.a.get(e),a=this.api.getLcState(e),n=this.api.getLcHistory(e),i=X.a.getAllClientCertificates(e);Promise.all([t,a,n,i]).then(e=>{const t=e[0],a=e[1].body,n=e[2].body.list,i=e[3].body;const r=[];let s=0;for(const e of a.checkItems)r.push({index:s,label:e.name,value:e.name,checked:!1}),s++;this.setState({api:t,lcState:a,lcHistory:n,privateJetModeEnabled:!1,checkList:r,certList:Bi(i.certificates)})}).catch(e=>{0})}render(){const{classes:e}=this.props,{api:t,lcState:a,privateJetModeEnabled:n,checkList:r,lcHistory:s,certList:l}=this.state,c=this.context.api;return c&&Object(o.b)(["apim:api_publish"],c)?i.a.createElement(me.a,{container:!0,direction:"row",alignItems:"center",spacing:4,style:{marginTop:20}},i.a.createElement(me.a,{item:!0},i.a.createElement(J.a,{variant:"body2",color:"primary"},i.a.createElement(W.a,{id:"Apis.Details.LifeCycle.LifeCycle.change.not.allowed",defaultMessage:"* You are not authorized to change the life cycle state of the API due to insufficient permissions"})))):a?i.a.createElement(i.a.Fragment,null,i.a.createElement(J.a,{variant:"h4",gutterBottom:!0},i.a.createElement(W.a,{id:"Apis.Details.LifeCycle.LifeCycle.lifecycle",defaultMessage:"Lifecycle"})),i.a.createElement("div",{className:e.contentWrapper},i.a.createElement(me.a,{container:!0},i.a.createElement(me.a,{item:!0,xs:12},i.a.createElement(ji,{handleUpdate:this.updateData,lcState:a,checkList:r,handleChangeCheckList:this.handleChangeCheckList,api:t,privateJetModeEnabled:n,certList:l})),i.a.createElement(me.a,{item:!0,xs:12},s.length>1&&i.a.createElement("div",null,i.a.createElement(J.a,{variant:"h6",gutterBottom:!0,className:e.historyHead},i.a.createElement(W.a,{id:"Apis.Details.LifeCycle.LifeCycle.history",defaultMessage:"History"})),i.a.createElement(Ui,{lcHistory:s})))))):i.a.createElement(ee.a,null)}}Fi.propTypes={classes:s.a.shape({}).isRequired,api:s.a.shape({}).isRequired},Fi.contextType=ue.c;var zi=Object(q.a)(e=>({root:{flexGrow:1,marginTop:10,maxWidth:e.custom.contentAreaWidth},titleWrapper:{display:"flex",flexDirection:"row",alignItems:"center"},historyHead:{marginTop:e.spacing(2),marginBottom:e.spacing(2)}}))(Fi),Vi=a(761),Hi=a.n(Vi),Gi=a(828),Ki=a.n(Gi),Yi=a(608),Ji=a(1443);function Qi(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Zi extends i.a.Component{constructor(e){super(e),Qi(this,"changeType",e=>{const{value:t}=e.target;"PUBLIC_FORUM"!==t&&"SUPPORT_FORUM"!==t||this.setState({type:"URL"}),this.setState({type:t})}),Qi(this,"changeSource",e=>{const{value:t}=e.target;this.validate(),this.setState({sourceType:t})}),Qi(this,"setDisable",e=>{const{type:t}=this.state;if(!("INLINE"!==e&&"MARKDOWN"!==e&&"FILE"!==e||"PUBLIC_FORUM"!==t&&"SUPPORT_FORUM"!==t))return!0}),Qi(this,"handleChange",e=>t=>{const{value:a}=t.target;"name"===e?this.setState({name:a}):"summary"===e?this.setState({summary:a}):"sourceUrl"===e?this.setState({sourceUrl:a}):"otherTypeName"===e?this.setState({otherTypeName:a}):"visibility"===e&&this.setState({visibility:a})}),Qi(this,"onDrop",e=>{this.setState({file:e})}),Qi(this,"addDocument",e=>{const{apiType:t}=this.props,a=t===X.a.CONSTS.APIProduct?new $.a:new X.a,{name:n,type:i,summary:r,sourceType:s,sourceUrl:o,file:l,otherTypeName:c,visibility:p}=this.state;return{docPromise:a.addDocument(e,{name:n,type:i,summary:r,sourceType:s,visibility:p,sourceUrl:o,otherTypeName:c,inlineContent:""}),file:l}}),Qi(this,"updateDocument",e=>{const{apiType:t}=this.props,a=t===X.a.CONSTS.APIProduct?new $.a:new X.a,{name:n,type:i,summary:r,sourceType:s,sourceUrl:o,file:l,otherTypeName:c,visibility:p}=this.state,{docId:d}=this.props;return{docPromise:a.updateDocument(e,d,{name:n,type:i,summary:r,sourceType:s,visibility:p,sourceUrl:o,otherTypeName:c,inlineContent:""}),file:l}}),this.state={type:"HOWTO",sourceType:"INLINE",name:"",summary:"",sourceUrl:"",file:null,disableName:!1,otherTypeName:null,nameNotDuplicate:!0,nameMaxLengthExceeds:!1,invalidUrl:!0,nameEmpty:!1,summeryEmpty:!1,urlEmpty:!1,visibility:"API_LEVEL"}}getDocument(){const{apiId:e,docId:t,apiType:a}=this.props,n=a===X.a.CONSTS.APIProduct?new $.a:new X.a;if(t&&e){n.getDocument(e,t).then(e=>{const{name:t,type:a,summary:n,sourceType:i,sourceUrl:r,otherTypeName:s,visibility:o}=e.body;this.setState({name:t,type:a,summary:n,sourceType:i,sourceUrl:r,otherTypeName:s,visibility:o})}).catch(e=>{const{status:t}=e;404===t&&this.setState({apiNotFound:!0})})}}validate(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=!1;if("url"===e)a=!!t&&Zt.a.url.validate(t).error,this.setState({invalidUrl:a}),""===t?this.setState({urlEmpty:!0}):this.setState({urlEmpty:!1});else if("name"===e){if(t){Zt.a.apiDocument.validate({id:this.props.apiId,name:t}).then(e=>{this.setState({nameNotDuplicate:!e})}).catch(e=>{404===e.status?this.setState({nameNotDuplicate:!0}):te.a.error("Error when validating document name")})}else this.setState({nameNotDuplicate:!0});""===t?this.setState({nameEmpty:!0,nameMaxLengthExceeds:!1}):t&&t.length>60?this.setState({nameEmpty:!1,nameMaxLengthExceeds:!0}):this.setState({nameEmpty:!1,nameMaxLengthExceeds:!1})}else"summary"===e&&(""===t?this.setState({summeryEmpty:!0}):this.setState({summeryEmpty:!1}))}componentDidMount(){this.getDocument();const{apiId:e,docId:t}=this.props;e&&t&&this.setState({disableName:!0})}showNameHelper(){const{nameEmpty:e,nameNotDuplicate:t,nameMaxLengthExceeds:a}=this.state;return a?i.a.createElement(W.a,{id:"Apis.Details.Documents.CreateEditForm.exceeds.document.name.length.helper.text",defaultMessage:"Document name exceeds the maximum length of 60 characters"}):t&&!e?i.a.createElement(W.a,{id:"Apis.Details.Documents.CreateEditForm.document.name.helper.text",defaultMessage:"Provide the name for the document"}):e?i.a.createElement(W.a,{id:"Apis.Details.Documents.CreateEditForm.empty.document.name.helper.text",defaultMessage:"Document name cannot be empty"}):i.a.createElement(W.a,{id:"Apis.Details.Documents.CreateEditForm.duplicate.document.name.helper.text",defaultMessage:"Duplicate document name"})}getUrlHelperText(){const{invalidUrl:e,urlEmpty:t}=this.state;return e?i.a.createElement(W.a,{id:"Apis.Details.Documents.CreateEditForm.source.url.helper.text.error.invalid",defaultMessage:"Enter a valid URL to the source"}):t?i.a.createElement(W.a,{id:"Apis.Details.Documents.CreateEditForm.source.url.helper.text.error.empty",defaultMessage:"URL Field cannot be empty"}):i.a.createElement(W.a,{id:"Apis.Details.Documents.CreateEditForm.source.url.helper.text",defaultMessage:"Provide the URL to the source"})}render(){const{name:e,type:t,summary:a,sourceType:n,sourceUrl:r,file:s,disableName:o,otherTypeName:l,invalidUrl:c,nameNotDuplicate:p,nameMaxLengthExceeds:d,nameEmpty:m,summeryEmpty:u,urlEmpty:g,visibility:h}=this.state,{classes:f,setSaveDisabled:E}=this.props,{settings:b}=this.context;return E(!(""!==e&&""!==a&&p&&!d&&(!c&&""!==r||"URL"!==n))),i.a.createElement("div",{className:f.addNewOther},i.a.createElement(zt.a,{margin:"normal",className:f.FormControlOdd},i.a.createElement(Gt.a,{fullWidth:!0,InputProps:{onBlur:e=>{let{target:{value:t}}=e;this.validate("name",t)}},label:i.a.createElement(W.a,{id:"Apis.Details.Documents.CreateEditForm.document.name",defaultMessage:"Name *"}),helperText:this.showNameHelper(),type:"text",variant:"outlined",name:"name",margin:"normal",value:e,onChange:this.handleChange("name"),InputLabelProps:{shrink:!0},autoFocus:!0,disabled:o,error:!p||m||d})),i.a.createElement(zt.a,{margin:"normal",className:f.FormControlOdd},i.a.createElement(Gt.a,{fullWidth:!0,multiline:!0,InputProps:{onBlur:e=>{let{target:{value:t}}=e;this.validate("summary",t)},onKeyUp:e=>{let{target:{value:t}}=e;this.validate("summary",t)}},margin:"normal",variant:"outlined",label:i.a.createElement(W.a,{id:"Apis.Details.Documents.CreateEditForm.document.summary",defaultMessage:"Summary *"}),helperText:u?i.a.createElement(W.a,{id:"Apis.Details.Documents.CreateEditForm.document.summary.error.empty",defaultMessage:"Document summary can not be empty"}):i.a.createElement(W.a,{id:"Apis.Details.Documents.CreateEditForm.document.summary.helper.text",defaultMessage:"Provide a brief description for the document"}),type:"text",name:"summary",margin:"normal",value:a,onChange:this.handleChange("summary"),InputLabelProps:{shrink:!0},error:u})),b.docVisibilityEnabled&&i.a.createElement(zt.a,{margin:"normal",className:f.FormControlOdd},i.a.createElement(Gt.a,{fullWidth:!0,id:"docVisibility-selector",select:!0,variant:"outlined",label:i.a.createElement(W.a,{id:"Apis.Details.Documents.CreateEditForm.document.docVisibility",defaultMessage:"Document Visibility"}),helperText:u?i.a.createElement(W.a,{id:"Apis.Details.Documents.CreateEditForm.document.summary.error.empty",defaultMessage:"Document summary can not be empty"}):i.a.createElement(W.a,{id:"Apis.Details.Documents.CreateEditForm.document.summary.helper.text",defaultMessage:"Provide a brief description for the document"}),type:"text",name:"visibility",margin:"normal",value:h,onChange:this.handleChange("visibility"),error:u},i.a.createElement(Yt.a,{value:"API_LEVEL"},i.a.createElement(W.a,{id:"Apis.Details.Documents.CreateEditForm.document.docVisibility.dropdown.public",defaultMessage:"Same as API Visibility"})),i.a.createElement(Yt.a,{value:"PRIVATE"},i.a.createElement(W.a,{id:"Apis.Details.Documents.CreateEditForm.document.docVisibility.dropdown.private",defaultMessage:"Private"})),i.a.createElement(Yt.a,{value:"OWNER_ONLY"},i.a.createElement(W.a,{id:"Apis.Details.Documents.CreateEditForm.document.docVisibility.dropdown.ownerOnly",defaultMessage:"Owner Only"})))),i.a.createElement(zt.a,{component:"fieldset",className:f.formControlFirst},i.a.createElement(Vt.a,{component:"legend"},i.a.createElement(W.a,{id:"Apis.Details.Documents.CreateEditForm.document.create.type",defaultMessage:"Type"})),i.a.createElement(Ct.a,{"aria-label":"Type",name:"type",className:f.group,value:t,onChange:this.changeType},i.a.createElement(At.a,{className:f.formControlLabel,value:"HOWTO",control:i.a.createElement(vt.a,null),label:i.a.createElement("div",{className:f.typeTextWrapper},i.a.createElement(Dt.a,null,"help_outline"),i.a.createElement("div",null,i.a.createElement(W.a,{id:"Apis.Details.Documents.CreateEditForm.document.create.type.how.to",defaultMessage:"How To"})))}),i.a.createElement(At.a,{className:f.formControlLabel,value:"SAMPLES",control:i.a.createElement(vt.a,null),label:i.a.createElement("div",{className:f.typeTextWrapper},i.a.createElement(Dt.a,null,"code"),i.a.createElement("div",null,i.a.createElement(W.a,{id:"Apis.Details.Documents.CreateEditForm.document.create.type.sample",defaultMessage:"Sample & SDK"})))}),i.a.createElement(At.a,{className:f.formControlLabel,value:"PUBLIC_FORUM",control:i.a.createElement(vt.a,null),label:i.a.createElement("div",{className:f.typeTextWrapper},i.a.createElement(Dt.a,null,"forum"),i.a.createElement("div",null,i.a.createElement(W.a,{id:"Apis.Details.Documents.CreateEditForm.document.create.type.public.forum",defaultMessage:"Public Forum"})))}),i.a.createElement(At.a,{className:f.formControlLabel,value:"SUPPORT_FORUM",control:i.a.createElement(vt.a,null),label:i.a.createElement("div",{className:f.typeTextWrapper},i.a.createElement(Dt.a,null,"forum"),i.a.createElement("div",null,i.a.createElement(W.a,{id:"Apis.Details.Documents.CreateEditForm.document.create.type.support.forum",defaultMessage:"Support Forum"})))}),i.a.createElement(At.a,{className:f.formControlLabel,value:"OTHER",control:i.a.createElement(vt.a,null),label:i.a.createElement("div",{className:f.typeTextWrapper},i.a.createElement(Dt.a,null,"video_label"),i.a.createElement("div",null,i.a.createElement(W.a,{id:"Apis.Details.Documents.CreateEditForm.document.create.type.other",defaultMessage:"Other"})))}))),"OTHER"===t&&i.a.createElement(zt.a,{margin:"normal",className:f.FormControlOdd},i.a.createElement(Gt.a,{fullWidth:!0,label:i.a.createElement(W.a,{id:"Apis.Details.Documents.CreateEditForm.document.create.type.other.document.category",defaultMessage:"Other Document Type *"}),helperText:i.a.createElement(W.a,{id:"Apis.Details.Documents.CreateEditForm.document.create.type.other.document.category.helper.text",defaultMessage:"Provide the document type"}),type:"text",name:"otherTypeName",margin:"normal",value:l,variant:"outlined",onChange:this.handleChange("otherTypeName"),InputLabelProps:{shrink:!0}})),i.a.createElement(zt.a,{component:"fieldset",className:f.formControl},i.a.createElement(Vt.a,{component:"legend"},i.a.createElement(W.a,{id:"Apis.Details.Documents.CreateEditForm.source",defaultMessage:"Source"})),i.a.createElement(Ct.a,{"aria-label":"Source",name:"sourceType",className:f.group,value:n,onChange:this.changeSource},i.a.createElement(At.a,{disabled:this.setDisable("INLINE"),value:"INLINE",control:i.a.createElement(vt.a,null),label:i.a.createElement(W.a,{id:"Apis.Details.Documents.CreateEditForm.source.inline",defaultMessage:"Inline"})}),i.a.createElement(At.a,{disabled:this.setDisable("MARKDOWN"),value:"MARKDOWN",control:i.a.createElement(vt.a,null),label:i.a.createElement(W.a,{id:"Apis.Details.Documents.CreateEditForm.source.markdown",defaultMessage:"Markdown"})}),i.a.createElement(At.a,{disabled:this.setDisable("URL"),value:"URL",control:i.a.createElement(vt.a,null),label:i.a.createElement(W.a,{id:"Apis.Details.Documents.CreateEditForm.source.url",defaultMessage:"URL"})}),i.a.createElement(At.a,{disabled:this.setDisable("FILE"),value:"FILE",control:i.a.createElement(vt.a,null),label:i.a.createElement(W.a,{id:"Apis.Details.Documents.CreateEditForm.source.file",defaultMessage:"File"})}))),"URL"===n&&i.a.createElement(zt.a,{margin:"normal",className:f.FormControlOdd},i.a.createElement(Gt.a,{fullWidth:!0,InputProps:{onBlur:e=>{let{target:{value:t}}=e;this.validate("url",t)},onKeyUp:e=>{let{target:{value:t}}=e;this.validate("url",t)}},margin:"normal",label:i.a.createElement(W.a,{id:"Apis.Details.Documents.CreateEditForm.source.url.url",defaultMessage:"URL"}),helperText:this.getUrlHelperText(),type:"text",name:"sourceUrl",margin:"normal",value:r,onChange:this.handleChange("sourceUrl"),InputLabelProps:{shrink:!0},error:c||g,variant:"outlined"})),"FILE"===n&&i.a.createElement(wt.a,{multiple:!1,accept:"application/msword, application/vnd.openxmlformats-officedocument.wordprocessingml.document, application/pdf, text/plain",className:f.dropzone,activeClassName:f.acceptDrop,rejectClassName:f.rejectDrop,onDrop:e=>{this.onDrop(e)}},e=>{let{getRootProps:t,getInputProps:a}=e;return i.a.createElement("div",t(),i.a.createElement("input",a()),i.a.createElement("div",{className:f.dropZoneWrapper},i.a.createElement(Dt.a,{className:f.dropIcon,style:{fontSize:56}},"cloud_upload"),s&&s.length>0&&i.a.createElement("div",{className:f.uploadedFile},i.a.createElement(Dt.a,null,"file")," ",s[0].name)))}),("INLINE"===n||"MARKDOWN"===n)&&i.a.createElement(Yi.a,{type:"info",height:60},i.a.createElement("div",{className:f.contentWrapper},i.a.createElement(J.a,{component:"p",className:f.content},i.a.createElement(W.a,{id:"Apis.Details.Documents.CreateEditForm.document.content.info",defaultMessage:"Please save the document. The content can be edited in the next step."})))))}}Zi.contextType=ne.b,Zi.defaultProps={apiId:null,docId:null},Zi.propTypes={classes:s.a.shape({}).isRequired,intl:s.a.shape({}).isRequired,docId:s.a.shape({}),apiId:s.a.shape({}),saveDisabled:s.a.bool.isRequired,setSaveDisabled:s.a.func.isRequired,apiType:s.a.oneOf([X.a.CONSTS.API,X.a.CONSTS.APIProduct]).isRequired};var Xi=Object(W.d)(Object(q.a)(e=>({button:{marginLeft:e.spacing(2),color:e.palette.getContrastText(e.palette.primary.main)},contentWrapper:{maxWidth:e.custom.contentAreaWidth},addNewOther:{padding:e.spacing(2)},radioGroup:{display:"flex",flexDirection:"row",width:300},expansionPanel:{marginBottom:e.spacing(1)},group:{display:"flex",flexDirection:"row"},formControlFirst:{display:"block"},formControl:{display:"block",marginTop:20},formControlLabel:{background:"#efefef",borderRadius:5,paddingRight:10,marginLeft:0,marginTop:10},typeTextWrapper:{display:"flex",flexDirection:"column",alignItems:"center"},FormControlOdd:{padding:0,backgroundColor:e.palette.background.paper,width:"100%",marginTop:0},acceptDrop:{backgroundColor:pe.a[50]},dropzone:{border:"1px dashed "+e.palette.primary.main,borderRadius:"5px",cursor:"pointer",height:75,padding:"".concat(e.spacing(2),"px 0px"),position:"relative",textAlign:"center",width:"100%",margin:"10px 0"},dropZoneWrapper:{height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center","& span.material-icons":{color:e.palette.primary.main}},uploadedFile:{fontSize:11}}))(Zi));function $i(e){const{doc:t}=e,[a,r]=i.a.useState(!0),{api:s,isAPIProduct:o}=Object(n.useContext)(ue.c),l=o?"api-products":"apis",c="/".concat(l,"/").concat(s.id,"/documents");let p,d=null;return t&&t.body&&t.body.documentId&&(d="/".concat(l,"/").concat(s.id,"/documents/").concat(t.body.documentId,"/edit-content")),p="INLINE"===t.body.sourceType||"MARKDOWN"===t.body.sourceType,console.info("printing doc",t),i.a.createElement(Et.a,{open:a,onClose:function(){r(!1)},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},i.a.createElement(Fa.a,{id:"alert-dialog-title"}," ",i.a.createElement(W.a,{id:"Apis.Details.Documents.GoToEdit.title",defaultMessage:"Document Created Successfully"})),i.a.createElement(yt.a,null,i.a.createElement(Ba.a,{id:"alert-dialog-description"},p?i.a.createElement(W.a,{id:"Apis.Details.Documents.GoToEdit.description.content",defaultMessage:"You can add content to the document or go back to the document listing page."}):i.a.createElement(W.a,{id:"Apis.Details.Documents.GoToEdit.description.file",defaultMessage:"You can go back to the document listing page and upload the file by editing the document."}))),i.a.createElement(bt.a,null,p&&i.a.createElement(B.b,{to:{pathname:d,state:{doc:t.body}}},i.a.createElement(je.a,{color:"primary"},i.a.createElement(W.a,{id:"Apis.Details.Documents.GoToEdit.add.content",defaultMessage:"Add Content"}))),i.a.createElement(B.b,{to:c},i.a.createElement(je.a,{color:"primary",autoFocus:!0},i.a.createElement(W.a,{id:"Apis.Details.Documents.GoToEdit.back.to.listing",defaultMessage:"Back to Listing"})))))}$i.propTypes={doc:s.a.shape({}).isRequired};var er=$i;function tr(e){const{api:t,isAPIProduct:a}=Object(n.useContext)(ue.c),[r,s]=Object(n.useState)(null),[o,l]=Object(n.useState)(!0),{classes:c,intl:p,history:d}=e,m="/".concat(a?"api-products":"apis","/").concat(t.id,"/documents"),u=t.apiType===X.a.CONSTS.APIProduct?new $.a:new X.a;let g=Object(n.useRef)(null);return i.a.createElement(i.a.Fragment,null,i.a.createElement(me.a,{container:!0,spacing:3},i.a.createElement(me.a,{item:!0,sm:12,md:12}),i.a.createElement(me.a,{item:!0,sm:0,md:0,lg:2}),i.a.createElement(me.a,{item:!0,sm:12,md:12,lg:8},i.a.createElement(me.a,{container:!0,spacing:5},i.a.createElement(me.a,{item:!0,md:12},i.a.createElement("div",{className:c.titleWrapper},i.a.createElement(B.b,{to:m,className:c.titleLink},i.a.createElement(J.a,{variant:"h5",align:"left",className:c.mainTitle},i.a.createElement(W.a,{id:"Apis.Details.Documents.Create.heading",defaultMessage:"Documents"}))),i.a.createElement(Dt.a,null,"keyboard_arrow_right"),i.a.createElement(J.a,{variant:"h5"},i.a.createElement(W.a,{id:"Apis.Details.Documents.Create.title",defaultMessage:"Add New Document"})))),i.a.createElement(me.a,{item:!0,md:12},i.a.createElement(de.a,{elevation:0},i.a.createElement(Xi,{innerRef:e=>{g=e},apiType:t.apiType,apiId:t.id,saveDisabled:o,setSaveDisabled:l}),i.a.createElement(Ji.a,null),i.a.createElement("div",{className:c.addNewOther},i.a.createElement(je.a,{variant:"contained",color:"primary",onClick:()=>(e=>{const t=g.addDocument(e);t.docPromise.then(a=>{const{documentId:n,name:i}=a.body;t.file&&n?u.addFileToDocument(e,n,t.file[0]).then(e=>{te.a.info("".concat(i," ").concat(p.formatMessage({id:"Apis.Details.Documents.Create.successful.file.upload.message",defaultMessage:"File uploaded successfully."}))),d.push(m)}).catch(e=>{}):(te.a.info("".concat(a.body.name," ").concat(p.formatMessage({id:"Apis.Details.Documents.Create.markdown.editor.success",defaultMessage:" added successfully."}))),s(a))}).catch(e=>{})})(t.id),disabled:o},i.a.createElement(W.a,{id:"Apis.Details.Documents.Create.markdown.editor.add.document.button",defaultMessage:"Add Document"})),i.a.createElement(je.a,{className:c.button,onClick:()=>d.push(m)},i.a.createElement(W.a,{id:"Apis.Details.Documents.Create.markdown.editor.add.document.cancel.button",defaultMessage:"Cancel"})))))))),r&&i.a.createElement(er,{doc:r}))}tr.propTypes={classes:s.a.shape({}).isRequired,intl:s.a.func.isRequired,apiType:s.a.oneOf([X.a.CONSTS.API,X.a.CONSTS.APIProduct]).isRequired};var ar=Object(W.d)(Object(U.withRouter)(Object(q.a)(e=>({root:{flexGrow:1,marginTop:10},titleWrapper:{display:"flex",flexDirection:"row",alignItems:"center"},titleLink:{color:e.palette.primary.main},contentWrapper:{maxWidth:e.custom.contentAreaWidth},addNewWrapper:{backgroundColor:e.palette.background.paper,color:e.palette.getContrastText(e.palette.background.paper),border:"solid 1px "+e.palette.grey[300],borderRadius:e.shape.borderRadius,marginTop:e.spacing(2),marginBottom:e.spacing(3)},addNewHeader:{padding:e.spacing(2),backgroundColor:e.palette.grey[300],fontSize:e.typography.h6.fontSize,color:e.typography.h6.color,fontWeight:e.typography.h6.fontWeight},addNewOther:{padding:e.spacing(2)},button:{marginLeft:e.spacing(2),color:e.palette.getContrastText(e.palette.primary.main)}}))(tr)));function nr(){return(nr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}const ir=Object(n.lazy)(()=>Promise.resolve().then(a.t.bind(null,2688,7))),rr=Object(n.lazy)(()=>a.e(5).then(a.t.bind(null,3730,7)));function sr(e){return i.a.createElement(St.a,nr({direction:"up"},e))}function or(e){const{intl:t,showAtOnce:a,history:r}=e,{api:s,isAPIProduct:o}=Object(n.useContext)(ue.c),[l,c]=Object(n.useState)(!1),[p,d]=Object(n.useState)(a),[m,u]=Object(n.useState)(t.formatMessage({id:"documents.markdown.editor.default",defaultMessage:"#Enter your markdown content"})),g=()=>{if(p||h(),p&&a){const e="/".concat(o?"api-products":"apis","/").concat(s.id,"/documents");r.push(e)}d(!p)},h=()=>{(new X.a).getInlineContentOfDocument(s.id,e.docId).then(e=>{u(e.text)}).catch(e=>{const{status:t}=e;404===t&&this.setState({apiNotFound:!0})})},{classes:f}=e;return i.a.createElement("div",null,i.a.createElement(je.a,{onClick:g},i.a.createElement(Dt.a,null,"code"),i.a.createElement(W.a,{id:"Apis.Details.Documents.MarkdownEditor.edit.content",defaultMessage:"Edit Content"})),i.a.createElement(Et.a,{fullScreen:!0,open:p,onClose:g,TransitionComponent:sr},i.a.createElement(de.a,{square:!0,className:f.popupHeader},i.a.createElement(Pt.a,{color:"inherit",onClick:g,"aria-label":"Close"},i.a.createElement(Dt.a,null,"close")),i.a.createElement(J.a,{variant:"h4",className:f.docName},i.a.createElement(W.a,{id:"Apis.Details.Documents.MarkdownEditor.edit.content.of",defaultMessage:"Edit Content of"})," ",'"',e.docName,'"'),i.a.createElement(je.a,{className:f.button,variant:"contained",disabled:l,color:"primary",onClick:()=>{const a=new X.a;c(!0),a.addInlineContentToDocument(s.id,e.docId,"MARKDOWN",m).then(e=>{te.a.info("".concat(e.obj.name," ").concat(t.formatMessage({id:"Apis.Details.Documents.MarkdownEditor.update.success.message",defaultMessage:"updated successfully."}))),g(),c(!1)}).catch(e=>{const{status:t}=e;404===t&&this.setState({apiNotFound:!0}),c(!1)})}},i.a.createElement(W.a,{id:"Apis.Details.Documents.MarkdownEditor.update.content.button",defaultMessage:"Update Content"}),l&&i.a.createElement($e.a,{size:24})),i.a.createElement(je.a,{className:f.button,onClick:g},i.a.createElement(W.a,{id:"Apis.Details.Documents.MarkdownEditor.cancel.button",defaultMessage:"Cancel"}))),i.a.createElement("div",{className:f.splitWrapper},i.a.createElement(me.a,{container:!0,spacing:7},i.a.createElement(me.a,{item:!0,xs:6},i.a.createElement(n.Suspense,{fallback:i.a.createElement($e.a,null)},i.a.createElement(ir,{width:"100%",height:"100vh",language:"markdown",theme:"vs-dark",value:m,options:{selectOnLineNumbers:!0},onChange:e=>{u(e)},editorDidMount:(e,t)=>{e.focus()}}))),i.a.createElement(me.a,{item:!0,xs:6},i.a.createElement("div",{className:f.markdownViewWrapper},i.a.createElement(n.Suspense,{fallback:i.a.createElement($e.a,null)},i.a.createElement(rr,{source:m}))))))))}or.propTypes={classes:s.a.shape({}).isRequired,intl:s.a.shape({}).isRequired};var lr=Object(W.d)(Object(U.withRouter)(Object(q.a)({appBar:{position:"relative"},flex:{flex:1},popupHeader:{display:"flex",flexDirection:"row",alignItems:"center"},splitWrapper:{padding:0},docName:{alignItems:"center",display:"flex"},markdownViewWrapper:{height:"100vh",overflowY:"auto"},button:{height:30,marginLeft:30}})(or)));function cr(){return(cr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function pr(e){return i.a.createElement(St.a,cr({direction:"up"},e))}function dr(e){const t=new X.a,{intl:a,apiType:r}=e,[s,l]=Object(n.useState)(!1),[c,p]=Object(n.useState)(!1);let d=Object(n.useRef)(null);const{api:m}=Object(n.useContext)(ue.c),u=()=>{l(!s)},{classes:g,docId:h,apiId:f}=e;return i.a.createElement("div",null,i.a.createElement(je.a,{onClick:u,disabled:Object(o.b)(["apim:api_create","apim:api_publish"],m)},i.a.createElement(Dt.a,null,"edit"),i.a.createElement(W.a,{id:"Apis.Details.Documents.Edit.documents.text.editor.edit",defaultMessage:"Edit Meta Data"})),i.a.createElement(Et.a,{open:s,onClose:u,TransitionComponent:pr,fullScreen:!0},i.a.createElement(de.a,{square:!0,className:g.popupHeader},i.a.createElement(Pt.a,{color:"inherit",onClick:u,"aria-label":"Close"},i.a.createElement(Dt.a,null,"close")),i.a.createElement(J.a,{variant:"h4",className:g.docName},i.a.createElement(W.a,{id:"Apis.Details.Documents.Edit.documents.text.editor.edit.content",defaultMessage:"Edit "}),'"',e.docName,'"'),i.a.createElement(je.a,{className:g.button,variant:"contained",color:"primary",onClick:()=>{const{apiId:n}=e,i=d.updateDocument(n);i.docPromise.then(r=>{const{documentId:s,name:o}=r.body;i.file&&s?t.addFileToDocument(n,s,i.file[0]).then(t=>{te.a.info("".concat(o," ").concat(a.formatMessage({id:"Apis.Details.Documents.Edit.markdown.editor.upload.success.message",defaultMessage:"File uploaded successfully."}))),e.getDocumentsList(),u()}).catch(e=>{}):(te.a.info("".concat(o," ").concat(a.formatMessage({id:"Apis.Details.Documents.Edit.markdown.editor.update.success.message",defaultMessage:"Updated successfully."}))),e.getDocumentsList(),u())}).catch(e=>{})},disabled:c},i.a.createElement(W.a,{id:"Apis.Details.Documents.Edit.documents.text.editor.update.content",defaultMessage:"Save"})),i.a.createElement(je.a,{className:g.button,onClick:u},i.a.createElement(W.a,{id:"Apis.Details.Documents.Edit.documents.text.editor.cancel",defaultMessage:"Cancel"}))),i.a.createElement("div",{className:g.splitWrapper},i.a.createElement(Xi,{innerRef:e=>{d=e},docId:h,apiId:f,apiType:r,saveDisabled:c,setSaveDisabled:p}))))}dr.propTypes={classes:s.a.shape({}).isRequired,apiId:s.a.shape({}).isRequired,docId:s.a.shape({}).isRequired,getDocumentsList:s.a.shape({}).isRequired,intl:s.a.shape({}).isRequired,api:s.a.shape({id:s.a.string,apiType:s.a.oneOf([X.a.CONSTS.API,X.a.CONSTS.APIProduct])}).isRequired};var mr=Object(W.d)(Object(q.a)({appBar:{position:"relative"},flex:{flex:1},popupHeader:{display:"flex",flexDirection:"row",alignItems:"center"},splitWrapper:{padding:0},docName:{alignItems:"center",display:"flex"},button:{height:30,marginLeft:30}})(dr));function ur(e){const{intl:t}=e,[a,r]=Object(n.useState)(!1),{api:s}=Object(n.useContext)(ue.c),l=e=>{"yes"===e?p():r(!a)},c=()=>{r(!a)},p=()=>{const{apiId:n,docId:i,getDocumentsList:s,apiType:o}=e;(o===X.a.CONSTS.APIProduct?new $.a:new X.a).deleteDocument(n,i).then(()=>{te.a.info("".concat(t.formatMessage({id:"Apis.Details.Documents.Delete.document.delete.successfully",defaultMessage:"deleted successfully."}))),r(!a),s()}).catch(e=>{const{status:t}=e;404===t&&this.setState({apiNotFound:!0})})},{apiName:d}=e;return i.a.createElement("div",null,i.a.createElement(je.a,{onClick:c,disabled:Object(o.b)(["apim:api_create","apim:api_publish"],s)},i.a.createElement(Dt.a,null,"delete_forever"),i.a.createElement(W.a,{id:"Apis.Details.Documents.Delete.document.delete",defaultMessage:"Delete"})),i.a.createElement(Et.a,{open:a,onClose:c,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},i.a.createElement(Fa.a,{id:"alert-dialog-title"},i.a.createElement(W.a,{id:"Apis.Details.Documents.Delete.document.listing.delete.confirm.title",defaultMessage:"Delete Document"})),i.a.createElement(yt.a,null,i.a.createElement(Ba.a,{id:"alert-dialog-description"},i.a.createElement(W.a,{id:"Apis.Details.Documents.Delete.document.listing.delete.confirm.body",defaultMessage:"Selected document will be deleted from the API.You will not be able to undo this action."}))),i.a.createElement(bt.a,null,i.a.createElement(je.a,{onClick:()=>l("no"),color:"default"},i.a.createElement(W.a,{id:"Apis.Details.Documents.Delete.document.listing.delete.cancel",defaultMessage:"Cancel"})),i.a.createElement(je.a,{onClick:()=>l("yes"),color:"primary",autoFocus:!0},i.a.createElement(W.a,{id:"Apis.Details.Documents.Delete.document.listing.delete.yes",defaultMessage:"Yes. Delete"})))))}ur.propTypes={apiId:s.a.shape({}).isRequired,apiType:s.a.string.isRequired,docId:s.a.shape({}).isRequired,getDocumentsList:s.a.shape({}).isRequired,intl:s.a.shape({}).isRequired,api:s.a.shape({id:s.a.string,apiType:s.a.oneOf([X.a.CONSTS.API,X.a.CONSTS.APIProduct])}).isRequired};var gr=Object(W.d)(ur);function hr(e){const{intl:t,docsToDelete:a,docs:r,getDocumentsList:s}=e,{api:o,isAPIProduct:l}=Object(n.useContext)(ue.c),c=l?new $.a:new X.a,[p,d]=Object(n.useState)(!0),m=e=>{"yes"===e?u():d(!p)},u=()=>{const e=[];a.data.map(t=>{const a=r[t.index];e.push(c.deleteDocument(o.id,a.documentId))}),Promise.all(e).then(e=>{console.log(e),te.a.info("".concat(t.formatMessage({id:"Apis.Details.Documents.Delete.document.delete.successfully",defaultMessage:"deleted successfully."}))),d(!p),s()}).catch(e=>{0})};return Object(n.useEffect)(()=>{d(!0)},[a]),i.a.createElement(Et.a,{open:p,onClose:()=>{d(!p)},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},i.a.createElement(Fa.a,{id:"alert-dialog-title"},i.a.createElement(W.a,{id:"Apis.Details.Documents.Delete.document.listing.delete.confirm.title",defaultMessage:"Delete Selected Documents"})),i.a.createElement(yt.a,null,i.a.createElement(Ba.a,{id:"alert-dialog-description"},i.a.createElement("strong",null,o.name),i.a.createElement(W.a,{id:"Apis.Details.Documents.Delete.document.listing.delete.confirm.body",defaultMessage:"Selected documents will be deleted from the API. You will not be able to undo this action."}))),i.a.createElement(bt.a,null,i.a.createElement(je.a,{onClick:()=>m("no"),color:"default"},i.a.createElement(W.a,{id:"Apis.Details.Documents.Delete.document.listing.delete.cancel",defaultMessage:"Cancel"})),i.a.createElement(je.a,{onClick:()=>m("yes"),color:"primary",autoFocus:!0},i.a.createElement(W.a,{id:"Apis.Details.Documents.Delete.document.listing.delete.yes",defaultMessage:"Delete"}))))}hr.propTypes={docs:s.a.instanceOf(Array).isRequired,getDocumentsList:s.a.func.isRequired,docsToDelete:s.a.instanceOf(Array).isRequired,intl:s.a.shape({}).isRequired};var fr=Object(W.d)(hr);function Er(e){const{intl:t}=e,{docId:a,apiId:r}=e,[s,o]=Object(n.useState)(!1),[l,c]=Object(n.useState)(!1);Object(n.useEffect)(()=>{(new X.a).getFileForDocument(r,a).then(e=>{c(!0),o(!0)}).catch(e=>{c(!0),o(!1)})},[]);return l&&i.a.createElement(je.a,{onClick:()=>{(new X.a).getFileForDocument(r,a).then(e=>{V.a.forceDownload(e)}).catch(e=>{})},disabled:!s},i.a.createElement(Dt.a,null,"arrow_downward"),i.a.createElement(W.a,{id:"Apis.Details.Documents.Download.documents.listing.download",defaultMessage:"Download"}))}Er.propTypes={apiId:s.a.shape({}).isRequired,docId:s.a.shape({}).isRequired,intl:s.a.shape({}).isRequired};var br=Object(W.d)(Er);const yr=Object(n.lazy)(()=>Promise.all([a.e(0),a.e(4),a.e(2)]).then(a.bind(null,3729)));function vr(e){return"APIProduct"===e.apiType?i.a.createElement(B.b,{to:"/api-products/"+e.apiId+"/documents/"+e.docId+"/details"},e.docName):i.a.createElement(B.b,{to:"/apis/"+e.apiId+"/documents/"+e.docId+"/details"},e.docName)}class Cr extends i.a.Component{constructor(e){super(e),this.state={docs:null,showAddDocs:!1,docsToDelete:null},this.apiId=e.api.id,this.toggleAddDocs=this.toggleAddDocs.bind(this),this.getDocumentsList=this.getDocumentsList.bind(this)}componentDidMount(){this.getDocumentsList()}getDocumentsList(){const{api:e,intl:t}=this.props;if(e.apiType===X.a.CONSTS.APIProduct){(new $.a).getDocuments(e.id).then(e=>{this.setState({docs:e.obj.list})}).catch(e=>{const a=JSON.parse(e.message),n="Error["+a.code+"]: "+a.description+" | "+a.message+".";console.error(n),te.a.error(t.formatMessage({id:"Apis.Details.Documents.Listing.documents.listing.fetching.error.message.api.product",defaultMessage:"Error in fetching documents list of the API Product"}))})}else{(new X.a).getDocuments(this.props.api.id).then(e=>{this.setState({docs:e.obj.list})}).catch(e=>{const a=JSON.parse(e.message),n="Error["+a.code+"]: "+a.description+" | "+a.message+".";console.error(n),te.a.error(t.formatMessage({id:"Apis.Details.Documents.Listing.documents.listing.fetching.error.message",defaultMessage:"Error in fetching documents list of the API"}))})}}toggleAddDocs(){this.setState(e=>({showAddDocs:!e.showAddDocs}))}setFoo(){this.setState({foo:"test"})}render(){var e=this;const{classes:t,api:a,isAPIProduct:r}=this.props,{docs:s,showAddDocs:l,docsToDelete:c}=this.state,p="/".concat(r?"api-products":"apis","/").concat(a.id,"/documents/create"),d=!Object(o.b)(["apim:api_publish","apim:api_create"],a)||"excluded",m={title:!1,filter:!1,print:!1,download:!1,viewColumns:!1,customToolbar:!1,search:!1,onRowsDelete:function(t,a){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e;return n.setState({docsToDelete:t}),!1}},u=[{name:"documentId",options:{display:"excluded",filter:!1}},{name:"name",options:{customBodyRender:(e,t)=>{if(t.rowData){const e=t.rowData[1],n=t.rowData[0];return i.a.createElement(vr,{docName:e,docId:n,apiId:this.apiId,apiType:a.apiType})}return null},filter:!1,label:i.a.createElement(W.a,{id:"Apis.Details.Documents.Listing.column.header.name",defaultMessage:"name"})}},{name:"sourceType",label:i.a.createElement(W.a,{id:"Apis.Details.Documents.Listing.column.header.source.type",defaultMessage:"sourceType"})},{name:"type",label:i.a.createElement(W.a,{id:"Apis.Details.Documents.Listing.column.header.type",defaultMessage:"type"})},{name:"sourceUrl",options:{display:"excluded",filter:!1}},{name:"action",label:i.a.createElement(W.a,{id:"Apis.Details.Documents.Listing.column.header.action",defaultMessage:"action"}),options:{display:d,customBodyRender:(e,r)=>{if(r.rowData){const e=r.rowData[1],s=r.rowData[0],o=r.rowData[2],l=r.rowData[4];return"MARKDOWN"===o?i.a.createElement("table",{className:t.actionTable},i.a.createElement("tr",null,i.a.createElement("td",null,i.a.createElement(lr,{docName:e,docId:s,apiId:this.apiId})),i.a.createElement("td",null,i.a.createElement(mr,{apiType:a.apiType,docName:e,docId:s,apiId:this.apiId,getDocumentsList:this.getDocumentsList,api:!0})),i.a.createElement("td",null,i.a.createElement(gr,{docName:e,docId:s,apiId:this.apiId,getDocumentsList:this.getDocumentsList,apiType:a.apiType,api:!0})))):"INLINE"===o?i.a.createElement("table",{className:t.actionTable},i.a.createElement("tr",null,i.a.createElement("td",null,i.a.createElement(n.Suspense,{fallback:i.a.createElement(W.a,{id:"Apis.Details.Documents.Listing.loading",defaultMessage:"Loading..."})},i.a.createElement(yr,{docName:e,docId:s,apiId:this.apiId,apiType:a.apiType}))),i.a.createElement("td",null,i.a.createElement(mr,{apiType:a.apiType,docName:e,docId:s,apiId:this.apiId,getDocumentsList:this.getDocumentsList,api:!0})),i.a.createElement("td",null,i.a.createElement(gr,{docName:e,docId:s,apiId:this.apiId,getDocumentsList:this.getDocumentsList,apiType:a.apiType,api:!0})))):"URL"===o?i.a.createElement("table",{className:t.actionTable},i.a.createElement("tr",null,i.a.createElement("td",null,i.a.createElement("a",{href:l},i.a.createElement(je.a,null,i.a.createElement(Dt.a,null,"open_in_new"),i.a.createElement(W.a,{id:"Apis.Details.Documents.Listing.documents.open",defaultMessage:"Open"})))),i.a.createElement("td",null,i.a.createElement(mr,{apiType:a.apiType,docName:e,docId:s,apiId:this.apiId,getDocumentsList:this.getDocumentsList,api:!0})),i.a.createElement("td",null,i.a.createElement(gr,{docName:e,docId:s,apiId:this.apiId,getDocumentsList:this.getDocumentsList,apiType:a.apiType,api:!0})))):"FILE"===o?i.a.createElement("table",{className:t.actionTable},i.a.createElement("tr",null,i.a.createElement("td",null,i.a.createElement(br,{docId:s,apiId:this.apiId})),i.a.createElement("td",null,i.a.createElement(mr,{apiType:a.apiType,docName:e,docId:s,apiId:this.apiId,getDocumentsList:this.getDocumentsList,api:!0})),i.a.createElement("td",null,i.a.createElement(gr,{docName:e,docId:s,apiId:this.apiId,getDocumentsList:this.getDocumentsList,apiType:a.apiType,api:!0})))):i.a.createElement("span",null)}return null},filter:!1}}];return i.a.createElement(i.a.Fragment,null,c&&i.a.createElement(fr,{getDocumentsList:this.getDocumentsList,docsToDelete:c,docs:s}),i.a.createElement("div",{className:t.titleWrapper},i.a.createElement(J.a,{variant:"h4",className:t.mainTitle},i.a.createElement(W.a,{id:"Apis.Details.Documents.Listing.documents.listing.title",defaultMessage:"Documents"})),s&&s.length>0&&i.a.createElement(B.b,{to:!Object(o.b)(["apim:api_create","apim:api_publish"],a)&&p},i.a.createElement(je.a,{size:"small",className:t.button,disabled:Object(o.b)(["apim:api_create","apim:api_publish"],a)},i.a.createElement(Ki.a,{className:t.buttonIcon}),i.a.createElement(W.a,{id:"Apis.Details.Documents.Listing.add.new.document.button",defaultMessage:"Add New Document"})))),i.a.createElement("div",null,l&&i.a.createElement(ar,{toggleAddDocs:this.toggleAddDocs,getDocumentsList:this.getDocumentsList,apiType:a.apiType}),s&&s.length>0?i.a.createElement(Hi.a,{title:"",data:s,columns:u,options:m}):i.a.createElement(Yi.a,{type:"info",height:140},i.a.createElement("div",{className:t.contentWrapper},i.a.createElement(J.a,{variant:"h5",component:"h3",className:t.head},i.a.createElement(W.a,{id:"Apis.Details.Documents.Listing.add.new.msg.title",defaultMessage:"Create Documents"})),a.apiType===X.a.CONSTS.APIProduct?i.a.createElement(J.a,{component:"p",className:t.content},i.a.createElement(W.a,{id:"Apis.Details.Documents.Listing.APIProduct.add.new.msg.content",defaultMessage:"You can add different types of documents to an API. Proper documentation helps API publishers to market their  APIs better and sustain competition. "})):i.a.createElement(J.a,{component:"p",className:t.content},i.a.createElement(W.a,{id:"Apis.Details.Documents.Listing.add.new.msg.content",defaultMessage:"You can add different types of documents to an API. Proper documentation helps API publishers to market their  APIs better and sustain competition. "})),i.a.createElement("div",{className:t.actions},i.a.createElement(B.b,{to:!Object(o.b)(["apim:api_create","apim:api_publish"],a)&&p},i.a.createElement(je.a,{variant:"contained",color:"primary",className:t.button,disabled:Object(o.b)(["apim:api_create","apim:api_publish"],a)},i.a.createElement(W.a,{id:"Apis.Details.Documents.Listing.add.new.msg.button",defaultMessage:"Add New Document"}))))))))}}Cr.propTypes={classes:s.a.shape({}).isRequired,intl:s.a.shape({}).isRequired,api:s.a.shape({id:s.a.string,apiType:s.a.oneOf([X.a.CONSTS.API,X.a.CONSTS.APIProduct])}).isRequired};var Ar=Object(W.d)(Object(ue.e)(Object(q.a)(e=>({root:{flexGrow:1,marginTop:10},contentWrapper:{maxWidth:e.custom.contentAreaWidth},addNewWrapper:{backgroundColor:e.palette.background.paper,color:e.palette.getContrastText(e.palette.background.paper),border:"solid 1px "+e.palette.grey[300],borderRadius:e.shape.borderRadius,marginTop:e.spacing(2),marginBottom:e.spacing(2)},addNewHeader:{padding:e.spacing(2),backgroundColor:e.palette.grey[300],fontSize:e.typography.h6.fontSize,color:e.typography.h6.color,fontWeight:e.typography.h6.fontWeight},addNewOther:{padding:e.spacing(2)},titleWrapper:{display:"flex",flexDirection:"row",alignItems:"center",marginBottom:e.spacing(2)},mainTitle:{paddingRight:10},actionTable:{"& td":{width:50},"& td:first-child":{width:130}},messageBox:{marginTop:20},actions:{padding:"20px 0","& button":{marginLeft:0}},head:{fontWeight:200,marginBottom:20},buttonIcon:{marginRight:e.spacing(1)}}))(Cr))),Sr=a(2532),Or=a.n(Sr);const Dr=Object(n.lazy)(()=>a.e(5).then(a.t.bind(null,3730,7)));function Pr(e){const{classes:t,fullScreen:a,intl:r,match:{params:{documentId:s}}}=e,{api:o,isAPIProduct:l}=Object(n.useContext)(ue.c),[c,p]=Object(n.useState)(""),[d,m]=Object(n.useState)(null),u=l?new $.a:new X.a;Object(n.useEffect)(()=>{u.getDocument(o.id,s).then(e=>{const{body:t}=e;m(t),"MARKDOWN"!==t.sourceType&&"INLINE"!==t.sourceType||g()}).catch(e=>{0})},[s]);const g=()=>{u.getInlineContentOfDocument(o.id,s).then(e=>{p(e.text)}).catch(e=>{0})},h="/".concat(l?"api-products":"apis","/").concat(o.id,"/documents");return d&&i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:t.root},i.a.createElement("div",{className:t.titleWrapper},i.a.createElement(B.b,{to:h,className:t.titleLink},i.a.createElement(J.a,{variant:"h5",align:"left",className:t.mainTitle},i.a.createElement(W.a,{id:"Apis.Details.Documents.View.heading",defaultMessage:"Documents"}))),i.a.createElement(Dt.a,null,"keyboard_arrow_right"),i.a.createElement(J.a,{variant:"h5"},d.name)),i.a.createElement(de.a,{className:t.paper},i.a.createElement(Oe.a,{className:t.table},i.a.createElement(Kn.a,null,i.a.createElement(Pe.a,null,i.a.createElement(De.a,{className:t.leftCell},i.a.createElement(J.a,{variant:"body1"},i.a.createElement(W.a,{id:"Apis.Details.Documents.View.meta.name",defaultMessage:"Name"}))),i.a.createElement(De.a,null,i.a.createElement(J.a,{variant:"body1"},d.name))),i.a.createElement(Pe.a,null,i.a.createElement(De.a,null,i.a.createElement(J.a,{variant:"body1"},i.a.createElement(W.a,{id:"Apis.Details.Documents.View.meta.summary",defaultMessage:"Summary"}))),i.a.createElement(De.a,null,i.a.createElement(J.a,{variant:"body1"},d.summary))),i.a.createElement(Pe.a,null,i.a.createElement(De.a,null,i.a.createElement(J.a,{variant:"body1"},i.a.createElement(W.a,{id:"Apis.Details.Documents.View.meta.catogery",defaultMessage:"Categorized as"}))),i.a.createElement(De.a,null,i.a.createElement(J.a,{variant:"body1"},"OTHER"===d.type?d.otherTypeName:d.type)," ")),i.a.createElement(Pe.a,null,i.a.createElement(De.a,null,i.a.createElement(J.a,{variant:"body1"},i.a.createElement(W.a,{id:"Apis.Details.Documents.View.meta.source",defaultMessage:"Source Type"}))),i.a.createElement(De.a,null,i.a.createElement(J.a,{variant:"body1"},d.sourceType)," "))))),i.a.createElement(de.a,{className:t.paper},"MARKDOWN"===d.sourceType&&i.a.createElement(n.Suspense,{fallback:i.a.createElement($e.a,null)},i.a.createElement(Dr,{source:c})),"INLINE"===d.sourceType&&i.a.createElement(Or.a,{html:c}),"URL"===d.sourceType&&i.a.createElement("a",{className:t.displayURL,href:d.sourceUrl,target:"_blank"},d.sourceUrl,i.a.createElement(Dt.a,{className:t.displayURLLink},"open_in_new")),"FILE"===d.sourceType&&i.a.createElement(je.a,{variant:"contained",color:"default",className:t.button,onClick:()=>{u.getFileForDocument(o.id,s).then(e=>{V.a.forceDownload(e)}).catch(e=>{})}},i.a.createElement(W.a,{id:"Apis.Details.Documents.View.btn.download",defaultMessage:"Download"}),i.a.createElement(Dt.a,null,"arrow_downward")))))}Pr.propTypes={classes:s.a.shape({}).isRequired,doc:s.a.shape({}).isRequired,apiId:s.a.shape({}).isRequired,intl:s.a.shape({formatMessage:s.a.func}).isRequired,fullScreen:s.a.shape({}).isRequired};var wr=Object(W.d)(Object(q.a)(e=>({root:{flexGrow:1,marginTop:10},titleWrapper:{display:"flex",flexDirection:"row",alignItems:"center"},titleLink:{color:e.palette.primary.main},docTitle:{fontWeight:100,fontSize:50,color:e.palette.grey[500]},docBadge:{padding:e.spacing(1),background:e.palette.primary.main,position:"absolute",top:0,marginTop:-22,color:e.palette.getContrastText(e.palette.primary.main)},button:{padding:e.spacing(2),marginTop:e.spacing(2)},displayURL:{padding:e.spacing(2),marginTop:e.spacing(2),background:e.palette.grey[200],color:e.palette.getContrastText(e.palette.grey[200]),display:"flex"},displayURLLink:{paddingLeft:e.spacing(2)},paper:{marginTop:20,padding:e.spacing(2),height:"100%"},leftCell:{width:150}}))(Pr)),Tr=a(1001),xr=a.n(Tr);const Ir=Object(n.lazy)(()=>Promise.all([a.e(0),a.e(4),a.e(2)]).then(a.bind(null,3729)));var Mr=Object(U.withRouter)(function(e){const[t,a]=Object(n.useState)(null),{history:{location:{state:r,pathname:s},replace:o}}=e;return Object(n.useEffect)(()=>{if(!xr()(r)){const{doc:e}=r;e&&a(e)}},[]),i.a.createElement(i.a.Fragment,null,t&&"MARKDOWN"===t.sourceType&&i.a.createElement(lr,{docName:t.name,docId:t.documentId,showAtOnce:!0}),t&&"INLINE"===t.sourceType&&i.a.createElement(n.Suspense,{fallback:i.a.createElement(ee.a,null)},i.a.createElement(Ir,{docName:t.name,docId:t.documentId,showAtOnce:!0})))});const Rr=e=>{const{isAPIProduct:t}=Object(n.useContext)(ue.c),a=t?"api-products":"apis";return i.a.createElement("div",null,i.a.createElement(U.Switch,null,i.a.createElement(U.Route,{exact:!0,path:"/"+a+"/:apiUUID/documents",component:Ar}),"} />",i.a.createElement(U.Route,{exact:!0,path:"/"+a+"/:apiUUID/documents/:documentId/details",component:wr}),"} />",i.a.createElement(U.Route,{exact:!0,path:"/"+a+"/:apiUUID/documents/:documentId/edit",component:mr}),"} />",i.a.createElement(U.Route,{exact:!0,path:"/"+a+"/:apiUUID/documents/:documentId/edit-content",component:Mr}),"} />",i.a.createElement(U.Route,{exact:!0,path:"/"+a+"/:apiUUID/documents/create",component:ar}),i.a.createElement(U.Route,{component:H.a})))};Rr.propTypes={api:s.a.shape({}).isRequired};var kr=Rr;const Nr={API:"api",RESOURCE:"resource"};function jr(e){const{updateAPI:t,operationRateLimits:a,onChange:r,value:s,isAPIProduct:l}=e,[c,p]=Object(n.useState)(s),[d,m]=Object(n.useState)(!1),u=null===c,g=u?Nr.RESOURCE:Nr.API,[h]=Object(ue.d)();Object(n.useEffect)(()=>{r&&(""===s&&h.apiThrottlingPolicy?p(h.apiThrottlingPolicy):p(s))},[r,s]);let f=i.a.createElement(J.a,{variant:"body1",gutterBottom:!0},"You may change the rate limiting policies per operation",i.a.createElement(J.a,{variant:"caption",display:"block",gutterBottom:!0},"Expand an operation below to select a rate limiting policy for an operation"));return l&&(f=i.a.createElement(J.a,{variant:"body1",gutterBottom:!0},"Rate limiting polices of the source operation will be applied",i.a.createElement(J.a,{variant:"caption",display:"block",gutterBottom:!0},"Rate limiting policy of an individual operation will be govern by the policy specified in the source operation"))),i.a.createElement(de.a,null,i.a.createElement(me.a,{container:!0,direction:"row",spacing:3,justify:"flex-start",alignItems:"flex-start"},i.a.createElement(me.a,{item:!0,md:12,xs:12},i.a.createElement(fe.a,{ml:1},i.a.createElement(J.a,{variant:"subtitle1",gutterBottom:!0},"Operations Configuration",i.a.createElement(se.a,{fontSize:"small",title:"Configurations that affects on all the resources","aria-label":"common configurations",placement:"right-end",interactive:!0},i.a.createElement(Le.a,null)))),i.a.createElement(Ji.a,{light:!0,variant:"middle"})),i.a.createElement(me.a,{item:!0,md:1,xs:1}),i.a.createElement(me.a,{item:!0,md:5,xs:11},i.a.createElement(zt.a,{component:"fieldset"},i.a.createElement(Vt.a,{component:"legend"},"Rate limiting level"),i.a.createElement(Ct.a,{"aria-label":"Apply rate limiting in",value:g,onChange:function(e){const t=e.target.value===Nr.RESOURCE?null:"";r?r(t):p(t)},row:!0},i.a.createElement(At.a,{value:Nr.API,control:i.a.createElement(vt.a,{color:"primary",disabled:Object(o.b)(["apim:api_create"],h)}),label:"API Level",labelPlacement:"end"}),i.a.createElement(At.a,{value:Nr.RESOURCE,control:i.a.createElement(vt.a,{color:"primary",disabled:Object(o.b)(["apim:api_create"],h)}),label:"Operation Level",labelPlacement:"end"})))),i.a.createElement(me.a,{item:!0,md:6,xs:12},i.a.createElement(fe.a,{minHeight:70,borderLeft:1,pl:10},u?f:i.a.createElement(Gt.a,{disabled:Object(o.b)(["apim:api_create"],h),id:"operation_throttling_policy",select:!0,label:"Rate limiting policies",value:c,onChange:e=>{let{target:{value:t}}=e;return r?r(t):p(t)},helperText:"Selected rate limiting policy will be applied to whole API",margin:"dense",variant:"outlined"},a.map(e=>i.a.createElement(Yt.a,{key:e.name,value:e.name},e.displayName))))),!r&&i.a.createElement(i.a.Fragment,null,i.a.createElement(me.a,{item:!0,md:12},i.a.createElement(Ji.a,null)),i.a.createElement(me.a,{item:!0},i.a.createElement(fe.a,{ml:1},i.a.createElement(je.a,{onClick:function(){m(!0),t({apiThrottlingPolicy:c}).finally(()=>m(!1))},disabled:!1,variant:"outlined",size:"small",color:"primary"},"Save",d&&i.a.createElement($e.a,{size:24})),i.a.createElement(fe.a,{display:"inline",ml:1},i.a.createElement(je.a,{size:"small",onClick:function(){p(s)}},"Reset")))))))}jr.defaultProps={onChange:null,isAPIProduct:!1},jr.propTypes={updateAPI:s.a.func.isRequired,onChange:s.a.oneOf([null,s.a.func]),operationRateLimits:s.a.arrayOf(s.a.shape({})).isRequired,disabledAction:s.a.shape({}).isRequired,value:s.a.string.isRequired,isAPIProduct:s.a.bool};var _r=i.a.memo(jr),Lr=a(1475);function qr(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Wr(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function Ur(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Wr(a,!0).forEach(function(t){Br(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Wr(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function Br(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Fr extends i.a.Component{constructor(e){super(e),this.state={isSecurity:!1},this.handleScopeChange=this.handleScopeChange.bind(this),this.handlePolicyChange=this.handlePolicyChange.bind(this),this.handleChange=this.handleChange.bind(this)}handleScopeChange(e){const{operation:t}=this.props,{data:a}=e,{value:n}=a||{},i=n[0],r=Ur({},t,{scopes:qr(t.scopes)});r.scopes=i,this.props.handleUpdateList(r)}handlePolicyChange(e){const{operation:t}=this.props,a=Ur({},t);a.throttlingPolicy=e.target.value,this.props.handleUpdateList(a)}handleChange(e){const{operation:t}=this.props,a=Ur({},t),{checked:n}=e.target;a.authType=n?"Any":"None",this.setState({isSecurity:n}),this.props.handleUpdateList(a)}render(){const{operation:e,theme:t,classes:a,apiPolicies:n,scopes:r,isOperationRateLimiting:s,sharedScopes:o,intl:l}=this.props,c=qr(r),{isSecurity:p}=this.state,d=c.filter(e=>!e.shared);let m=t.custom.operationChipColor?t.custom.operationChipColor[e.verb.toLowerCase()]:null,u="#000000";return m?u=t.palette.getContrastText(t.custom.operationChipColor[e.verb.toLowerCase()]):(console.log("Check the theme settings. The resourceChipColors is not populated properlly"),m="#cccccc"),i.a.createElement(Pe.a,{style:{borderStyle:"hidden"}},i.a.createElement(De.a,null,i.a.createElement(J.a,{variant:"body1"},e.target)),i.a.createElement(De.a,null,i.a.createElement(he.a,{label:e.verb,style:{backgroundColor:m,color:u,height:20,width:40,fontSize:9},className:a.chipActive})),i.a.createElement(De.a,null,i.a.createElement(Ot.a,{className:a.dropDown,value:s?e.throttlingPolicy:"",disabled:!s,onChange:this.handlePolicyChange,fieldName:"Throttling Policy"},n.map(e=>i.a.createElement(Yt.a,{key:e.name,value:e.name},e.displayName)))),i.a.createElement(De.a,null,i.a.createElement(Gt.a,{id:"operation_scope",select:!0,SelectProps:{multiple:!0,renderValue:e=>Array.isArray(e)?e.join(", "):e},fullWidth:!0,label:0!==c.length||o?l.formatMessage({id:"Apis.Details.Operations.Operation.operation.scope.label.default",defaultMessage:"Operation scope"}):l.formatMessage({id:"Apis.Details.Operations.Operation.operation.scope.label.notAvailable",defaultMessage:"No scope available"}),value:e.scopes,onChange:e=>{let{target:{value:t}}=e;return this.handleScopeChange({data:{value:t?[t]:[]}})},helperText:i.a.createElement(W.a,{id:"Apis.Details.Operations.Operation.operation.scope.helperText",defaultMessage:"Select a scope to control permissions to this operation"}),margin:"dense",variant:"outlined"},i.a.createElement(Lr.a,null,i.a.createElement(W.a,{id:"Apis.Details.Operations.Operation.operation.scope.select.local",defaultMessage:"API Scopes"})),0!==d.length?d.map(t=>i.a.createElement(Yt.a,{key:t.scope.name,value:t.scope.name,dense:!0},i.a.createElement(ua.a,{checked:e.scopes.includes(t.scope.name),color:"primary"}),t.scope.name)):i.a.createElement(Yt.a,{value:"",disabled:!0},i.a.createElement("em",null,i.a.createElement(W.a,{id:"Apis.Details.Operations.Operation.operation.no.api.scope.available",defaultMessage:"No API scopes available"}))),i.a.createElement(Lr.a,null,i.a.createElement(W.a,{id:"Apis.Details.Operations.Operation.operation.scope.select.shared",defaultMessage:"Shared Scopes"})),o&&0!==o.length?o.map(t=>i.a.createElement(Yt.a,{key:t.scope.name,value:t.scope.name,dense:!0},i.a.createElement(ua.a,{checked:e.scopes.includes(t.scope.name),color:"primary"}),t.scope.name)):i.a.createElement(Yt.a,{value:"",disabled:!0},i.a.createElement("em",null,i.a.createElement(W.a,{id:"Apis.Details.Operations.Operation.operation.no.sharedpi.scope.available",defaultMessage:"No shared scopes available"}))))),i.a.createElement(De.a,null,i.a.createElement(Ia.a,{checked:(()=>"None"!==e.authType)(),onChange:this.handleChange,value:p,color:"primary"})))}}Fr.propTypes={classes:s.a.shape({}).isRequired,operation:s.a.shape({target:s.a.string,verb:s.a.string,throttlingPolicy:s.a.string,auth:s.a.string}).isRequired,apiPolicies:s.a.shape({}).isRequired,isOperationRateLimiting:s.a.shape({}).isRequired,scopes:s.a.shape({}).isRequired,handleUpdateList:s.a.shape({}).isRequired,theme:s.a.shape({}).isRequired,intl:s.a.shape({formatMessage:s.a.func}).isRequired,sharedScopes:s.a.arrayOf(s.a.shape({})).isRequired};var zr=Object(W.d)(Object(q.a)(e=>({root:{flexGrow:1,marginTop:10},container:{display:"flex",flexWrap:"wrap"},textField:{marginLeft:e.spacing(),marginRight:e.spacing(),width:400},mainTitle:{paddingLeft:20},scopes:{width:400},dropDown:{width:e.spacing(11.25)},divider:{marginTop:20,marginBottom:20},chip:{margin:e.spacing(),color:e.palette.text.secondary,minWidth:100},chipActive:{margin:e.spacing(),color:e.palette.text.secondary,background:e.palette.background.active,minWidth:100,borderRadius:e.shape.borderRadius},paper:{padding:20},link:{cursor:"pointer"},listItem:{paddingLeft:0,display:"flex",alignItems:"center"},formControl:{paddingRight:0,marginRight:0},resourceRoot:{background:e.palette.grey[100],paddingLeft:e.spacing(),paddingRight:e.spacing(),borderRadius:e.shape.borderRadius,marginBottom:e.spacing()},deleteButton:{marginLeft:"auto"},pathDisplay:{marginRight:e.spacing(2),marginLeft:e.spacing(2)},descriptionWrapper:{paddingTop:e.spacing(),paddingBottom:e.spacing()},scopeSelect:{width:"100%"},descriptionWrapperUp:{paddingBottom:"0 !important"},addParamRow:{display:"flex",flexDirection:"row",alignItems:"center"},propsForm:{display:"flex",alignItems:"center"},deleteLink:{cursor:"pointer"},row:{"& td":{borderBottom:"none",verticalAlign:"bottom",width:"33%",paddingLeft:0}}}),{withTheme:!0})(Fr));function Vr(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}class Hr extends i.a.Component{constructor(e){super(e);const{api:t}=e,{operations:a}=t,n=Vr(a);n.sort((e,t)=>e.target+e.verb>t.target+t.verb?1:-1),this.state={notFound:!1,apiPolicies:[],operations:n,apiThrottlingPolicy:t.apiThrottlingPolicy,filterKeyWord:"",isSaving:!1,sharedScopes:[],apiScopesByName:{},sharedScopesByName:{}},this.newApi=new X.a,this.handleUpdateList=this.handleUpdateList.bind(this),this.handleApiThrottlePolicy=this.handleApiThrottlePolicy.bind(this),this.updateOperations=this.updateOperations.bind(this)}componentDidMount(){const{api:e}=this.props,t={};X.a.policies("api").then(e=>{this.setState({apiPolicies:e.obj.list})}).catch(e=>{const{status:t}=e.status;404===t?this.setState({notFound:!0}):401===t&&Object(ae.doRedirectToLogin)()});for(const a of e.scopes){const e={};e.scope=a.scope,e.shared=a.shared,t[a.scope.name]=e}this.setState({apiScopesByName:t}),this.getAllSharedScopes()}setFilterByKeyWord(e){this.setState({filterKeyWord:e.target.value.toLowerCase()})}getAllSharedScopes(){X.a.getAllScopes().then(e=>{if(e.body&&e.body.list){const t=[],a={},n=!0;for(const i of e.body.list){const e={};e.scope=i,e.shared=n,t.push(e),a[i.name]=e}this.setState({sharedScopesByName:a}),this.setState({sharedScopes:t})}})}handleApiThrottlePolicy(e){this.setState({apiThrottlingPolicy:e})}handleUpdateList(e){const{operations:t,sharedScopesByName:a,apiScopesByName:n}=this.state,i=t.map(t=>t.target===e.target&&t.verb===e.verb?e:t);for(const t of e.scopes)t&&!n[t]&&""!==n[t]&&t in a&&(n[t]=a[t]);this.setState({apiScopesByName:n}),this.setState({operations:i})}updateOperations(){const{operations:e,apiThrottlingPolicy:t,apiScopesByName:a}=this.state,{updateAPI:n}=this.props;this.setState({isSaving:!0}),this.updateApiScopes(e),n({operations:e,apiThrottlingPolicy:t,scopes:Object.keys(a).map(e=>a[e])}).finally(()=>this.setState({isSaving:!1}))}updateApiScopes(e){const{apiScopesByName:t,sharedScopesByName:a}=this.state;Object.keys(t).forEach(n=>{let i=!1;for(const t of e)if(t.scopes.includes(n)){i=!0;break}!i&&n in a&&delete t[n]}),this.setState({apiScopesByName:t})}render(){const{api:e,resourceNotFoundMessage:t}=this.props,{operations:a,apiPolicies:n,apiThrottlingPolicy:r,isSaving:s,filterKeyWord:o,notFound:l,sharedScopes:c}=this.state;if(l)return i.a.createElement(H.a,{message:t});if(!a&&0===n.length)return i.a.createElement(ee.a,null);const{classes:p}=this.props;return i.a.createElement(i.a.Fragment,null,i.a.createElement(fe.a,{pb:3},i.a.createElement(J.a,{variant:"h5"},i.a.createElement(W.a,{id:"Apis.Details.Operations.Operations.title",defaultMessage:"Operations"}))),i.a.createElement(me.a,{container:!0,spacing:2},i.a.createElement(me.a,{item:!0,md:12},i.a.createElement(_r,{operationRateLimits:n,api:e,value:r,onChange:this.handleApiThrottlePolicy})),i.a.createElement(me.a,{item:!0,md:2},i.a.createElement(fe.a,{mt:4,pb:2},i.a.createElement("div",{className:p.searchWrapper},i.a.createElement(Gt.a,{id:"outlined-full-width",label:"Operation",placeholder:"Filter Operations",onChange:t=>this.setFilterByKeyWord(t,e.operations),fullWidth:!0,variant:"outlined",InputLabelProps:{shrink:!0}})))),i.a.createElement(me.a,{item:!0,md:12},i.a.createElement(Oe.a,null,i.a.createElement(Pe.a,null,i.a.createElement(De.a,null,i.a.createElement(J.a,{variant:"subtitle2"},i.a.createElement(W.a,{id:"Apis.Details.Operations.operation.operationName",defaultMessage:"Operation"}))),i.a.createElement(De.a,null,i.a.createElement(J.a,{variant:"subtitle2"},i.a.createElement(W.a,{id:"Apis.Details.Operations.Operation.OperationType",defaultMessage:"Operation Type"}))),i.a.createElement(De.a,null,i.a.createElement(J.a,{variant:"subtitle2"},i.a.createElement(W.a,{id:"Apis.Details.Operations.Operation.throttling.policy",defaultMessage:"Rate Limiting"}))),i.a.createElement(De.a,null,i.a.createElement(J.a,{variant:"subtitle2"},i.a.createElement(W.a,{id:"Apis.Details.Operations.Operation.scopes",defaultMessage:"Scope"}))),i.a.createElement(De.a,null,i.a.createElement(J.a,{variant:"subtitle2"},i.a.createElement(W.a,{id:"Apis.Details.Operations.Operation.authType",defaultMessage:"Security Enabled"})))),a.filter(e=>e.target.toLowerCase().includes(o)).map(t=>i.a.createElement(zr,{operation:t,handleUpdateList:this.handleUpdateList,scopes:e.scopes,sharedScopes:c,isOperationRateLimiting:!r,apiPolicies:n})))),i.a.createElement(me.a,{item:!0},i.a.createElement(je.a,{variant:"contained",color:"primary",disabled:s,className:p.buttonMain,onClick:this.updateOperations},s&&i.a.createElement($e.a,{size:20}),i.a.createElement(W.a,{id:"Apis.Details.Operations.Operation.save",defaultMessage:"Save"})),i.a.createElement(B.b,{to:"/apis/"+e.id+"/overview"},i.a.createElement(je.a,null,i.a.createElement(W.a,{id:"Apis.Details.Operations.Operation.cancel",defaultMessage:"Cancel"}))))))}}Hr.propTypes={classes:s.a.shape({}).isRequired,api:s.a.shape({operations:s.a.array,scopes:s.a.array,updateOperations:s.a.func,policies:s.a.func,id:s.a.string}).isRequired,resourceNotFoundMessage:s.a.shape({}).isRequired,theme:s.a.shape({}).isRequired,intl:s.a.shape({formatMessage:s.a.func}).isRequired,updateAPI:s.a.func.isRequired};var Gr=Object(W.d)(Object(q.a)(e=>({root:{flexGrow:1,marginTop:10},container:{display:"flex",flexWrap:"wrap"},textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),width:400},mainTitle:{paddingLeft:0},scopes:{width:400},titleWrapper:{display:"flex",flexDirection:"row",alignItems:"center"},button:{marginLeft:e.spacing(2),color:e.palette.getContrastText(e.palette.primary.main)},buttonMain:{color:e.palette.getContrastText(e.palette.primary.main),marginRight:e.spacing(1)},addNewWrapper:{backgroundColor:e.palette.background.paper,color:e.palette.getContrastText(e.palette.background.paper),border:"solid 1px "+e.palette.grey[300],borderRadius:e.shape.borderRadius,marginTop:e.spacing(2)},contentWrapper:{maxWidth:e.custom.contentAreaWidth},addNewHeader:{padding:e.spacing(2),backgroundColor:e.palette.grey[300],fontSize:e.typography.h6.fontSize,color:e.typography.h6.color,fontWeight:e.typography.h6.fontWeight},addNewOther:{padding:e.spacing(2)},radioGroup:{display:"flex",flexDirection:"row",width:300},addResource:{width:600,marginTop:0},buttonIcon:{marginRight:10},expansionPanel:{marginBottom:e.spacing(1)},expansionPanelDetails:{flexDirection:"column"}}))(Hr)),Kr=a(2584),Yr=a.n(Kr),Jr=a(727),Qr=a.n(Jr),Zr=a(1463),Xr=a(2679),$r=a.n(Xr);function es(e){const{operation:t,operationsDispatcher:a,disableUpdate:n,target:r,verb:s}=e;return i.a.createElement(i.a.Fragment,null,i.a.createElement(me.a,{item:!0,xs:12,md:12},i.a.createElement(J.a,{variant:"subtitle1"},"Summary"," ","&"," ","Description",i.a.createElement(Ji.a,{variant:"middle"}))),i.a.createElement(me.a,{item:!0,md:1}),i.a.createElement(me.a,{item:!0,md:5},i.a.createElement(Gt.a,{margin:"dense",fullWidth:!0,label:"Description",multiline:!0,disabled:n,rows:"4",value:t.description,variant:"outlined",onChange:e=>{let{target:{value:t}}=e;return a({action:"description",data:{target:r,verb:s,value:t}})}})),i.a.createElement(me.a,{item:!0,md:5},i.a.createElement(Gt.a,{id:"operation_summary",label:"Summary",margin:"dense",variant:"outlined",fullWidth:!0,disabled:n,multiline:!0,rows:"4",value:t.summary,onChange:e=>{let{target:{value:t}}=e;return a({action:"summary",data:{target:r,verb:s,value:t}})}})),i.a.createElement(me.a,{item:!0,md:1}))}es.propTypes={disableUpdate:s.a.bool,operation:s.a.shape({target:s.a.string.isRequired,verb:s.a.string.isRequired,spec:s.a.shape({}).isRequired}).isRequired,operationsDispatcher:s.a.func.isRequired,target:s.a.string.isRequired,verb:s.a.string.isRequired},es.defaultProps={disableUpdate:!1};var ts=a(1723),as=a.n(ts);function ns(e,t){if(null==e)return{};var a,n,i=function(e,t){if(null==e)return{};var a,n,i={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(i[a]=e[a]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}const is={V3:["3.0.0","3.0.1","3.0.2"],V2:["2.0"]};function rs(e){return e.openapi||e.swagger}function ss(e,t){const a=rs(t);let n=[];return is.V3.includes(a)?Array.isArray(e.security)&&e.security.find(e=>e.default)?n=e.security.find(e=>e.default).default:e["x-scope"]&&(n=[e["x-scope"]]):is.V2.includes(a)&&(Array.isArray(e.security)&&e.security.find(e=>e.default)?n=e.security.find(e=>e.default).default:e["x-scope"]&&(n=[e["x-scope"]])),n}function os(e){const t={};for(const a of e){const{target:e,verb:n}=a,i=ns(a,["target","verb"]);t[e]?t[e][n]=i:t[e]={[n]:i}}return t}function ls(e){let t=!1;return"object"==typeof e&&Object.keys(e).map(e=>(t="$ref"===e,e)),t}function cs(e){const{operation:t,operationsDispatcher:a,operationRateLimits:n,api:r,disableUpdate:s,spec:o,target:l,verb:c,sharedScopes:p}=e,d=ss(t,o),m=null===r.apiThrottlingPolicy,u=r.scopes.filter(e=>!e.shared),g=Object(W.e)();return i.a.createElement(i.a.Fragment,null,i.a.createElement(me.a,{item:!0,xs:12,md:12},i.a.createElement(J.a,{gutterBottom:!0,variant:"subtitle1"},i.a.createElement(W.a,{id:"Apis.Details.Resources.components.operationComponents.OperationGovernance.title",defaultMessage:"Operation Governance"}),i.a.createElement(J.a,{style:{marginLeft:"10px"},gutterBottom:!0,variant:"caption"},i.a.createElement(W.a,{id:"Apis.Details.Resources.components.operationComponents.OperationGovernance.subTitle",defaultMessage:"(Security, Rate Limiting & Scopes)"})),i.a.createElement(Ji.a,{variant:"middle"}))),i.a.createElement(me.a,{item:!0,xs:1}),i.a.createElement(me.a,{item:!0,xs:11},i.a.createElement(zt.a,{disabled:s,component:"fieldset"},i.a.createElement(At.a,{control:i.a.createElement(Ia.a,{checked:t["x-auth-type"]&&"none"!==t["x-auth-type"].toLowerCase(),onChange:e=>{let{target:{checked:t}}=e;return a({action:"authType",data:{target:l,verb:c,value:t}})},size:"small",color:"primary"}),label:"Security",labelPlacement:"start"})),i.a.createElement("sup",{style:{marginLeft:"10px"}},i.a.createElement(se.a,{title:i.a.createElement(W.a,{id:"Apis.Details.Resources.components.operationComponents.OperationGovernance.Security.tooltip",defaultMessage:"This will enable/disable Application Level securities defined in the Runtime Configurations page."}),fontSize:"small","aria-label":"Operation security",placement:"right-end",interactive:!0},i.a.createElement(Le.a,null)))),i.a.createElement(me.a,{item:!0,md:1}),i.a.createElement(me.a,{item:!0,md:5},i.a.createElement(Gt.a,{id:"operation_rate_limiting_policy",select:!0,fullWidth:!m,SelectProps:{autoWidth:!0,IconComponent:m?as.a:"span"},disabled:s||!m,label:m?g.formatMessage({id:"Apis.Details.Resources.components.operationComponents.OperationGovernance.rate.limiting.policy",defaultMessage:"Rate limiting policy"}):i.a.createElement("div",null,i.a.createElement(W.a,{id:"Apis.Details.Resources.components.operationComponents.OperationGovernance.rate.limiting.governed.by",defaultMessage:"Rate limiting is governed by "}),i.a.createElement(fe.a,{fontWeight:"fontWeightBold",display:"inline",color:"primary.main"},i.a.createElement(W.a,{id:"Apis.Details.Resources.components.operationComponents.OperationGovernance.rate.limiting.API.level",defaultMessage:"API Level"}))),value:m&&t["x-throttling-tier"]?t["x-throttling-tier"]:"",onChange:e=>{let{target:{value:t}}=e;return a({action:"throttlingPolicy",data:{target:l,verb:c,value:t}})},helperText:m?g.formatMessage({id:"Apis.Details.Resources.components.operationComponents.OperationGovernance.rate.limiting.policy.select",defaultMessage:"Select a rate limit policy for this operation"}):i.a.createElement("span",null,i.a.createElement(W.a,{id:"Apis.Details.Resources.components.operationComponents.OperationGovernance.rate.limiting.helperText.section1",defaultMessage:"Use "}),i.a.createElement(fe.a,{fontWeight:"fontWeightBold",display:"inline",color:"primary.main"},i.a.createElement(W.a,{id:"Apis.Details.Resources.components.operationComponents.OperationGovernance.rate.limiting.helperText.section2",defaultMessage:"Operation Level"})),i.a.createElement(W.a,{id:"Apis.Details.Resources.components.operationComponents.OperationGovernance.rate.limiting.helperText.section3",defaultMessage:" rate limiting to "}),i.a.createElement("b",null,i.a.createElement(W.a,{id:"Apis.Details.Resources.components.operationComponents.OperationGovernance.rate.limiting.helperText.section4",defaultMessage:"enable"})),i.a.createElement(W.a,{id:"Apis.Details.Resources.components.operationComponents.OperationGovernance.rate.limiting.helperText.section5",defaultMessage:" rate limiting per operation"})),margin:"dense",variant:"outlined"},n.map(e=>i.a.createElement(Yt.a,{key:e.name,value:e.name},e.displayName)))),i.a.createElement(me.a,{item:!0,md:6}),i.a.createElement(me.a,{item:!0,md:1}),i.a.createElement(me.a,{item:!0,md:5},t["x-auth-type"]&&"none"!==t["x-auth-type"].toLowerCase()?i.a.createElement(Gt.a,{id:"operation_scope",select:!0,SelectProps:{multiple:!0,renderValue:e=>Array.isArray(e)?e.join(", "):e},disabled:s,fullWidth:!0,label:0!==r.scopes.length||p?g.formatMessage({id:"Apis.Details.Resources.components.operationComponents.OperationGovernance.operation.scope.label.default",defaultMessage:"Operation scope"}):g.formatMessage({id:"Apis.Details.Resources.components.operationComponents.OperationGovernance.operation.scope.label.notAvailable",defaultMessage:"No scope available"}),value:d,onChange:e=>{let{target:{value:t}}=e;return a({action:"scopes",data:{target:l,verb:c,value:t?[t]:[]}})},helperText:i.a.createElement(W.a,{id:"Apis.Details.Resources.components.operationComponents.OperationGovernance.operation.scope.helperText",defaultMessage:"Select a scope to control permissions to this operation"}),margin:"dense",variant:"outlined"},i.a.createElement(Lr.a,null,i.a.createElement(W.a,{id:"Apis.Details.Resources.components.operationComponents.OperationGovernance.operation.scope.select.local",defaultMessage:"API Scopes"})),0!==u.length?u.map(e=>i.a.createElement(Yt.a,{key:e.scope.name,value:e.scope.name,dense:!0},i.a.createElement(ua.a,{checked:d.includes(e.scope.name),color:"primary"}),e.scope.name)):i.a.createElement(Yt.a,{value:"",disabled:!0},i.a.createElement("em",null,i.a.createElement(W.a,{id:"Apis.Details.Resources.components.operationComponents.OperationGovernance.operation.no.api.scope.available",defaultMessage:"No API scopes available"}))),i.a.createElement(Lr.a,null,i.a.createElement(W.a,{id:"Apis.Details.Resources.components.operationComponents.OperationGovernance.operation.scope.select.shared",defaultMessage:"Shared Scopes"})),p&&0!==p.length?p.map(e=>i.a.createElement(Yt.a,{key:e.scope.name,value:e.scope.name,dense:!0},i.a.createElement(ua.a,{checked:d.includes(e.scope.name),color:"primary"}),e.scope.name)):i.a.createElement(Yt.a,{value:"",disabled:!0},i.a.createElement("em",null,i.a.createElement(W.a,{id:"Apis.Details.Resources.components.operationComponents.OperationGovernance.operation.no.sharedpi.scope.available",defaultMessage:"No shared scopes available"})))):null),i.a.createElement(me.a,{item:!0,md:5,style:{marginTop:"14px"}},t["x-auth-type"]&&"none"!==t["x-auth-type"].toLowerCase()?!s&&i.a.createElement(B.b,{to:"/apis/".concat(r.id,"/scopes/create"),target:"_blank"},i.a.createElement(J.a,{style:{marginLeft:"10px"},color:"primary",display:"inline",variant:"caption"},i.a.createElement(W.a,{id:"Apis.Details.Resources.components.operationComponents.OperationGovernance.operation.scope.create.new.scope",defaultMessage:"Create New Scope"}),i.a.createElement(be.a,{style:{marginLeft:"2px"},fontSize:"small"}))):null),i.a.createElement(me.a,{item:!0,md:1}))}cs.propTypes={disableUpdate:s.a.bool,operation:s.a.shape({target:s.a.string.isRequired,verb:s.a.string.isRequired}).isRequired,spec:s.a.shape({}).isRequired,operationsDispatcher:s.a.func.isRequired,operationRateLimits:s.a.arrayOf(s.a.shape({})),api:s.a.shape({scopes:s.a.arrayOf(s.a.shape({}))}),target:s.a.string.isRequired,verb:s.a.string.isRequired,sharedScopes:s.a.arrayOf(s.a.shape({}))},cs.defaultProps={operationRateLimits:[],api:{scopes:[]},sharedScopes:[],disableUpdate:!1};var ps=a(1186),ds=a.n(ps),ms=a(1305);function us(){return(us=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function gs(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function hs(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?gs(a,!0).forEach(function(t){fs(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):gs(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function fs(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Es(e,t){if(null==e)return{};var a,n,i=function(e,t){if(null==e)return{};var a,n,i={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(i[a]=e[a]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function bs(e){const{InputProps:t,classes:a,ref:n}=e,r=Es(e,["InputProps","classes","ref"]);return i.a.createElement(Gt.a,us({InputProps:hs({inputRef:n,classes:{root:a.inputRoot,input:a.inputInput}},t)},r))}function ys(e){const{suggestion:t,index:a,itemProps:n,highlightedIndex:r,selectedItem:s}=e,o=r===a,l=(s||"").indexOf(t)>-1;return i.a.createElement(Yt.a,us({},n,{key:t,selected:o,component:"div",style:{fontWeight:l?500:400}}),t)}bs.propTypes={classes:s.a.object.isRequired,InputProps:s.a.object},ys.propTypes={highlightedIndex:s.a.oneOfType([s.a.oneOf([null]),s.a.number]).isRequired,index:s.a.number.isRequired,itemProps:s.a.object.isRequired,selectedItem:s.a.string.isRequired,suggestion:s.a.shape("").isRequired};const vs=Object(He.a)(e=>({root:{flexGrow:1},container:{flexGrow:1,position:"relative"},paper:{position:"absolute",zIndex:1e3,marginTop:e.spacing(-2),left:0,right:0},chip:{margin:e.spacing(.5,.25)},inputRoot:{flexWrap:"wrap"},inputInput:{width:"auto",flexGrow:1}}));function Cs(e){const t=vs(),{operation:a,operationsDispatcher:r,target:s,verb:o,arns:l}=e,[c,p]=Object(n.useState)(5e4);Object(n.useEffect)(()=>{a["x-amzn-resource-timeout"]&&p(a["x-amzn-resource-timeout"])},[]);return i.a.createElement(i.a.Fragment,null,i.a.createElement(me.a,{item:!0,md:12,xs:12},i.a.createElement(J.a,{variant:"subtitle1"},i.a.createElement(W.a,{id:"Apis.Details.Resources.components.operationComponents.AWSLambdaSettings.Title",defaultMessage:"AWS Lambda Settings"}),i.a.createElement(Ji.a,{variant:"middle"}))),i.a.createElement(me.a,{item:!0,md:1,xs:1}),i.a.createElement(me.a,{item:!0,md:7,xs:7},i.a.createElement(ms.a,{id:"downshift-options",onSelect:e=>{null!==e&&r({action:"amznResourceName",data:{target:s,verb:o,value:e}})}},e=>{let{clearSelection:n,getInputProps:c,getItemProps:p,getLabelProps:d,getMenuProps:m,highlightedIndex:u,inputValue:g,isOpen:h,openMenu:f,selectedItem:E}=e;const b=c({onChange:e=>{r({action:"amznResourceName",data:{target:s,verb:o,value:e.target.value}}),""===e.target.value&&n()},onBlur:()=>{n()},value:a["x-amzn-resource-name"],onFocus:f,placeholder:"Select or type an ARN"}),{onBlur:y,onChange:v,onFocus:C}=b,A=Es(b,["onBlur","onChange","onFocus"]);return i.a.createElement("div",{className:t.container},bs({variant:"outlined",required:!0,fullWidth:!0,classes:t,InputLabelProps:d({shrink:!0}),label:"Amazon Resource Name (ARN)",helperText:"Select or type an ARN",InputProps:{onBlur:y,onChange:v,onFocus:C,endAdornment:i.a.createElement(aa.a,{position:"end"},i.a.createElement(Dt.a,{className:t.helpIcon},"keyboard_arrow_down"))},inputProps:A}),i.a.createElement("div",m(),h?i.a.createElement(de.a,{className:t.paper,square:!0},function(e){let{showEmpty:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2?arguments[2]:void 0;const n=ds()(e.trim()).toLowerCase(),i=n.length;let r=0;return 0!==i||t?a.filter(e=>{const t=r<5&&e.slice(0,i).toLowerCase()===n;return t&&(r+=1),t}):[]}(g,{showEmpty:!0},l).map((e,t)=>ys({suggestion:e,index:t,itemProps:p({item:e}),highlightedIndex:u,selectedItem:E}))):null))})),i.a.createElement(me.a,{item:!0,md:1,xs:1}),i.a.createElement(me.a,{item:!0,md:1,xs:1},i.a.createElement(Gt.a,{id:"timeout-min",label:"min",variant:"outlined",helperText:"Set Timeout",type:"number",inputProps:{min:0,max:15,step:1},value:Math.floor(c/1e3/60),onChange:e=>{(e=>{if(""!==e.target.value){const t=1e3*(60*parseInt(e.target.value,10)+c/1e3%60);let a=0;p(a=t>9e5?9e5:t<1e3?1e3:t),r({action:"amznResourceTimeout",data:{target:s,verb:o,value:a}})}})(e)}})),i.a.createElement(me.a,{item:!0,md:1,xs:1},i.a.createElement(Gt.a,{id:"timeout-sec",label:"sec",variant:"outlined",type:"number",inputProps:{min:0,max:59,step:1},value:c/1e3%60,onChange:e=>{(e=>{if(""!==e.target.value){const t=1e3*(60*Math.floor(c/1e3/60)+parseInt(e.target.value,10));let a=0;p(a=t>9e5?9e5:t<1e3?1e3:t),r({action:"amznResourceTimeout",data:{target:s,verb:o,value:a}})}})(e)}})),i.a.createElement(me.a,{item:!0,md:1,xs:1}))}Cs.propTypes={operation:s.a.isRequired,operationsDispatcher:s.a.func.isRequired,target:s.a.string.isRequired,verb:s.a.string.isRequired,arns:s.a.shape([]).isRequired};var As=a(1426),Ss=a(1147),Os=a.n(Ss);const Ds={"2.0":{body:["integer","number","string","boolean","object"],formData:["integer","number","string","boolean","file"],query:["integer","number","string","boolean"],path:["integer","number","string","boolean"],header:["integer","number","string","boolean"]},"3.x":{body:["integer","number","string","boolean","object"],query:["integer","number","string","boolean"],path:["integer","number","string","boolean"],header:["integer","number","string","boolean"],cookie:["integer","number","string","boolean"]}};function Ps(e,t,a){return e?t:a}function ws(e,t){return t?Ds["2.0"===e?"2.0":"3.x"][t]:[]}function Ts(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function xs(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ts(a,!0).forEach(function(t){Is(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ts(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function Is(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Ms=Object(He.a)(()=>({formControl:{minWidth:120},parameterContainer:{alignItems:"center",justifyContent:"space-between"},checkBox:{color:"#7c7c7c"}}));function Rs(e){const{operation:t,operationsDispatcher:a,target:r,verb:s,specVersion:o,intl:l}=e,c=Object(n.useRef)(null),[p,d]=Object(n.useState)(0),m=function(e){return"2.0"===e?{in:"",name:"",type:"",required:""}:{in:"",name:"",schema:{type:""},required:""}}(o);const[u,g]=Object(n.useReducer)(function(e,t){const{type:a,value:n}=t;switch(a){case"in":case"name":case"required":return xs({},e,{[a]:n});case"type":return xs({},e,"2.0"===o?{[a]:n}:{schema:{[a]:n}});case"clear":return m;default:return e}},m);i.a.useEffect(()=>{d(c.current.offsetWidth)},[]);let h=!1;const f=t.parameters&&t.parameters.map(e=>e.in===u.in&&e.name===u.name);h=!(!f||!f.includes(!0));const E=Ms();function b(){g({type:"clear"})}function y(){"body"===u.in?a("2.0"===o?{action:"parameter",data:{target:r,verb:s,value:{name:u.name,description:"",required:u.required,in:u.in,schema:{type:u.type}}}}:{action:"requestBody",data:{target:r,verb:s,value:{description:"",required:u.required,content:{[u.name]:{schema:{type:"object"}}}}}}):a({action:"parameter",data:{target:r,verb:s,value:u}}),b()}return i.a.createElement(me.a,{container:!0,direction:"row",spacing:1,className:E.parameterContainer},i.a.createElement(me.a,{item:!0,xs:2,md:2},i.a.createElement(zt.a,{margin:"dense",variant:"outlined",className:E.formControl},i.a.createElement(As.a,{ref:c,htmlFor:"param-in",error:h},"Parameter Type"),i.a.createElement(Ot.a,{value:u.in,onChange:e=>{let{target:{name:t,value:a}}=e;return g({type:t,value:a})},labelWidth:p,inputProps:{name:"in",id:"param-in"},MenuProps:{getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"left"}},error:h},function(e){return"2.0"===e?["query","header","body","formData"]:["query","header","cookie","body"]}(o).map(e=>"body"!==e&&"formData"!==e||["post","put","patch"].includes(s)?i.a.createElement(Yt.a,{value:e,dense:!0},qe(e)):null)),h?i.a.createElement(Ha.a,{id:"my-helper-text",error:!0},i.a.createElement(W.a,{id:"Apis.Details.Resources.components.operationComponents.parameter.name.exists",defaultMessage:"Parameter type already exists"})):i.a.createElement(Ha.a,{id:"my-helper-text"},i.a.createElement(W.a,{id:"Apis.Details.Resources.components.operationComponents.select.parameter.type",defaultMessage:"Select the parameter type"})))),i.a.createElement(me.a,{item:!0,xs:2,md:2},i.a.createElement(Gt.a,{id:"parameter-name",label:"body"===u.in?Ps("2.0"===o,i.a.createElement(W.a,{id:"Apis.Details.Resources.components.operationComponents.parameter.name",defaultMessage:"Parameter Name"}),i.a.createElement(W.a,{id:"Apis.Details.Resources.components.operationComponents.content.type",defaultMessage:"Content Type"})):i.a.createElement(W.a,{id:"Apis.Details.Resources.components.operationComponents.parameter.name",defaultMessage:"Parameter Name"}),name:"name",value:u.name,onChange:e=>{let{target:{name:t,value:a}}=e;return g({type:t,value:a})},helperText:(v=u.in,h?l.formatMessage({id:"Apis.Details.Resources.components.operationComponents.AddParameter.parameter.name.already.exists",defaultMessage:"Parameter name already exists"}):"body"===v&&"2.0"!==o?l.formatMessage({id:"Apis.Details.Resources.components.operationComponents.AddParameter.enter.content.type",defaultMessage:"Enter Content Type"}):l.formatMessage({id:"Apis.Details.Resources.components.operationComponents.AddParameter.enter.parameter.name",defaultMessage:"Enter Parameter Name"})),margin:"dense",variant:"outlined",onKeyPress:e=>{"Enter"===e.key&&(e.preventDefault(),y())},error:h})),i.a.createElement(me.a,{item:!0,xs:2,md:2},i.a.createElement(zt.a,{margin:"dense",variant:"outlined",className:E.formControl},i.a.createElement(As.a,{ref:c,htmlFor:"data-type",error:h},i.a.createElement(W.a,{id:"Apis.Details.Resources.components.operationComponents.data.type",defaultMessage:"Data Type"})),i.a.createElement(Ot.a,{value:void 0!==u.schema?u.schema.type:u.type,onChange:e=>{let{target:{name:t,value:a}}=e;return g({type:t,value:a})},labelWidth:p,inputProps:{name:"type",id:"data-type"},MenuProps:{getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"left"}},error:h},ws(o,u.in).map(e=>i.a.createElement(Yt.a,{value:e,dense:!0},qe(e)))),i.a.createElement(Ha.a,{id:"my-helper-text"},"Select the data type"))),i.a.createElement(me.a,{item:!0,xs:2,md:2},i.a.createElement(zt.a,{component:"fieldset",className:E.formControl},i.a.createElement(At.a,{className:E.checkBox,control:i.a.createElement(ua.a,{checked:u.required,onChange:e=>{let{target:{name:t,value:a}}=e;return g({type:t,value:!a})},value:u.required,inputProps:{name:"required"}}),label:i.a.createElement(W.a,{id:"Apis.Details.Resources.components.operationComponents.required",defaultMessage:"Required"})}),i.a.createElement(Ha.a,null,i.a.createElement(W.a,{id:"Apis.Details.Resources.components.operationComponents.required.helper.text",defaultMessage:"Check whether the parameter is required."})))),i.a.createElement(me.a,{item:!0,xs:2,md:2},i.a.createElement(se.a,{title:i.a.createElement(W.a,{id:"Apis.Details.Resources.components.operationComponents.AddParameter.add.tooltip",defaultMessage:"Add new parameter"}),"aria-label":"AddParameter",placement:"bottom",interactive:!0},i.a.createElement("span",null,i.a.createElement(je.a,{style:{marginLeft:"20px",marginBottom:"15px",marginRight:"20px"},disabled:"2.0"===o?!u.name||!u.type||!u.in||h:!u.name||!u.schema.type||!u.in||h,size:"small",variant:"outlined","aria-label":"add",color:"primary",onClick:y},i.a.createElement(W.a,{id:"Apis.Details.Resources.components.operationComponents.AddParameter.add",defaultMessage:"Add"})))),i.a.createElement("sup",null,i.a.createElement(se.a,{title:i.a.createElement(W.a,{id:"Apis.Details.Resources.components.AddParameter.clear.inputs.tooltip",defaultMessage:"Clear inputs"}),"aria-label":"clear-inputs",placement:"bottom",interactive:!0},i.a.createElement("span",null,i.a.createElement(Pt.a,{onClick:b,size:"small"},i.a.createElement(Os.a,null)))))));var v}Rs.propTypes={operation:s.a.shape({}).isRequired,operationsDispatcher:s.a.func.isRequired,target:s.a.string.isRequired,verb:s.a.string.isRequired,specVersion:s.a.string.isRequired,intl:s.a.shape({}).isRequired};var ks=i.a.memo(Object(W.d)(Rs)),Ns=a(769),js=a.n(Ns);function _s(e){const{contentType:t,content:a,operation:n,disableUpdate:r,hideParameterEdit:s,operationsDispatcher:o,target:l,verb:c}=e;return i.a.createElement(Pe.a,{key:t},i.a.createElement(De.a,{align:"left"},i.a.createElement(W.a,{id:"Apis.Details.Resources.components.operationComponents.ListParameter.body",defaultMessage:"Body"})),i.a.createElement(De.a,null,t),i.a.createElement(De.a,{align:"left"},a.schema.type),i.a.createElement(De.a,{align:"left"},n.requestBody.required?i.a.createElement(W.a,{id:"Apis.Details.Resources.components.operationComponents.ListParameter.yes",defaultMessage:"Yes"}):i.a.createElement(W.a,{id:"Apis.Details.Resources.components.operationComponents.ListParameter.no",defaultMessage:"No"})),!r&&i.a.createElement(De.a,{align:"left"},s&&i.a.createElement(se.a,{title:"Edit"},i.a.createElement(Pt.a,{onClick:()=>{},fontSize:"small"},i.a.createElement(js.a,{fontSize:"small"}))),i.a.createElement(se.a,{title:i.a.createElement(W.a,{id:"Apis.Details.Resources.components.operationComponents.ListParameter.delete",defaultMessage:"Delete"})},i.a.createElement(Pt.a,{disabled:r,onClick:()=>{o({action:"requestBody",data:{target:l,verb:c,value:{description:"",required:!1,content:{}}}})},fontSize:"small"},i.a.createElement(Qr.a,{fontSize:"small"})))))}_s.propTypes={contentType:s.a.string.isRequired,content:s.a.shape({}).isRequired,operation:s.a.shape({}).isRequired,disableUpdate:s.a.bool.isRequired,hideParameterEdit:s.a.bool.isRequired,operationsDispatcher:s.a.func.isRequired,target:s.a.string.isRequired,verb:s.a.string.isRequired};var Ls=_s;function qs(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function Ws(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?qs(a,!0).forEach(function(t){Us(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):qs(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function Us(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Bs=Object(He.a)(e=>({form:{display:"flex",flexDirection:"column",margin:"auto",width:"fit-content"},formControl:{marginTop:e.spacing(2),minWidth:120},formControlLabel:{marginTop:e.spacing(1)}}));function Fs(e){const{operationsDispatcher:t,target:a,verb:r,editingParameter:s,setEditingParameter:o,version:l}=e;const[c,p]=Object(n.useReducer)(function(e,t){const{action:a,value:n}=t,i=e.schema?Ws({},e,{schema:Ws({},e.schema)}):Ws({},e);switch(a){case"description":case"required":i[a]=n;break;case"type":case"format":i.schema?i.schema[a]=n:i[a]=n}return i},s),d=Bs(),m=()=>{o(null)};const u=null!==c;return u?i.a.createElement(Et.a,{fullWidth:!0,maxWidth:"md",open:u,onClose:m,"aria-labelledby":"edit-parameter"},i.a.createElement(Fa.a,{disableTypography:!0,id:"edit-parameter"},i.a.createElement(J.a,{variant:"h6"},i.a.createElement(W.a,{id:"Apis.Details.Resources.components.operationComponents.EditParameter.title",defaultMessage:"Edit"})," ",i.a.createElement(J.a,{display:"inline",variant:"subtitle1"},qe(c.in)," ",":",c.name))),i.a.createElement(yt.a,null,i.a.createElement(me.a,{container:!0,direction:"row",spacing:2,justify:"flex-start",alignItems:"center"},i.a.createElement(me.a,{item:!0,md:6},i.a.createElement(Gt.a,{value:qe(c.in),disabled:!0,fullWidth:!0,label:i.a.createElement(W.a,{id:"Apis.Details.Resources.components.operationComponents.EditParameter.type",defaultMessage:"Parameter Type"}),margin:"dense",variant:"outlined"})),i.a.createElement(me.a,{item:!0,md:6},i.a.createElement(Gt.a,{value:c.name,disabled:!0,fullWidth:!0,label:i.a.createElement(W.a,{id:"Apis.Details.Resources.components.operationComponents.EditParameter.name",defaultMessage:"Name"}),margin:"dense",variant:"outlined"})),i.a.createElement(me.a,{item:!0,md:12},i.a.createElement(Gt.a,{value:c.description,fullWidth:!0,label:i.a.createElement(W.a,{id:"Apis.Details.Resources.components.operationComponents.EditParameter.description",defaultMessage:"Description"}),multiline:!0,rows:"4",name:"description",margin:"normal",variant:"outlined",onChange:e=>{let{target:{name:t,value:a}}=e;p({action:t,value:a})}})),i.a.createElement(me.a,{item:!0,md:6},i.a.createElement(zt.a,{required:!0,fullWidth:!0,margin:"dense",variant:"outlined",className:d.formControl},i.a.createElement(As.a,{required:!0,id:"edit-parameter-type"},i.a.createElement(W.a,{id:"Apis.Details.Resources.components.operationComponents.EditParameter.data.type",defaultMessage:"Data Type"})),i.a.createElement(Ot.a,{value:c.schema?c.schema.type:c.type,onChange:e=>{let{target:{name:t,value:a}}=e;return p({action:t,value:a})},inputProps:{name:"type",id:"edit-parameter-type"},MenuProps:{getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"left"}}},ws(l,c.in).map(e=>i.a.createElement(Yt.a,{value:e,dense:!0},qe(e)))),i.a.createElement(Ha.a,null,i.a.createElement(W.a,{id:"Apis.Details.Resources.components.operationComponents.EditParameter.select.schema.data.type",defaultMessage:"Select the Schema Type"})))),i.a.createElement(me.a,{item:!0,md:6},i.a.createElement(zt.a,{fullWidth:!0,margin:"dense",variant:"outlined",className:d.formControl,disabled:c.schema?Ps("boolean"===c.schema.type||"object"===c.schema.type,!0,!1):Ps("boolean"===c.type||"object"===c.type,!0,!1)},i.a.createElement(As.a,{id:"edit-parameter-format"},i.a.createElement(W.a,{id:"Apis.Details.Resources.components.operationComponents.EditParameter.data.format",defaultMessage:"Data Format"})),i.a.createElement(Ot.a,{value:c.schema?c.schema.format:c.format,onChange:e=>{let{target:{name:t,value:a}}=e;return p({action:t,value:a})},inputProps:{name:"format",id:"edit-parameter-format"},MenuProps:{getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"left"}}},function(e){switch(e){case"integer":return["int64","int32"];case"number":return["float","double"];case"string":return["date","date-time","byte","binary","password"];default:return[]}}(c.schema?c.schema.type:c.type).map(e=>i.a.createElement(Yt.a,{value:e,dense:!0},qe(e)))),i.a.createElement(Ha.a,null,i.a.createElement(W.a,{id:"Apis.Details.Resources.components.operationComponents.EditParameter.select.format.of.data.type",defaultMessage:"Select the Format of Data Type"})))),i.a.createElement(me.a,{item:!0},i.a.createElement(zt.a,{component:"fieldset"},i.a.createElement(At.a,{control:i.a.createElement(ua.a,{checked:c.required,onChange:e=>{let{target:{name:t,checked:a}}=e;return p({action:t,value:a})},value:c.required,inputProps:{name:"required"}}),label:i.a.createElement(W.a,{id:"Apis.Details.Resources.components.operationComponents.EditParameter.required",defaultMessage:"Required"})}))),i.a.createElement(me.a,{container:!0,direction:"row",justify:"flex-end",alignItems:"center"},i.a.createElement(Ba.a,null,i.a.createElement(W.a,{id:"Apis.Details.Resources.components.operationComponents.EditParameter.use.done.button.to.persist.changes",defaultMessage:"Use DONE button in the page to persist changes"}))))),i.a.createElement(bt.a,null,i.a.createElement(je.a,{size:"small",onClick:m,color:"primary"},i.a.createElement(W.a,{id:"Apis.Details.Resources.components.operationComponents.EditParameter.close",defaultMessage:"Close"})),i.a.createElement(je.a,{size:"small",onClick:function(){t({action:"parameter",data:{target:a,verb:r,value:c}}),m()},variant:"contained",color:"primary"},i.a.createElement(W.a,{id:"Apis.Details.Resources.components.operationComponents.EditParameter.done",defaultMessage:"Done"})))):null}Fs.propTypes={operationsDispatcher:s.a.func.isRequired,target:s.a.string.isRequired,verb:s.a.string.isRequired,editingParameter:s.a.shape({}).isRequired,setEditingParameter:s.a.func.isRequired,version:s.a.string.isRequired};const zs=Object(He.a)({root:{width:"100%",overflowX:"auto"},table:{minWidth:650}});function Vs(e){const{operation:t,operationsDispatcher:a,target:r,verb:s,disableUpdate:o,hideParameterEdit:l,specVersion:c,resolvedSpec:p}=e,d=zs(),[m,u]=Object(n.useState)(null);return i.a.createElement(i.a.Fragment,null,null!==m&&i.a.createElement(Fs,{operationsDispatcher:a,target:r,verb:s,editingParameter:m,setEditingParameter:u,version:c}),i.a.createElement(Oe.a,{className:d.table,"aria-label":"parameters list"},i.a.createElement(Yn.a,null,i.a.createElement(Pe.a,null,i.a.createElement(De.a,{align:"left"},i.a.createElement(W.a,{id:"Apis.Details.Resources.components.operationComponents.ListParameter.parameter.type",defaultMessage:"Parameter Type"})),i.a.createElement(De.a,null,i.a.createElement(W.a,{id:"Apis.Details.Resources.components.operationComponents.ListParameter.parameter.name",defaultMessage:"Name"})),i.a.createElement(De.a,{align:"left"},i.a.createElement(W.a,{id:"Apis.Details.Resources.components.operationComponents.ListParameter.data.type",defaultMessage:"Data Type"})),i.a.createElement(De.a,{align:"left"},i.a.createElement(W.a,{id:"Apis.Details.Resources.components.operationComponents.ListParameter.required",defaultMessage:"Required"})),!o&&i.a.createElement(De.a,{align:"left"},i.a.createElement(W.a,{id:"Apis.Details.Resources.components.operationComponents.ListParameter.actions",defaultMessage:"Actions"})))),i.a.createElement(Kn.a,null,t.parameters&&t.parameters.map((e,t)=>{const n=ls(e),l=n?p.paths[r][s].parameters[t]:e;return i.a.createElement(Pe.a,{key:l.name},i.a.createElement(De.a,{align:"left"},qe(l.in)),i.a.createElement(De.a,{align:"left"},l.name),i.a.createElement(De.a,{align:"left"},qe(l.schema?l.schema.type:l.type)),i.a.createElement(De.a,{align:"left"},l.required?i.a.createElement(W.a,{id:"Apis.Details.Resources.components.operationComponents.ListParameter.yes",defaultMessage:"Yes"}):i.a.createElement(W.a,{id:"Apis.Details.Resources.components.operationComponents.ListParameter.no",defaultMessage:"No"})),!o&&i.a.createElement(De.a,{align:"left"},!n&&i.a.createElement(se.a,{title:i.a.createElement(W.a,{id:"Apis.Details.Resources.components.operationComponents.ListParameter.edit",defaultMessage:"Edit"})},i.a.createElement(Pt.a,{onClick:()=>u(e),fontSize:"small"},i.a.createElement(js.a,{fontSize:"small"}))),i.a.createElement(se.a,{title:i.a.createElement(W.a,{id:"Apis.Details.Resources.components.operationComponents.ListParameter.delete",defaultMessage:"Delete"})},i.a.createElement(Pt.a,{disabled:o,onClick:()=>a({action:"deleteParameter",data:{target:r,verb:s,value:l}}),fontSize:"small"},i.a.createElement(Qr.a,{fontSize:"small"})))))}),t.requestBody&&(ls(t.requestBody)?Object.entries(p.paths[r][s].requestBody.content).map(e=>{let[n,c]=e;return i.a.createElement(Ls,{contentType:n,content:c,operation:t,disableUpdate:o,hideParameterEdit:l,operationsDispatcher:a,target:r,verb:s})}):Object.entries(t.requestBody.content).map(e=>{let[n,c]=e;return i.a.createElement(Ls,{contentType:n,content:c,operation:t,disableUpdate:o,hideParameterEdit:l,operationsDispatcher:a,target:r,verb:s})})))))}function Hs(e){const{operation:t,spec:a,target:n,verb:r,operationsDispatcher:s,disableUpdate:o,resolvedSpec:l}=e,c=rs(a),p=t.parameters&&0!==t.parameters.length||t.requestBody;return i.a.createElement(i.a.Fragment,null,i.a.createElement(me.a,{item:!0,xs:12,md:12},i.a.createElement(J.a,{variant:"subtitle1"},"Parameters",i.a.createElement(Ji.a,{variant:"middle"}))),i.a.createElement(me.a,{item:!0,xs:1}),i.a.createElement(me.a,{item:!0,xs:11},!o&&i.a.createElement(ks,{target:n,verb:r,operationsDispatcher:s,operation:t,specVersion:c})),i.a.createElement(me.a,{item:!0,md:1}),i.a.createElement(me.a,{item:!0,md:11},p&&i.a.createElement(Vs,{disableUpdate:o,target:n,verb:r,operationsDispatcher:s,operation:t,spec:a,specVersion:c,resolvedSpec:l})))}Vs.defaultProps={hideParameterEdit:!1,disableUpdate:!1},Vs.propTypes={operation:s.a.shape({}).isRequired,spec:s.a.shape({}).isRequired,hideParameterEdit:s.a.bool,operationsDispatcher:s.a.func.isRequired,target:s.a.string.isRequired,verb:s.a.string.isRequired,disableUpdate:s.a.bool,specVersion:s.a.string.isRequired,resolvedSpec:s.a.shape({}).isRequired},Hs.propTypes={target:s.a.string.isRequired,verb:s.a.string.isRequired,spec:s.a.shape({}).isRequired,operationsDispatcher:s.a.func.isRequired,operation:s.a.shape({}).isRequired,disableUpdate:s.a.bool,resolvedSpec:s.a.shape({}).isRequired},Hs.defaultProps={disableUpdate:!1};var Gs=a(1407),Ks=a(1960),Ys=a(1483),Js=a(1445),Qs=a(1446),Zs=a(1412);function Xs(e){const{open:t,onClose:a,closeEditor:n}=e;return i.a.createElement(Et.a,{open:t,onClose:a,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},i.a.createElement(Fa.a,{id:"alert-dialog-title"},"Discard changes and Close"),i.a.createElement(yt.a,null,i.a.createElement(Ba.a,{id:"alert-dialog-description"},"All the unsaved changes will be lost")),i.a.createElement(bt.a,null,i.a.createElement(je.a,{onClick:a,color:"primary"},"Cancel"),i.a.createElement(je.a,{onClick:()=>{a(),n()},color:"primary",autoFocus:!0},"Close")))}function $s(){return($s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}Xs.propTypes={open:s.a.bool.isRequired,onClose:s.a.func.isRequired,closeEditor:s.a.func.isRequired};const eo=Object(n.lazy)(()=>Promise.resolve().then(a.t.bind(null,2688,7))),to=Object(He.a)(e=>({appBar:{top:"auto",bottom:0},title:{marginLeft:e.spacing(2),flex:1}})),ao=i.a.forwardRef((e,t)=>i.a.createElement(Zs.a,$s({in:!0,ref:t},e)));function no(e){const t=to(),[a]=Object(ue.d)(),{open:r,onClose:s,prefersDarkMode:o,originalResourcePolicy:l,selectedPolicy:c,setPolicyContent:p,resourcePoliciesDispatcher:d,direction:m}=e,[u,g]=Object(n.useState)(null),[h,f]=Object(n.useState)(!1),[E,b]=Object(n.useState)(!1),y={selectOnLineNumbers:!0,readOnly:E,smoothScrolling:!0,wordWrap:"on"},v={language:"xml",height:"calc(100vh)",theme:o?"vs-dark":"vs",value:c.content,options:y,onChange:p};return i.a.createElement(Et.a,{fullScreen:!0,open:r,onClose:s,TransitionComponent:ao},i.a.createElement(Js.a,{position:"fixed",color:"default",className:t.appBar},i.a.createElement(Qs.a,{variant:"dense"},i.a.createElement(me.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"flex-start"},i.a.createElement(me.a,{item:!0},i.a.createElement(je.a,{disabled:E,variant:"outlined",color:"primary",className:t.title,onClick:function(){b(!0),a.updateResourcePolicy(c).then(e=>{te.a.success("Resource policy updated successfully"),d({action:"update",data:{value:e.body,direction:m}}),s()}).catch(e=>{if(e.response)te.a.error(e.response.body.description),g(e.response.body);else{const t=e.message||"Something went wrong while updating resource policy!";te.a.error(t),g(t)}console.error(e)}).finally(()=>b(!1))}},"save & close",E&&i.a.createElement($e.a,{size:18}))),i.a.createElement(me.a,{item:!0},i.a.createElement(je.a,{color:"inherit",className:t.title,onClick:function(){c.content!==l.content?f(!0):s()}},"close"))))),i.a.createElement(me.a,{container:!0,direction:"row",justify:"center",alignItems:"center"},u&&i.a.createElement(me.a,{item:!0,xs:12},i.a.createElement(yi.a,{onClose:()=>g(null),disableActions:!0,dense:!0,paperProps:{elevation:1},type:"error",message:u}))),i.a.createElement(me.a,{item:!0,xs:12},i.a.createElement(n.Suspense,{fallback:i.a.createElement($e.a,{disableShrink:!0})},i.a.createElement(eo,v))),i.a.createElement(Xs,{open:h,onClose:()=>{p(l.content),f(!1)},closeEditor:s}))}function io(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function ro(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?io(a,!0).forEach(function(t){so(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):io(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function so(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}no.defaultProps={open:!1,onClose:()=>{},prefersDarkMode:!1},no.propTypes={open:s.a.bool,onClose:s.a.func,prefersDarkMode:s.a.bool,originalResourcePolicy:s.a.shape({}).isRequired,selectedPolicy:s.a.shape({}).isRequired,setPolicyContent:s.a.func.isRequired,resourcePoliciesDispatcher:s.a.func.isRequired,direction:s.a.oneOf(["in","out"]).isRequired};const oo=Object(n.lazy)(()=>Promise.resolve().then(a.t.bind(null,2688,7)));function lo(e){const{resourcePolicy:t,resourcePoliciesDispatcher:a}=e,[r,s]=Object(n.useState)(t.in),[o,l]=Object(n.useState)(t.out);Object(n.useEffect)(()=>{s(t.in),l(t.out)},[t]);const c=Object(Gs.a)("(prefers-color-scheme: dark)"),[p,d]=Object(n.useState)(!1),[m,u]=Object(n.useState)("in"),g="in"===m?r:o,h={language:"xml",height:"calc(50vh)",theme:c?"vs-dark":"vs",value:g.content,options:{selectOnLineNumbers:!0,readOnly:!0,smoothScrolling:!0,wordWrap:"on"}};return i.a.createElement(i.a.Fragment,null,i.a.createElement(me.a,{item:!0,xs:12,md:12},i.a.createElement(J.a,{variant:"subtitle1"},"Mediation",i.a.createElement(Ji.a,{variant:"middle"}))),i.a.createElement(me.a,{item:!0,xs:12},i.a.createElement(Ks.a,{value:m,indicatorColor:"primary",textColor:"primary",onChange:(e,t)=>u(t),"aria-label":"Resource mediation in/out tabs"},i.a.createElement(Ys.a,{value:"in",label:"In"}),i.a.createElement(Ys.a,{value:"out",label:"Out"})),i.a.createElement(fe.a,{p:1},i.a.createElement(je.a,{onClick:()=>d(!0),variant:"outlined",size:"small",color:"primary"},"Edit"," ",i.a.createElement(js.a,null)),!p&&i.a.createElement(de.a,{elevation:4},i.a.createElement(n.Suspense,{fallback:i.a.createElement($e.a,{disableShrink:!0})},i.a.createElement(oo,h))))),i.a.createElement(no,{resourcePoliciesDispatcher:a,setPolicyContent:function(e){"in"===m?s(ro({},r,{content:e})):l(ro({},o,{content:e}))},selectedPolicy:g,originalResourcePolicy:t[m],direction:m,prefersDarkMode:c,onClose:()=>d(!1),open:p}))}function co(e){const{operation:t,operationsDispatcher:a,highlight:r,operationRateLimits:s,api:o,disableDelete:l,disableUpdate:c,onMarkAsDelete:p,markAsDelete:d,hideParameters:m,spec:u,resourcePolicy:g,resourcePoliciesDispatcher:h,target:f,verb:E,arns:b,resolvedSpec:y,sharedScopes:v}=e,[C,A]=Object(n.useState)(!1),S=Object(He.a)(e=>{const t=e.custom.resourceChipColors[E];return{customButton:{"&:hover":{backgroundColor:t},backgroundColor:t,width:e.spacing(12)},paperStyles:{border:"1px solid ".concat(t),borderBottom:""},customDivider:{backgroundColor:t},linearProgress:{height:"2px"},highlightSelected:{backgroundColor:V.a.hexToRGBA(t,.1)},contentNoMargin:{margin:e.spacing(0)},overlayUnmarkDelete:{position:"absolute",zIndex:e.zIndex.operationDeleteUndo,right:"10%"}}}),O=o.operations[f]&&o.operations[f][E.toUpperCase()],D=O&&Array.isArray(O.usedProductIds)&&O.usedProductIds.length;function P(e){e.stopPropagation(),e.preventDefault(),A(!1),p({verb:E,target:f},!d)}const w=S();return i.a.createElement(i.a.Fragment,null,d&&i.a.createElement(fe.a,{className:w.overlayUnmarkDelete},i.a.createElement(se.a,{title:"Marked for delete","aria-label":"Marked for delete"},i.a.createElement(je.a,{onClick:P,variant:"outlined",style:{marginTop:"10px"}},i.a.createElement(W.a,{id:"Apis.Details.Resources.components.Operation.undo.delete",defaultMessage:"Undo Delete"})))),i.a.createElement(Ma.a,{expanded:C,onChange:function(e,t){A(t)},disabled:d,className:w.paperStyles},i.a.createElement(Ra.a,{className:r?w.highlightSelected:"",disableRipple:!0,disableTouchRipple:!0,expandIcon:i.a.createElement(ja.a,null),"aria-controls":"panel2a-content",id:"panel2a-header",classes:{content:w.contentNoMargin}},i.a.createElement(me.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center",spacing:0},i.a.createElement(me.a,{item:!0,md:4},i.a.createElement(Zr.a,{invisible:!t["x-wso2-new"],color:"error",variant:"dot"},i.a.createElement(je.a,{disableFocusRipple:!0,variant:"contained",size:"small",className:w.customButton},E)),i.a.createElement(J.a,{display:"inline",style:{margin:"0px 30px"},variant:"h6",gutterBottom:!0},f,i.a.createElement(J.a,{display:"inline",style:{margin:"0px 30px"},variant:"caption",gutterBottom:!0},t.summary))),D?i.a.createElement(me.a,{item:!0,md:3},i.a.createElement(fe.a,{display:"flex",justifyContent:"center"},i.a.createElement($r.a,{fontSize:"small"}),i.a.createElement(fe.a,{display:"flex",ml:1,mt:.25,fontSize:"caption.fontSize"},i.a.createElement(W.a,{id:"Apis.Details.Resources.components.Operation.this.operation.used.in.products",defaultMessage:"This operation is used in {isUsedInAPIProduct} API product(s)",values:{isUsedInAPIProduct:D}})))):i.a.createElement(me.a,{item:!0,md:3}),i.a.createElement(me.a,{item:!0,md:4},i.a.createElement(J.a,{display:"inline",style:{margin:"0px 30px"},variant:"caption",gutterBottom:!0},i.a.createElement("b",null,null!=ss(t,u)&&"Scope : "),null!=ss(t,u)&&ss(t,u).join(", "))),!(l||d)&&i.a.createElement(me.a,{item:!0,md:1,justify:"flex-end",container:!0},i.a.createElement(se.a,{title:D?i.a.createElement(W.a,{id:"Apis.Details.Resources.components.Operation.cannot.delete.when.used.in.api.products",defaultMessage:"Cannot delete operation when used in an API product"}):i.a.createElement(W.a,{id:"Apis.Details.Resources.components.Operation.Delete",defaultMessage:"Delete"}),"aria-label":i.a.createElement(W.a,{id:"Apis.Details.Resources.components.Operation.delete.operation",defaultMessage:"Delete operation"})},i.a.createElement("div",null,i.a.createElement(Pt.a,{disabled:Boolean(D)||c,onClick:P,"aria-label":"delete"},i.a.createElement(Qr.a,{fontSize:"small"}))))))),i.a.createElement(Ji.a,{light:!0,className:w.customDivider}),i.a.createElement(ka.a,null,i.a.createElement(me.a,{spacing:2,container:!0,direction:"row",justify:"flex-start",alignItems:"flex-start"},i.a.createElement(es,{operation:t,operationsDispatcher:a,disableUpdate:c,target:f,verb:E}),i.a.createElement(cs,{operation:t,operationsDispatcher:a,operationRateLimits:s,api:o,disableUpdate:c,spec:u,target:f,verb:E,sharedScopes:v}),!m&&i.a.createElement(Hs,{operation:t,operationsDispatcher:a,operationRateLimits:s,api:o,disableUpdate:c,spec:u,target:f,verb:E,resolvedSpec:y}),g&&i.a.createElement(lo,{operation:t,operationsDispatcher:a,operationRateLimits:s,resourcePolicy:g,resourcePoliciesDispatcher:h,disableUpdate:c,spec:u,target:f,verb:E}),o.endpointConfig&&o.endpointConfig.endpoint_type&&"awslambda"===o.endpointConfig.endpoint_type&&i.a.createElement(Cs,{operation:t,operationsDispatcher:a,target:f,verb:E,arns:b})))))}lo.defaultProps={disableUpdate:!1},lo.propTypes={resourcePoliciesDispatcher:s.a.func.isRequired,resourcePolicy:s.a.shape({}).isRequired,operationsDispatcher:s.a.func.isRequired,target:s.a.string.isRequired,verb:s.a.string.isRequired,disableUpdate:s.a.bool},co.defaultProps={highlight:!1,disableUpdate:!1,hideParameters:!1,disableDelete:!1,onMarkAsDelete:()=>{},markAsDelete:!1,operationRateLimits:[]},co.propTypes={api:s.a.shape({scopes:s.a.arrayOf(s.a.shape({})),resourcePolicies:s.a.shape({})}).isRequired,operationsDispatcher:s.a.func.isRequired,onMarkAsDelete:s.a.func,resourcePoliciesDispatcher:s.a.func.isRequired,markAsDelete:s.a.bool,disableDelete:s.a.bool,disableUpdate:s.a.bool,hideParameters:s.a.bool,resourcePolicy:s.a.shape({}).isRequired,operation:s.a.shape({"x-wso2-new":s.a.bool,summary:s.a.string}).isRequired,target:s.a.string.isRequired,verb:s.a.string.isRequired,spec:s.a.shape({}).isRequired,highlight:s.a.bool,operationRateLimits:s.a.arrayOf(s.a.shape({})),arns:s.a.shape([]).isRequired,resolvedSpec:s.a.shape({}).isRequired,sharedScopes:s.a.arrayOf(s.a.shape({})).isRequired};var po=i.a.memo(co);function mo(e){const{openAPI:t,children:a,tag:n}=e,r=t.tags&&t.tags.find(e=>e.name===n);return i.a.createElement(Ma.a,{defaultExpanded:!0},i.a.createElement(Ra.a,{expandIcon:i.a.createElement(ja.a,null),"aria-controls":"panel1a-content",id:"panel1a-header"},i.a.createElement(J.a,{variant:"h4"},n,r&&i.a.createElement(J.a,{style:{margin:"0px 30px"},variant:"caption"},r.description))),i.a.createElement(ka.a,null,a))}mo.propTypes={children:s.a.element.isRequired,openAPI:s.a.shape({tags:s.a.arrayOf(s.a.string)}).isRequired,tag:s.a.string.isRequired};var uo=a(92),go=a.n(uo);function ho(e){const{specErrors:t}=e,[a,r]=Object(n.useState)(!1);return 0===t.length?null:i.a.createElement(i.a.Fragment,null,i.a.createElement("sup",null,i.a.createElement(se.a,{title:"Show errors"},i.a.createElement(Pt.a,{onClick:()=>r(!0),color:"secondary","aria-label":"Errors in spec"},i.a.createElement(go.a,{color:"error"})))),i.a.createElement(Et.a,{maxWidth:"md","aria-labelledby":"confirmation-dialog-title",open:a},i.a.createElement(Fa.a,{id:"confirmation-dialog-title"},i.a.createElement(J.a,{display:"inline",color:"textPrimary",variant:"h6"},"Errors",i.a.createElement(J.a,{display:"inline",variant:"subtitle2"}," ","in OpenAPI definition"))),i.a.createElement(yt.a,{dividers:!0},i.a.createElement(Dn.a,null,t.map((e,t)=>i.a.createElement(i.a.Fragment,null,t%2!=0&&i.a.createElement(Ji.a,{light:!0,variant:"inset"}),i.a.createElement(Pn.a,null,i.a.createElement(ma.a,{primary:e.message,primaryTypographyProps:{color:"error"},inset:!0})))))),i.a.createElement(bt.a,null,i.a.createElement(je.a,{onClick:()=>r(!1),color:"primary"},"Ok"))))}ho.propTypes={specErrors:s.a.arrayOf(s.a.shape({})).isRequired};var fo=a(2680),Eo=a.n(fo),bo=a(1448);function yo(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function vo(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?yo(a,!0).forEach(function(t){Co(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):yo(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function Co(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Ao=Object(He.a)(e=>({formControl:{minWidth:120},paper:{paddingLeft:e.spacing(4),paddingTop:e.spacing(1.5),paddingBottom:e.spacing(.5),marginTop:"12px"}}));function So(e){const{verb:t,onClick:a,isButton:n,checked:r}=e,s=Object(He.a)(e=>{const a=e.custom.resourceChipColors[t.toLowerCase()];return{customMenu:{"&:hover":{backgroundColor:a},backgroundColor:a,color:e.palette.getContrastText(a)},customButton:{"&:hover":{backgroundColor:a},backgroundColor:a,width:e.spacing(12),marginLeft:e.spacing(1),color:e.palette.getContrastText(a)}}})();return n?i.a.createElement(je.a,{disableFocusRipple:!0,variant:"contained",className:s.customButton,size:"small"},t):i.a.createElement(Yt.a,{dense:!0,className:s.customMenu,onClick:a},i.a.createElement(ua.a,{checked:r}),t)}const Oo=["GET","POST","PUT","PATCH","DELETE","HEAD","OPTIONS"];function Do(e){const{operationsDispatcher:t}=e,a=Object(n.useRef)(null),[r,s]=Object(n.useState)(0),o=Object(W.e)();const[l,c]=Object(n.useReducer)(function(e,t){const{type:a,value:n}=t;switch(a){case"target":case"verbs":return vo({},e,{[a]:n});case"clear":return{verbs:[],target:""};case"error":return vo({},e,{error:n});default:return e}},{verbs:[]});i.a.useEffect(()=>{s(a.current.offsetWidth)},[]);const p=Ao();function d(){c({type:"clear"})}function m(){null===Zt.a.operationTarget.validate(l.target).error&&null===Zt.a.operationVerbs.validate(l.verbs).error?(t({action:"add",data:l}),d()):te.a.warning(o.formatMessage({id:"Apis.Details.Resources.components.AddOperation.operation.target.or.verb.cannot.be.empty.warning",defaultMessage:"Operation target or operation verb(s) can't be empty"}))}return i.a.createElement(de.a,{className:p.paper},i.a.createElement(me.a,{container:!0,direction:"row",spacing:0,justify:"center",alignItems:"center"},i.a.createElement(me.a,{item:!0,md:5,xs:12},i.a.createElement(zt.a,{margin:"dense",variant:"outlined",className:p.formControl},i.a.createElement(As.a,{ref:a,htmlFor:"outlined-age-simple"},i.a.createElement(W.a,{id:"Apis.Details.Resources.components.AddOperation.http.verb",defaultMessage:"HTTP Verb"})),i.a.createElement(Ot.a,{multiple:!0,renderValue:e=>{const t=[],a=e.map((e,a)=>a<2?i.a.createElement(So,{isButton:!0,verb:e}):(t.push(e.toUpperCase()),null)),n=e.length===Oo.length;return i.a.createElement(i.a.Fragment,null,a,t.length>0&&i.a.createElement(se.a,{title:t.join(", "),placement:"top"},i.a.createElement(fe.a,{display:"inline",color:"text.hint",m:1,fontSize:"subtitle1"},n?"All selected":"".concat(e.length-2," more"))))},value:l.verbs,onChange:e=>{let{target:{name:t,value:a}}=e;return c({type:t,value:a})},labelWidth:r,inputProps:{name:"verbs",id:"operation-verb"},MenuProps:{getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"left"}}},Oo.map(e=>i.a.createElement(So,{checked:l.verbs.includes(e.toLowerCase()),value:e.toLowerCase(),verb:e}))),i.a.createElement(Ha.a,{id:"my-helper-text"},l.verbs.includes("option")&&i.a.createElement(se.a,{title:"Select the OPTION method to send OPTIONS calls to the backend. If the OPTIONS method is not selected, OPTIONS calls will be returned from the Gateway with allowed methods.",placement:"bottom"},i.a.createElement(Zr.a,{color:"error",variant:"dot"},i.a.createElement(W.a,{id:"Apis.Details.Resources.components.AddOperation.option",defaultMessage:"OPTION"})))))),i.a.createElement(me.a,{item:!0,md:5,xs:8},i.a.createElement(Gt.a,{id:"operation-target",label:"URI Pattern",error:Boolean(l.error),autoFocus:!0,name:"target",value:l.target,onChange:e=>{let{target:{name:t,value:a}}=e;return c({type:t,value:a.startsWith("/")?a:"/".concat(a)})},placeholder:"Enter URI pattern",helperText:l.error||"Enter URI pattern",fullWidth:!0,margin:"dense",variant:"outlined",InputLabelProps:{shrink:!0},onKeyPress:e=>{"Enter"===e.key&&(e.preventDefault(),m())}})),i.a.createElement(me.a,{item:!0,md:2,xs:4},i.a.createElement(se.a,{title:i.a.createElement(W.a,{id:"Apis.Details.Resources.components.AddOperation.add.tooltip",defaultMessage:"Add new operation"}),"aria-label":"AddOperation",placement:"bottom",interactive:!0},i.a.createElement("span",null,i.a.createElement(bo.a,{style:{marginLeft:"20px",marginBottom:"15px",marginRight:"20px"},size:"small",color:"primary","aria-label":"add",onClick:m},i.a.createElement(Eo.a,null)))),i.a.createElement("sup",null,i.a.createElement(se.a,{title:i.a.createElement(W.a,{id:"Apis.Details.Resources.components.AddOperation.clear.inputs.tooltip",defaultMessage:"Clear inputs"}),"aria-label":"clear-inputs",placement:"bottom",interactive:!0},i.a.createElement("span",null,i.a.createElement(Pt.a,{onClick:d,size:"small"},i.a.createElement(Os.a,null))))))))}Do.propTypes={operationsDispatcher:s.a.func.isRequired};var Po=i.a.memo(Do);function wo(e){const{api:t,message:a}=e;return i.a.createElement(fe.a,{m:1},i.a.createElement(B.b,{to:"/apis/".concat(t.id,"/api definition")},i.a.createElement(J.a,{style:{marginLeft:"10px"},color:"primary",display:"inline",variant:"caption"},a,i.a.createElement(be.a,{style:{marginLeft:"2px"},fontSize:"small"}))))}wo.defaultProps={message:"Edit API Definition"},wo.propTypes={api:s.a.shape({id:s.a.string}).isRequired,message:s.a.string};var To=a(2682),xo=a.n(To),Io=a(2681),Mo=a.n(Io);function Ro(e){const{selectedOperations:t,setSelectedOperation:a,operations:n}=e,[r]=Object(ue.d)(),s=!xr()(t);return i.a.createElement(me.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center"},i.a.createElement(me.a,{item:!0}),i.a.createElement(me.a,{item:!0},i.a.createElement(fe.a,{mr:17.25},i.a.createElement(se.a,{title:s?"Clear selections":"Mark all for delete"},i.a.createElement("div",null,i.a.createElement(Pt.a,{disabled:Object(o.b)(["apim:api_create"],r),onClick:function(){a(s?{}:n)},"aria-label":"delete all",size:"large"},s?i.a.createElement(Mo.a,null):i.a.createElement(xo.a,null)))))))}function ko(e){const{updateOpenAPI:t,operationsDispatcher:a,api:r}=e,[s,l]=Object(n.useState)(!1),[c,p]=Object(n.useState)(!1);return i.a.createElement(i.a.Fragment,null,i.a.createElement(fe.a,null,i.a.createElement(je.a,{disabled:s||Object(o.b)(["apim:api_create"],r),onClick:function(){l(!0),t("save").finally(()=>l(!1))},variant:"contained",color:"primary"},"Save",s&&i.a.createElement($e.a,{size:24})),i.a.createElement(fe.a,{display:"inline",ml:1},i.a.createElement(je.a,{onClick:()=>p(!0)},"Reset"))),i.a.createElement(Et.a,{open:c,"aria-labelledby":"bulk-delete-dialog-title","aria-describedby":"bulk-delete-dialog-description",onBackdropClick:()=>p(!1)},i.a.createElement(Fa.a,{id:"bulk-delete-dialog-title"},"Discard changes"),i.a.createElement(yt.a,null,i.a.createElement(Ba.a,{id:"bulk-delete-dialog-description"},"Please confirm the discard all changes action")),i.a.createElement(bt.a,null,i.a.createElement(je.a,{onClick:()=>p(!1)},"CLOSE"),i.a.createElement(fe.a,{ml:1},i.a.createElement(je.a,{onClick:()=>{a({action:"init"}),p(!1)},color:"error"},"RESET")))))}function No(){return(No=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function jo(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function _o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?jo(a,!0).forEach(function(t){Lo(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):jo(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function Lo(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function qo(e){const{operationProps:t,disableRateLimiting:a,hideAPIDefinitionLink:r,disableMultiSelect:s,disableUpdate:l,disableAddOperation:c}=e,[p,d]=Object(ue.d)(),[m,u]=Object(n.useState)(!1),[g,h]=Object(n.useState)([]),[f,E]=Object(n.useState)({}),[b,y]=Object(n.useState)(),[v,C]=Object(n.useState)(),[A,S]=Object(n.useState)({}),[O,D]=Object(n.useState)({}),[P,w]=Object(n.useState)(p.apiThrottlingPolicy),[T,x]=Object(n.useState)([]),[I,M]=Object(n.useState)({spec:{},errors:[]});const[R,k]=Object(n.useReducer)(function(e,t){const{action:a,data:n}=t,{value:i}=n||{};let r=_o({},e);switch(a){case"init":r=i;break;case"update":r[i.resourcePath][i.httpVerb][n.direction]=i}return r},null);const[N,j]=Object(n.useReducer)(function(e,t){const{action:a,data:n}=t,{target:i,verb:r,value:s}=n||{};let o,l;switch(i&&r?o=xa()(e[i][r]):l=xa()(e),a){case"init":return E({}),n||A.paths;case"description":case"summary":o[a]=s;break;case"authType":o["x-auth-type"]=s?"Any":"None";break;case"parameter":if(o.parameters){const e=o.parameters.findIndex(e=>e.in===s.in&&e.name===s.name);if(-1===e)if("body"===s.in){const e=o.parameters.findIndex(e=>"body"===e.in);-1!==e?o.parameters[e]=s:o.parameters.push(s)}else o.parameters.push(s);else o.parameters[e]=s}else o.parameters=[s];break;case"requestBody":o[a]=s;break;case"deleteParameter":o.parameters=o.parameters.filter(e=>!(e.in===s.in&&e.name===s.name));break;case"throttlingPolicy":o["x-throttling-tier"]=s;break;case"amznResourceName":o["x-amzn-resource-name"]=s;break;case"amznResourceTimeout":o["x-amzn-resource-timeout"]=s;break;case"scopes":{o.security?o.security.find(e=>e.default)||o.security.push({default:[]}):o.security=[{default:[]}];const e=s[0];o.security.find(e=>e.default).default=e;for(const t of e)if(t&&!O[t]&&""!==O[t]){let e="";t in v&&(e=v[t].scope.description,O[t]=e),D(O)}break}case"add":{const t=function(e,t){const a=e.match(/[^{}]+(?=})/g)||[];let n=[];const i=rs(t);return is.V3.includes(i)?n=a.map(e=>{const t={};return t.name=e,t.in="path",t.required=!0,t.schema={type:"string",format:"string"},t}):is.V2.includes(i)&&(n=a.map(e=>{const t={};return t.name=e,t.in="path",t.required=!0,t.type="string",t.format="string",t})),n}(n.target,A);l[n.target]||(l[n.target]={});let a=0;for(const e of n.verbs)if(l[n.target][e]){const t="Operation already exist with ".concat(n.target," and ").concat(e);te.a.warning(t),console.warn(t),a++}else l[n.target][e]={"x-wso2-new":!0,"x-auth-type":"Application & Application User",responses:{200:{description:"ok"}},parameters:t};return a===n.verbs.length?(te.a.error("Operation(s) already exist!"),e):l}default:return e}return _o({},e,{[i]:_o({},e[i],{[r]:o})})},{});const _=Object(n.useCallback)(function(e,t){const{target:a,verb:n}=e;E(e=>{const i=xa()(e);return i[a]||(i[a]={}),t?i[a][n]=t:delete i[a][n],z()(i[a])&&delete i[a],i})},[E]),L=Object(n.useMemo)(()=>({id:p.id,apiThrottlingPolicy:P,scopes:p.scopes,operations:p.isAPIProduct()?{}:os(p.operations),endpointConfig:p.endpointConfig}),[p,P]);function q(e){const t=xa()(e);Yr.a.validate(t,(e,t)=>{M(()=>{return{spec:t,errors:e?[e]:[]}})}),j({action:"init",data:e.paths}),S(e),function(e){const t=rs(e);if(is.V3.includes(t)){if(e.components&&e.components.securitySchemes&&e.components.securitySchemes.default){const{flows:t}=e.components.securitySchemes.default;t.implicit.scopes&&D(xa()(t.implicit.scopes))}}else is.V2.includes(t)&&e.securityDefinitions&&e.securityDefinitions.default&&e.securityDefinitions.default.scopes&&D(xa()(e.securityDefinitions.default.scopes))}(e)}function W(e){return p.updateSwagger(e).then(e=>q(e.body)).then(d).catch(e=>{console.error(e),e.response?u(e.response.body):te.a.error("Error while updating the definition")})}return Object(n.useEffect)(()=>{X.a.getAmznResourceNames(p.id).then(e=>{e.body&&e.body.list&&x(e.body.list)})},[]),Object(n.useEffect)(()=>{"APIProduct"!==p.apitype&&X.a.getAllScopes().then(e=>{if(e.body&&e.body.list){const t=[],a={},n=!0;for(const i of e.body.list){const e={};e.scope=i,e.shared=n,t.push(e),a[i.name]=e}y(t),C(a)}})},[]),Object(n.useEffect)(()=>{if(p.getSwagger().then(e=>{q(e.body)}).catch(e=>{e.response&&(te.a.error(e.response.body.description),u(e.response.body)),console.error(e)}),p.isSOAPToREST()){const e=p.getResourcePolicies("in"),t=p.getResourcePolicies("out");Promise.all([e,t]).then(e=>{let[t,a]=e;const n={};for(const e of t.body.list){const{resourcePath:t,httpVerb:a}=e;n[t]?n[t][a]={in:e}:n[t]={[a]:{in:e}}}for(const e of a.body.list){const{resourcePath:t,httpVerb:a}=e;n[t]?n[t][a].out=e:n[t]={[a]:{out:e}}}k({action:"init",data:{value:n}})}).catch(e=>{e.response&&(te.a.error(e.response.body.description),u(e.response.body)),u(e.message),console.error(e)})}X.a.policies("api").then(e=>{h(e.body.list)})},[p.id]),!m&&z()(A)||0===I.errors.length&&z()(I.spec)?i.a.createElement(me.a,{container:!0,direction:"row",justify:"center",alignItems:"center"},i.a.createElement(me.a,{item:!0},i.a.createElement($e.a,{disableShrink:!0}))):i.a.createElement(me.a,{container:!0,direction:"row",justify:"flex-start",spacing:2,alignItems:"stretch"},m&&i.a.createElement(me.a,{item:!0,md:12},i.a.createElement(yi.a,{onClose:()=>u(null),disableActions:!0,type:"error",message:m})),!a&&i.a.createElement(me.a,{item:!0,md:12},i.a.createElement(_r,{operationRateLimits:g,value:P,onChange:w,isAPIProduct:p.isAPIProduct()})),!Object(o.b)(["apim:api_create"],p)&&!c&&i.a.createElement(me.a,{item:!0,md:12,xs:12},i.a.createElement(Po,{operationsDispatcher:j})),I.errors.length>0&&i.a.createElement(ho,{specErrors:I.errors}),i.a.createElement(me.a,{item:!0,md:12},i.a.createElement(de.a,null,!s&&i.a.createElement(Ro,{operations:N,selectedOperations:f,setSelectedOperation:E}),Object.entries(N).map(e=>{let[a,n]=e;return i.a.createElement(me.a,{key:a,item:!0,md:12},i.a.createElement(mo,{openAPI:A,tag:a},i.a.createElement(me.a,{container:!0,direction:"column",justify:"flex-start",spacing:1,alignItems:"stretch"},Object.entries(n).map(e=>{let[n,r]=e;return ye.a.HTTP_METHODS.includes(n)?i.a.createElement(me.a,{key:"".concat(a,"/").concat(n),item:!0},i.a.createElement(po,No({target:a,verb:n,highlight:!0,resourcePoliciesDispatcher:k,resourcePolicy:R&&R[a.slice(1)]&&R[a.slice(1)][n],operationsDispatcher:j,spec:A,operation:r,operationRateLimits:g,api:L,markAsDelete:Boolean(f[a]&&f[a][n]),onMarkAsDelete:_,disableUpdate:l||Object(o.b)(["apim:api_create"],p),disableMultiSelect:s,arns:T},t,{resolvedSpec:I.spec,sharedScopes:b}))):null}))))})),i.a.createElement(me.a,{style:{marginTop:"25px"},container:!0,direction:"row",justify:"space-between",alignItems:"center"},!l&&i.a.createElement(ko,{operationsDispatcher:j,updateOpenAPI:function(e){const t=xa()(N);switch(e){case"save":if(function(e,t){for(const a in t)if(Object.prototype.hasOwnProperty.call(t,a)){const n=t[a];if(!e[a]||Object.keys(e[a]).length!==Object.keys(n).length)return!1}return!0}(f,t)){const e="At least one operation is required for the API";return te.a.warning(e),Promise.reject(new Error(e))}for(const[e,a]of Object.entries(f))for(const n of Object.keys(a))delete t[e][n],z()(t[e])&&delete t[e];for(const[,e]of Object.entries(t))for(const[,t]of Object.entries(e))t["x-wso2-new"]&&delete t["x-wso2-new"];break;default:return Promise.reject(new Error("Unsupported resource operation!"))}var a;return a=t,Object.keys(O).forEach(e=>{let t=!1;for(const[,n]of Object.entries(a)){for(const[,a]of Object.entries(n)){for(const n of a.security||[])if(n&&n.default&&n.default.includes(e)){t=!0;break}if(t)break}if(t)break}!t&&e in v&&delete O[e]}),D(O),function(){const e=rs(A);is.V3.includes(e)?A.components&&A.components.securitySchemes&&A.components.securitySchemes.default&&(A.components.securitySchemes.default.flows.implicit.scopes=O):is.V2.includes(e)&&A.securityDefinitions&&A.securityDefinitions.default&&(A.securityDefinitions.default.scopes=O)}(),P!==p.apiThrottlingPolicy?d({apiThrottlingPolicy:P}).catch(e=>{console.error(e),te.a.error("Error while updating the API")}).then(()=>W(_o({},A,{paths:t}))):W(_o({},A,{paths:t}))},api:p}),!r&&i.a.createElement(wo,{api:p}))))}function Wo(){return i.a.createElement(i.a.Fragment,null,i.a.createElement(fe.a,{mb:4},i.a.createElement(J.a,{variant:"h4",gutterBottom:!0},i.a.createElement(W.a,{id:"Apis.Details.Resources.APIOperations.title",defaultMessage:"Resources"}))),i.a.createElement(qo,null))}function Uo(){const[e,t]=Object(ue.d)(),[a,r]=Object(n.useState)(e.apiThrottlingPolicy),[s,l]=Object(n.useState)([]),[c,p]=Object(n.useState)(!1);return Object(n.useEffect)(()=>{X.a.policies("api").then(e=>{l(e.body.list)})},[]),i.a.createElement(me.a,{container:!0,spacing:3},i.a.createElement(me.a,{item:!0,md:12},i.a.createElement(J.a,{variant:"h4",gutterBottom:!0},"Product Resources",i.a.createElement(fe.a,{component:"div",display:"inline"},i.a.createElement(B.b,{to:"/api-products/"+e.id+"/resources/edit"},i.a.createElement(je.a,{size:"small"},i.a.createElement(js.a,null),i.a.createElement(W.a,{id:"Apis.Details.Resources.Resources.edit.resources.button",defaultMessage:"Edit Resources"})))))),i.a.createElement(me.a,{item:!0,md:12},i.a.createElement(_r,{operationRateLimits:s,api:e,isAPIProduct:!0,value:a,onChange:r})),!Object(o.b)(["apim:api_create"],e)&&i.a.createElement(me.a,{item:!0,md:12},i.a.createElement(fe.a,{ml:1},i.a.createElement(je.a,{onClick:function(){p(!0),t({apiThrottlingPolicy:a}).finally(()=>p(!1))},disabled:!1,variant:"contained",size:"small",color:"primary"},"Save",c&&i.a.createElement($e.a,{size:24})),i.a.createElement(fe.a,{display:"inline",ml:1},i.a.createElement(je.a,{size:"small",variant:"outlined",onClick:()=>r(e.apiThrottlingPolicy)},"Reset")))),i.a.createElement(me.a,{item:!0,md:12},i.a.createElement(qo,{hideAPIDefinitionLink:!0,disableUpdate:!0,disableRateLimiting:!0,operationProps:{disableDelete:!0},disableMultiSelect:!0,disableAddOperation:!0})))}Ro.defaultProps={},Ro.propTypes={selectedOperations:s.a.shape({}).isRequired,setSelectedOperation:s.a.func.isRequired,operations:s.a.shape({}).isRequired},ko.propTypes={updateOpenAPI:s.a.func.isRequired,operationsDispatcher:s.a.func.isRequired},qo.defaultProps={operationProps:{disableDelete:!1},disableUpdate:!1,disableRateLimiting:!1,disableMultiSelect:!1,hideAPIDefinitionLink:!1,disableAddOperation:!1},qo.propTypes={disableRateLimiting:s.a.bool,hideAPIDefinitionLink:s.a.bool,disableMultiSelect:s.a.bool,disableAddOperation:s.a.bool,disableUpdate:s.a.bool,operationProps:s.a.shape({disableDelete:s.a.bool})};var Bo=a(1968);const Fo=Object(He.a)(e=>({root:{flexGrow:1,marginTop:10},titleWrapper:{display:"flex",flexDirection:"row",alignItems:"center",paddingBottom:e.spacing(2)},buttonWrapper:{marginTop:e.spacing(4)}}));var zo=function(){const e=Fo(),{api:t,updateAPI:a}=Object(n.useContext)(ue.c),r=xa()(t),{apis:s}=r,[o,l]=Object(n.useState)(s),[c,p]=Object(n.useState)(!1);return i.a.createElement("div",{className:e.root},i.a.createElement("div",{className:e.titleWrapper},i.a.createElement(J.a,{variant:"h4",align:"left",className:e.mainTitle},i.a.createElement(W.a,{id:"Apis.Details.ProductResources.ProductResourcesEdit.title",defaultMessage:"Manage Resources"}))),i.a.createElement("div",{className:e.contentWrapper},i.a.createElement(Bo.a,{apiResources:o,setApiResources:l,api:t}),i.a.createElement("div",{className:e.buttonWrapper},i.a.createElement(me.a,{container:!0,direction:"row",alignItems:"flex-start",spacing:4},i.a.createElement(me.a,{item:!0},i.a.createElement("div",null,i.a.createElement(je.a,{variant:"contained",color:"primary",onClick:()=>{p(!0),a({apis:o},!0).then(()=>{p(!1)}).catch(e=>{p(!1);const{status:t}=e;401===t&&Object(ae.doRedirectToLogin)()})},disabled:c},c&&i.a.createElement(W.a,{id:"Apis.Details.ProductResources.ProductResourcesEdit.updating",defaultMessage:"Updating ..."}),!c&&i.a.createElement(W.a,{id:"Apis.Details.ProductResources.ProductResourcesEdit.save",defaultMessage:"Save"})))),i.a.createElement(me.a,{item:!0},i.a.createElement(B.b,{to:"/apis/"+t.id+"/overview"},i.a.createElement(je.a,null,i.a.createElement(W.a,{id:"Apis.Details.ProductResources.ProductResourcesEdit.cancel",defaultMessage:"Cancel"}))))))))},Vo=a(1464),Ho=a(1466),Go=a(1465);function Ko(e){const{classes:t,intl:a,generateEndpointConfig:r,apiType:s}=e,[o,l]=Object(n.useState)("mock"),c=[{type:"http",name:a.formatMessage({id:"Apis.Details.Endpoints.NewEndpointCreate.create.http.endpoint",defaultMessage:"HTTP/ REST Endpoint"}),description:a.formatMessage({id:"Apis.Details.Endpoints.NewEndpointCreate.create.http.endpoint.description",defaultMessage:"A REST API endpoint based on a URI template."}),options:null,disabled:["SOAPTOREST"]},{type:"address",name:a.formatMessage({id:"Apis.Details.Endpoints.NewEndpointCreate.create.soap.endpoint",defaultMessage:"HTTP/ SOAP Endpoint"}),description:a.formatMessage({id:"Apis.Details.Endpoints.NewEndpointCreate.create.soap.endpoint.description",defaultMessage:"The direct URI of the web service."}),options:null,disabled:["GRAPHQL"]},{type:"prototyped",name:a.formatMessage({id:"Apis.Details.Endpoints.NewEndpointCreate.create.prototype.endpoint",defaultMessage:"Prototype Endpoint"}),description:a.formatMessage({id:"Apis.Details.Endpoints.NewEndpointCreate.create.prototype.endpoint.description",defaultMessage:"Use the inbuilt JavaScript engine to prototype the API or provide an endpoint to a prototype API. The inbuilt JavaScript engine does support prototype SOAP APIs"}),options:[{type:"mock",name:a.formatMessage({id:"Apis.Details.Endpoints.NewEndpointCreate.prototype.implementation",defaultMessage:"Prototype Implementation"}),disabled:["SOAP","SOAPTOREST"]},{type:"prototyped",name:a.formatMessage({id:"Apis.Details.Endpoints.NewEndpointCreate.default.prototype.endpoints",defaultMessage:"Prototype Endpoint"}),disabled:[]}],disabled:["GRAPHQL"]},{type:"dynamic",name:a.formatMessage({id:"Apis.Details.Endpoints.NewEndpointCreate.create.dynamic.endpoint",defaultMessage:"Dynamic Endpoint"}),description:a.formatMessage({id:"Apis.Details.Endpoints.NewEndpointCreate.create.dynamic.endpoint.description",defaultMessage:"If you need to send the request to the URI specified in the TO header."}),options:null,disabled:[]},{type:"awslambda",name:a.formatMessage({id:"Apis.Details.Endpoints.NewEndpointCreate.create.awslambda.endpoint",defaultMessage:"AWS Lambda Endpoint"}),description:a.formatMessage({id:"Apis.Details.Endpoints.NewEndpointCreate.create.awslambda.endpoint.description",defaultMessage:"If you need to invoke AWS Lambda functions through API gateway."}),options:null,disabled:["SOAPTOREST","GRAPHQL"]}];return i.a.createElement(i.a.Fragment,null,i.a.createElement(J.a,{variant:"h4",align:"left",className:t.titleWrapper},i.a.createElement(W.a,{id:"Apis.Details.Endpoints.NewEndpointCreate.add.endpoints.header",defaultMessage:"Select an Endpoint Type to Add"})),i.a.createElement(me.a,{container:!0,justify:"flex-start",spacing:2},c.filter(e=>!e.disabled.includes(s)).map(e=>i.a.createElement(me.a,{item:!0,className:t.inlineMessageContainer},i.a.createElement(Vo.a,{className:t.endpointTypeCard},i.a.createElement(Ho.a,{className:t.cardContent},i.a.createElement(J.a,{variant:"h5",component:"h3",className:t.head},e.name),i.a.createElement(Ji.a,null),i.a.createElement(J.a,{component:"p",className:t.content},e.description),e.options?i.a.createElement("div",null,i.a.createElement(zt.a,{component:"fieldset",className:t.formControl},i.a.createElement(Ct.a,{"aria-label":"EndpointType",name:"endpointType",className:t.radioGroup,value:o,onChange:e=>{l(e.target.value)}},e.options.filter(e=>!e.disabled.includes(s)).map(e=>i.a.createElement(At.a,{value:e.type,control:i.a.createElement(vt.a,{color:"primary"}),label:e.name}))))):i.a.createElement("div",null)),i.a.createElement(Go.a,{className:t.cardActions},i.a.createElement(je.a,{color:"primary",className:t.button,onClick:()=>r(e.type,o)},i.a.createElement(W.a,{id:"Apis.Details.Endpoints.NewEndpointCreate.create.button",defaultMessage:"Add"}))))))))}Ko.propTypes={classes:s.a.shape({}).isRequired,intl:s.a.shape({}).isRequired,generateEndpointConfig:s.a.func.isRequired,apiType:s.a.string.isRequired};var Yo=Object(q.a)(e=>({inlineMessageContainer:{marginBottom:e.spacing(1)},endpointTypeCard:{margin:e.spacing(1),maxWidth:e.spacing(32),transition:"box-shadow 0.3s ease-in-out",height:e.spacing(40),display:"flex",flexDirection:"column"},cardContent:{height:e.spacing(40)},content:{marginTop:e.spacing(1)},cardActions:{justifyContent:"flex-end",borderTop:"solid #e0e0e0 thin"}}))(Object(W.d)(Ko));function Jo(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function Qo(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Jo(a,!0).forEach(function(t){Zo(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Jo(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function Zo(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Xo=Object(n.lazy)(()=>Promise.resolve().then(a.t.bind(null,2688,7)));function $o(e){const{resourcePath:t,resourceMethod:a,scriptContent:r,onChange:s,originalScript:l,setMockValueDetails:c}=e,{api:p}=Object(n.useContext)(ue.a),[d,m]=Object(n.useState)(!1),u=Object(He.a)(e=>{let t=e.custom.resourceChipColors?e.custom.resourceChipColors[a]:null,n="#000000";return t?n=e.palette.getContrastText(e.custom.resourceChipColors[a]):(console.log("Check the theme settings. The resourceChipColors is not populated properlly"),t="#cccccc"),{editor:{width:"100%",height:"500px"},chipActive:Qo({borderRadius:"5px",width:"80%",backgroundColor:t,color:n},e.typography.button),resourcePathContainer:{paddingTop:e.spacing(1)},prototypeResourceHeader:{borderBottom:"".concat(t," 1px solid")},chipExpansionPanel:{backgroundColor:V.a.hexToRGBA(t,.1),border:"".concat(t," 1px solid")},scriptResetButton:{display:"flex",justifyContent:"space-between",marginBottom:"10px"}}})();return i.a.createElement(me.a,{item:!0},i.a.createElement(Ma.a,{className:u.chipExpansionPanel},i.a.createElement(Ra.a,{className:u.prototypeResourceHeader,expandIcon:i.a.createElement(ja.a,null)},i.a.createElement(me.a,{container:!0,spacing:12},i.a.createElement(me.a,{xs:1},i.a.createElement(he.a,{label:a,className:u.chipActive})),i.a.createElement(me.a,{xs:!0,className:u.resourcePathContainer},i.a.createElement(J.a,null,t)))),i.a.createElement(ka.a,{className:u.genericResourceContent},i.a.createElement(me.a,{container:!0,direction:"column"},i.a.createElement(me.a,{item:!0,className:u.scriptResetButton},i.a.createElement(J.a,{variant:"subtitle2"},i.a.createElement(W.a,{id:"Apis.Details.Endpoints.Prototype.InlineEndpoints.script",defaultMessage:"Script"})),d&&i.a.createElement(je.a,{variant:"contained",color:"primary",onClick:()=>{c({resourcePath:t,resourceMethod:a}),s(l,t,a)}},"Reset")),i.a.createElement(me.a,{item:!0},i.a.createElement(n.Suspense,{fallback:i.a.createElement($e.a,null)},i.a.createElement(Xo,{height:"50vh",width:"100%",theme:"vs-dark",value:r,options:{selectOnLineNumbers:!0,readOnly:"".concat(Object(o.b)(["apim:api_create"],p))},language:"javascript",onChange:e=>{m(!0),c({resourcePath:t,resourceMethod:a}),s(e,t,a)}})))))))}$o.propTypes={resourcePath:s.a.string.isRequired,resourceMethod:s.a.string.isRequired,scriptContent:s.a.string.isRequired,classes:s.a.shape({}).isRequired,theme:s.a.shape({}).isRequired,onChange:s.a.func.isRequired};var el=i.a.memo($o);const tl="x-mediation-script",al="/* mc.setProperty('CONTENT_TYPE', 'application/json');\n\tmc.setPayloadJSON('{ \"data\" : \"sample JSON\"}');*/\n/*Uncomment the above comment block to send a sample response.*/";function nl(e){const{api:t}=Object(n.useContext)(ue.a),{paths:a,updatePaths:r}=e,[s,o]=Object(n.useState)({resourcePath:"",resourceMethod:""}),l=Object(n.useCallback)((e,t,n)=>{const i=JSON.parse(JSON.stringify(a));i[t][n][tl]=e,r(i)},[s.resourcePath,s.resourceMethod]),[c,p]=Object(n.useState)([]);return Object(n.useEffect)(()=>{t.getGeneratedMockScriptsOfAPI(t.id).then(e=>{p(e.obj.list)})},[]),i.a.createElement(i.a.Fragment,null,i.a.createElement(me.a,{container:!0,spacing:1,direction:"column"},Object.keys(a).map(e=>Object.keys(a[e]).map(t=>{const n=a[e][t][tl],r=void 0===n?al:n,s=function(e,t){for(let a=0;a<c.length;a++)if(c[a].verb.toLowerCase()===t.toLowerCase()&&c[a].path===e)return c[a].content;return null}(e,t);return i.a.createElement(el,{resourcePath:e,resourceMethod:t,onChange:l,scriptContent:r,originalScript:s,setMockValueDetails:o})}))))}nl.propTypes={paths:s.a.shape({}).isRequired,updatePaths:s.a.func.isRequired};var il=i.a.memo(nl);function rl(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function sl(e,t){return"failover"!==e?t:"sandbox_endpoints"===t?"sandbox_failovers":"production_failovers"}function ol(e){const t=xa()(e),a=[];return Array.isArray(t.production_endpoints)?a.push.apply(a,rl(t.production_endpoints)):a.push(t.production_endpoints),Array.isArray(t.sandbox_endpoints)?a.push.apply(a,rl(t.sandbox_endpoints)):a.push(t.sandbox_endpoints),"failover"===t.endpoint_type&&(t.sandbox_failovers&&a.push.apply(a,rl(t.sandbox_failovers)),t.production_failovers&&a.push.apply(a,rl(t.production_failovers))),a}function ll(e){const t={};switch(e){case"http":t.endpoint_type="http",t.failOver="False";break;case"address":t.endpoint_type="address",t.failOver="False";break;case"prototyped":t.implementation_status="prototyped",t.endpoint_type="http",t.production_endpoints={config:null,url:"http://localhost"},t.sandbox_endpoints={config:null,url:"http://localhost"};break;case"awslambda":t.endpoint_type="awslambda",t.access_method="role-supplied",t.amznAccessKey="",t.amznSecretKey="",t.amznRegion="";break;default:t.endpoint_type="default",t.production_endpoints={url:"default"},t.sandbox_endpoints={url:"default"},t.failOver="False"}return t}function cl(e){return"address"===e?{url:"",endpoint_type:"address",template_not_supported:!1}:{url:"",template_not_supported:!1}}function pl(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function dl(e){const{intl:t,epConfig:a,endpointType:r,classes:s}=e,[l,c]=Object(n.useState)(!1),[p,d]=Object(n.useState)([]),[m,u]=Object(n.useState)([]);return Object(n.useEffect)(()=>{Object(o.b)(["apim:ep_certificates_view"])?d([]):X.a.getEndpointCertificates().then(e=>{const{certificates:t}=e.obj,n=ol(a),i=[],r=t.filter(e=>{i.push(e.alias);for(const t of n)if(t&&-1!==t.url.indexOf(e.endpoint))return!0;return!1});d(r),u(i)}).catch(e=>{console.error(e),d([])})},[]),i.a.createElement(i.a.Fragment,null,i.a.createElement(Ma.a,{expanded:l,onChange:()=>c(!l),className:s.generalConfigPanel,disabled:Object(o.b)(["apim:ep_certificates_view"])},i.a.createElement(Ra.a,{expandIcon:i.a.createElement(ja.a,null),"aria-controls":"panel1bh-content",id:"panel1bh-header",className:s.configHeaderContainer},"default"===r.key||"awslambda"===r.key?i.a.createElement("div",null):i.a.createElement(J.a,{className:s.secondaryHeading,hidden:"default"===r.key||"awslambda"===r.key},i.a.createElement(W.a,{id:"Apis.Details.Endpoints.GeneralConfiguration.certificates.sub.heading",defaultMessage:"Certificates"}),":"," ",p.length,Object(o.b)(["apim:ep_certificates_view"])&&i.a.createElement(fe.a,{ml:2},i.a.createElement(J.a,{variant:"body2",color:"primary"},i.a.createElement(W.a,{id:"Apis.Details.Endpoints.GeneralConfiguration.not.allowed",defaultMessage:"*You are not authorized to view certificates due to insufficient permissions"}))))),i.a.createElement(ka.a,{className:s.generalConfigContent},i.a.createElement(me.a,{container:!0,className:s.endpointConfigSection,hidden:"default"===r.key||"awslambda"===r.key},i.a.createElement(qn,{endpoints:ol(a),certificates:p,uploadCertificate:(e,a,n)=>X.a.addCertificate(e,a,n).then(e=>{if(201===e.status){te.a.info(t.formatMessage({id:"Apis.Details.Endpoints.GeneralConfiguration.Certificates.certificate.add.success",defaultMessage:"Certificate added successfully"}));const a=pl(p);a.push({alias:e.obj.alias,endpoint:e.obj.endpoint}),d(a)}}).catch(e=>{console.error(e.message),"Conflict"===e.message?te.a.error(t.formatMessage({id:"Apis.Details.Endpoints.GeneralConfiguration.Certificates.certificate.alias.exist",defaultMessage:"Adding Certificate Failed. Certificate Alias Exists."})):e.response?te.a.error(e.response.body.description):te.a.error(t.formatMessage({id:"Apis.Details.Endpoints.GeneralConfiguration.Certificates.certificate.error",defaultMessage:"Something went wrong while adding the certificate."}))}),deleteCertificate:e=>X.a.deleteEndpointCertificate(e).then(a=>{d(()=>200===a.status?p.filter(t=>t.alias!==e):-1),te.a.info(t.formatMessage({id:"Apis.Details.Endpoints.GeneralConfiguration.Certificates.certificate.delete.success",defaultMessage:"Certificate Deleted Successfully"}))}).catch(e=>{console.log(e),te.a.info(t.formatMessage({id:"Apis.Details.Endpoints.GeneralConfiguration.Certificates.certificate.delete.error",defaultMessage:"Error Deleting Certificate"}))}),aliasList:m})))))}dl.propTypes={epConfig:s.a.shape({}).isRequired,endpointType:s.a.shape({}).isRequired,classes:s.a.shape({}).isRequired,intl:s.a.shape({}).isRequired};var ml=Object(W.d)(Object(q.a)(e=>({configHeaderContainer:{display:"flex",justifyContent:"space-between"},generalConfigContent:{boxShadow:"inset -1px 2px 3px 0px #c3c3c3"},secondaryHeading:{fontSize:e.typography.pxToRem(15),color:e.palette.text.secondary,display:"flex"},heading:{fontSize:e.typography.pxToRem(15),flexBasis:"33.33%",flexShrink:0,fontWeight:"900"},endpointConfigSection:{padding:"10px"},generalConfigPanel:{width:"100%"},securityHeading:{fontWeight:600},sandboxEndpointSwitch:{marginLeft:e.spacing(2)}}))(dl));function ul(e){const{category:t,endpointURL:a,editEndpoint:r,classes:s,type:l,setAdvancedConfigOpen:c,esCategory:p,setESConfigOpen:d,deleteEndpoint:m,index:u,readOnly:g,autoFocus:h,name:f,apiId:E}=e,[b,y]=Object(n.useState)(a),{api:v}=Object(n.useContext)(ue.c),[C,A]=Object(n.useState)(),[S,O]=Object(n.useState)(""),[D,P]=Object(n.useState)(!1),[w,T]=Object(n.useState)(!1);return Object(n.useEffect)(()=>{y(a)},[a]),i.a.createElement("div",{className:s.endpointInputWrapper},i.a.createElement(Gt.a,{disabled:Object(o.b)(["apim:api_create"],v),label:f,className:s.textField,value:b,placeholder:b?"":"http://appserver/resource",onChange:e=>y(e.target.value),onBlur:()=>r(u,t,b),error:!b,helperText:b?"":i.a.createElement(W.a,{id:"Apis.Details.Endpoints.GenericEndpoint.no.ep.error",defaultMessage:"Endpoint URL should not be empty"}),variant:"outlined",margin:"normal",required:!0,InputProps:{readOnly:g,autoFocus:h,endAdornment:i.a.createElement(aa.a,{position:"end"},S&&i.a.createElement(he.a,{label:S,className:C?s.endpointValidChip:((e,t,a)=>e?t:a)(w,s.endpointErrorChip,s.endpointInvalidChip),variant:"outlined"}),!v.isWebSocket()&&i.a.createElement(Pt.a,{className:C?s.iconButtonValid:s.iconButton,"aria-label":"TestEndpoint",onClick:()=>(function(e,t){P(!0),(new X.a).testEndpoint(e,t).then(e=>{null!==e.body.error?(O(e.body.error),T(!0)):(O(e.body.statusCode+" "+e.body.statusMessage),T(!1)),e.body.statusCode>=200&&e.body.statusCode<300?(A(!0),T(!1)):A(!1)}).finally(()=>{P(!1)})})(b,E),disabled:Object(o.b)(["apim:api_create"],v)||D},D?i.a.createElement($e.a,{size:20}):i.a.createElement(Dt.a,null,"check_circle")),"prototyped"===l?i.a.createElement("div",null):i.a.createElement(i.a.Fragment,null,i.a.createElement(Pt.a,{className:s.iconButton,"aria-label":"Settings",onClick:()=>c(u,l,t),disabled:Object(o.b)(["apim:api_create"],v)},i.a.createElement(Dt.a,null,"settings")),i.a.createElement(Pt.a,{className:s.iconButton,"aria-label":"Security",onClick:()=>d(l,p),disabled:Object(o.b)(["apim:api_create"],v)},i.a.createElement(Dt.a,null,"security"))),u>0?i.a.createElement(Ji.a,{className:s.divider}):i.a.createElement("div",null),"load_balance"===l||"failover"===l?i.a.createElement(Pt.a,{className:s.iconButton,"aria-label":"Delete",color:"secondary",onClick:()=>m(u,l,t),disabled:Object(o.b)(["apim:api_create"],v)},i.a.createElement(Dt.a,null,"delete")):i.a.createElement("div",null))}}))}ul.defaultProps={readOnly:!1,autoFocus:!1,name:"Service URL"},ul.propTypes={endpointURL:s.a.string.isRequired,deleteEndpoint:s.a.func.isRequired,classes:s.a.shape({}).isRequired,type:s.a.string.isRequired,setAdvancedConfigOpen:s.a.func.isRequired,setESConfigOpen:s.a.func.isRequired,index:s.a.number.isRequired,editEndpoint:s.a.func.isRequired,category:s.a.string.isRequired,readOnly:s.a.bool,autoFocus:s.a.bool,name:s.a.string,apiId:s.a.string.isRequired};var gl=Object(q.a)(e=>({endpointInputWrapper:{width:"100%",display:"flex",justifyContent:"space-between"},textField:{width:"100%"},input:{marginLeft:e.spacing(1),flex:1},iconButton:{padding:e.spacing(1)},iconButtonValid:{padding:e.spacing(1),color:pe.a[500]},divider:{width:1,height:28,margin:4},endpointValidChip:{color:"green",border:"1px solid green"},endpointInvalidChip:{color:"#ffd53a",border:"1px solid #ffd53a"},endpointErrorChip:{color:"red",border:"1px solid red"}}))(ul);function hl(e){const{classes:t,addEndpoint:a}=e,[r,s]=Object(n.useState)(""),{api:l}=Object(n.useContext)(ue.c);return i.a.createElement("div",{className:t.endpointInputWrapper},i.a.createElement(Gt.a,{label:i.a.createElement(W.a,{id:"Apis.Details.Endpoints.GenericEndpoint.service.url.input",defaultMessage:"Service URL"}),disabled:Object(o.b)(["apim:api_create"],l),className:t.textField,value:r,fullWidth:!0,onChange:e=>s(e.target.value),variant:"outlined",margin:"normal",placeholder:"Enter the Endpoint URL and press + button",InputProps:{endAdornment:i.a.createElement(aa.a,{position:"end"},i.a.createElement(Pt.a,{onClick:()=>{s(""),a(r)},color:"green",className:t.iconButton,"aria-label":"Search",disabled:""===r},i.a.createElement(Dt.a,null,"add")))}}))}hl.propTypes={classes:s.a.shape({}).isRequired,addEndpoint:s.a.func.isRequired};var fl=Object(q.a)(e=>({endpointInputWrapper:{width:"100%",display:"flex",justifyContent:"space-between"},textField:{width:"100%"},input:{marginLeft:e.spacing(1),flex:1},iconButton:{padding:e.spacing(1)}}))(hl);function El(e){const{classes:t,category:a,apiEndpoints:r,epType:s,failOvers:o,editEndpoint:l,addNewEndpoint:c,removeEndpoint:p,setAdvancedConfigOpen:d,apiId:m}=e,[u,g]=Object(n.useState)(s),[h,f]=Object(n.useState)([{url:"http://myservice/endpoint"}]),E=Object(n.useRef)(null);return Object(n.useEffect)(()=>{g(s),f(()=>null!==r&&"failover"===s?[r].concat(o):void 0!==r?Array.isArray(r)?r:[r]:[{url:"http://myservice/"}])},[e]),i.a.createElement("div",{className:t.listingWrapper,ref:E},i.a.createElement(me.a,{container:!0,xs:12},i.a.createElement(me.a,{xs:12},"failover"===u||"load_balance"===u?i.a.createElement(fl,{addEndpoint:e=>{c(a,s,e)}}):i.a.createElement("div",null)),i.a.createElement(me.a,{xs:12},h.map((e,t)=>t>0?i.a.createElement(gl,{readOnly:!0,endpointURL:h[t]?h[t].url:"",type:u,index:t,category:a,editEndpoint:l,deleteEndpoint:p,setAdvancedConfigOpen:d,apiId:m}):i.a.createElement("div",null)))))}El.propTypes={classes:s.a.shape({epTypeWrapper:s.a.shape({}),epTypeName:s.a.shape({}),listingWrapper:s.a.shape({}),epConfig:s.a.shape({})}).isRequired,epType:s.a.string.isRequired,category:s.a.string.isRequired,apiEndpoints:s.a.shape({}).isRequired,failOvers:s.a.shape({}).isRequired,addNewEndpoint:s.a.func.isRequired,removeEndpoint:s.a.func.isRequired,editEndpoint:s.a.func.isRequired,setAdvancedConfigOpen:s.a.func.isRequired,apiId:s.a.string.isRequired};var bl=Object(W.d)(Object(q.a)(e=>({endpointInputWrapper:{display:"flex"},epInput:{width:"100%"},epTypeWrapper:{display:"flex",padding:"5px"},epTypeName:{paddingTop:"10px",fontWeight:600},epConfig:{justifyContent:"flex-end"},leftArrow:{paddingTop:"6px"},leftArrowLight:{color:"#c5c5c5",paddingTop:"6px"},dialogHeader:{fontWeight:600},listItemOdd:{background:"#ececec",borderRadius:"5px","&:hover":{backgroundColor:e.palette.grey[300]},"&:focus":{backgroundColor:e.palette.grey[400]}},listItem:{borderRadius:"5px","&:hover":{backgroundColor:e.palette.grey[300]},"&:focus":{backgroundColor:e.palette.grey[400]}}}))(El));function yl(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function vl(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?yl(a,!0).forEach(function(t){Cl(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):yl(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function Cl(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Al=[{key:"org.apache.synapse.endpoints.algorithms.RoundRobin",value:"Round-Robin"},{key:"other",value:"Other"}],Sl=[{key:"http",value:"Transport"},{key:"soap",value:"SOAP"},{key:"simpleClientSession",value:"Client Id"},{key:"none",value:"None"}],Ol={algoClassName:Al[0].key,algoCombo:Al[0].key,sessionManagement:Sl[0].key,sessionTimeOut:300};function Dl(e){const{algoClassName:t,algoCombo:a,sessionManagement:r,sessionTimeOut:s,handleLBConfigChange:l,closeLBConfigDialog:c,classes:p}=e,[d,m]=Object(n.useState)(Ol),[u,g]=Object(n.useState)(!1),{api:h}=Object(n.useContext)(ue.c);Object(n.useEffect)(()=>{m(()=>{const e=vl({},Ol);return a&&(e.algoCombo=a),r&&(e.sessionManagement=r),t&&(e.algoClassName=t),s&&(e.sessionTimeOut=s),e})},[e]);const f=(e,t)=>{m(vl({},d,{[t]:e.target.value}))};return i.a.createElement(i.a.Fragment,null,i.a.createElement(me.a,{container:!0,direction:"column"},i.a.createElement(Gt.a,{id:"algorithmSelect",select:!0,label:i.a.createElement(W.a,{id:"Apis.Details.Endpoints.LoadBalanceConfig.algorithm",defaultMessage:"Algorithm"}),value:d.algoCombo,onChange:e=>{const{value:t}=e.target;m(vl({},d,{algoCombo:t,algoClassName:"other"===t?"":Ol.algoClassName}))},helperText:"Please select the Loadbalance Algorithm.",margin:"normal",disabled:Object(o.b)(["apim:api_create"],h)},Al.map(e=>i.a.createElement(Yt.a,{key:e.key,value:e.key,selected:d.algoCombo},e.value))),"other"===d.algoCombo?i.a.createElement(Gt.a,{id:"customAlgoInput",label:i.a.createElement(W.a,{id:"Apis.Details.Endpoints.LoadBalanceConfig.class.name.for.algorithm",defaultMessage:"Class Name for Algorithm"}),required:!0,error:u,value:d.algoClassName,onChange:e=>f(e,"algoClassName"),onBlur:()=>g(""===d.algoClassName),helperText:"Enter the class name of the loadbalance algorithm",disabled:Object(o.b)(["apim:api_create"],h),margin:"normal"}):i.a.createElement("div",null),i.a.createElement(Gt.a,{id:"sessionMgtSelect",select:!0,label:i.a.createElement(W.a,{id:"Apis.Details.Endpoints.LoadBalanceConfig.session.management",defaultMessage:"Session Management"}),value:d.sessionManagement,onChange:e=>f(e,"sessionManagement"),helperText:"Please select the Session Management mechanism.",margin:"normal",disabled:Object(o.b)(["apim:api_create"],h)},Sl.map(e=>i.a.createElement(Yt.a,{key:e.key,value:e.key},e.value))),i.a.createElement(Gt.a,{id:"sessionTimeout",label:i.a.createElement(W.a,{id:"Apis.Details.Endpoints.LoadBalanceConfig.session.timeout",defaultMessage:"Session Timeout (Millis)"}),value:d.sessionTimeOut,onChange:e=>f(e,"sessionTimeOut"),type:"number",placeholder:"300",margin:"normal",disabled:Object(o.b)(["apim:api_create"],h)})),i.a.createElement(me.a,{className:p.configButtonContainer},i.a.createElement(je.a,{color:"primary",variant:"contained",autoFocus:!0,onClick:()=>{l(d)},disabled:""===d.algoClassName||Object(o.b)(["apim:api_create"],h),style:{marginRight:"10px"}},i.a.createElement(W.a,{id:"Apis.Details.Endpoints.EndpointOverview.loadbalance.config.save.button",defaultMessage:"Save"})),i.a.createElement(je.a,{onClick:c},i.a.createElement(W.a,{id:"Apis.Details.Endpoints.EndpointOverview.loadbalance.config.cancel.button",defaultMessage:"Close"}))))}Dl.propTypes={api:s.a.shape({}).isRequired,classes:s.a.shape({}).isRequired,algoClassName:s.a.string.isRequired,algoCombo:s.a.string.isRequired,sessionManagement:s.a.string.isRequired,sessionTimeOut:s.a.string.isRequired,handleLBConfigChange:s.a.func.isRequired,closeLBConfigDialog:s.a.func.isRequired};var Pl=Object(W.d)(Object(q.a)(e=>({configButtonContainer:{display:"flex",justifyContent:"flex-end",paddingTop:e.spacing(1)}}))(Dl));function wl(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function Tl(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?wl(a,!0).forEach(function(t){xl(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):wl(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function xl(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Il=[{key:"none",value:"None"},{key:"failover",value:"Failover"},{key:"load_balance",value:"Load Balanced"}];function Ml(e){const{epConfig:t,classes:a,endpointsDispatcher:r,toggleAdvanceConfig:s,globalEpType:l,handleEndpointCategorySelect:c}=e,{api:p}=Object(n.useContext)(ue.c),[d,m]=Object(n.useState)(!1),[u,g]=Object(n.useState)(e),[h,f]=Object(n.useState)(!1);Object(n.useEffect)(()=>{const e=t.endpoint_type;g("http"===e||"address"===e?"none":e)},[e]);const E=(e,a,n)=>{const i=xa()(t),s={endpoint_type:l.key,template_not_supported:!1,url:n},o=sl(a,e);let c=i[o];c=c?Array.isArray(c)?c.concat(s):[c].concat(s):[s],i[o]=c,r({action:"add_endpoint",value:i})},b=(e,a,n)=>{const i=xa()(t),s=sl(a,n),o="failover"===a?e-1:e,l=i[s];l.splice(o,1),r({action:"remove_endpoint",value:Tl({},t,{[s]:l})})},y=()=>{};return i.a.createElement(i.a.Fragment,null,i.a.createElement(Ma.a,{expanded:d||"load_balance"===u||"failover"===u,onChange:()=>m(!d),className:a.generalConfigPanel},i.a.createElement(Ra.a,{expandIcon:i.a.createElement(ja.a,null),"aria-controls":"panel1bh-content",id:"panel1bh-header",className:a.configHeaderContainer},i.a.createElement(J.a,{className:a.secondaryHeading},(()=>{switch(u){case"none":return i.a.createElement(W.a,{id:"Apis.Details.Endpoints.LoadbalanceFailoverConfig.none.heading",defaultMessage:"Not Configured"});case"failover":return i.a.createElement(W.a,{id:"Apis.Details.Endpoints.LoadbalanceFailoverConfig.failover.heading",defaultMessage:"Failover Endpoints"});default:return i.a.createElement(W.a,{id:"Apis.Details.Endpoints.LoadbalanceFailoverConfig.loadbalance.heading",defaultMessage:"Load Balanced Endpoints"})}})())),i.a.createElement(ka.a,{className:a.generalConfigContent},t.production_endpoints||t.sandbox_endpoints?i.a.createElement(me.a,{container:!0,item:!0,xs:12},i.a.createElement(me.a,{xs:12,className:a.endpointsTypeSelectWrapper},i.a.createElement(Gt.a,{disabled:Object(o.b)(["apim:api_create"],p),id:"certificateEndpoint",label:i.a.createElement(W.a,{id:"Apis.Details.Endpoints.LoadbalanceFailoverConfig.endpoint.type",defaultMessage:"Endpoint Type"}),value:u,placeholder:"Endpoint",onChange:e=>{g(e.target.value),c(e)},margin:"normal",variant:"outlined",select:!0,className:a.endpointTypeSelect},Il.map(e=>i.a.createElement(Yt.a,{value:e.key},e.value))),i.a.createElement("div",{className:a.lpConfigWrapper},i.a.createElement(Pt.a,{className:a.lbConfigBtn,disabled:"load_balance"!==t.endpoint_type,"aria-label":"Delete",onClick:()=>f(!0)},i.a.createElement(Dt.a,null,"settings")))),i.a.createElement(me.a,{xs:12,container:!0,spacing:2},i.a.createElement(Ga.a,{className:a.wrapper,in:"none"!==u},t.production_endpoints&&i.a.createElement(me.a,{xs:12,className:a.endpointsWrapperLeft},i.a.createElement(J.a,{className:a.endpointName},"failover"===t.endpoint_type?i.a.createElement(W.a,{id:"Apis.Details.Endpoints.LoadbalanceFailoverConfig.production.failover.endpoint",defaultMessage:"Production Failover Endpoints"}):i.a.createElement(W.a,{id:"Apis.Details.Endpoints.LoadbalanceFailoverConfig.production.loadbalance.endpoint",defaultMessage:"Production Loadbalanced Endpoints"})),i.a.createElement(bl,{apiEndpoints:t.production_endpoints,failOvers:t.production_failovers,epType:t.endpoint_type,addNewEndpoint:E,removeEndpoint:b,editEndpoint:y,setAdvancedConfigOpen:s,category:"production_endpoints",apiId:p.id})),t.sandbox_endpoints&&i.a.createElement(me.a,{xs:12,className:a.endpointsWrapperRight},i.a.createElement(J.a,{className:a.endpointName},"failover"===t.endpoint_type?i.a.createElement(W.a,{id:"Apis.Details.Endpoints.LoadbalanceFailoverConfig.sandbox.failover.endpoint",defaultMessage:"Sandbox Failover Endpoints"}):i.a.createElement(W.a,{id:"Apis.Details.Endpoints.LoadbalanceFailoverConfig.sandbox.loadbalance.endpoint",defaultMessage:"Sandbox Loadbalanced Endpoints"})),i.a.createElement(bl,{apiEndpoints:t.sandbox_endpoints,failOvers:t.sandbox_failovers,epType:t.endpoint_type,addNewEndpoint:E,removeEndpoint:b,editEndpoint:y,setAdvancedConfigOpen:s,category:"sandbox_endpoints",apiId:p.id}))))):i.a.createElement(Yi.a,null,i.a.createElement("div",{className:a.contentWrapper},i.a.createElement(J.a,{component:"p",className:a.content},i.a.createElement(W.a,{id:"Apis.Details.Endpoints.LoadbalanceFailoverConfig.no.endpoints.message",defaultMessage:"Add Production/ Sandbox endpoints to configure."})))))),i.a.createElement(Et.a,{open:h},i.a.createElement(Fa.a,null,i.a.createElement(J.a,{className:a.configDialogHeader},i.a.createElement(W.a,{id:"Apis.Details.Endpoints.LoadbalanceFailoverConfig.load.balance.configuration.title",defaultMessage:"Load Balance Configurations"}))),i.a.createElement(yt.a,null,i.a.createElement(Pl,{handleLBConfigChange:e=>{r({action:"set_lb_config",value:Tl({},t,{},e)}),f(!1)},closeLBConfigDialog:()=>f(!1),algoCombo:t.algoCombo,algoClassName:t.algoClassName,sessionTimeOut:t.sessionTimeOut,sessionManagement:t.sessionManagement}))))}Ml.propTypes={epConfig:s.a.shape({}).isRequired,endpointSecurityInfo:s.a.shape({}).isRequired,endpointType:s.a.shape({}).isRequired,classes:s.a.shape({}).isRequired,endpointsDispatcher:s.a.func.isRequired,toggleAdvanceConfig:s.a.func.isRequired,handleEndpointCategorySelect:s.a.func.isRequired,globalEpType:s.a.shape({}).isRequired,intl:s.a.shape({}).isRequired};var Rl=Object(W.d)(Object(q.a)(e=>({endpointTypeSelect:{width:"50%",marginTop:e.spacing(1)},configHeaderContainer:{display:"flex",justifyContent:"space-between"},generalConfigContent:{boxShadow:"inset -1px 2px 3px 0px #c3c3c3"},secondaryHeading:{fontSize:e.typography.pxToRem(15),color:e.palette.text.secondary,display:"flex"},heading:{fontSize:e.typography.pxToRem(15),flexBasis:"33.33%",flexShrink:0,fontWeight:"900"},endpointConfigSection:{padding:"10px"},generalConfigPanel:{width:"100%"},endpointsTypeSelectWrapper:{display:"flex",marginTop:e.spacing(2),marginBottom:e.spacing(2)},lbConfigBtn:{position:"relative",top:"10px"},endpointName:{fontWeight:600},wrapper:{width:"100%"}}))(Ml)),kl=a(1421);function Nl(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function jl(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Nl(a,!0).forEach(function(t){_l(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Nl(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function _l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Ll={PaperProps:{style:{maxHeight:224,width:250}}};function ql(e){const{api:t}=Object(n.useContext)(ue.c),{classes:a,intl:r,advanceConfig:s,isSOAPEndpoint:l,onSaveAdvanceConfig:c,onCancel:p}=e,[d,m]=Object(n.useState)(()=>{const e={};return l&&(e.format="soap11",e.optimize="SWA"),e.actionDuration="30000",e.actionSelect="fault",e.factor="",e.retryDelay="",e.retryErroCode=[],e.retryTimeOut="",e.suspendDuration="",e.suspendErrorCode=[],e.suspendMaxDuration="",e}),u=[{key:"101001",value:"101001 : "+r.formatMessage({id:"Apis.Details.Endpoints.AdvancedConfig.AdvanceEndpointConfig.receiver.io.error.receiving",defaultMessage:"Receiver IO error Receiving"})},{key:"101500",value:"101500 : "+r.formatMessage({id:"Apis.Details.Endpoints.AdvancedConfig.AdvanceEndpointConfig.sender.io.error.sending",defaultMessage:"Sender IO Error Sending"})},{key:"101000",value:"101000 : "+r.formatMessage({id:"Apis.Details.Endpoints.AdvancedConfig.AdvanceEndpointConfig.receiver.io.error.sending",defaultMessage:"Retriever IO Error Sending"})},{key:"101501",value:"101501 : "+r.formatMessage({id:"Apis.Details.Endpoints.AdvancedConfig.AdvanceEndpointConfig.sender.io.error.receiving",defaultMessage:"Sender IO Error Receiving"})},{key:"101503",value:"101503 : "+r.formatMessage({id:"Apis.Details.Endpoints.AdvancedConfig.AdvanceEndpointConfig.connection.failed",defaultMessage:"Connection Failed"})},{key:"101504",value:"101504 : "+r.formatMessage({id:"Apis.Details.Endpoints.AdvancedConfig.AdvanceEndpointConfig.connection.timed.out",defaultMessage:"Connection Timed Out"})},{key:"101505",value:"101505 : "+r.formatMessage({id:"Apis.Details.Endpoints.AdvancedConfig.AdvanceEndpointConfig.connection.closed",defaultMessage:"Connection Closed"})},{key:"101506",value:"101506 : "+r.formatMessage({id:"Apis.Details.Endpoints.AdvancedConfig.AdvanceEndpointConfig.tpp.protocol.violation",defaultMessage:"TTP Protocol Violation"})},{key:"101507",value:"101507 : "+r.formatMessage({id:"Apis.Details.Endpoints.AdvancedConfig.AdvanceEndpointConfig.connect.cancel",defaultMessage:"Connect Cancel"})},{key:"101508",value:"101508 : "+r.formatMessage({id:"Apis.Details.Endpoints.AdvancedConfig.AdvanceEndpointConfig.connect.timeout",defaultMessage:"Connect Timeout"})},{key:"101509",value:"101509 : "+r.formatMessage({id:"Apis.Details.Endpoints.AdvancedConfig.AdvanceEndpointConfig.send.abort",defaultMessage:"Send Abort"})},{key:"101510",value:"101510 : "+r.formatMessage({id:"Apis.Details.Endpoints.AdvancedConfig.AdvanceEndpointConfig.response.processing.failure",defaultMessage:"Response Processing Failure"})}],g=[{key:"fault",value:r.formatMessage({id:"Apis.Details.Endpoints.AdvancedConfig.AdvanceEndpointConfig.execute.fault.sequence",defaultMessage:"Execute Fault Sequence"})},{key:"discard",value:r.formatMessage({id:"Apis.Details.Endpoints.AdvancedConfig.AdvanceEndpointConfig.discard.message",defaultMessage:"Discard Message"})}],h=[{key:"soap11",value:"SOAP 1.1"},{key:"soap12",value:"SOAP 1.2"},{key:"POX",value:r.formatMessage({id:"Apis.Details.Endpoints.AdvancedConfig.AdvanceEndpointConfig.plain.old.xml",defaultMessage:"Plain Old XML (POX)"})},{key:"REST",value:r.formatMessage({id:"Apis.Details.Endpoints.AdvancedConfig.AdvanceEndpointConfig.representational.state.transfer",defaultMessage:"Representational State Transfer (REST)"})},{key:"GET",value:"GET"},{key:"leave-as-is",value:r.formatMessage({id:"Apis.Details.Endpoints.AdvancedConfig.AdvanceEndpointConfig.leave.as.is",defaultMessage:"Leave As-Is"})}],f=[{key:"SWA",value:"SWA"},{key:"MTOM",value:"MTOM"},{key:"leave-as-is",value:r.formatMessage({id:"Apis.Details.Endpoints.AdvancedConfig.AdvanceEndpointConfig.leave.as.is",defaultMessage:"Leave As-Is"})}];Object(n.useEffect)(()=>{m(()=>s==={}?jl({},d):jl({},d,{},s))},[e]);const E=(e,t)=>{const a=jl({},d,{[t]:e.target.value});m(a)};return i.a.createElement(me.a,{container:!0,direction:"column",className:a.configContainer},l?i.a.createElement(me.a,{item:!0,container:!0,className:a.configSubContainer},i.a.createElement(J.a,{className:a.subTitle},i.a.createElement(W.a,{id:"Apis.Details.Endpoints.AdvancedConfig.AdvanceEndpointConfig.message.content",defaultMessage:"Message Content"})),i.a.createElement(zt.a,{className:a.formControl},i.a.createElement(As.a,{htmlFor:"err-code-select"},i.a.createElement(W.a,{id:"Apis.Details.Endpoints.AdvancedConfig.AdvanceEndpointConfig.format.select",defaultMessage:"Format"})),i.a.createElement(Ot.a,{autoWidth:!1,value:d.format,onChange:e=>E(e,"format"),input:i.a.createElement(kl.a,{id:"err-code-select"}),MenuProps:Ll},h.map(e=>i.a.createElement(Yt.a,{key:e.key,value:e.key},e.value)))),i.a.createElement(zt.a,{className:a.formControl},i.a.createElement(As.a,{htmlFor:"err-code-select"},i.a.createElement(W.a,{id:"Apis.Details.Endpoints.AdvancedConfig.AdvanceEndpointConfig.optimize.select",defaultMessage:"Optimize"})),i.a.createElement(Ot.a,{autoWidth:!1,value:d.optimize,onChange:e=>E(e,"optimize"),input:i.a.createElement(kl.a,{id:"err-code-select"}),MenuProps:Ll},f.map(e=>i.a.createElement(Yt.a,{key:e.key,value:e.key},e.value)))),i.a.createElement(Ji.a,null)):i.a.createElement("div",null),i.a.createElement(me.a,{item:!0,container:!0,className:a.configSubContainer},i.a.createElement(J.a,{className:a.subTitle},i.a.createElement(W.a,{id:"Endpoint.Suspension.State",defaultMessage:"Endpoint Suspension State"})),i.a.createElement(zt.a,{className:a.formControl},i.a.createElement(As.a,{htmlFor:"err-code-select"},i.a.createElement(W.a,{id:"Apis.Details.Endpoints.AdvancedConfig.AdvanceEndpointConfig.error.code",defaultMessage:"Error Code"})),i.a.createElement(Ot.a,{multiple:!0,autoWidth:!1,value:d.suspendErrorCode,onChange:e=>E(e,"suspendErrorCode"),input:i.a.createElement(kl.a,{id:"err-code-select"}),MenuProps:Ll,variant:"outlined"},u.map(e=>i.a.createElement(Yt.a,{key:e.key,value:e.key},e.value)))),i.a.createElement(Gt.a,{className:a.textField,id:"initial-duration-input",value:d.suspendDuration,onChange:e=>E(e,"suspendDuration"),label:i.a.createElement(W.a,{id:"Apis.Details.Endpoints.AdvancedConfig.AdvanceEndpointConfig.initial.duration.ms",defaultMessage:"Initial Duration (ms)"}),margin:"normal",type:"number"}),i.a.createElement(Gt.a,{className:a.textField,id:"max-duration-input",value:d.suspendMaxDuration,onChange:e=>E(e,"suspendMaxDuration"),label:i.a.createElement(W.a,{id:"Apis.Details.Endpoints.AdvancedConfig.AdvanceEndpointConfig.max.duration.ms",defaultMessage:"Max Duration (ms)"}),margin:"normal",type:"number"}),i.a.createElement(Gt.a,{className:a.textField,value:d.factor,onChange:e=>E(e,"factor"),id:"factor-input",label:i.a.createElement(W.a,{id:"Apis.Details.Endpoints.AdvancedConfig.AdvanceEndpointConfig.factor",defaultMessage:"Factor"}),margin:"normal"})),i.a.createElement(Ji.a,null),i.a.createElement(me.a,{item:!0,container:!0,className:a.configSubContainer},i.a.createElement(J.a,{className:a.subTitle},i.a.createElement(W.a,{id:"Apis.Details.Endpoints.AdvancedConfig.AdvanceEndpointConfig.endpoint.timeout.state",defaultMessage:"Endpoint Timeout State"})),i.a.createElement(zt.a,{className:a.formControl},i.a.createElement(As.a,{htmlFor:"err-code-select"},i.a.createElement(W.a,{id:"Apis.Details.Endpoints.AdvancedConfig.AdvanceEndpointConfig.error.code",defaultMessage:"Error Code"})),i.a.createElement(Ot.a,{multiple:!0,autoWidth:!1,value:d.retryErroCode,onChange:e=>E(e,"retryErroCode"),input:i.a.createElement(kl.a,{id:"err-code-select"}),MenuProps:Ll},u.map(e=>i.a.createElement(Yt.a,{key:e.key,value:e.key},e.value)))),i.a.createElement(Gt.a,{className:a.textField,id:"retries-input",value:d.retryTimeOut,onChange:e=>E(e,"retryTimeOut"),label:i.a.createElement(W.a,{id:"Apis.Details.Endpoints.AdvancedConfig.AdvanceEndpointConfig.retries.before.suspension",defaultMessage:"Retries Before Suspension"}),type:"number",margin:"normal"}),i.a.createElement(Gt.a,{className:a.textField,id:"retry-delay-input",value:d.retryDelay,onChange:e=>E(e,"retryDelay"),label:i.a.createElement(W.a,{id:"Apis.Details.Endpoints.AdvancedConfig.AdvanceEndpointConfig.retry.delay.ms",defaultMessage:"Retry Delay (ms)"}),type:"number",margin:"normal"})),i.a.createElement(Ji.a,null),i.a.createElement(me.a,{item:!0,container:!0,className:a.configSubContainer},i.a.createElement(J.a,{className:a.subTitle},i.a.createElement(W.a,{id:"Connection.Timeout",defaultMessage:"Connection Timeout"})),i.a.createElement(zt.a,{className:a.formControl},i.a.createElement(As.a,{htmlFor:"err-code-select"},i.a.createElement(W.a,{id:"Apis.Details.Endpoints.AdvancedConfig.AdvanceEndpointConfig.action",defaultMessage:"Action"})),i.a.createElement(Ot.a,{autoWidth:!1,value:d.actionSelect,onChange:e=>E(e,"actionSelect"),input:i.a.createElement(kl.a,{id:"err-code-select"}),MenuProps:Ll},g.map(e=>i.a.createElement(Yt.a,{key:e.key,value:e.key},e.value)))),i.a.createElement(Gt.a,{className:a.textField,id:"duration-input",value:d.actionDuration,onChange:e=>E(e,"actionDuration"),label:i.a.createElement(W.a,{id:"Apis.Details.Endpoints.AdvancedConfig.AdvanceEndpointConfig.duration.ms",defaultMessage:"Duration (ms)"}),type:"number",margin:"normal"})),i.a.createElement(me.a,{className:a.advanceDialogActions},i.a.createElement(je.a,{onClick:()=>c(d),color:"primary",autoFocus:!0,disabled:Object(o.b)(["apim:api_create"],t),variant:"contained",style:{marginRight:"10px"}},i.a.createElement(W.a,{id:"Apis.Details.Endpoints.AdvancedConfig.AdvanceEndpointConfig.config.save.button",defaultMessage:"Save"})),i.a.createElement(je.a,{onClick:p},i.a.createElement(W.a,{id:"Apis.Details.Endpoints.AdvancedConfig.AdvanceEndpointConfig.cancel.button",defaultMessage:"Close"}))))}ql.propTypes={classes:s.a.shape({configContainer:s.a.shape({}),configSubContainer:s.a.shape({}),subTitle:s.a.shape({}),formControl:s.a.shape({})}).isRequired,intl:s.a.shape({formatMessage:s.a.func}).isRequired,advanceConfig:s.a.shape({}).isRequired,isSOAPEndpoint:s.a.bool.isRequired,onSaveAdvanceConfig:s.a.func.isRequired,onCancel:s.a.func.isRequired};var Wl=Object(W.d)(Object(q.a)(e=>({formControl:{width:"500px"},subTitle:{fontSize:"1rem",paddingTop:e.spacing(1),paddingBottom:e.spacing(1),marginBottom:e.spacing(1)},configContainer:{paddingTop:"10px"},configSubContainer:{paddingBottom:"10px",marginTop:"5px",padding:"5px"},textField:{marginRight:e.spacing(1),width:"45%"},advanceDialogActions:{display:"flex",justifyContent:"flex-end"}}),{withTheme:!0})(ql)),Ul=a(3739),Bl=a(1725),Fl=a.n(Bl),zl=a(1724),Vl=a.n(zl);const Hl=Object(He.a)(()=>({link:{cursor:"pointer"}}));function Gl(e){const{oldName:t,oldValue:a,handleUpdateList:r,handleDelete:s,intl:o,isRestricted:l,api:c}=e,[p,d]=Object(n.useState)(t),[m,u]=Object(n.useState)(a),[g,h]=Object(n.useState)(!1),f=e=>null!==e&&""===e,E=()=>{r({oldName:t,oldValue:a},{newName:p||t,newValue:m||a}),h(!1)},b=e=>{"Enter"===e.key&&E()},y=Hl();return i.a.createElement(Pe.a,null,g?i.a.createElement(De.a,null,i.a.createElement(Gt.a,{fullWidth:!0,required:!0,id:"outlined-required",label:o.formatMessage({id:"Apis.Details.Endpoints.GeneralConfiguration.EditableParameterRow.Parameter.Name",defaultMessage:"Parameter Name"}),margin:"normal",variant:"outlined",className:y.addProperty,value:p,onChange:e=>{const{value:t}=e.target;d(t)},onKeyDown:b,error:f(p)})):i.a.createElement(De.a,null,t),g?i.a.createElement(De.a,null,i.a.createElement(Gt.a,{fullWidth:!0,required:!0,id:"outlined-required",label:o.formatMessage({id:"Apis.Details.Endpoints.GeneralConfiguration.EditableParameterRow.Parameter.Value",defaultMessage:"Parameter Value"}),margin:"normal",variant:"outlined",className:y.addProperty,value:m,onChange:e=>{const{value:t}=e.target;u(t)},onKeyDown:b,error:f(m)})):i.a.createElement(De.a,null,a),i.a.createElement(De.a,{align:"right"},g?i.a.createElement(i.a.Fragment,null,i.a.createElement(Pt.a,{className:y.link,"aria-label":"save",onClick:E,onKeyDown:()=>{},disabled:f(p)||f(m),color:"inherit"},i.a.createElement(Vl.a,{className:y.buttonIcon}))):i.a.createElement(Pt.a,{className:y.link,"aria-label":"edit",onClick:()=>{h(!g)},onKeyDown:()=>{},color:"inherit",disabled:l(["apim:api_create","apim:api_publish"],c)},i.a.createElement(js.a,{className:y.buttonIcon})),i.a.createElement(Pt.a,{className:y.link,"aria-label":"remove",onClick:()=>{s(t)},onKeyDown:()=>{},color:"inherit",disabled:l(["apim:api_create","apim:api_publish"],c)},i.a.createElement(Fl.a,{className:y.buttonIcon}))))}Gl.propTypes={oldName:s.a.string.isRequired,oldValue:s.a.string.isRequired,classes:s.a.shape({}).isRequired,handleUpdateList:s.a.func.isRequired,handleDelete:s.a.func.isRequired};var Kl=Object(W.d)(Gl);function Yl(){return(Yl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function Jl(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function Ql(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Jl(a,!0).forEach(function(t){Zl(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Jl(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function Zl(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Xl(e){const{api:t}=Object(n.useContext)(ue.c),{intl:a,securityInfo:r,onChangeEndpointAuth:s,classes:l,isProduction:c,saveEndpointSecurityConfig:p,closeEndpointSecurityConfig:d}=e,[m,u]=Object(n.useState)({type:"",username:"",password:"",grantType:"",tokenUrl:"",clientId:"",clientSecret:"",customParameters:{}}),[g,h]=Object(n.useState)(),[f,E]=Object(n.useState)(!1),[b,y]=Object(n.useState)(!0),[v,C]=Object(n.useState)(null),[A,S]=Object(n.useState)(null),O=c?"production":"sandbox",D=[{key:"NONE",value:a.formatMessage({id:"Apis.Details.Endpoints.GeneralConfiguration.EndpointSecurity.none",defaultMessage:"None"})},{key:"BASIC",value:a.formatMessage({id:"Apis.Details.Endpoints.GeneralConfiguration.EndpointSecurity.basic",defaultMessage:"Basic Auth"})},{key:"DIGEST",value:a.formatMessage({id:"Apis.Details.Endpoints.GeneralConfiguration.EndpointSecurity.digest.auth",defaultMessage:"Digest Auth"})},{key:"OAUTH",value:a.formatMessage({id:"Apis.Details.Endpoints.GeneralConfiguration.EndpointSecurity.oauth",defaultMessage:"OAuth 2.0"})}],P=[{key:"CLIENT_CREDENTIALS",value:a.formatMessage({id:"Apis.Details.Endpoints.GeneralConfiguration.EndpointSecurity.oauth.grant.type.client",defaultMessage:"Client Credentials"})},{key:"PASSWORD",value:a.formatMessage({id:"Apis.Details.Endpoints.GeneralConfiguration.EndpointSecurity.oauth.grant.type.password",defaultMessage:"Resource Owner Password"})}];Object(n.useEffect)(()=>{let e={};if(null!==r){e=Ql({},r);const{type:t,username:a,password:n,grantType:i,tokenUrl:s,clientId:o,clientSecret:l,customParameters:c}=r;e.type=null===t?"NONE":t,e.username=a,e.password=""===n?"**********":n,e.grantType=i,e.tokenUrl=s,e.clientId=""===o?"********":o,e.clientSecret=""===l?"********":l,e.customParameters=c}u(e)},[e]);const w=e=>{if(m[e]){let t=!0;"tokenUrl"===e&&(t=(e=>{return null===Zt.a.url.required().validate(e).error})(m[e])),h(Ql({},g,{[e]:t}))}else h(Ql({},g,{[e]:!1}));s(m,c?"production":"sandbox")},T=()=>{E(!f)},x=e=>t=>{const{value:a}=t.target;"parameterName"===e?C(a):"parameterValue"===e&&S(a)},I=e=>null!==e&&""===e,M=()=>{const e=m.customParameters;null!==e&&Object.prototype.hasOwnProperty.call(e,v)?te.a.warning("Parameter name: "+v+" already exists"):(e[v]=A,C(null),S(null)),u(Ql({},m,{customParameters:e})),s(m,O)},R=(e,t)=>{const a=m.customParameters,{oldName:n,oldValue:i}=e,{newName:r,newValue:o}=t;null!==a&&Object.prototype.hasOwnProperty.call(a,r)&&n===r?o&&i!==o&&(a[n]=o):(delete a[n],a[r]=o),u(Ql({},m,{customParameters:a})),s(m,O)},k=e=>{const t=m.customParameters;null!==t&&Object.prototype.hasOwnProperty.call(t,e)&&delete t[e],u(Ql({},m,{customParameters:t})),s(m,O)},N=e=>{"Enter"===e.key&&M()};return i.a.createElement(me.a,{container:!0,direction:"row",spacing:2},i.a.createElement(me.a,{item:!0,xs:6},i.a.createElement(Gt.a,{disabled:Object(o.b)(["apim:api_create"],t),fullWidth:!0,select:!0,value:m&&m.type,variant:"outlined",onChange:e=>{u(Ql({},m,{type:e.target.value}))},inputProps:{name:"key",id:"auth-type-select"},onBlur:()=>w(c)},D.map(e=>i.a.createElement(Yt.a,{value:e.key},e.value)))),i.a.createElement(me.a,{item:!0,xs:6}),"OAUTH"===m.type&&i.a.createElement(i.a.Fragment,null,i.a.createElement(me.a,{item:!0,xs:6},i.a.createElement(Gt.a,{disabled:Object(o.b)(["apim:api_create"],t),required:!0,fullWidth:!0,select:!0,label:i.a.createElement(W.a,{id:"Apis.Details.Endpoints.GeneralConfiguration.EndpointSecurity.grant.type.input",defaultMessage:"Grant Type"}),variant:"outlined",onChange:e=>u(Ql({},m,{grantType:e.target.value})),value:m.grantType,inputProps:{name:"key",id:"grant-type-select"},onBlur:()=>w("grantType")},P.map(e=>i.a.createElement(Yt.a,{value:e.key},e.value)))),("CLIENT_CREDENTIALS"===m.grantType||"PASSWORD"===m.grantType)&&i.a.createElement(i.a.Fragment,null,i.a.createElement(me.a,{item:!0,xs:6},i.a.createElement(Gt.a,{disabled:Object(o.b)(["apim:api_create"],t),required:!0,fullWidth:!0,error:g&&!1===g.tokenUrl,helperText:g&&!1===g.tokenUrl?i.a.createElement(W.a,{id:"Apis.Details.Endpoints.GeneralConfiguration.EndpointSecurity.no.tokenUrl.error",defaultMessage:"Token URL should not be empty or formatted incorrectly"}):i.a.createElement(W.a,{id:"Apis.Details.Endpoints.GeneralConfiguration.EndpointSecurity.tokenUrl.message",defaultMessage:"Enter Token URL"}),variant:"outlined",id:"auth-tokenUrl",label:i.a.createElement(W.a,{id:"Apis.Details.Endpoints.GeneralConfiguration.EndpointSecurity.token.url.input",defaultMessage:"Token URL"}),onChange:e=>u(Ql({},m,{tokenUrl:e.target.value})),value:m.tokenUrl,onBlur:()=>w("tokenUrl")})),i.a.createElement(me.a,{item:!0,xs:6},i.a.createElement(Gt.a,{disabled:Object(o.b)(["apim:api_create"],t),required:!0,fullWidth:!0,error:g&&!1===g.clientId,helperText:g&&!1===g.clientId?i.a.createElement(W.a,{id:"Apis.Details.Endpoints.GeneralConfiguration.EndpointSecurity.no.clientId.error",defaultMessage:"Client ID should not be empty"}):i.a.createElement(W.a,{id:"Apis.Details.Endpoints.GeneralConfiguration.EndpointSecurity.clientId.message",defaultMessage:"Enter Client ID"}),variant:"outlined",id:"auth-clientId",label:i.a.createElement(W.a,{id:"Apis.Details.Endpoints.GeneralConfiguration.EndpointSecurity.clientId.input",defaultMessage:"Client ID"}),onChange:e=>u(Ql({},m,{clientId:e.target.value})),value:m.clientId,onBlur:()=>w("clientId")})),i.a.createElement(me.a,{item:!0,xs:6},i.a.createElement(Gt.a,{disabled:Object(o.b)(["apim:api_create"],t),required:!0,fullWidth:!0,error:g&&!1===g.clientSecret,helperText:g&&!1===g.clientSecret?i.a.createElement(W.a,{id:"Apis.Details.Endpoints.GeneralConfiguration.EndpointSecurity.no.clientSecret.error",defaultMessage:"Client Secret should not be empty"}):i.a.createElement(W.a,{id:"Apis.Details.Endpoints.GeneralConfiguration.EndpointSecurity.clientSecret.message",defaultMessage:"Enter Client Secret"}),variant:"outlined",id:"auth-clientSecret",type:b?"password":"text",label:i.a.createElement(W.a,{id:"Apis.Details.Endpoints.GeneralConfiguration.EndpointSecurity.clientSecret.input",defaultMessage:"Client Secret"}),onChange:e=>u(Ql({},m,{clientSecret:e.target.value})),value:m.clientSecret,onBlur:()=>w("clientSecret"),InputProps:{endAdornment:i.a.createElement(aa.a,{position:"end"},i.a.createElement(Ul.a,{className:l.eye,onClick:()=>{y(!b)}}))}})))),("BASIC"===m.type||"DIGEST"===m.type||"PASSWORD"===m.grantType)&&i.a.createElement(i.a.Fragment,null,i.a.createElement(me.a,{item:!0,xs:6},i.a.createElement(Gt.a,{disabled:Object(o.b)(["apim:api_create"],t),required:!0,fullWidth:!0,error:g&&!1===g.username,helperText:g&&!1===g.username?i.a.createElement(W.a,{id:"Apis.Details.Endpoints.GeneralConfiguration.EndpointSecurity.no.username.error",defaultMessage:"Username should not be empty"}):i.a.createElement(W.a,{id:"Apis.Details.Endpoints.GeneralConfiguration.EndpointSecurity.username.message",defaultMessage:"Enter Username"}),variant:"outlined",id:"auth-userName",label:i.a.createElement(W.a,{id:"Apis.Details.Endpoints.GeneralConfiguration.EndpointSecurity.user.name.input",defaultMessage:"Username"}),onChange:e=>u(Ql({},m,{username:e.target.value})),value:m.username,onBlur:()=>w("username")})),i.a.createElement(me.a,{item:!0,xs:6},i.a.createElement(Gt.a,{disabled:Object(o.b)(["apim:api_create"],t),required:!0,fullWidth:!0,error:g&&!1===g.password,helperText:g&&!1===g.password?i.a.createElement(W.a,{id:"Apis.Details.Endpoints.GeneralConfiguration.EndpointSecurity.no.password.error",defaultMessage:"Password should not be empty"}):i.a.createElement(W.a,{id:"Apis.Details.Endpoints.GeneralConfiguration.EndpointSecurity.password.message",defaultMessage:"Enter Password"}),variant:"outlined",type:"password",id:"auth-password",label:i.a.createElement(W.a,{id:"Apis.Details.Endpoints.GeneralConfiguration.EndpointSecurity.password.input",defaultMessage:"Password"}),value:m.password,onChange:e=>u(Ql({},m,{password:e.target.value})),onBlur:()=>w("password")}))),"OAUTH"===m.type&&("CLIENT_CREDENTIALS"===m.grantType||"PASSWORD"===m.grantType)&&i.a.createElement(me.a,{item:!0,xs:12},i.a.createElement(Pn.a,{className:l.listItem},i.a.createElement(wn.a,null,i.a.createElement(Dt.a,{color:"primary"},"info")),i.a.createElement(ma.a,null,i.a.createElement(W.a,{id:"Apis.Details.Endpoints.GeneralConfiguration.EndpointSecurity.add.new.parameter.info",defaultMessage:"You can add any additional payload parameters required for the endpoint below"}))),i.a.createElement(je.a,{size:"medium",className:l.button,onClick:T,disabled:Object(o.b)(["apim:api_create","apim:api_publish"],t)},i.a.createElement(Ki.a,{className:l.buttonIcon}),i.a.createElement(W.a,{id:"Apis.Details.Endpoints.GeneralConfiguration.EndpointSecurity.add.new.parameter",defaultMessage:"Add New Parameter"}))),i.a.createElement(me.a,{item:!0,xs:12}),"OAUTH"===m.type&&(!xr()(m.customParameters)||f)&&i.a.createElement(me.a,{item:!0,xs:12},i.a.createElement(Oe.a,{className:l.table},i.a.createElement(Yn.a,null,i.a.createElement(Pe.a,null,i.a.createElement(De.a,null,i.a.createElement(W.a,{id:"Apis.Details.Endpoints.GeneralConfiguration.EndpointSecurity.label.parameter.name",defaultMessage:"Parameter Name"})),i.a.createElement(De.a,null,i.a.createElement(W.a,{id:"Apis.Details.Endpoints.GeneralConfiguration.EndpointSecurity.label.parameter.value",defaultMessage:"Parameter Value"})),i.a.createElement(De.a,null))),i.a.createElement(Kn.a,null,f&&i.a.createElement(i.a.Fragment,null,i.a.createElement(Pe.a,null,i.a.createElement(De.a,null,i.a.createElement(Gt.a,{fullWidth:!0,required:!0,id:"outlined-required",label:a.formatMessage({id:"Apis.Details.Endpoints.GeneralConfiguration.EndpointSecurity.input.parameter.name",defaultMessage:"Parameter Name"}),margin:"normal",variant:"outlined",className:l.addParameter,value:null===v?"":v,onChange:x("parameterName"),onKeyDown:N("parameterName"),helperText:I(v)?"Invalid parameter name":"",error:I(v),disabled:Object(o.b)(["apim:api_create","apim:api_publish"],t)})),i.a.createElement(De.a,null,i.a.createElement(Gt.a,{fullWidth:!0,required:!0,id:"outlined-required",label:a.formatMessage({id:"Apis.Details.Endpoints.GeneralConfiguration.EndpointSecurity.input.parameter.value",defaultMessage:"Parameter Value"}),margin:"normal",variant:"outlined",className:l.addParameter,value:null===A?"":A,onChange:x("parameterValue"),onKeyDown:N("parameterValue"),error:I(A),disabled:Object(o.b)(["apim:api_create","apim:api_publish"],t)})),i.a.createElement(De.a,{align:"right"},i.a.createElement(je.a,{variant:"contained",color:"primary",disabled:!A||!v||Object(o.b)(["apim:api_create","apim:api_publish"],t),onClick:M,className:l.marginRight},i.a.createElement(W.a,{id:"Apis.Details.Properties.Properties.add",defaultMessage:"Add"})),i.a.createElement(je.a,{onClick:T},i.a.createElement(W.a,{id:"Apis.Details.Properties.Properties.cancel",defaultMessage:"Cancel"}))))),("production"===O||"sandbox"===O)&&(()=>{const a=[];for(const n in m.customParameters)Object.prototype.hasOwnProperty.call(m.customParameters,n)&&a.push(i.a.createElement(Kl,Yl({oldName:n,oldValue:m.customParameters[n],handleUpdateList:R,handleDelete:k,customParameters:m.customParameters},e,{isRestricted:o.b,api:t})));return a})()))),i.a.createElement(me.a,{className:l.advanceDialogActions},i.a.createElement(je.a,{onClick:()=>p(m,O),color:"primary",autoFocus:!0,variant:"contained",style:{marginTop:"10px",marginRight:"10px",marginBottom:"10px"}},i.a.createElement(W.a,{id:"Apis.Details.Endpoints.GeneralConfiguration.EndpointSecurityConfig.config.save.button",defaultMessage:"Submit"})),i.a.createElement(je.a,{onClick:d,style:{marginTop:"10px",marginBottom:"10px"}},i.a.createElement(W.a,{id:"Apis.Details.Endpoints.GeneralConfiguration.EndpointSecurityConfig.cancel.button",defaultMessage:"Close"}))))}Xl.propTypes={intl:s.a.shape({}).isRequired,securityInfo:s.a.shape({}).isRequired,onChangeEndpointAuth:s.a.func.isRequired};var $l=Object(q.a)(()=>({FormControl:{padding:0,width:"100%"},radioWrapper:{display:"flex",flexDirection:"row"},addParameter:{marginRight:"16px"},marginRight:{marginRight:"8px"},buttonIcon:{marginRight:"16px"},button:{marginTop:"5px"},listItem:{marginTop:"25px"},eye:{cursor:"pointer"}}))(Object(W.d)(Xl));function ec(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function tc(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ec(a,!0).forEach(function(t){ac(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ec(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function ac(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const nc=Object(He.a)(e=>({typography:{display:"inline-block"},textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),width:300},selectField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),width:300},helpIcon:{fontSize:20},banner:{marginLeft:e.spacing(1),marginRight:e.spacing(1),marginTop:e.spacing(1),marginBottom:e.spacing(1)}}));function ic(e){const{apiId:t,endpointConfig:a,endpointsDispatcher:r}=e,s=nc(),[o,l]=Object(n.useState)(null),c=Object(n.useRef)(null);return Object(n.useEffect)(()=>{X.a.getAmznResourceNames(t).catch(e=>{l(e.response.body.error)})},[]),i.a.createElement(i.a.Fragment,null,i.a.createElement(J.a,{className:s.typography},i.a.createElement(W.a,{id:"Apis.Details.Endpoints.EndpointOverview.awslambda.endpoint.accessMethod",defaultMessage:"Access Method"})),i.a.createElement(Ct.a,{"aria-label":"accessMethod",name:"accessMethod",value:a.access_method,onChange:e=>{const t=tc({},a);t.access_method=e.target.value,t.amznAccessKey="",t.amznSecretKey="",t.amznRegion="",r({action:"set_awsCredentials",value:t}),l(null)}},i.a.createElement("div",null,i.a.createElement(At.a,{value:"role-supplied",control:i.a.createElement(vt.a,{color:"primary"}),label:i.a.createElement(W.a,{id:"Apis.Details.Endpoints.EndpointOverview.awslambda.endpoint.accessMethod.roleSupplied",defaultMessage:"Using IAM role-supplied temporary AWS credentials"})}),i.a.createElement(se.a,{title:i.a.createElement(W.a,{id:"Apis.Details.Endpoints.EndpointOverview.awslambda.endpoint.tooltip",defaultMessage:"You can and should use an IAM role to manage temporary credentials for applications that run on an EC2 instance"})},i.a.createElement(Dt.a,{className:s.helpIcon},"help_outline"))),i.a.createElement("div",null,i.a.createElement(At.a,{value:"stored",control:i.a.createElement(vt.a,{color:"primary"}),label:i.a.createElement(W.a,{id:"Apis.Details.Endpoints.EndpointOverview.awslambda.endpoint.accessMethod.stored",defaultMessage:"Using stored AWS credentials"})}))),i.a.createElement(me.a,{item:!0},i.a.createElement(Gt.a,{required:!0,disabled:"role-supplied"===a.access_method,id:"outlined-required",label:i.a.createElement(W.a,{id:"Apis.Details.Endpoints.EndpointOverview.awslambda.endpoint.accessKey",defaultMessage:"Access Key"}),margin:"normal",variant:"outlined",className:s.textField,value:a.amznAccessKey,onChange:e=>{const t=tc({},a);t.amznAccessKey=e.target.value,r({action:"set_awsCredentials",value:t})}}),i.a.createElement(Gt.a,{required:!0,disabled:"role-supplied"===a.access_method,id:"outlined-password-input-required",label:i.a.createElement(W.a,{id:"Apis.Details.Endpoints.EndpointOverview.awslambda.endpoint.secretKey",defaultMessage:"Secret Key"}),type:"password",margin:"normal",variant:"outlined",className:s.textField,value:a.amznSecretKey,onChange:e=>{const t=tc({},a);t.amznSecretKey=e.target.value,r({action:"set_awsCredentials",value:t})}}),i.a.createElement(zt.a,{required:!0,margin:"normal",variant:"outlined",disabled:"role-supplied"===a.access_method},i.a.createElement(As.a,{ref:c,id:"region-label"},i.a.createElement(W.a,{id:"Apis.Details.Endpoints.EndpointOverview.awslambda.endpoint.region",defaultMessage:"Region"})),i.a.createElement(Ot.a,{labelId:"region-label",autoWidth:!1,className:s.selectField,onChange:e=>{const t=tc({},a);t.amznRegion=e.target.value,r({action:"set_awsCredentials",value:t})},value:a.amznRegion},[{key:"us-east-1",value:"us-east-1: US East (N. Virginia)"},{key:"us-east-2",value:"us-east-2: US East (Ohio)"},{key:"us-west-1",value:"us-west-1: US West (N. California)"},{key:"us-west-2",value:"us-west-2: US West (Oregon)"},{key:"ap-east-1",value:"ap-east-1: Asia Pacific (Hong Kong)"},{key:"ap-south-1",value:"ap-south-1: Asia Pacific (Mumbai)"},{key:"ap-northeast-1",value:"ap-northeast-1: Asia Pacific (Tokyo)"},{key:"ap-northeast-2",value:"ap-northeast-2: Asia Pacific (Seoul)"},{key:"ap-northeast-3",value:"ap-northeast-3: Asia Pacific (Osaka-Local)"},{key:"ap-southeast-1",value:"ap-southeast-1: Asia Pacific (Singapore)"},{key:"ap-southeast-2",value:"ap-southeast-2: Asia Pacific (Sydney)"},{key:"ca-central-1",value:"ca-central-1: Canada (Central)"},{key:"eu-central-1",value:"eu-central-1: Europe (Frankfurt)"},{key:"eu-west-1",value:"eu-west-1: Europe (Ireland)"},{key:"eu-west-2",value:"eu-west-2: Europe (London)"},{key:"eu-west-3",value:"eu-west-3: Europe (Paris)"},{key:"eu-north-1",value:"eu-north-1: Europe (Stockholm)"},{key:"me-south-1",value:"me-south-1: Middle East (Bahrain)"},{key:"sa-east-1",value:"sa-east-1: South America (São Paulo)"}].map(e=>i.a.createElement(Yt.a,{key:e.key,value:e.key},e.value))))),i.a.createElement(me.a,{item:!0},i.a.createElement(B.b,{to:"/apis/".concat(t,"/resources")},i.a.createElement(J.a,{style:{marginLeft:"10px"},color:"primary",display:"inline",variant:"caption"},i.a.createElement(W.a,{id:"Apis.Details.Endpoints.EndpointOverview.awslambda.endpoint.linkToResources",defaultMessage:"Go to Resources to map ARNs"}),i.a.createElement(be.a,{style:{marginLeft:"2px"},fontSize:"small"})))),o&&i.a.createElement(me.a,{item:!0,className:s.banner},i.a.createElement(yi.a,{disableActions:!0,dense:!0,paperProps:{elevation:1},type:"warning",message:o})))}function rc(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function sc(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?rc(a,!0).forEach(function(t){oc(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):rc(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function oc(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}ic.propTypes={apiId:s.a.shape("").isRequired,endpointConfig:s.a.shape({}).isRequired,endpointsDispatcher:s.a.func.isRequired};const lc=[{key:"http",value:"HTTP/REST Endpoint"},{key:"default",value:"Dynamic Endpoints"},{key:"address",value:"HTTP/SOAP Endpoint"},{key:"prototyped",value:"Prototype Endpoint"},{key:"INLINE",value:"Prototype Implementation"},{key:"awslambda",value:"AWS Lambda"}];function cc(e){const{classes:t,api:a,endpointsDispatcher:r,swaggerDef:s,updateSwagger:l,saveAndRedirect:c}=e,{endpointConfig:p,endpointSecurity:d}=a,[m,u]=Object(n.useState)(lc[0]),[g,h]=Object(n.useState)([]),[f,E]=Object(n.useState)(p),[b,y]=Object(n.useState)(null),[v,C]=Object(n.useState)({open:!1,index:0,type:"",category:"",config:void 0}),[A,S]=Object(n.useState)({open:!1,type:"",category:"",config:void 0}),[O,D]=Object(n.useState)({sandbox:!1,prod:!1}),[P,w]=Object(n.useState)({openDialog:!1});Object(n.useEffect)(()=>{const e=(e=>{const{type:t}=e;let a=[];return a="GRAPHQL"===t?[{key:"http",value:"HTTP/REST Endpoint"},{key:"default",value:"Dynamic Endpoints"}]:"SOAP"===t||"SOAPTOREST"===t?[{key:"http",value:"HTTP/REST Endpoint"},{key:"address",value:"HTTP/SOAP Endpoint"},{key:"default",value:"Dynamic Endpoints"},{key:"prototyped",value:"Prototype Endpoint"}]:[{key:"http",value:"HTTP/REST Endpoint"},{key:"address",value:"HTTP/SOAP Endpoint"},{key:"default",value:"Dynamic Endpoints"},{key:"prototyped",value:"Prototype Endpoint"},{key:"INLINE",value:"Prototype Implementation"},{key:"awslambda",value:"AWS Lambda"}]})(a),t=(e=>{const t=e.endpointConfig&&e.endpointConfig.endpoint_type;if("INLINE"===e.endpointImplementationType)return lc[4];if("ENDPOINT"===e.endpointImplementationType&&"prototyped"===e.endpointConfig.implementation_status)return lc[3];if("http"===t)return lc[0];if("default"===t)return lc[1];if("address"===t)return lc[2];if("awslambda"===t)return lc[5];{const e=p.production_endpoints&&p.production_endpoints||p.sandbox_endpoints&&p.sandbox_endpoints;return e?Array.isArray(e)?void 0!==e[0].endpoint_type?lc[2]:lc[0]:void 0!==e.endpoint_type?lc[2]:lc[0]:lc[0]}})(a);"INLINE"!==t.key&&D({prod:!!p.production_endpoints,sandbox:!!p.sandbox_endpoints}),h(e),E(p),u(t),p.endpoint_security?y(p.endpoint_security):y(d)},[e]);const T=e=>f[e]?f[e].length>0?f[e][0].url:f[e].url:"",x=e=>{let t=xa()(p);if("prod"===e){const a="production_endpoints";O[e]?(delete t[a],"failover"===t.endpointType&&delete t.production_failovers):"load_balance"===t.endpointType?t[a]=[cl(m.key)]:"failover"===t.endpointType?(t[a]=cl(m.key),t.production_failovers=[]):t[a]=cl(m.key)}else{const a="sandbox_endpoints";O[e]?(delete t[a],"failover"===t.endpointType&&delete t.sandbox_failovers):"load_balance"===t.endpointType?t[a]=[cl(m.key)]:"failover"===t.endpointType?(t[a]=cl(m.key),t.sandbox_failovers=[]):t[a]=cl(m.key)}t.production_endpoints||t.sandbox_endpoints||(t=ll("http")),r({action:"select_endpoint_category",value:t})},I=(e,t,a)=>{let n=null;const i=xa()(f);if(e>0){const r=sl(i.endpoint_type,t);n=i[r],"failover"===i.endpoint_type?n[e-1].url=a.trim():n[e].url=a.trim(),i[r]=n}else""!==a?((n=i[t])?Array.isArray(n)?""===a?n.splice(0,1):n[0].url=a.trim():n.url=a.trim():(n=cl(i.endpoint_type)).url=a.trim(),i[t]=n):delete i[t];r({action:t,value:n})},M=e=>{w({openDialog:!1});const t=P.type||e;if("INLINE"===t){const e=ll("prototyped");r({action:"set_inline",value:{endpointConfig:e,endpointImplementationType:"INLINE"}})}else if("prototyped"===t){const e=ll(t);r({action:"set_prototyped",value:{endpointImplementationType:"ENDPOINT",endpointConfig:e}})}else if("awslambda"===t){const e=ll(t);r({action:"select_endpoint_type",value:{endpointImplementationType:"ENDPOINT",endpointConfig:sc({},e)}})}else{const e=ll(t);r({action:"select_endpoint_type",value:{endpointImplementationType:"ENDPOINT",endpointConfig:sc({},e)}})}},R=e=>{f.production_endpoints||f.sandbox_endpoints?w({type:e.target.value,openDialog:!0}):M(e.target.value)},k=(e,t,a)=>{const n=((e,t,a)=>{const n=sl(t,a);let i={};if(e>0)i="failover"===f.endpoint_type?f[n][e-1].config:f[n][e].config;else{const e=f[n];i=Array.isArray(e)?e[0].config:e.config}return i})(e,t,a);C(()=>({open:!v.open,index:e,type:t,category:a,config:void 0===n?{}:n}))},N=(e,t)=>{y(null===b?{production:{enabled:!1,type:null,username:null,password:null,grantType:null,tokenUrl:null,clientId:null,clientSecret:null,customParameters:{}},sandbox:{enabled:!1,type:null,username:null,password:null,grantType:null,tokenUrl:null,clientId:null,clientSecret:null,customParameters:{}}}:b),S(()=>({open:!A.open,type:e,category:t,config:void 0===b?{}:b}))},j=(e,t)=>{r({action:"endpointSecurity",value:sc({},b,{[t]:e})})},_=(e,t)=>{r({action:"endpointSecurity",value:sc({},b,{[t]:sc({},b[t],{enabled:"NONE"!==e.type?b[t].enabled=!0:b[t].enabled=!1})})}),S({open:!1})},L=()=>{S({open:!1})},q=Object(n.useCallback)(e=>{l(sc({},s,{paths:e}))},[s]);return i.a.createElement("div",{className:t.overviewWrapper},i.a.createElement(me.a,{container:!0,spacing:2},i.a.createElement(me.a,{item:!0,xs:12},"WS"===a.type?i.a.createElement("div",null):i.a.createElement(zt.a,{component:"fieldset",className:t.formControl},i.a.createElement(Ct.a,{"aria-label":"EndpointType",name:"endpointType",className:t.radioGroup,value:m.key,onChange:R},g.map(e=>{if("CREATED"===a.lifeCycleStatus)return i.a.createElement(At.a,{value:e.key,control:i.a.createElement(vt.a,{disabled:Object(o.b)(["apim:api_create"],a),color:"primary"}),label:e.value});if("PROTOTYPED"===a.lifeCycleStatus){if("prototyped"===e.key||"INLINE"===e.key)return i.a.createElement(At.a,{value:e.key,control:i.a.createElement(vt.a,{disabled:Object(o.b)(["apim:api_create"],a),color:"primary"}),label:e.value})}else if("prototyped"!==e.key&&"INLINE"!==e.key)return i.a.createElement(At.a,{value:e.key,control:i.a.createElement(vt.a,{disabled:Object(o.b)(["apim:api_create"],a),color:"primary"}),label:e.value});return i.a.createElement("div",null)})))),i.a.createElement(me.a,{item:!0,xs:12},"INLINE"===m.key?((e,t,a)=>e?t:a)(0!==Object.keys(s.paths).length,i.a.createElement(il,{paths:s.paths,updatePaths:q}),i.a.createElement(ee.a,null)):i.a.createElement(de.a,{className:t.endpointContainer},"awslambda"===m.key?i.a.createElement(ic,{apiId:a.id,endpointConfig:p,endpointsDispatcher:r}):i.a.createElement(i.a.Fragment,null,"prototyped"===m.key?i.a.createElement(J.a,null,i.a.createElement(W.a,{id:"Apis.Details.Endpoints.EndpointOverview.prototype.endpoint.prototype.label",defaultMessage:"Prototype Endpoint"})):i.a.createElement(At.a,{control:i.a.createElement(ua.a,{checked:O.prod,value:"prod",color:"primary",onChange:function(e){x("prod",e)}}),label:i.a.createElement(J.a,null,i.a.createElement(W.a,{id:"Apis.Details.Endpoints.EndpointOverview.production.endpoint.production.label",defaultMessage:"Production Endpoint"}))}),i.a.createElement(Ga.a,{in:O.prod},"default"===m.key?i.a.createElement(Yi.a,null,i.a.createElement("div",{className:t.contentWrapper},i.a.createElement(J.a,{component:"p",className:t.content},i.a.createElement(W.a,{id:"Apis.Details.Endpoints.EndpointOverview.upload.mediation.message",defaultMessage:"Please upload a mediation sequence file to Message Mediation Policies, which sets the endpoints."}),i.a.createElement(Pt.a,{onClick:c},i.a.createElement(be.a,{style:{marginLeft:"2px"},fontSize:"small",color:"primary"})))),i.a.createElement(je.a,{className:t.button,"aria-label":"Settings",onClick:()=>k(0,"","production_endpoints"),disabled:Object(o.b)(["apim:api_create"],a),variant:"outlined"},i.a.createElement(Dt.a,{className:t.buttonIcon},"settings"),i.a.createElement(J.a,null,i.a.createElement(W.a,{id:"Apis.Details.Endpoints.EndpointOverview.advance.endpoint.configuration",defaultMessage:"Advanced Configurations"}))),i.a.createElement(je.a,{className:t.button,"aria-label":"Settings",onClick:()=>N("","production"),disabled:Object(o.b)(["apim:api_create"],a),variant:"outlined"},i.a.createElement(Dt.a,{className:t.buttonIcon},"security"),i.a.createElement(J.a,null,i.a.createElement(W.a,{id:"Apis.Details.Endpoints.EndpointOverview.endpoint.security.configuration",defaultMessage:"Endpoint Security Configurations"})))):i.a.createElement(gl,{autoFocus:!0,name:"prototyped"===m.key?i.a.createElement(W.a,{id:"Apis.Details.Endpoints.EndpointOverview.prototype.endpoint.prototype.header",defaultMessage:"Prototype Endpoint"}):i.a.createElement(W.a,{id:"Apis.Details.Endpoints.EndpointOverview.production.endpoint.production.header",defaultMessage:"Production Endpoint"}),className:t.defaultEndpointWrapper,endpointURL:T("production_endpoints"),type:"",index:0,category:"production_endpoints",editEndpoint:I,setAdvancedConfigOpen:k,esCategory:"production",setESConfigOpen:N,apiId:a.id})),"prototyped"===m.key?i.a.createElement("div",null):i.a.createElement("div",null,i.a.createElement(At.a,{control:i.a.createElement(ua.a,{checked:O.sandbox,value:"sandbox",color:"primary",onChange:e=>x("sandbox",e)}),label:i.a.createElement(W.a,{id:"Apis.Details.Endpoints.EndpointOverview.sandbox.endpoint",defaultMessage:"Sandbox Endpoint"})}),i.a.createElement(Ga.a,{in:O.sandbox},"default"===m.key?i.a.createElement(Yi.a,null,i.a.createElement("div",{className:t.contentWrapper},i.a.createElement(J.a,{component:"p",className:t.content},i.a.createElement(W.a,{id:"Apis.Details.Endpoints.EndpointOverview.upload.mediation.message",defaultMessage:"Please upload a mediation sequence file to Message Mediation Policies, which sets the endpoints."}),i.a.createElement(Pt.a,{onClick:c},i.a.createElement(be.a,{style:{marginLeft:"2px"},fontSize:"small",color:"primary"})))),i.a.createElement(je.a,{className:t.button,"aria-label":"Settings",onClick:()=>k(0,"","sandbox_endpoints"),disabled:Object(o.b)(["apim:api_create"],a),variant:"outlined"},i.a.createElement(Dt.a,{className:t.buttonIcon},"settings"),i.a.createElement(J.a,null,i.a.createElement(W.a,{id:"Apis.Details.Endpoints.EndpointOverview.advance.endpoint.configuration",defaultMessage:"Advanced Configurations"})))):i.a.createElement(gl,{autoFocus:!0,name:"Sandbox Endpoint",className:t.defaultEndpointWrapper,endpointURL:T("sandbox_endpoints"),type:"",index:0,category:"sandbox_endpoints",editEndpoint:I,esCategory:"sandbox",setAdvancedConfigOpen:k,setESConfigOpen:N,apiId:a.id})))))),"INLINE"===m.key||"prototyped"===m.key||"awslambda"===m.key||"WS"===a.type?i.a.createElement("div",null):i.a.createElement(me.a,{item:!0,xs:12},i.a.createElement(J.a,{variant:"h4",align:"left",className:t.titleWrapper,gutterBottom:!0},i.a.createElement(W.a,{id:"Apis.Details.Endpoints.EndpointOverview.general.config.header",defaultMessage:"General Endpoint Configurations"})),i.a.createElement(ml,{epConfig:xa()(f),endpointType:m,endpointsDispatcher:r})),"INLINE"===m.key||"default"===m.key||"prototyped"===m.key||"WS"===a.type||"awslambda"===m.key?i.a.createElement("div",null):i.a.createElement(me.a,{item:!0,xs:12},i.a.createElement(J.a,{variant:"h4",align:"left",className:t.titleWrapper,gutterBottom:!0},i.a.createElement(W.a,{id:"Apis.Details.Endpoints.EndpointOverview.lb.failover.endpoints.header",defaultMessage:"Load balance and Failover Configurations"})),i.a.createElement(Rl,{handleEndpointCategorySelect:e=>{r({action:"endpoint_type",value:{category:e.target.value,endpointType:m.key}})},toggleAdvanceConfig:k,endpointsDispatcher:r,epConfig:xa()(f),endpointSecurityInfo:b,handleEndpointTypeSelect:R,globalEpType:m,apiType:a.type}))),i.a.createElement(Et.a,{open:v.open},i.a.createElement(Fa.a,null,i.a.createElement(J.a,{className:t.configDialogHeader},i.a.createElement(W.a,{id:"Apis.Details.Endpoints.EndpointOverview.advance.endpoint.configuration",defaultMessage:"Advanced Configurations"}))),i.a.createElement(yt.a,null,i.a.createElement(Wl,{isSOAPEndpoint:"address"===m.key,advanceConfig:v.config,onSaveAdvanceConfig:e=>{const t=xa()(f),a=sl(v.type,v.category),n=t[a];Array.isArray(n)?"failover"===v.type?n[v.index-1].config=e:n[v.index].config=e:n.config=e,C({open:!1}),r({action:"set_advance_config",value:sc({},t,{[a]:n})})},onCancel:()=>{C({open:!1})}}))),i.a.createElement(Et.a,{open:A.open},i.a.createElement(Fa.a,null,i.a.createElement(J.a,{className:t.configDialogHeader},i.a.createElement(W.a,{id:"Apis.Details.Endpoints.EndpointOverview.endpoint.security.configuration",defaultMessage:"Endpoint Security Configurations"}))),i.a.createElement(yt.a,null,"production"===A.category?i.a.createElement($l,{securityInfo:b&&(b.production?b.production:b),onChangeEndpointAuth:j,saveEndpointSecurityConfig:_,closeEndpointSecurityConfig:L,isProduction:!0}):i.a.createElement($l,{securityInfo:b&&(b.sandbox?b.sandbox:b),onChangeEndpointAuth:j,saveEndpointSecurityConfig:_,closeEndpointSecurityConfig:L}))),i.a.createElement(Et.a,{open:P.openDialog},i.a.createElement(Fa.a,null,i.a.createElement(J.a,{className:t.configDialogHeader},i.a.createElement(W.a,{id:"Apis.Details.Endpoints.EndpointOverview.endpoint.type.change.confirmation",defaultMessage:"Change Endpoint Type"}))),i.a.createElement(yt.a,null,i.a.createElement(J.a,null,i.a.createElement(W.a,{id:"Apis.Details.Endpoints.EndpointOverview.endpoint.type.change.confirmation.message",defaultMessage:"Your current endpoint configuration will be lost."}))),i.a.createElement(bt.a,null,i.a.createElement(je.a,{onClick:()=>{w({openDialog:!1})},color:"primary"},i.a.createElement(W.a,{id:"Apis.Details.Endpoints.EndpointOverview.change.type.cancel",defaultMessage:"Cancel"})),i.a.createElement(je.a,{onClick:()=>{M(P.type)},color:"primary"},i.a.createElement(W.a,{id:"Apis.Details.Endpoints..EndpointOverview.change.type.proceed",defaultMessage:"Proceed"})))))}cc.propTypes={classes:s.a.shape({overviewWrapper:s.a.shape({}),endpointTypesWrapper:s.a.shape({}),endpointName:s.a.shape({})}).isRequired,api:s.a.shape({}).isRequired,endpointsDispatcher:s.a.func.isRequired,swaggerDef:s.a.shape({}).isRequired,updateSwagger:s.a.func.isRequired,saveAndRedirect:s.a.func.isRequired};var pc=Object(W.d)(Object(q.a)(e=>({listing:{margin:e.spacing(1),padding:e.spacing(1)},endpointContainer:{paddingLeft:e.spacing(2),padding:e.spacing(1)},endpointName:{paddingLeft:e.spacing(1),fontSize:"1rem",paddingTop:e.spacing(1),paddingBottom:e.spacing(1)},endpointTypesWrapper:{padding:e.spacing(3),marginTop:e.spacing(2)},sandboxHeading:{display:"flex",alignItems:"center"},radioGroup:{display:"flex",flexDirection:"row"},endpointsWrapperLeft:{padding:e.spacing(1),borderRight:"#c4c4c4",borderRightStyle:"solid",borderRightWidth:"thin"},endpointsWrapperRight:{padding:e.spacing(1)},endpointsTypeSelectWrapper:{marginLeft:e.spacing(2),marginRight:e.spacing(2),padding:e.spacing(1),display:"flex",justifyContent:"space-between"},endpointTypesSelectWrapper:{display:"flex"},defaultEndpointWrapper:{paddingLeft:e.spacing(1),paddingRight:e.spacing(1),marginRight:e.spacing(1)},configDialogHeader:{fontWeight:"600"},addLabel:{padding:e.spacing(2)},buttonIcon:{marginRight:e.spacing(1)},button:{textTransform:"none"}}))(cc));function dc(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function mc(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?dc(a,!0).forEach(function(t){uc(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):dc(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function uc(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const gc={paths:{}};function hc(e){const{classes:t,intl:a,history:r}=e,{api:s,updateAPI:l}=Object(n.useContext)(ue.a),[c,p]=Object(n.useState)(gc),[d,m]=Object(n.useState)({isValid:!0,message:""}),[u,g]=Object(n.useState)(!1),[h,f]=Object(n.useReducer)((e,t)=>{const a=xa()(e.endpointConfig),{action:n,value:i}=t;switch(n){case"production_endpoints":case"sandbox_endpoints":return mc({},e,i?{endpointConfig:mc({},a,{[n]:i})}:{endpointConfig:mc({},a)});case"select_endpoint_category":case"set_lb_config":case"add_endpoint":case"set_advance_config":case"remove_endpoint":return mc({},e,{endpointConfig:mc({},i)});case"endpointImplementationType":{const{endpointType:t,implementationType:a}=i,n=ll(t);return"prototyped"===t?"mock"===a?(s.generateMockScripts(s.id).then(e=>{p(e.obj)}),mc({},e,{endpointConfig:n,endpointImplementationType:"INLINE"})):mc({},e,{endpointConfig:n,endpointImplementationType:"ENDPOINT"}):mc({},e,{endpointConfig:n})}case"endpointSecurity":return mc({},e,{endpointConfig:mc({},xa()(e.endpointConfig),{endpoint_security:xa()(i)})});case"endpoint_type":return mc({},e,{endpointConfig:mc({},function(e,t,a){const n={};return"failover"===e?(n.endpoint_type=e,n.production_failovers=a.production_failovers?a.production_failovers:[],n.sandbox_failovers=a.sandbox_failovers?a.sandbox_failovers:[],n.production_endpoints=Array.isArray(a.production_endpoints)?a.production_endpoints[0]:a.production_endpoints,n.sandbox_endpoints=Array.isArray(a.sandbox_endpoints)?a.sandbox_endpoints[0]:a.sandbox_endpoints,n.failOver="True"):"load_balance"===e?(n.endpoint_type=e,n.algoClassName="org.apache.synapse.endpoints.algorithms.RoundRobin",n.algoCombo="org.apache.synapse.endpoints.algorithms.RoundRobin",n.sessionManagement="",n.sessionTimeOut="",a.production_endpoints&&(n.production_endpoints=Array.isArray(a.production_endpoints)?a.production_endpoints:[a.production_endpoints]),a.sandbox_endpoints&&(n.sandbox_endpoints=Array.isArray(a.sandbox_endpoints)?a.sandbox_endpoints:[a.sandbox_endpoints]),n.failOver="False"):(n.endpoint_type=!0===t?"address":"http",n.production_endpoints=Array.isArray(a.production_endpoints)?a.production_endpoints[0]:a.production_endpoints,n.sandbox_endpoints=Array.isArray(a.sandbox_endpoints)?a.sandbox_endpoints[0]:a.sandbox_endpoints,n.failOver="False"),n}(i.category,"address"===i.endpointType,a))});case"set_inline":{const{endpointImplementationType:t,endpointConfig:a}=i;return s.generateMockScripts(s.id).then(e=>{p(e.obj)}),mc({},e,{endpointConfig:a,endpointImplementationType:t})}case"set_prototyped":{const{endpointImplementationType:t,endpointConfig:a}=i;return mc({},e,{endpointImplementationType:t,endpointConfig:a})}case"set_awsCredentials":return mc({},e,{endpointConfig:mc({},i)});case"select_endpoint_type":{const{endpointImplementationType:t,endpointConfig:a}=i;let{endpointSecurity:n}=e;return n&&""===n.username&&(n=null),mc({},e,{endpointConfig:a,endpointImplementationType:t,endpointSecurity:null})}default:return e}},s.toJSON()),E=e=>{const{endpointConfig:t,endpointImplementationType:a,endpointSecurity:n}=h;g(!0),"INLINE"===a?s.updateSwagger(c).then(e=>{p(e.obj)}).then(()=>{l({endpointConfig:t,endpointImplementationType:a,endpointSecurity:n})}).finally(()=>{g(!1),e&&r.push("/apis/"+s.id+"/runtime-configuration")}):l(h).finally(()=>{g(!1),e&&r.push("/apis/"+s.id+"/runtime-configuration")})};Object(n.useEffect)(()=>{"WS"!==s.type&&s.getSwagger(h.id).then(e=>{p(e.obj)}).catch(e=>{console.err(e)})},[]),Object(n.useEffect)(()=>{m((e=>{const{endpointConfig:t,endpointSecurity:n}=h;if(n)if("OAUTH"===n.type){if("PASSWORD"===n.grantType){if(null===n.tokenUrl||null===n.apiKey||null===n.apiSecret||null===n.username||null===n.password)return{isValid:!1,message:a.formatMessage({id:"Apis.Details.Endpoints.Endpoints.missing.security.oauth.password.error",defaultMessage:"Endpoint Security Token URL/API Key/API Secret/Username/Password should not be empty"})}}else if("CLIENT_CREDENTIALS"===n.grantType&&(null===n.tokenUrl||null===n.apiKey||null===n.apiSecret))return{isValid:!1,message:a.formatMessage({id:"Apis.Details.Endpoints.Endpoints.missing.security.oauth.client.error",defaultMessage:"Endpoint Security Token URL/API Key/API Secret should not be empty"})}}else if(""===n.username||null===n.password)return{isValid:!1,message:a.formatMessage({id:"Apis.Details.Endpoints.Endpoints.missing.security.username.error",defaultMessage:"Endpoint Security User Name/ Password should not be empty"})};if(null===t)return{isValid:!0,message:""};const i=t.endpoint_type;if("awslambda"===i){if("stored"===t.access_method&&(""===t.amznAccessKey||""===t.amznSecretKey||""===t.amznRegion))return{isValid:!1,message:a.formatMessage({id:"Apis.Details.Endpoints.Endpoints.missing.accessKey.secretKey.error",defaultMessage:"Access Key, Secret Key and Region should not be empty"})};if(""!==t.amznAccessKey&&"AWS_SECRET_KEY"===t.amznSecretKey)return{isValid:!1,message:""}}else{if("load_balance"!==i){let n=!1;if("prototyped"===t.implementation_status){if("ENDPOINT"===e&&t.production_endpoints&&""===t.production_endpoints.url)return{isValid:!1,message:a.formatMessage({id:"Apis.Details.Endpoints.Endpoints.missing.prototype.url",defaultMessage:"Prototype Endpoint URL should not be empty"})};n=!0}else n=t.production_endpoints&&!t.sandbox_endpoints?""!==t.production_endpoints.url:t.sandbox_endpoints&&!t.production_endpoints?""!==t.sandbox_endpoints.url:!(!t.sandbox_endpoints&&!t.production_endpoints||""===t.sandbox_endpoints.url&&""===t.production_endpoints.url);return n?{isValid:!0,message:""}:{isValid:!1,message:a.formatMessage({id:"Apis.Details.Endpoints.Endpoints.missing.endpoint.error",defaultMessage:"Either one of Production or Sandbox Endpoints should be added."})}}if(t.production_endpoints&&t.production_endpoints.length>0&&(!t.production_endpoints[0].url||t.production_endpoints[0].url&&""===t.production_endpoints[0].url))return{isValid:!1,message:a.formatMessage({id:"Apis.Details.Endpoints.Endpoints.missing.prod.endpoint.loadbalance",defaultMessage:"Default Production Endpoint should not be empty"})};if(t.sandbox_endpoints&&t.sandbox_endpoints.length>0&&(!t.sandbox_endpoints[0].url||t.sandbox_endpoints[0].url&&""===t.sandbox_endpoints[0].url))return{isValid:!1,message:a.formatMessage({id:"Apis.Details.Endpoints.Endpoints.missing.sandbox.endpoint.loadbalance",defaultMessage:"Default Sandbox Endpoint should not be empty"})}}return{isValid:!0,message:""}})(h.endpointImplementationType))},[h]);return i.a.createElement(i.a.Fragment,null,null===s.endpointConfig&&null===h.endpointConfig?i.a.createElement(Yo,{generateEndpointConfig:(e,t)=>{f({action:"endpointImplementationType",value:{endpointType:e,implementationType:t}})},apiType:h.type}):i.a.createElement("div",{className:t.root},i.a.createElement(J.a,{variant:"h4",align:"left",gutterBottom:!0},i.a.createElement(W.a,{id:"Apis.Details.Endpoints.Endpoints.endpoints.header",defaultMessage:"Endpoints"})),i.a.createElement("div",null,i.a.createElement(me.a,{container:!0},i.a.createElement(me.a,{item:!0,xs:12,className:t.endpointsContainer},i.a.createElement(pc,{swaggerDef:c,updateSwagger:e=>{p(e)},api:h,onChangeAPI:f,endpointsDispatcher:f,saveAndRedirect:()=>{E(!0)}}))),d.isValid?i.a.createElement("div",null):i.a.createElement(me.a,{item:!0,className:t.errorMessageContainer},i.a.createElement(J.a,{className:t.endpointValidityMessage},d.message)),i.a.createElement(me.a,{container:!0,direction:"row",alignItems:"flex-start",spacing:1,className:t.buttonSection},i.a.createElement(me.a,{item:!0},i.a.createElement(je.a,{disabled:u||!d.isValid||Object(o.b)(["apim:api_create"],s),type:"submit",variant:"contained",color:"primary",onClick:()=>E()},i.a.createElement(W.a,{id:"Apis.Details.Endpoints.Endpoints.save",defaultMessage:"Save"}),u&&i.a.createElement($e.a,{size:24}))),i.a.createElement(me.a,{item:!0},i.a.createElement(B.b,{to:"/apis/"+s.id+"/overview"},i.a.createElement(je.a,null,i.a.createElement(W.a,{id:"Apis.Details.Endpoints.Endpoints.cancel",defaultMessage:"Cancel"})))),Object(o.b)(["apim:api_create"],s)&&i.a.createElement(me.a,{item:!0},i.a.createElement(J.a,{variant:"body2",color:"primary"},i.a.createElement(W.a,{id:"Apis.Details.Endpoints.Endpoints.update.not.allowed",defaultMessage:"*You are not authorized to update endpoints of the API due to insufficient permissions"})))))))}hc.propTypes={classes:s.a.shape({root:s.a.shape({}),buttonSection:s.a.shape({}),endpointTypesWrapper:s.a.shape({}),mainTitle:s.a.shape({})}).isRequired,api:s.a.shape({}).isRequired,intl:s.a.shape({}).isRequired,history:s.a.shape({}).isRequired};var fc=Object(U.withRouter)(Object(W.d)(Object(q.a)(e=>({endpointTypesWrapper:{display:"flex",alignItems:"center",flexDirection:"row",margin:"2px"},root:{flexGrow:1,paddingRight:"10px"},buttonSection:{marginTop:e.spacing(2)},radioGroup:{display:"flex",flexDirection:"row",marginLeft:e.spacing(2)},endpointValidityMessage:{color:e.palette.error.main},errorMessageContainer:{marginTop:e.spacing(1)},implSelectRadio:{padding:e.spacing(1)/2}}))(hc)));a(812);function Ec(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}const bc=Object(He.a)(e=>({root:{display:"flex",flexWrap:"wrap"},mainTitle:{paddingTop:e.spacing(3)},gatewayPaper:{marginTop:e.spacing(2)},content:{marginTop:e.spacing(2),margin:"".concat(e.spacing(2),"px 0 ").concat(e.spacing(2),"px 0")},emptyBox:{marginTop:e.spacing(2)},contentWrapper:{maxWidth:e.custom.contentAreaWidth,paddingLeft:e.spacing(3)}}));function yc(e){const t=bc(),{selectedMgLabel:a,setSelectedMgLabel:r,api:s}=e,l=new X.a,[c,p]=Object(n.useState)([]);return Object(n.useEffect)(()=>{l.microgatewayLabelsGet().then(e=>{p(e.body.list)})},[]),i.a.createElement(i.a.Fragment,null,i.a.createElement(J.a,{variant:"h4",align:"left",className:t.mainTitle},i.a.createElement(W.a,{id:"Apis.Details.Environments.Environments.GatewayLabels",defaultMessage:"Gateway Labels"})),c.length>0?i.a.createElement(de.a,{className:t.gatewayPaper},i.a.createElement(Oe.a,null,i.a.createElement(Yn.a,null,i.a.createElement(Pe.a,null,i.a.createElement(De.a,null),i.a.createElement(De.a,{align:"left"},"Label"),i.a.createElement(De.a,{align:"left"},"Description"),i.a.createElement(De.a,{align:"left"},"Access URL"))),i.a.createElement(Kn.a,null,c.map(e=>i.a.createElement(Pe.a,{key:e.name},i.a.createElement(De.a,{padding:"checkbox"},i.a.createElement(ua.a,{disabled:Object(o.b)(["apim:api_create","apim:api_publish"],s),checked:a.includes(e.name),onChange:e=>{const{checked:t,name:n}=e.target;r(t?[].concat(Ec(a),[n]):a.filter(e=>e!==n))},name:e.name,color:"primary"})),i.a.createElement(De.a,{component:"th",scope:"row",align:"left"},e.name),i.a.createElement(De.a,{align:"left"},e.description),i.a.createElement(De.a,{align:"left"},e.access_urls.join(", "))))))):i.a.createElement(Yi.a,{type:"info",height:100,className:t.emptyBox},i.a.createElement("div",{className:t.contentWrapper},i.a.createElement(J.a,{component:"p",className:t.content},i.a.createElement(W.a,{id:"Apis.Details.Environments.Gateway.labels.emptym1",defaultMessage:"Gateway labels are not available."}),i.a.createElement(W.a,{id:"Apis.Details.Environments.Gateway.labels.emptym2",defaultMessage:" You can request the administrator to add labels."})))))}yc.defaultProps={api:{}},yc.propTypes={selectedMgLabel:s.a.arrayOf(s.a.string).isRequired,setSelectedMgLabel:s.a.func.isRequired,api:s.a.shape({})};const vc=Object(He.a)(e=>({root:{display:"flex",flexWrap:"wrap"},mainTitle:{paddingTop:e.spacing(3)},gatewayPaper:{marginTop:e.spacing(2)},content:{marginTop:e.spacing(2),margin:"".concat(e.spacing(2),"px 0 ").concat(e.spacing(2),"px 0")},emptyBox:{marginTop:e.spacing(2)},contentWrapper:{maxWidth:e.custom.contentAreaWidth,paddingLeft:e.spacing(3)}}));function Cc(e){const t=vc(),{clusters:a,selectedDeployments:n,setSelectedDeployments:r,api:s}=e;function l(e){let t=!1;if(n){const a=n.filter(e=>"Kubernetes"===e.type);if(a&&a.length>0){const n=a[0].clusterName.filter(t=>t===e);t=n&&n.length>0}}return t}const c=(e,t)=>i.a.createElement(Pe.a,null,i.a.createElement(De.a,{align:"left"},e),i.a.createElement(De.a,{align:"left"},t));return i.a.createElement(i.a.Fragment,null,i.a.createElement(J.a,{variant:"h4",gutterBottom:!0,align:"left",className:t.mainTitle},i.a.createElement(W.a,{id:"Apis.Details.Environments.Environments.Kubernetes",defaultMessage:"Kubernetes"})),i.a.createElement(de.a,{className:t.gatewayPaper},i.a.createElement(Oe.a,null,i.a.createElement(Yn.a,null,i.a.createElement(Pe.a,null,i.a.createElement(De.a,null),i.a.createElement(De.a,{align:"left"},"Name"),i.a.createElement(De.a,{align:"left"},"Properties"),i.a.createElement(De.a,{align:"left"},"Access URL"))),i.a.createElement(Kn.a,null,a.clusters.map(e=>i.a.createElement(Pe.a,{key:e.clusterName},i.a.createElement(De.a,{padding:"checkbox"},i.a.createElement(ua.a,{disabled:Object(o.b)(["apim:api_create","apim:api_publish"],s),checked:l(e.clusterName),onChange:t=>(function(e,t){const{checked:a}=e.target,i=xa()(n);if(i&&i.length>0)for(let e=0;e<i.length;e++){const n=i[e];if(n&&"Kubernetes"===n.type)if(n.clusterName&&n.clusterName.length>0){const e=[];for(let a=0;a<n.clusterName.length;a++)n.clusterName[a]===t&&e.push(t);if(a&&!e.includes(t))n.clusterName.push(t);else if(!a&&e.includes(t)){const e=n.clusterName.indexOf(t);e>-1&&n.clusterName.splice(e,1)}}else n.clusterName&&0===n.clusterName.length&&n.clusterName.push(t)}else i.push({type:"Kubernetes",clusterName:[t]});r(i)})(t,e.clusterName),color:"primary"})),i.a.createElement(De.a,{component:"th",scope:"row"},e.displayName),i.a.createElement(De.a,{align:"left"},i.a.createElement(Oe.a,null,i.a.createElement(Kn.a,null,function(e){return Object.keys(e).reduce((t,a)=>{const n=c(a,e[a]);return t.push(n),t},[])}(e.properties)))),i.a.createElement(De.a,{align:"left"},e.accessURL)))))))}function Ac(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}const Sc=Object(He.a)(e=>({root:{display:"flex",flexWrap:"wrap"},saveButton:{marginTop:e.spacing(3)}}));function Oc(){const e=Sc(),{api:t,updateAPI:a}=Object(n.useContext)(ue.a),{settings:r}=Object(ne.c)(),[s,l]=Object(n.useState)(Ac(t.gatewayEnvironments)),[c,p]=Object(n.useState)(Ac(t.labels)),[d,m]=Object(n.useState)(!1),[u,g]=Object(n.useState)(Ac(t.deploymentEnvironments)),h=new X.a,[f,E]=Object(n.useState)([]);return Object(n.useEffect)(()=>{h.getDeployments().then(e=>{E(e.body.list)})},[]),i.a.createElement(i.a.Fragment,null,i.a.createElement(J.a,{variant:"h4",gutterBottom:!0},i.a.createElement(W.a,{id:"Apis.Details.Environments.Environments.APIGateways",defaultMessage:"API Gateways"})),i.a.createElement(de.a,{className:e.saveButton},i.a.createElement(Oe.a,null,i.a.createElement(Yn.a,null,i.a.createElement(Pe.a,null,i.a.createElement(De.a,null),i.a.createElement(De.a,{align:"left"},"Name"),i.a.createElement(De.a,{align:"left"},"Type"),i.a.createElement(De.a,{align:"left"},"Server URL"),t.isWebSocket()?i.a.createElement(i.a.Fragment,null,i.a.createElement(De.a,{align:"left"},"WS Endpoint"),i.a.createElement(De.a,{align:"left"},"WSS Endpoint")):i.a.createElement(i.a.Fragment,null,i.a.createElement(De.a,{align:"left"},"HTTP Endpoint"),i.a.createElement(De.a,{align:"left"},"HTTPS Endpoint")))),i.a.createElement(Kn.a,null,r.environment.map(e=>i.a.createElement(Pe.a,{key:e.name},i.a.createElement(De.a,{padding:"checkbox"},i.a.createElement(ua.a,{disabled:Object(o.b)(["apim:api_create","apim:api_publish"],t),checked:s.includes(e.name),onChange:e=>{const{checked:t,name:a}=e.target;l(t?[].concat(Ac(s),[a]):s.filter(e=>e!==a))},name:e.name,color:"primary"})),i.a.createElement(De.a,{component:"th",scope:"row"},e.name),i.a.createElement(De.a,{align:"left"},e.type),i.a.createElement(De.a,{align:"left"},e.serverUrl),t.isWebSocket()?i.a.createElement(i.a.Fragment,null,i.a.createElement(De.a,{align:"left"},e.endpoints.ws),i.a.createElement(De.a,{align:"left"},e.endpoints.wss)):i.a.createElement(i.a.Fragment,null,i.a.createElement(De.a,{align:"left"},e.endpoints.http),i.a.createElement(De.a,{align:"left"},e.endpoints.https))))))),!t.isWebSocket()&&i.a.createElement(yc,{selectedMgLabel:c,setSelectedMgLabel:p,api:t}),f&&f.map(e=>"kubernetes"===e.name.toLowerCase()&&i.a.createElement(Cc,{clusters:e,selectedDeployments:u,setSelectedDeployments:g,api:t})),i.a.createElement(me.a,{container:!0,direction:"row",alignItems:"flex-start",spacing:1},i.a.createElement(me.a,{item:!0},i.a.createElement(je.a,{className:e.saveButton,disabled:Object(o.b)(["apim:api_create","apim:api_publish"],t)||d,type:"submit",variant:"contained",color:"primary",onClick:function(){m(!0),a({gatewayEnvironments:s,labels:c,deploymentEnvironments:u}).then(()=>te.a.info("API Update Successfully")).catch(e=>{e.response?te.a.error(e.response.body.description):te.a.error("Something went wrong while updating the environments"),console.error(e)}).finally(()=>m(!1))}},i.a.createElement(W.a,{id:"Apis.Details.Environments.Environments.save",defaultMessage:"Save"}),d&&i.a.createElement($e.a,{size:20}))),i.a.createElement(me.a,{item:!0},i.a.createElement(B.b,{to:"/apis/"+t.id+"/overview"},i.a.createElement(je.a,{className:e.saveButton},i.a.createElement(W.a,{id:"Apis.Details.Environments.Environments.cancel",defaultMessage:"Cancel"}))))),Object(o.b)(["apim:api_create"],t)&&i.a.createElement(me.a,{item:!0},i.a.createElement(J.a,{variant:"body2",color:"primary"},i.a.createElement(W.a,{id:"Apis.Details.Environments.Environments.update.not.allowed",defaultMessage:"* You are not authorized to update particular fields of the API due to insufficient permissions"}))))}var Dc=a(676),Pc=a.n(Dc),wc=a(125),Tc=a(1485),xc=a.n(Tc),Ic=a(1486),Mc=a.n(Ic),Rc=a(1144),kc=a.n(Rc),Nc=a(1487),jc=a.n(Nc),_c=a(1969),Lc=a(1134),qc=a.n(Lc);const Wc=["Name","Value"],Uc={filterType:"checkbox",sort:!1,search:!1,viewColumns:!1,filter:!1,selectableRowsHeader:!1,selectableRows:"none",pagination:!1,download:!1};function Bc(e){const{subscriptionId:t,isMonetizedUsagePolicy:a,isNotAuthorized:r,api:s}=e,[o,l]=Object(n.useState)(!1),[c,p]=Object(n.useState)(!1),[d,m]=Object(n.useState)(null),u=()=>{p(!1)};return i.a.createElement(i.a.Fragment,null,i.a.createElement(je.a,{variant:"outlined",size:"small",color:"primary",disabled:!a||r,onClick:()=>{l(!0),m(null),"APIProduct"===s.apiType?new $.a(s.name,s.context,s.policies).getMonetizationInvoice(t).then(e=>{const t=[];Object.keys(e.properties).map(a=>{const n=[];return n.push(a),n.push(e.properties[a]),t.push(n),!0}),m(t)}).catch(e=>{console.error(e),p(!0)}):s.getMonetizationInvoice(t).then(e=>{const t=[];Object.keys(e.properties).map(a=>{const n=[];return n.push(a),n.push(e.properties[a]),t.push(n),!0}),m(t)}).catch(e=>{console.error(e),p(!0)})}},i.a.createElement(W.a,{id:"Applications.Details.Invoice.view.btn",defaultMessage:"View Invoice"})),i.a.createElement(Et.a,{open:o,onClose:()=>{l(!1)},fullWidth:"true"},d&&i.a.createElement(Hi.a,{title:"Upcoming Invoice",data:d,columns:Wc,options:Uc})),i.a.createElement(Et.a,{open:c,onClose:u,fullWidth:"true"},i.a.createElement(Fa.a,null,"No Data Available"),i.a.createElement(yt.a,null,i.a.createElement(Ba.a,{id:"invoice-dialog-description"},"Pending invoice data not found for this subscription.")),i.a.createElement(bt.a,null,i.a.createElement(je.a,{onClick:u,color:"primary"},"Close"))))}Bc.propTypes={subscriptionId:s.a.string.isRequired,isMonetizedUsagePolicy:s.a.string.isRequired,isNotAuthorized:s.a.string.isRequired,api:s.a.instanceOf(X.a).isRequired};var Fc=Bc;function zc(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function Vc(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?zc(a,!0).forEach(function(t){Hc(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):zc(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function Hc(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Gc={BLOCKED:"BLOCKED",PROD_BLOCKED:"PROD_ONLY_BLOCKED"};function Kc(e){const{count:t,page:a,rowsPerPage:n,onChangePage:r}=e;return i.a.createElement("div",{style:{display:"flex"}},i.a.createElement(Pt.a,{onClick:function(){r&&r(0)},disabled:0===a},i.a.createElement(xc.a,null)),i.a.createElement(Pt.a,{onClick:function(){r&&r(a-1)},disabled:0===a},i.a.createElement(Mc.a,null)),i.a.createElement(Pt.a,{onClick:function(){r&&r(a+1)},disabled:a>=Math.ceil(t/n)-1},i.a.createElement(kc.a,null)),i.a.createElement(Pt.a,{onClick:function(){r&&r(Math.max(0,Math.ceil(t/n)-1))},disabled:a>=Math.ceil(t/n)-1},i.a.createElement(jc.a,null)))}Kc.propTypes={count:s.a.number.isRequired,page:s.a.number.isRequired,rowsPerPage:s.a.number.isRequired,onChangePage:s.a.func.isRequired};class Yc extends n.Component{constructor(e){super(e),this.api=e.api,this.state={subscriptions:null,totalSubscription:0,page:0,rowsPerPage:5,searchQuery:null,rowsPerPageOptions:[5,10,25,50,100],emptyColumnHeight:60,policies:[],subscriberClaims:null},this.formatSubscriptionStateString=this.formatSubscriptionStateString.bind(this),this.blockSubscription=this.blockSubscription.bind(this),this.blockProductionOnly=this.blockProductionOnly.bind(this),this.unblockSubscription=this.unblockSubscription.bind(this),this.handleChangePage=this.handleChangePage.bind(this),this.handleChangeRowsPerPage=this.handleChangeRowsPerPage.bind(this),this.filterSubscriptions=this.filterSubscriptions.bind(this),this.isMonetizedPolicy=this.isMonetizedPolicy.bind(this),this.renderClaims=this.renderClaims.bind(this),this.isNotCreator=o.a.isNotCreator(),this.isNotPublisher=o.a.isNotPublisher()}componentDidMount(){this.fetchSubscriptionData()}getSubscriptionBlockingButtons(e,t){const{classes:a}=this.props;return e===Gc.PROD_BLOCKED?i.a.createElement("dev",null,i.a.createElement(je.a,{size:"small",variant:"outlined",color:"primary",onClick:()=>this.blockProductionOnly(t),className:a.button,disabled:"true"},i.a.createElement(W.a,{id:"block.production.only",defaultMessage:"Block Production Only"})),i.a.createElement(je.a,{size:"small",variant:"outlined",color:"primary",onClick:()=>this.blockSubscription(t),className:a.button},i.a.createElement(W.a,{id:"block.all",defaultMessage:"Block All"})),i.a.createElement(je.a,{size:"small",variant:"outlined",color:"primary",onClick:()=>this.unblockSubscription(t),className:a.button},i.a.createElement(W.a,{id:"unblock",defaultMessage:"Unblock"}))):e===Gc.BLOCKED?i.a.createElement("dev",null,i.a.createElement(je.a,{size:"small",variant:"outlined",color:"primary",onClick:()=>this.blockProductionOnly(t),className:a.button},i.a.createElement(W.a,{id:"block.production.only",defaultMessage:"Block Production Only"})),i.a.createElement(je.a,{size:"small",variant:"outlined",color:"primary",onClick:()=>this.blockSubscription(t),className:a.button,disabled:"true"},i.a.createElement(W.a,{id:"block.all",defaultMessage:"Block All"})),i.a.createElement(je.a,{size:"small",variant:"outlined",color:"primary",onClick:()=>this.unblockSubscription(t),className:a.button},i.a.createElement(W.a,{id:"unblock",defaultMessage:"Unblock"}))):i.a.createElement("dev",null,i.a.createElement(je.a,{size:"small",variant:"outlined",color:"primary",onClick:()=>this.blockProductionOnly(t),className:a.button},i.a.createElement(W.a,{id:"block.production.only",defaultMessage:"Block Production Only"})),i.a.createElement(je.a,{size:"small",variant:"outlined",color:"primary",onClick:()=>this.blockSubscription(t),className:a.button},i.a.createElement(W.a,{id:"block.all",defaultMessage:"Block All"})),i.a.createElement(je.a,{size:"small",variant:"outlined",color:"primary",onClick:()=>this.unblockSubscription(t),className:a.button,disabled:"true"},i.a.createElement(W.a,{id:"unblock",defaultMessage:"Unblock"})))}formatSubscriptionStateString(e){return e===Gc.PROD_BLOCKED?i.a.createElement(W.a,{id:"Apis.Details.Subscriptions.SubscriptionsTable.blocked.production.only.subs.state",defaultMessage:"Blocked Production Only"}):e===Gc.BLOCKED?i.a.createElement(W.a,{id:"Apis.Details.Subscriptions.SubscriptionsTable.blocked.subs.state",defaultMessage:"Blocked"}):i.a.createElement(W.a,{id:"Apis.Details.Subscriptions.SubscriptionsTable.active.subs.state",defaultMessage:"Active"})}blockSubscription(e){const{intl:t}=this.props;(new X.a).blockSubscriptions(e,Gc.BLOCKED).then(()=>{te.a.success(t.formatMessage({id:"Apis.Details.Subscriptions.SubscriptionsTable.subscription.blocked",defaultMessage:"Subscription was blocked."})),this.fetchSubscriptionData()}).catch(e=>{console.error(e);const{message:a}=e.response.body,n=Object(W.c)({errorMessage:{id:"Apis.Details.Subscriptions.SubscriptionsTable.error.subscription.block",defaultMessage:"Error: Unable to block subscription. (Reason: {message})"}});te.a.error(t.formatMessage(n.errorMessage,{message:a}))})}blockProductionOnly(e){const{intl:t}=this.props;(new X.a).blockSubscriptions(e,Gc.PROD_BLOCKED).then(()=>{te.a.success(t.formatMessage({id:"Apis.Details.Subscriptions.SubscriptionsTable.subscription.blocked.prod.only",defaultMessage:"Subscription was blocked for production only."})),this.fetchSubscriptionData()}).catch(e=>{console.error(e);const{message:a}=e.response.body,n=Object(W.c)({errorMessage:{id:"Apis.Details.Subscriptions.SubscriptionsTable.error.subscription.block.prod.only",defaultMessage:"Error: Unable to block subscription. (Reason: {message})"}});te.a.error(t.formatMessage(n.errorMessage,{message:a}))})}unblockSubscription(e){const{intl:t}=this.props;(new X.a).unblockSubscriptions(e).then(()=>{te.a.success(t.formatMessage({id:"Apis.Details.Subscriptions.SubscriptionsTable.subscription.unblocked",defaultMessage:"Subscription was unblocked."})),this.fetchSubscriptionData()}).catch(e=>{console.error(e);const{message:a}=e.response.body,n=Object(W.c)({errorMessage:{id:"Apis.Details.Subscriptions.SubscriptionsTable.error.subscription.unblock",defaultMessage:"Error: Unable to unblock subscription. (Reason: {message})"}});te.a.error(t.formatMessage(n.errorMessage,{message:a}))})}fetchSubscriptionData(){const e=new X.a,{page:t,rowsPerPage:a,searchQuery:n}=this.state,{intl:i}=this.props;e.subscriptions(this.api.id,t*a,a,n).then(t=>{this.setState({subscriptions:t.body.list,totalSubscription:t.body.pagination.total});for(let a=0;a<t.body.list.length;a++){const{subscriptionId:n}=t.body.list[a];e.getSubscriberInfo(n).then(e=>{this.setState(t=>({subscriberClaims:Vc({},t.subscriberClaims,{[n]:e.body})}))}).catch(e=>{console.error(e),te.a.error(i.formatMessage({id:"Apis.Details.Subscriptions.SubscriptionsTable.subscriber.info.error",defaultMessage:"Error while retrieving the subscriber information"}))})}}).catch(e=>{console.error(e),te.a.error(i.formatMessage({id:"Apis.Details.Subscriptions.SubscriptionsTable.subscriptions.error",defaultMessage:"Error while retrieving the subscriptions"}))}),e.getMonetization(this.props.api.id).then(e=>{this.setState({monetizationStatus:e.enabled})}),e.getSubscriptionPolicies(this.api.id).then(e=>{const t=e.filter(e=>"COMMERCIAL"===e.tierPlan);this.setState({policies:t})})}handleChangePage(e){this.setState({page:e},this.fetchSubscriptionData)}isMonetizedPolicy(e){const{policies:t,monetizationStatus:a}=this.state;if(t.length>0){return t.filter(t=>t.name===e&&null!=t.monetizationAttributes.pricePerRequest).length>0&&a}return!1}handleChangeRowsPerPage(e){this.setState({rowsPerPage:e.target.value,page:0},this.fetchSubscriptionData)}filterSubscriptions(e){this.setState({searchQuery:e.target.value},this.fetchSubscriptionData)}renderClaims(e){const{classes:t}=this.props;return e?i.a.createElement("div",{className:t.root},i.a.createElement(me.a,{container:!0,spacing:1},i.a.createElement(me.a,{item:!0},i.a.createElement(qi.a,{color:"primary"})),i.a.createElement(me.a,{item:!0},e.name)),e.claims&&i.a.createElement("div",null,i.a.createElement(Oe.a,{className:t.table},i.a.createElement(Kn.a,null,e.claims.map(e=>i.a.createElement(Pe.a,{hover:!0},i.a.createElement(De.a,null,e.name),e.value?i.a.createElement(De.a,null,e.value):i.a.createElement(De.a,null,"Not Available"))))))):i.a.createElement("div",null,i.a.createElement(J.a,{className:t.typography},i.a.createElement(W.a,{id:"Apis.Details.Subscriptions.Subscriber.no.claims",defaultMessage:"No subscriber claims data available"})))}render(){const{subscriptions:e,page:t,rowsPerPage:a,totalSubscription:n,rowsPerPageOptions:r,emptyColumnHeight:s,subscriberClaims:o}=this.state,{classes:l,api:c}=this.props;if(!e)return i.a.createElement(me.a,{container:!0,direction:"row",justify:"center",alignItems:"center"},i.a.createElement(me.a,{item:!0},i.a.createElement($e.a,null)));const p=[{name:"subscriptionId",options:{display:"excluded",filter:!1}},{name:"applicationInfo.applicationId",options:{display:"excluded",filter:!1}},{name:"applicationInfo.subscriber",label:i.a.createElement(W.a,{id:"Apis.Details.Subscriptions.Listing.column.header.subscriber",defaultMessage:"Subscriber"}),options:{sort:!1,customBodyRender:(e,t)=>t.rowData?i.a.createElement("div",null,i.a.createElement(se.a,{interactive:!0,placement:"top",classes:{tooltip:l.InfoToolTip},title:i.a.createElement(i.a.Fragment,null,o&&i.a.createElement("div",null,this.renderClaims(o[t.rowData[0]])))},i.a.createElement(me.a,{container:!0,direction:"row",alignItems:"center",spacing:1},i.a.createElement(me.a,{item:!0},i.a.createElement(J.a,null,i.a.createElement(qc.a,{color:"action"}))),i.a.createElement(me.a,{item:!0},e)))):null}},{name:"applicationInfo.name",label:i.a.createElement(W.a,{id:"Apis.Details.Subscriptions.Listing.column.header.application",defaultMessage:"Application"}),options:{sort:!1}},{name:"applicationInfo.description",options:{display:"excluded",filter:!1}},{name:"applicationInfo.subscriptionCount",options:{display:"excluded",filter:!1}},{name:"throttlingPolicy",label:i.a.createElement(W.a,{id:"Apis.Details.Subscriptions.Listing.column.header.throttling.tier",defaultMessage:"Tier"}),options:{sort:!1}},{name:"subscriptionStatus",label:i.a.createElement(W.a,{id:"Apis.Details.Subscriptions.Listing.column.header.subscription.status",defaultMessage:"Status"}),options:{sort:!1}},{name:"actions",label:i.a.createElement(W.a,{id:"Apis.Details.Subscriptions.Listing.column.header.subscription.actions",defaultMessage:"Actions"}),options:{sort:!1,customBodyRender:(e,t)=>{if(t.rowData){const e=t.rowData[7],a=t.rowData[0];return i.a.createElement(bi.a,{resourceMethod:bi.b.POST,resourcePath:bi.c.BLOCK_SUBSCRIPTION},this.getSubscriptionBlockingButtons(e,a))}return null}}},{name:"invoice",label:i.a.createElement(W.a,{id:"Apis.Details.Subscriptions.Listing.column.header.subscription.invoice",defaultMessage:"Invoice"}),options:{sort:!1,customBodyRender:(e,t)=>{if(t.rowData){const e=t.rowData[6],a=t.rowData[0];return i.a.createElement(Fc,{subscriptionId:a,isNotAuthorized:this.isNotCreator&&this.isNotPublisher,isMonetizedUsagePolicy:this.isMonetizedPolicy(e),api:c})}return null}}}],d={title:!1,print:!1,download:!1,viewColumns:!1,elevation:1,customToolbar:!1,search:!1,selectableRows:"none",rowsPerPageOptions:[5,10,25,50,100],customFooter:()=>i.a.createElement(_c.a,{rowsPerPageOptions:r,colSpan:6,count:n,rowsPerPage:a,page:t,onChangePage:this.handleChangePage,onChangeRowsPerPage:this.handleChangeRowsPerPage,ActionsComponent:Kc})},m={},u=o&&Object.entries(o).map(e=>{let[,t]=e,a=null;return m[t.name]||(a=t.claims.find(e=>"http://wso2.org/claims/emailaddress"===e.URI).value,m[t.name]=a),a}).reduce((e,t)=>null!==t?"".concat(e||"",",").concat(t):e);let g=null;m&&Object.entries(m).map(e=>{let[t,a]=e;return a&&(g=null===g?t:"".concat(g,", ").concat(t)),null});const h=g?i.a.Fragment:se.a;return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:l.heading},i.a.createElement(J.a,{variant:"h4"},i.a.createElement(W.a,{id:"Apis.Details.Subscriptions.SubscriptionsTable.manage.subscriptions",defaultMessage:"Manage Subscriptions"}),"   ",e.length>0&&i.a.createElement(h,{title:"No contact details",placement:"top"},i.a.createElement("span",null,i.a.createElement(je.a,{target:"_blank",rel:"noopener",href:"mailto:?subject=Message from the API Publisher&cc=".concat(u)+"&body=Hi ".concat(g,","),size:"small",disabled:!g,variant:"outlined"},"Contact Subscribers")))),i.a.createElement(J.a,{variant:"caption",gutterBottom:!0},i.a.createElement(W.a,{id:"Apis.Details.Subscriptions.SubscriptionsTable.sub.heading",defaultMessage:"Manage subscriptions of the API"}))),i.a.createElement(de.a,{elevation:0},e.length>0?i.a.createElement("div",null,i.a.createElement(Hi.a,{title:"",data:e,columns:p,options:d})):i.a.createElement("div",{className:l.noDataMessage,style:{height:a*s}},i.a.createElement(W.a,{id:"Apis.Details.Subscriptions.SubscriptionsTable.no.subscriptions",defaultMessage:"No subscriptions data available"}))))}}Yc.propTypes={classes:s.a.shape({}).isRequired,api:s.a.shape({id:s.a.string}).isRequired,intl:s.a.shape({}).isRequired};var Jc=Object(W.d)(Pc()(e=>({heading:{marginTop:e.spacing(3),marginBottom:e.spacing(2)},button:{margin:e.spacing(1)},headline:{paddingTop:e.spacing(1.25),paddingLeft:e.spacing(2.5)},popupHeadline:{alignItems:"center",borderBottom:"2px solid #40E0D0",textAlign:"center"},table:{"& td":{fontSize:e.typography.fontSize},"& th":{fontSize:1.2*e.typography.fontSize}},searchDiv:{float:"right",paddingTop:e.spacing(1.25),paddingRight:e.spacing(1.25)},searchRoot:{paddingTop:e.spacing(.25),paddingBottom:e.spacing(.25),paddingRight:e.spacing(.5),paddingLeft:e.spacing(.5),display:"flex",alignItems:"right",width:e.spacing(50),borderBottom:"1px solid #E8E8E8"},searchInput:{marginLeft:e.spacing(1),flex:1},searchIconButton:{padding:e.spacing(1.25)},noDataMessage:{display:"flex",alignItems:"center",justifyContent:"center",color:"#888888",width:"100%"},tableColumnSize:{width:"14%"},tableColumnSize2:{width:"30%"},dialogColumnSize:{width:"50%"},dialog:{float:"center",alignItems:"center"},invoiceTable:{"& td":{fontSize:1.5*e.typography.fontSize}},uniqueCell:{borderTop:"1px solid #000000",fontWeight:"bold"},mainTitle:{paddingLeft:0,marginTop:e.spacing(3)},titleWrapper:{marginBottom:e.spacing(3)},typography:{padding:e.spacing(2)},root:{flexGrow:1},InfoToolTip:{backgroundColor:e.custom.disableColor,color:e.palette.getContrastText(e.custom.disableColor),fontSize:e.typography.fontSize,fontWeight:e.typography.h6.fontWeight,border:"solid 1px "+e.palette.grey,borderRadius:e.shape.borderRadius,padding:e.spacing(2)},subscriberHeader:{fontSize:e.typography.h6.fontSize,color:e.typography.h6.color,fontWeight:e.typography.h6.fontWeight}}))(Yc));function Qc(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}class Zc extends n.Component{constructor(e){super(e),this.state={subscriptionPolicies:{}},this.handleChange=this.handleChange.bind(this)}componentDidMount(){X.a.policies("subscription").then(e=>{this.setState({subscriptionPolicies:e.body.list})}).catch(e=>{0})}handleChange(e){const{name:t,checked:a}=e.target,{setPolices:n,policies:i}=this.props;let r=Qc(i);a?r.push(t):r=i.filter(e=>e!==t),n(r)}render(){const{classes:e,api:t,policies:a}=this.props,{subscriptionPolicies:n}=this.state;return i.a.createElement(i.a.Fragment,null,i.a.createElement(J.a,{variant:"h4"},i.a.createElement(W.a,{id:"Apis.Details.Subscriptions.SubscriptionPoliciesManage.business.plans",defaultMessage:"Business Plans"})),t.apiType===X.a.CONSTS.APIProduct?i.a.createElement(J.a,{variant:"caption",gutterBottom:!0},i.a.createElement(W.a,{id:"Apis.Details.Subscriptions.SubscriptionPoliciesManage.APIProduct.sub.heading",defaultMessage:"Attach business plans to API"})):i.a.createElement(J.a,{variant:"caption",gutterBottom:!0},i.a.createElement(W.a,{id:"Apis.Details.Subscriptions.SubscriptionPoliciesManage.sub.heading",defaultMessage:"Attach business plans to API"})),i.a.createElement(de.a,{className:e.subscriptionPoliciesPaper},i.a.createElement(zt.a,{className:e.formControl},i.a.createElement(bn.a,null,n&&Object.entries(n).map(e=>i.a.createElement(At.a,{key:e[1].name,control:i.a.createElement(ua.a,{disabled:Object(o.b)(["apim:api_publish","apim:api_create"],t),color:"primary",checked:a.includes(e[1].name),onChange:e=>this.handleChange(e),name:e[1].name}),label:e[1].name+" : "+e[1].description}))))))}}Zc.propTypes={classes:s.a.shape({}).isRequired,intl:s.a.shape({formatMessage:s.a.func}).isRequired,api:s.a.shape({policies:s.a.array}).isRequired,setPolices:s.a.func.isRequired,policies:s.a.shape({}).isRequired};var Xc=Object(W.d)(Pc()(e=>({subscriptionPoliciesPaper:{marginTop:e.spacing(2),padding:e.spacing(2)},grid:{margin:e.spacing(1.25)},gridLabel:{marginTop:e.spacing(1.5)},mainTitle:{paddingLeft:0}}))(Zc));function $c(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function ep(){return(ep=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function tp(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function ap(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?tp(a,!0).forEach(function(t){np(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):tp(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function np(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function ip(e,t){if(null==e)return{};var a,n,i=function(e,t){if(null==e)return{};var a,n,i={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(i[a]=e[a]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}const rp=Object(He.a)(e=>({root:{flexGrow:1,height:250},container:{flexGrow:1,position:"relative"},paper:{position:"absolute",zIndex:1,marginTop:e.spacing(1),left:0,right:0},chip:{margin:e.spacing(.5,.25)},inputRoot:{flexWrap:"wrap"},inputInput:{width:"auto",flexGrow:1},divider:{height:e.spacing(2)}}));function sp(e){const{InputProps:t,classes:a,ref:n}=e,r=ip(e,["InputProps","classes","ref"]);return i.a.createElement(Gt.a,ep({InputProps:ap({inputRef:n,classes:{root:a.inputRoot,input:a.inputInput}},t)},r))}function op(e){const{suggestion:t,index:a,itemProps:n,highlightedIndex:r,tenantList:s}=e,o=r===a,l=(s||"").indexOf(t)>-1;return i.a.createElement(Yt.a,ep({},n,{key:t,selected:o,component:"div",style:{fontWeight:l?500:400}}),t)}function lp(e){const{tenantList:t,setTenantList:a}=e,{classes:n,suggestions:r}=e,[s,o]=i.a.useState("");function l(e){t.length&&!s.length&&"Backspace"===e.key&&a(t.slice(0,t.length-1))}const c=e=>()=>{const n=$c(t);n.splice(n.indexOf(e),1),a(n)};return i.a.createElement(ms.a,{id:"downshift-multiple",inputValue:s,onChange:function(e){let n=$c(t);-1===n.indexOf(e)&&(n=[].concat($c(n),[e])),o(""),a(n)},tenantList:t},e=>{let{getInputProps:a,getItemProps:s,getLabelProps:p,isOpen:d,inputValue:m,tenantList:u,highlightedIndex:g}=e;const h=a({onKeyDown:l,placeholder:"Type and select tenants from the suggested list"}),{onBlur:f,onChange:E,onFocus:b}=h,y=ip(h,["onBlur","onChange","onFocus"]);return i.a.createElement("div",{className:n.container},sp({fullWidth:!0,classes:n,label:"Tenants",InputLabelProps:p(),InputProps:{startAdornment:t.map(e=>i.a.createElement(he.a,{key:e,tabIndex:-1,label:e,className:n.chip,onDelete:c(e)})),onBlur:f,onChange:e=>{!function(e){o(e.target.value)}(e),E(e)},onFocus:b},inputProps:y}),d?i.a.createElement(de.a,{className:n.paper,square:!0},function(e,t){let{showEmpty:a=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const n=ds()(e.trim()).toLowerCase(),i=n.length;let r=0;return 0!==i||a?t.filter(e=>{const t=r<15&&e.slice(0,i).toLowerCase()===n;return t&&(r+=1),t}):[]}(m,r).map((e,t)=>op({suggestion:e,index:t,itemProps:s({item:e}),highlightedIndex:g,tenantList:u}))):null)})}function cp(e){const t=rp(),[a,r]=Object(n.useState)({}),{setTenantList:s,api:o,tenantList:l}=e,c=new X.a;return Object(n.useEffect)(()=>{c.getTenantsByState(ye.a.TENANT_STATE_ACTIVE).then(e=>{const t=e.body.list.map(e=>e.domain);r(t)})},[]),i.a.createElement("div",{className:t.root},i.a.createElement("div",{className:t.divider}),i.a.createElement(lp,{classes:t,suggestions:a,tenantList:l,setTenantList:s,api:o}),i.a.createElement("div",{className:t.divider}))}function pp(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function dp(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}sp.propTypes={classes:s.a.shape({type:s.a.string,inputType:s.a.string}).isRequired,InputProps:s.a.shape({type:s.a.string,inputType:s.a.string}).isRequired},op.propTypes={highlightedIndex:s.a.oneOfType([s.a.oneOf([null]),s.a.number]).isRequired,index:s.a.number.isRequired,itemProps:s.a.shape({type:s.a.string,inputType:s.a.string}).isRequired,tenantList:s.a.shape([]).isRequired,suggestion:s.a.string.isRequired},lp.propTypes={classes:s.a.shape({type:s.a.string,inputType:s.a.string}).isRequired,setTenantList:s.a.shape({type:s.a.string,inputType:s.a.string}).isRequired,suggestions:s.a.shape({type:s.a.string,inputType:s.a.string}).isRequired,api:s.a.shape({policies:s.a.array}).isRequired,tenantList:s.a.shape([]).isRequired},cp.propTypes={setTenantList:s.a.shape({type:s.a.string,inputType:s.a.string}).isRequired,api:s.a.shape({policies:s.a.array}).isRequired,tenantList:s.a.shape([]).isRequired};const mp=Object(He.a)(e=>({root:{display:"flex",flexWrap:"wrap"},formControl:{margin:e.spacing(1),minWidth:400},textControl:{margin:e.spacing(1),minWidth:300},selectEmpty:{marginTop:e.spacing(2)},subscriptionAvailabilityPaper:{marginTop:e.spacing(2),paddingLeft:e.spacing(2),paddingBottom:e.spacing(2)},grid:{display:"flex",margin:e.spacing(1.25)},gridLabel:{marginTop:e.spacing(3.5)},saveButton:{marginTop:e.spacing(2)},heading:{marginTop:e.spacing(3)},tenantsList:{height:e.spacing(12)}}));function up(e){const t=mp(),{api:a,setAvailability:n,tenantList:r,setTenantList:s}=e;let l;null===a.subscriptionAvailability||"CURRENT_TENANT"===a.subscriptionAvailability?l="currentTenant":"ALL_TENANTS"===a.subscriptionAvailability?l="allTenants":"SPECIFIC_TENANTS"===a.subscriptionAvailability&&(l="specificTenants");const[c,p]=i.a.useState({availability:l}),d=i.a.useRef(null),[m,u]=i.a.useState(0),g="specificTenants"===c.availability,h=Object(o.b)(["apim:api_publish","apim:api_create"],a);function f(e){let t;p(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?pp(a,!0).forEach(function(t){dp(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):pp(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},c,{availability:e})),"currentTenant"===e?(t="CURRENT_TENANT",s([])):"allTenants"===e?(t="ALL_TENANTS",s([])):"specificTenants"===e&&(t="SPECIFIC_TENANTS"),n({subscriptionAvailability:t})}return i.a.useEffect(()=>{u(d.current.offsetWidth)},[]),i.a.createElement(me.a,{item:!0,xs:12,md:12,lg:12},i.a.createElement(J.a,{variant:"h4",className:t.heading},i.a.createElement(W.a,{id:"Apis.Details.Subscriptions.SubscriptionAvailability.subscription.availability",defaultMessage:"Subscription Availability"})),i.a.createElement(J.a,{variant:"caption",gutterBottom:!0},i.a.createElement(W.a,{id:"Apis.Details.Subscriptions.SubscriptionAvailability.sub.heading",defaultMessage:"Make subscriptions available to tenants"})),i.a.createElement(de.a,{className:t.subscriptionAvailabilityPaper},i.a.createElement("form",{className:t.root,autoComplete:"off",onSubmit:e=>{e.preventDefault()}},i.a.createElement(me.a,{container:!0,xs:12,spacing:1,className:t.grid},i.a.createElement(me.a,{item:!0,xs:10},i.a.createElement(zt.a,{variant:"outlined",className:t.formControl,disabled:h},i.a.createElement(As.a,{ref:d,htmlFor:"outlined-age-simple"}),i.a.createElement(Ot.a,{value:c.availability,onChange:e=>{let{target:{value:t}}=e;f(t)},labelWidth:m,displayEmpty:!0,name:"availability",inputProps:{name:"availability",id:"outlined-availabi;ity-simple"}},i.a.createElement(Yt.a,{value:"currentTenant"},i.a.createElement(W.a,{id:"Apis.Details.Subscriptions.SubscriptionAvailability.current.tenant.only",defaultMessage:"Available to current tenant only"})),i.a.createElement(Yt.a,{value:"allTenants"},i.a.createElement(W.a,{id:"Apis.Details.Subscriptions.SubscriptionAvailability.all.tenants",defaultMessage:"Available to all the tenants"})),i.a.createElement(Yt.a,{value:"specificTenants"},i.a.createElement(W.a,{id:"Apis.Details.Subscriptions.SubscriptionAvailability.specific.tenants",defaultMessage:"Available to specific tenants"}))))),g?i.a.createElement(me.a,{item:!0,xs:8,className:t.tenantsList},i.a.createElement(cp,{setTenantList:s,tenantList:r,api:a})):i.a.createElement(me.a,{item:!0,xs:8})))))}function gp(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}up.propTypes={classes:s.a.shape({}).isRequired,intl:s.a.shape({formatMessage:s.a.func}).isRequired,api:s.a.shape({policies:s.a.array}).isRequired,setAvailability:s.a.func.isRequired,setTenantList:s.a.func.isRequired,tenantList:s.a.shape([]).isRequired};const hp=Object(He.a)(e=>({buttonSection:{marginTop:e.spacing(2)},emptyBox:{marginTop:e.spacing(2)}}));function fp(e){const t=hp(),[a]=Object(ue.d)(),{updateAPI:r}=e,s=new X.a,[o,l]=Object(n.useState)(null),[c,p]=Object(n.useState)({}),[d,m]=Object(n.useState)({subscriptionAvailability:a.subscriptionAvailability}),[u,g]=Object(n.useState)(a.subscriptionAvailableTenants),[h,f]=Object(n.useState)(null),[E,b]=Object(n.useState)(!1),{settings:y}=Object(ne.c)();return Object(n.useEffect)(()=>{s.getTenantsByState(ye.a.TENANT_STATE_ACTIVE).then(e=>{l(e.body.count)}),s.subscriptions(a.id).then(e=>{f(e.body.count)}),p(gp(a.policies))},[]),"number"!=typeof o||"number"!=typeof h?i.a.createElement(me.a,{container:!0,direction:"row",justify:"center",alignItems:"center"},i.a.createElement(me.a,{item:!0},i.a.createElement($e.a,null))):i.a.createElement(i.a.Fragment,null,i.a.createElement(Xc,{api:a,policies:c,setPolices:p}),0!==o&&y.crossTenantSubscriptionEnabled&&i.a.createElement(up,{api:a,availability:d,setAvailability:m,tenantList:u,setTenantList:g}),E&&i.a.createElement(wc.a,null),i.a.createElement(me.a,{container:!0,direction:"row",alignItems:"flex-start",spacing:1,className:t.buttonSection},i.a.createElement(me.a,{item:!0},i.a.createElement(je.a,{type:"submit",variant:"contained",color:"primary",onClick:()=>(function(){b(!0);const{subscriptionAvailability:e}=d;r({policies:c,subscriptionAvailability:e,subscriptionAvailableTenants:u}).then(()=>{te.a.info("Subscription configurations updated successfully")}).catch(e=>{console.error(e),te.a.error("Error occurred while updating subscription configurations")}).finally(()=>{b(!1)})})()},i.a.createElement(W.a,{id:"Apis.Details.Subscriptions.Subscriptions.save",defaultMessage:"Save"}))),i.a.createElement(me.a,{item:!0},i.a.createElement(B.b,{to:"/apis/"+a.id+"/overview"},i.a.createElement(je.a,null,i.a.createElement(W.a,{id:"Apis.Details.Subscriptions.Subscriptions.cancel",defaultMessage:"Cancel"}))))),i.a.createElement(Jc,{api:a}))}fp.propTypes={updateAPI:s.a.func.isRequired};var Ep=Pc()(He.a)(fp),bp=a(2684),yp=a.n(bp),vp=a(1726),Cp=a.n(vp),Ap=a(1727),Sp=a.n(Ap),Op=a(813);class Dp extends i.a.Component{constructor(e){super(e),this.state={commentText:"",category:"General",currentLength:0},this.inputChange=this.inputChange.bind(this),this.handleClickAddComment=this.handleClickAddComment.bind(this),this.handleClickCancel=this.handleClickCancel.bind(this),this.handleCategoryChange=this.handleCategoryChange.bind(this),this.filterCommentToAddReply=this.filterCommentToAddReply.bind(this)}inputChange(e){let{target:t}=e;this.setState({commentText:t.value,currentLength:t.value.length})}handleClickCancel(){const{toggleShowReply:e}=this.props;e()}handleCategoryChange(e){this.setState({category:e.target.value})}filterCommentToAddReply(e){const{parentCommentId:t}=this.props;return e.commentId===t}handleClickAddComment(){const{api:e,parentCommentId:t,allComments:a,toggleShowReply:n,commentsUpdate:i}=this.props,{category:r,commentText:s}=this.state,o=new X.a,l=e.id,c={apiId:e.id,category:r,commentText:s.trim(),parentCommentId:t};c.commentText.replace(/\s/g,"").length?o.addComment(l,c).then(e=>{this.setState({commentText:"",category:"General"});const r=e.body;if(null===t)a.push(r);else{const e=a.findIndex(this.filterCommentToAddReply);a[e].replies.push(r),n()}i(a)}).catch(e=>{console.error(e),e.response?te.a.error(e.response.body.message):te.a.error("Something went wrong while adding the comment")}):te.a.error("You cannot enter a blank comment"),this.setState({currentLength:0})}render(){const{classes:e,cancelButton:t,theme:a}=this.props,{category:n,commentText:r,currentLength:s}=this.state;return i.a.createElement(me.a,{container:!0,spacing:7,className:e.contentWrapper},i.a.createElement(me.a,{item:!0,xs:!0,zeroMinWidth:!0},i.a.createElement(zt.a,{className:e.category},i.a.createElement(Ot.a,{value:n,onChange:this.handleCategoryChange},i.a.createElement(Yt.a,{value:"General"},"General"),i.a.createElement(Yt.a,{value:"Feature Request"},"Feature Request"),i.a.createElement(Yt.a,{value:"Bug Report"},"Bug Report"))),i.a.createElement(Gt.a,{id:"standard-multiline-flexible",autoFocus:!0,multiline:!0,className:e.textField,margin:"normal",placeholder:"Write a comment",inputProps:{maxLength:a.custom.maxCommentLength},value:r,onChange:this.inputChange}),i.a.createElement(J.a,{className:e.commentText,align:"right"},s+"/"+a.custom.maxCommentLength),i.a.createElement(me.a,{container:!0,spacing:2},i.a.createElement(me.a,{item:!0},i.a.createElement(je.a,{variant:"contained",color:"primary",onClick:()=>this.handleClickAddComment()},"Add Comment")),t&&i.a.createElement(me.a,{item:!0},i.a.createElement(je.a,{onClick:()=>this.handleClickCancel(),className:e.button},"Cancel")))))}}Dp.defaultProps={api:null,parentCommentId:null,toggleShowReply:null,commentsUpdate:null},Dp.propTypes={classes:s.a.instanceOf(Object).isRequired,cancelButton:s.a.bool.isRequired,api:s.a.instanceOf(Object),parentCommentId:s.a.string,toggleShowReply:s.a.func,commentsUpdate:s.a.func,allComments:s.a.instanceOf(Array).isRequired,theme:s.a.shape({}).isRequired};var Pp=Object(q.a)(e=>({commentIcon:{color:e.palette.getContrastText(e.palette.background.default)},commentText:{color:e.palette.getContrastText(e.palette.background.default)},contentWrapper:{maxWidth:e.custom.contentAreaWidth,paddingLeft:e.spacing(2),paddingTop:e.spacing.unig,marginTop:e.spacing(2)},textField:{marginTop:0,width:"88%"},category:{width:"12%"}}),{withTheme:!0})(Dp);class wp extends i.a.Component{constructor(e){super(e),this.state={commentText:"",category:"",currentLength:0},this.inputChange=this.inputChange.bind(this),this.handleCategoryChange=this.handleCategoryChange.bind(this),this.handleClickUpdateComment=this.handleClickUpdateComment.bind(this),this.handleClickCancel=this.handleClickCancel.bind(this),this.filterCommentToUpdate=this.filterCommentToUpdate.bind(this),this.filterCommentToUpdateReply=this.filterCommentToUpdateReply.bind(this)}componentDidMount(){const{comment:e}=this.props;this.setState({commentText:e.commentText,category:e.category,currentLength:e.commentText.length})}inputChange(e){let{target:t}=e;this.setState({commentText:t.value,currentLength:t.value.length})}handleClickCancel(){const{toggleShowEdit:e,commentsUpdate:t,allComments:a}=this.props;e(),t(a)}handleCategoryChange(e){this.setState({category:e.target.value})}filterCommentToUpdate(e){const{comment:t}=this.props;return e.commentId===t.commentId}filterCommentToUpdateReply(e){const{comment:t}=this.props;return e.commentId===t.parentCommentId}handleClickUpdateComment(){const{api:e,comment:t,allComments:a,toggleShowEdit:n,commentsUpdate:i}=this.props,{category:r,commentText:s}=this.state,o=new X.a,l=e.id,c=t;c.commentText=s.trim(),c.category=r,t.commentText.replace(/\s/g,"").length?o.updateComment(l,c.commentId,c).then(e=>{const t=e.body;if(void 0===c.parentCommentId){const e=a.findIndex(this.filterCommentToUpdate);a[e].category=t.category,a[e].commentText=t.commentText}else{const e=a.findIndex(this.filterCommentToUpdateReply),n=a[e].replies.findIndex(this.filterCommentToUpdate);a[e].replies[n]=t}n(),i(a)}).catch(e=>{console.error(e),e.response?te.a.error(e.response.body.message):te.a.error("Something went wrong while adding the comment")}):te.a.error("You cannot enter a blank comment")}render(){const{classes:e,theme:t}=this.props,{category:a,commentText:n,currentLength:r}=this.state;return i.a.createElement("div",null,i.a.createElement(zt.a,{className:e.category},i.a.createElement(Ot.a,{value:a,onChange:this.handleCategoryChange},i.a.createElement(Yt.a,{value:"General"},"General"),i.a.createElement(Yt.a,{value:"Feature Request"},"Feature Request"),i.a.createElement(Yt.a,{value:"Bug Report"},"Bug Report"))),i.a.createElement(Gt.a,{id:"multiline-static",autoFocus:!0,multiline:!0,className:e.textField,margin:"normal",placeholder:"Write a comment",inputProps:{maxLength:t.custom.maxCommentLength},value:n,onChange:this.inputChange}),i.a.createElement(J.a,{className:e.commentText,align:"right"},r+"/"+t.custom.maxCommentLength),i.a.createElement(me.a,{container:!0,spacing:2},i.a.createElement(me.a,{item:!0},i.a.createElement(je.a,{variant:"contained",color:"primary",onClick:()=>this.handleClickUpdateComment()},"Save")),i.a.createElement(me.a,{item:!0},i.a.createElement(je.a,{onClick:()=>this.handleClickCancel(),className:e.button},"Cancel"))))}}wp.propTypes={classes:s.a.instanceOf(Object).isRequired,api:s.a.instanceOf(Object).isRequired,allComments:s.a.instanceOf(Array).isRequired,commentsUpdate:s.a.func.isRequired,toggleShowEdit:s.a.func.isRequired,comment:s.a.instanceOf(Object).isRequired,theme:s.a.shape({}).isRequired};var Tp=Object(q.a)(e=>({textField:{marginTop:0,width:"87.5%"},contentWrapper:{maxWidth:e.custom.contentAreaWidth,paddingLeft:e.spacing(2),paddingTop:e.spacing(1),marginTop:e.spacing(2)},category:{width:"12%",marginRight:"0.5%"}}),{withTheme:!0})(wp),xp=a(694);class Ip extends i.a.Component{constructor(e){super(e),this.state={},this.showAddComment=this.showAddComment.bind(this),this.showEditComment=this.showEditComment.bind(this),this.handleClickOpen=this.handleClickOpen.bind(this)}showAddComment(e){const{editIndex:t,showAddComment:a}=this.props;-1===t&&a(e)}showEditComment(e){const{editIndex:t,showEditComment:a}=this.props;-1===t&&a(e)}handleClickOpen(e){const{editIndex:t,handleClickOpen:a}=this.props;-1===t&&a(e)}displayDate(e){const t=new Date(e);return t.toLocaleDateString(void 0,{day:"numeric",month:"short",year:"numeric"})+" "+t.toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit"})}render(){const{classes:e,comment:t,editIndex:a,index:n,theme:r}=this.props,s=t.createdBy===o.a.getUser().name||o.a.getUser().name===r.custom.adminRole,l=t.createdBy===o.a.getUser().name&&"APIPublisher"===t.entryPoint;return i.a.createElement(Cp.a,{container:!0,spacing:2,className:e.verticalSpace,key:t.commentId},null==t.parentCommentId&&[i.a.createElement(Cp.a,{item:!0,key:"key-reply"},i.a.createElement(J.a,{component:"a",className:-1===a?e.link:e.disable,onClick:()=>this.showAddComment(n)},"Reply")),i.a.createElement(Cp.a,{item:!0,key:"key-reply-vertical-divider"},i.a.createElement(xp.a,{height:15}))],s&&[i.a.createElement(Cp.a,{item:!0,key:"key-delete"},i.a.createElement(J.a,{component:"a",className:-1===a?e.link:e.disable,onClick:()=>this.handleClickOpen(t)},"Delete")),i.a.createElement(Cp.a,{item:!0,key:"key-delete-vertical-divider"},i.a.createElement(xp.a,{height:15}))],l&&[i.a.createElement(Cp.a,{item:!0,key:"key-edit"},i.a.createElement(J.a,{component:"a",className:-1===a?e.link:e.disable,onClick:()=>this.showEditComment(n)},"Edit")),i.a.createElement(Cp.a,{item:!0,key:"key-edit-verical-divider"},i.a.createElement(xp.a,{height:15}))],i.a.createElement(Cp.a,{item:!0,className:e.time},i.a.createElement(J.a,{component:"a",variant:"caption"},this.displayDate(t.createdTime))),a===n?null:[i.a.createElement(Cp.a,{item:!0,key:"key-category-vertical-divider"},i.a.createElement(xp.a,{height:15})),i.a.createElement(Cp.a,{item:!0,className:e.time,key:"key-category"},i.a.createElement(J.a,{component:"a",variant:"caption"},t.category))])}}Ip.defaultProps={showAddComment:null},Ip.propTypes={classes:s.a.instanceOf(Object).isRequired,editIndex:s.a.number.isRequired,index:s.a.number.isRequired,comment:s.a.instanceOf(Object).isRequired,handleClickOpen:s.a.func.isRequired,showEditComment:s.a.func.isRequired,showAddComment:s.a.func,theme:s.a.shape({}).isRequired};var Mp=Object(q.a)(e=>({link:{color:e.palette.getContrastText(e.palette.background.default),cursor:"pointer"},time:{color:e.palette.getContrastText(e.palette.background.default),marginTop:e.spacing(.3)},verticalSpace:{marginTop:e.spacing(.2)},disable:{color:e.custom.disableColor},commentIcon:{color:e.palette.getContrastText(e.palette.background.default)},commentText:{color:e.palette.getContrastText(e.palette.background.default),marginTop:e.spacing.unig,width:"100%",whiteSpace:"pre-wrap",overflowWrap:"break-word"},root:{marginTop:e.spacing(2.5)},contentWrapper:{maxWidth:e.custom.contentAreaWidth,paddingLeft:e.spacing(2),paddingTop:e.spacing.unig}}),{withTheme:!0})(Ip);function Rp(){return(Rp=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}class kp extends i.a.Component{constructor(e){super(e),this.state={openDialog:!1,editIndex:-1,deleteComment:null},this.keyCount=0,this.getKey=this.getKey.bind(this),this.handleClickDeleteComment=this.handleClickDeleteComment.bind(this),this.handleShowEdit=this.handleShowEdit.bind(this),this.handleClickOpen=this.handleClickOpen.bind(this),this.showEditComment=this.showEditComment.bind(this),this.handleConfirmDialog=this.handleConfirmDialog.bind(this),this.handleClose=this.handleClose.bind(this),this.filterRemainingComments=this.filterRemainingComments.bind(this),this.filterCommentToDelete=this.filterCommentToDelete.bind(this)}getKey(){return this.keyCount++}filterRemainingComments(e){const{deleteComment:t}=this.state;return e.commentId!==t.commentId}filterCommentToDelete(e){const{deleteComment:t}=this.state;return e.commentId===t.parentCommentId}showEditComment(e){const{editIndex:t}=this.state;-1===t&&this.setState({editIndex:e})}handleShowEdit(){this.setState({editIndex:-1})}handleClickOpen(e){const{editIndex:t}=this.state;-1===t&&this.setState({deleteComment:e,openDialog:!0})}handleClose(){this.setState({openDialog:!1})}handleConfirmDialog(e){e?this.handleClickDeleteComment():this.handleClose()}handleClickDeleteComment(){const e=new X.a,{deleteComment:t}=this.state,{api:a,allComments:n,commentsUpdate:i}=this.props,r=t.commentId,s=t.parentCommentId,o=a.id;this.handleClose(),e.deleteComment(o,r).then(()=>{if(void 0===s){const e=n.filter(this.filterRemainingComments);i(e)}else{const e=n.findIndex(this.filterCommentToDelete),t=n[e].replies.filter(this.filterRemainingComments);n[e].replies=t,i(n)}}).catch(e=>{console.error(e),e.response?te.a.error(e.response.body.message):te.a.error("Something went wrong while deleting comment - ".concat(r))})}render(){const{classes:e,comments:t,api:a,allComments:n,commentsUpdate:r}=this.props,{editIndex:s,openDialog:o}=this.state,l={api:a,allComments:n,commentsUpdate:r};return[t&&t.map((t,a)=>i.a.createElement("div",{key:this.getKey(),className:e.contentWrapper},i.a.createElement(me.a,{container:!0,spacing:2,className:e.root},i.a.createElement(me.a,{item:!0},i.a.createElement(Sp.a,{className:e.commentIcon})),i.a.createElement(me.a,{item:!0,xs:!0,zeroMinWidth:!0},i.a.createElement(J.a,{noWrap:!0,className:e.commentText,variant:"body1"},t.createdBy),a!==s&&i.a.createElement(J.a,{className:e.commentText},t.commentText),a===s&&i.a.createElement(Tp,Rp({},l,{comment:t,toggleShowEdit:this.handleShowEdit})),i.a.createElement(Mp,{classes:e,comment:t,editIndex:s,index:a,showAddComment:this.showAddComment,handleClickOpen:this.handleClickOpen,showEditComment:this.showEditComment}))))),i.a.createElement(Op.a,{key:"key-dialog",labelCancel:"Cancel",title:"Confirm Delete",message:"Are you sure you want to delete this comment?",labelOk:"Yes",callback:this.handleConfirmDialog,open:o})]}}kp.defaultProps={api:null},kp.propTypes={classes:s.a.instanceOf(Object).isRequired,api:s.a.instanceOf(Object),allComments:s.a.instanceOf(Array).isRequired,commentsUpdate:s.a.func.isRequired,comments:s.a.instanceOf(Array).isRequired};var Np=Object(q.a)(e=>({link:{color:e.palette.getContrastText(e.palette.background.default),cursor:"pointer"},commentIcon:{color:e.palette.getContrastText(e.palette.background.default)},commentText:{color:e.palette.getContrastText(e.palette.background.default),marginTop:e.spacing(1),width:"100%",whiteSpace:"pre-wrap",overflowWrap:"break-word"},root:{marginTop:e.spacing(2.5)},contentWrapper:{maxWidth:e.custom.contentAreaWidth,paddingLeft:e.spacing(2),paddingTop:e.spacing(1)}}))(kp);function jp(){return(jp=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}class _p extends i.a.Component{constructor(e){super(e),this.state={openDialog:!1,replyIndex:-1,editIndex:-1,deleteComment:null},this.keyCount=0,this.getKey=this.getKey.bind(this),this.handleClickDeleteComment=this.handleClickDeleteComment.bind(this),this.handleShowEdit=this.handleShowEdit.bind(this),this.handleShowReply=this.handleShowReply.bind(this),this.handleClickOpen=this.handleClickOpen.bind(this),this.showAddComment=this.showAddComment.bind(this),this.showEditComment=this.showEditComment.bind(this),this.handleConfirmDialog=this.handleConfirmDialog.bind(this),this.handleClose=this.handleClose.bind(this),this.filterRemainingComments=this.filterRemainingComments.bind(this),this.filterCommentToDelete=this.filterCommentToDelete.bind(this)}getKey(){return this.keyCount++}filterRemainingComments(e){const{deleteComment:t}=this.state;return e.commentId!==t.commentId}filterCommentToDelete(e){const{deleteComment:t}=this.state;return e.commentId===t.parentCommentId}showAddComment(e){const{editIndex:t}=this.state;-1===t&&this.setState({replyIndex:e})}showEditComment(e){const{editIndex:t}=this.state;-1===t&&this.setState({editIndex:e})}handleShowEdit(){this.setState({editIndex:-1})}handleShowReply(){this.setState({replyIndex:-1})}handleClickOpen(e){const{editIndex:t}=this.state;-1===t&&this.setState({deleteComment:e,openDialog:!0})}handleClose(){this.setState({openDialog:!1})}handleConfirmDialog(e){e?this.handleClickDeleteComment():this.handleClose()}handleClickDeleteComment(){const e=new X.a,{deleteComment:t}=this.state,{api:a,allComments:n,commentsUpdate:i}=this.props,r=t.commentId,s=t.parentCommentId,o=a.id;this.handleClose(),e.deleteComment(o,r).then(()=>{if(void 0===s){const e=n.filter(this.filterRemainingComments);i(e)}else{const e=n.findIndex(this.filterCommentToDelete),t=n[e].replies.filter(this.filterRemainingComments);n[e].replies=t,i(n)}}).catch(e=>{console.error(e),e.response?te.a.error(e.response.body.message):te.a.error("Something went wrong while deleting comment - ".concat(r))})}render(){const{classes:e,comments:t,api:a,allComments:n,commentsUpdate:r}=this.props,{editIndex:s,replyIndex:o,openDialog:l}=this.state,c={api:a,allComments:n,commentsUpdate:r};return[t&&t.slice(0).reverse().map((t,a)=>i.a.createElement("div",{key:this.getKey(),className:e.contentWrapper},i.a.createElement(me.a,{container:!0,spacing:2,className:e.root},i.a.createElement(me.a,{item:!0},i.a.createElement(Sp.a,{className:e.commentIcon})),i.a.createElement(me.a,{item:!0,xs:!0,zeroMinWidth:!0},i.a.createElement(J.a,{noWrap:!0,className:e.commentText,variant:"body1"},t.createdBy),a!==s&&i.a.createElement(J.a,{className:e.commentText},t.commentText),a===s&&i.a.createElement(Tp,jp({},c,{comment:t,toggleShowEdit:this.handleShowEdit})),i.a.createElement(Mp,{classes:e,comment:t,editIndex:s,index:a,showAddComment:this.showAddComment,handleClickOpen:this.handleClickOpen,showEditComment:this.showEditComment}),a===o&&i.a.createElement(Pp,jp({},c,{parentCommentId:t.commentId,toggleShowReply:this.handleShowReply,cancelButton:!0})),0!==t.replies.length&&i.a.createElement(Np,jp({},c,{classes:e,comments:t.replies})))))),i.a.createElement(Op.a,{key:"key-dialog",labelCancel:"Cancel",title:"Confirm Delete",message:"Are you sure you want to delete this comment?",labelOk:"Yes",callback:this.handleConfirmDialog,open:l})]}}_p.defaultProps={api:null},_p.propTypes={classes:s.a.instanceOf(Object).isRequired,api:s.a.instanceOf(Object),allComments:s.a.instanceOf(Array).isRequired,commentsUpdate:s.a.func.isRequired,comments:s.a.instanceOf(Array).isRequired};var Lp=Object(q.a)(e=>({link:{color:e.palette.getContrastText(e.palette.background.default),cursor:"pointer"},commentIcon:{color:e.palette.getContrastText(e.palette.background.default)},commentText:{color:e.palette.getContrastText(e.palette.background.default),marginTop:e.spacing.unig,width:"100%",whiteSpace:"pre-wrap",overflowWrap:"break-word"},root:{marginTop:e.spacing(2.5)},contentWrapper:{maxWidth:e.custom.contentAreaWidth,paddingLeft:e.spacing(2),paddingTop:e.spacing(2)}}))(_p);class qp extends n.Component{constructor(e){super(e),this.state={expanded:!0,allComments:[],comments:[],totalComments:0,startCommentsToDisplay:0},this.updateCommentList=this.updateCommentList.bind(this),this.handleExpandClick=this.handleExpandClick.bind(this),this.handleLoadMoreComments=this.handleLoadMoreComments.bind(this)}componentDidMount(){const{api:e,theme:t}=this.props;(new X.a).getAllComments(e.id).then(e=>{const a=e.body.list;this.setState({allComments:a,totalComments:a.length}),a.length<t.custom.commentsLimit?this.setState({startCommentsToDisplay:0,comments:a.slice(0,a.length)}):this.setState({startCommentsToDisplay:a.length-t.custom.commentsLimit,comments:a.slice(a.length-t.custom.commentsLimit,a.length)})}).catch(e=>{console.error(e),e.response?te.a.error(e.response.body.message):te.a.error("Something went wrong while retrieving comments")})}handleLoadMoreComments(){const{totalComments:e,startCommentsToDisplay:t,allComments:a}=this.state,{theme:n}=this.props;t-n.custom.commentsLimit<=0?this.setState({startCommentsToDisplay:0,comments:a.slice(0,e)}):this.setState({startCommentsToDisplay:t-n.custom.commentsLimit,comments:a.slice(t-n.custom.commentsLimit,e)})}handleExpandClick(){const{expanded:e}=this.state;this.setState({expanded:!e})}updateCommentList(e){const{startCommentsToDisplay:t,totalComments:a}=this.state,{theme:n}=this.props;let i,r,s;this.setState({allComments:e}),a<n.custom.commentsLimit?(s=e.length,this.setState({startCommentsToDisplay:0,totalComments:s,comments:e})):a<=e.length?(i=t+(r=e.length-a),s=e.length,this.setState({startCommentsToDisplay:i,totalComments:s,comments:e.slice(i,s)})):(r=a-e.length,i=0===t?t:t-r,s=e.length,this.setState({startCommentsToDisplay:i,totalComments:s,comments:e.slice(i,s)}))}render(){const{classes:e,api:t}=this.props,{comments:a,expanded:n,allComments:r,startCommentsToDisplay:s,totalComments:o}=this.state;return i.a.createElement("div",{className:e.contentWrapper},i.a.createElement("div",{className:e.root},i.a.createElement(yp.a,{onClick:this.handleExpandClick,"aria-expanded":n}),i.a.createElement(J.a,{onClick:this.handleExpandClick,variant:"h4",className:e.titleSub},"Comments")),i.a.createElement(Ga.a,{in:n,timeout:"auto",unmountOnExit:!0},i.a.createElement(Pp,{api:t,commentsUpdate:this.updateCommentList,allComments:r,parentCommentId:null,cancelButton:!1}),i.a.createElement(Lp,{comments:a,api:t,commentsUpdate:this.updateCommentList,allComments:r}),0!==s&&i.a.createElement("div",{className:e.contentWrapper},i.a.createElement(Cp.a,{container:!0,spacing:8,className:e.root},i.a.createElement(Cp.a,{item:!0},i.a.createElement(J.a,{className:e.verticalSpace,variant:"body1",onClick:this.handleLoadMoreComments},i.a.createElement("a",{className:e.link+" "+e.loadMoreLink},"Load Previous Comments"))),i.a.createElement(Cp.a,null,i.a.createElement(as.a,{onClick:this.handleLoadMoreComments,className:e.link+" "+e.verticalSpace})),i.a.createElement(Cp.a,{item:!0},i.a.createElement(J.a,{className:e.verticalSpace,variant:"body1"},"Showing comments",o+-s+" of "+o))))))}}qp.propTypes={classes:s.a.instanceOf(Object).isRequired,api:s.a.instanceOf(Object).isRequired,theme:s.a.shape({}).isRequired};var Wp=Object(q.a)(e=>({root:{display:"flex",alignItems:"center",paddingTop:e.spacing(2),paddingBottom:e.spacing(2)},contentWrapper:{maxWidth:e.custom.contentAreaWidth,paddingLeft:e.spacing(2),paddingTop:e.spacing.unig},titleSub:{cursor:"pointer"},link:{color:e.palette.getContrastText(e.palette.background.default),cursor:"pointer"},verticalSpace:{marginTop:e.spacing(.2)},loadMoreLink:{textDecoration:"underline"}}),{withTheme:!0})(qp);function Up(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}class Bp extends i.a.Component{constructor(e){var t,a,n;super(e),n=e=>{const{validRoles:t,invalidRoles:a}=this.state;if(a.includes(e)){const t=a.filter(t=>t!==e);this.setState({invalidRoles:t}),0===t.length&&this.setState({roleValidity:!0})}else this.setState({validRoles:t.filter(t=>t!==e)})},(a="handleRoleDeletion")in(t=this)?Object.defineProperty(t,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[a]=n,this.api=new X.a,this.api_uuid=e.match.params.api_uuid;const i=[];i.name={invalid:!1,error:""},i.description={invalid:!1,error:""},this.state={apiScopes:null,apiScope:{},validRoles:[],valid:i,roleValidity:!0,invalidRoles:[],scopeAddDisabled:!1},this.addScope=this.addScope.bind(this),this.validateScopeName=this.validateScopeName.bind(this),this.handleScopeNameInput=this.handleScopeNameInput.bind(this),this.validateScopeDescription=this.validateScopeDescription.bind(this),this.handleRoleAddition=this.handleRoleAddition.bind(this),this.handleRoleDeletion=this.handleRoleDeletion.bind(this)}handleRoleAddition(e){const{validRoles:t,invalidRoles:a}=this.state;Zt.a.role.validate($t.a.encode(e)).then(()=>{this.setState({roleValidity:!0,validRoles:[].concat(Up(t),[e])})}).catch(t=>{404===t.status?this.setState({roleValidity:!1,invalidRoles:[].concat(Up(a),[e])}):(te.a.error("Error when validating role: "+e),console.error("Error when validating role "+t))})}validateScopeDescription(e){let{target:{id:t,value:a}}=e;const{valid:n,apiScope:i}=this.state,{intl:r}=this.props;i[t]=a,a&&""!==a.length&&a.length>=512?(n[t].invalid=!0,n[t].error=r.formatMessage({id:"Scopes.Create.Scope.description.length.exceeded",defaultMessage:"Exceeds maximum length limit of 512 characters"})):(n[t].invalid=!1,n[t].error=""),this.setState({valid:n,apiScope:i})}validateScopeName(e,t){const{valid:a,apiScope:n}=this.state,{api:{scopes:i}}=this.props;n[e]=t,a[e].invalid=!(t&&t.length>0),a[e].invalid&&(a[e].error="Scope name cannot be empty"),a[e].invalid=!(t&&t.length<=60),a[e].invalid&&(a[e].error="Scope name cannot be more than 60 characters"),/\s/.test(t)&&(a[e].invalid=!0,a[e].error="Scope name cannot have spaces");const r=i.find(e=>e.name===t);if(!a[e].invalid&&r&&(a[e].invalid=!0,a[e].error="Scope name already exist"),!a[e].invalid&&/[!@#$%^&*(),?"{}[\]|<>\t\n]|(^apim:)/i.test(t)&&(a[e].invalid=!0,a[e].error="Field contains special characters"),!a[e].invalid){Zt.a.scope.validate($t.a.encode(t)).then(()=>{a[e].invalid=!0,a[e].error="Scope name is already used by another API",this.setState({valid:a})}).catch(n=>{404===n.status?(a[e].invalid=!1,a[e].error="",this.setState({valid:a})):(te.a.error("Error when validating scope: "+t),console.error("Error when validating scope "+n))})}return a[e].invalid||(a[e].error=""),this.setState({valid:a,apiScope:n}),a[e].invalid}addScope(){const{intl:e,api:t,history:a,updateAPI:n}=this.props,i="APIProduct"===t.apiType?"api-products":"apis";if(this.validateScopeName("name",this.state.apiScope.name))return;const r=this.state.apiScope;r.bindings=this.state.validRoles;const s=t.scopes.map(e=>e);s.push({scope:r,shared:!1});const o=n({scopes:s});this.setState({scopeAddDisabled:!0}),o.then(()=>{te.a.info(e.formatMessage({id:"Apis.Details.Scopes.CreateScope.scope.added.successfully",defaultMessage:"Scope added successfully"}));const{apiScopes:n}=this.state,r="/"+i+"/"+t.id+"/scopes/";a.push(r),this.setState({apiScopes:n,apiScope:{},validRoles:[]})}).catch(e=>{const{response:t}=e;if(t.body){const{description:e}=t.body;te.a.error(e)}}).finally(()=>{this.setState({scopeAddDisabled:!1})})}handleScopeNameInput(e){let{target:{id:t,value:a}}=e;this.validateScopeName(t,a)}render(){const{classes:e,api:t}=this.props,a="APIProduct"===t.apiType?"api-products":"apis",n="/".concat(a,"/").concat(t.id,"/scopes"),{roleValidity:r,validRoles:s,invalidRoles:l,scopeAddDisabled:c}=this.state;return i.a.createElement(me.a,{container:!0,spacing:3},i.a.createElement(me.a,{item:!0,sm:12,md:12}),i.a.createElement(me.a,{item:!0,sm:0,md:0,lg:2}),i.a.createElement(me.a,{item:!0,sm:12,md:12,lg:8},i.a.createElement(me.a,{container:!0,spacing:5,className:e.titleGrid},i.a.createElement(me.a,{item:!0,md:12},i.a.createElement("div",{className:e.titleWrapper},i.a.createElement(B.b,{to:n,className:e.titleLink},i.a.createElement(J.a,{variant:"h4"},i.a.createElement(W.a,{id:"Apis.Details.Scopes.Scopes.heading.scope.heading",defaultMessage:"Scopes"}))),i.a.createElement(Dt.a,null,"keyboard_arrow_right"),i.a.createElement(J.a,{variant:"h4"},i.a.createElement(W.a,{id:"Apis.Details.Scopes.CreateScope.create.new.scope",defaultMessage:"Create New Scope"})))),i.a.createElement(me.a,{item:!0,md:12},i.a.createElement(de.a,{elevation:0,className:e.root},i.a.createElement(zt.a,{margin:"normal"},i.a.createElement(Gt.a,{id:"name",label:"Name",placeholder:"Scope Name",error:this.state.valid.name.invalid,helperText:this.state.valid.name.invalid?this.state.valid.name.error:i.a.createElement(W.a,{id:"Apis.Details.Scopes.CreateScope.short.description.name",defaultMessage:"Enter Scope Name ( E.g.,: creator )"}),fullWidth:!0,margin:"normal",variant:"outlined",InputLabelProps:{shrink:!0},value:this.state.apiScope.name||"",onChange:this.handleScopeNameInput})),i.a.createElement(zt.a,{margin:"normal",classes:{root:e.descriptionForm}},i.a.createElement(Gt.a,{id:"description",label:"Description",variant:"outlined",placeholder:"Short description about the scope",error:this.state.valid.description.invalid,helperText:this.state.valid.description.invalid?this.state.valid.description.error:i.a.createElement(W.a,{id:"Apis.Details.Scopes.CreateScope.description.about.the.scope",defaultMessage:"Short description about the scope"}),margin:"normal",InputLabelProps:{shrink:!0},onChange:this.validateScopeDescription,value:this.state.apiScope.description||"",multiline:!0})),i.a.createElement(zt.a,{margin:"normal"},i.a.createElement(Qt.a,{label:"Roles",InputLabelProps:{shrink:!0},variant:"outlined",value:s.concat(l),alwaysShowPlaceholder:!1,placeholder:"Enter roles and press Enter",blurBehavior:"clear",InputProps:{endAdornment:!r&&i.a.createElement(aa.a,{position:"end"},i.a.createElement(ta.a,{color:"error"}))},onAdd:this.handleRoleAddition,error:!r,helperText:r?i.a.createElement(W.a,{id:"Apis.Details.Scopes.CreateScope.roles.help",defaultMessage:"Enter a valid role and press `Enter`."}):i.a.createElement(W.a,{id:"Apis.Details.Scopes.Roles.Invalid",defaultMessage:"Role is invalid"}),chipRenderer:(e,t)=>{let{value:a}=e;return i.a.createElement(he.a,{key:t,label:a,onDelete:()=>{this.handleRoleDeletion(a)},style:{backgroundColor:l.includes(a)?na.a[300]:null,margin:"8px 8px 8px 0",float:"left"}})}})),i.a.createElement("div",{className:e.addNewOther},i.a.createElement(je.a,{variant:"contained",color:"primary",onClick:this.addScope,disabled:Object(o.b)(["apim:api_create"],t)||this.state.valid.name.invalid||0!==l.length||c||this.state.valid.description.invalid,className:e.saveButton},c?i.a.createElement(i.a.Fragment,null,i.a.createElement(W.a,{id:"Apis.Details.Scopes.CreateScope.saving",defaultMessage:"Saving"}),i.a.createElement($e.a,{size:16,classes:{root:e.progress}})):i.a.createElement(W.a,{id:"Apis.Details.Scopes.CreateScope.save",defaultMessage:"Save"})),i.a.createElement(B.b,{to:n},i.a.createElement(je.a,null,i.a.createElement(W.a,{id:"Apis.Details.Scopes.CreateScope.cancel",defaultMessage:"Cancel"})))))))))}}Bp.propTypes={match:s.a.shape({params:s.a.object}),api:s.a.shape({id:s.a.string}).isRequired,history:s.a.shape({push:s.a.func}).isRequired,classes:s.a.shape({}).isRequired,intl:s.a.shape({formatMessage:s.a.func}).isRequired,updateAPI:s.a.func.isRequired},Bp.defaultProps={match:{params:{}}};var Fp=Object(W.d)(Object(q.a)(e=>({root:{flexGrow:1,marginTop:10,display:"flex",flexDirection:"column",padding:20},titleWrapper:{display:"flex",flexDirection:"row",alignItems:"center",marginBottom:e.spacing(3)},titleLink:{color:e.palette.primary.main,marginRight:e.spacing(1)},contentWrapper:{maxWidth:e.custom.contentAreaWidth},mainTitle:{paddingLeft:0},FormControl:{padding:"0 0 0 ".concat(e.spacing(1),"px"),width:"100%",marginTop:0},FormControlOdd:{padding:"0 0 0 ".concat(e.spacing(1),"px"),backgroundColor:e.palette.background.paper,width:"100%",marginTop:0},FormControlLabel:{marginBottom:e.spacing(1),marginTop:e.spacing(1),fontSize:e.typography.caption.fontSize},buttonSection:{paddingTop:e.spacing(3)},saveButton:{marginRight:e.spacing(1)},helpText:{color:e.palette.text.hint,marginTop:e.spacing(1)},extraPadding:{paddingLeft:e.spacing(2)},addNewOther:{paddingTop:40},titleGrid:{" & .MuiGrid-item":{padding:0,margin:0}},descriptionForm:{marginTop:e.spacing(1)},progress:{marginLeft:e.spacing(1)}}))(Bp)),zp=a(1505),Vp=a.n(zp);function Hp(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Gp(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function Kp(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Gp(a,!0).forEach(function(t){Yp(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Gp(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function Yp(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Jp extends i.a.Component{constructor(e){super(e),Yp(this,"handleRoleDeletion",e=>{const{validRoles:t,invalidRoles:a}=this.state;if(a.includes(e)){const t=a.filter(t=>t!==e);this.setState({invalidRoles:t}),0===t.length&&this.setState({roleValidity:!0})}else this.setState({validRoles:t.filter(t=>t!==e)})}),this.api_uuid=e.match.params.api_uuid;const{api:t,location:a}=this.props,n=t.scopes.find(e=>e.scope.name===a.state.scopeName);this.state={apiScope:Kp({},n),validRoles:n.scope.bindings,invalidRoles:[],roleValidity:!0},this.updateScope=this.updateScope.bind(this),this.handleInputs=this.handleInputs.bind(this),this.handleRoleDeletion=this.handleRoleDeletion.bind(this),this.handleRoleAddition=this.handleRoleAddition.bind(this),this.validateScopeDescription=this.validateScopeDescription.bind(this)}handleInputs(e){if(Array.isArray(e)){const{apiScope:t}=this.state;t.scope.bindings=e,this.setState({apiScope:t})}else{const t=e.target,{apiScope:a}=this.state;a[t.id]=t.value,this.setState({apiScope:a})}}updateScope(){const{apiScope:e,validRoles:t}=this.state,{intl:a,api:n,history:i,updateAPI:r}=this.props,s=e.scope;e.scope={id:s.id,name:s.name,description:s.description,bindings:t};const o="APIProduct"===n.apiType?"api-products":"apis",l=r({scopes:n.scopes.map(t=>t.scope.name===e.scope.name?e:t)});l.then(()=>{te.a.info(a.formatMessage({id:"Apis.Details.Scopes.CreateScope.scope.updated.successfully",defaultMessage:"Scope updated successfully"}));const e="/"+o+"/"+n.id+"/scopes/";i.push(e)}),l.catch(e=>{const{response:t}=e;if(t.body){const{description:e}=t.body;te.a.error(e)}})}handleRoleAddition(e){const{validRoles:t,invalidRoles:a}=this.state;Zt.a.role.validate($t.a.encode(e)).then(()=>{this.setState({roleValidity:!0,validRoles:[].concat(Hp(t),[e])})}).catch(t=>{404===t.status?this.setState({roleValidity:!1,invalidRoles:[].concat(Hp(a),[e])}):(te.a.error("Error when validating role: "+e),console.error("Error when validating role "+t))})}validateScopeDescription(e){let{target:{value:t}}=e;const{apiScope:a}=this.state,n=a.scope;a.scope={id:n.id,name:n.name,description:t,bindings:n.bindings},this.setState({apiScope:a})}render(){const{classes:e,api:t,isAPIProduct:a}=this.props,{apiScope:n,roleValidity:r,validRoles:s,invalidRoles:o}=this.state,l="/".concat(a?"api-products":"apis","/").concat(t.id,"/scopes");return i.a.createElement(me.a,{container:!0,spacing:3},i.a.createElement(me.a,{item:!0,sm:12,md:12}),i.a.createElement(me.a,{item:!0,sm:0,md:0,lg:2}),i.a.createElement(me.a,{item:!0,sm:12,md:12,lg:8},i.a.createElement(me.a,{container:!0,spacing:5,className:e.titleGrid},i.a.createElement(me.a,{item:!0,md:12},i.a.createElement("div",{className:e.titleWrapper},i.a.createElement(B.b,{to:l,className:e.titleLink},i.a.createElement(J.a,{variant:"h4"},i.a.createElement(W.a,{id:"Apis.Details.Scopes.Scopes.heading.scope.heading",defaultMessage:"Scopes"}))),i.a.createElement(Dt.a,null,"keyboard_arrow_right"),i.a.createElement(J.a,{variant:"h4"},i.a.createElement(W.a,{id:"Apis.Details.Scopes.EditScope.update.scope",defaultMessage:"Update Scope"})))),i.a.createElement(me.a,{item:!0,md:12},i.a.createElement(de.a,{elevation:0,className:e.root},i.a.createElement(zt.a,{margin:"normal"},i.a.createElement(Gt.a,{id:"name",label:"Name",fullWidth:!0,margin:"normal",variant:"outlined",InputLabelProps:{shrink:!0},value:n.scope.name,onChange:this.handleScopeNameInput,disabled:!0})),i.a.createElement(zt.a,{margin:"normal"},i.a.createElement(Gt.a,{id:"description",label:"Description",variant:"outlined",placeholder:"Short description about the scope",helperText:i.a.createElement(W.a,{id:"Apis.Details.Scopes.EditScope.short.description.about.the.scope",defaultMessage:"Short description about the scope"}),margin:"normal",InputLabelProps:{shrink:!0},onChange:this.validateScopeDescription,value:n.scope.description||"",multiline:!0})),i.a.createElement(zt.a,{margin:"normal"},i.a.createElement(Qt.a,{label:"Roles",InputLabelProps:{shrink:!0},variant:"outlined",value:s.concat(o),alwaysShowPlaceholder:!1,placeholder:"Enter roles and press Enter",blurBehavior:"clear",InputProps:{endAdornment:!r&&i.a.createElement(aa.a,{position:"end"},i.a.createElement(Vp.a,{color:"error"}))},onAdd:this.handleRoleAddition,error:!r,helperText:r?i.a.createElement(W.a,{id:"Apis.Details.Scopes.EditScopes.roles.help",defaultMessage:"Enter a valid role and press `Enter`."}):i.a.createElement(W.a,{id:"Apis.Details.EditScopes.Roles.Invalid",defaultMessage:"Role is invalid"}),chipRenderer:(e,t)=>{let{value:a}=e;return i.a.createElement(he.a,{key:t,label:a,onDelete:()=>{this.handleRoleDeletion(a)},style:{backgroundColor:o.includes(a)?na.a[300]:null,margin:"8px 8px 8px 0",float:"left"}})}})),i.a.createElement("div",{className:e.addNewOther},i.a.createElement(je.a,{variant:"contained",color:"primary",onClick:this.updateScope,disabled:0!==o.length,className:e.saveButton},i.a.createElement(W.a,{id:"Apis.Details.Scopes.EditScope.update",defaultMessage:"Update"})),i.a.createElement(B.b,{to:l},i.a.createElement(je.a,{variant:"contained"},i.a.createElement(W.a,{id:"Apis.Details.Scopes.EditScope.cancel",defaultMessage:"Cancel"})))))))))}}Jp.propTypes={match:s.a.shape({params:s.a.object}),api:s.a.shape({id:s.a.string}).isRequired,classes:s.a.shape({}).isRequired,intl:s.a.shape({formatMessage:s.a.func}).isRequired,location:s.a.shape({state:s.a.shape({scopeName:s.a.string})}).isRequired,history:s.a.shape({push:s.a.func}).isRequired,isAPIProduct:s.a.bool.isRequired,updateAPI:s.a.func.isRequired},Jp.defaultProps={match:{params:{}}};var Qp=Object(W.d)(Object(U.withRouter)(Object(q.a)(e=>({root:{flexGrow:1,marginTop:10,display:"flex",flexDirection:"column",padding:20},titleWrapper:{display:"flex",flexDirection:"row",alignItems:"center",marginBottom:e.spacing(3)},titleLink:{color:e.palette.primary.main,marginRight:e.spacing(1)},contentWrapper:{maxWidth:e.custom.contentAreaWidth},mainTitle:{paddingLeft:0},FormControl:{padding:"0 0 0 ".concat(e.spacing(1),"px"),width:"100%",marginTop:0},FormControlOdd:{padding:"0 0 0 ".concat(e.spacing(1),"px"),backgroundColor:e.palette.background.paper,width:"100%",marginTop:0},FormControlLabel:{marginBottom:e.spacing(1),marginTop:e.spacing(1),fontSize:e.typography.caption.fontSize},buttonSection:{paddingTop:e.spacing(3)},saveButton:{marginRight:e.spacing(2)},helpText:{color:e.palette.text.hint,marginTop:e.spacing(1)},extraPadding:{paddingLeft:e.spacing(2)},addNewOther:{paddingTop:40},titleGrid:{" & .MuiGrid-item":{padding:0,margin:0}}}))(Jp)));function Zp(e){const[t,a]=Object(ue.d)(),{intl:r}=e,[s,l]=Object(n.useState)(!1),{scopeName:c}=e;return i.a.createElement("div",null,i.a.createElement(je.a,{onClick:()=>{l(!s)},disabled:Object(o.b)(["apim:api_create"],t)},i.a.createElement(Dt.a,null,"delete_forever"),i.a.createElement(W.a,{id:"Apis.Details.Documents.Delete.document.delete",defaultMessage:"Delete"})),i.a.createElement(Op.a,{key:"key-dialog",labelCancel:i.a.createElement(W.a,{id:"Apis.Details.Documents.Delete.document.listing.label.cancel",defaultMessage:"Cancel"}),title:i.a.createElement(W.a,{id:"Apis.Details.Documents.Delete.document.listing.delete.confirm",defaultMessage:"Confirm Delete"}),message:i.a.createElement(W.a,{id:"Apis.Details.Documents.Delete.document.listing.label.ok.confirm",defaultMessage:"Are you sure you want to delete scope {scope} ?",values:{scope:c}}),labelOk:i.a.createElement(W.a,{id:"Apis.Details.Documents.Delete.document.listing.label.ok.yes",defaultMessage:"Yes"}),callback:n=>{n?(()=>{const{scopeName:n}=e,i=t.operations&&JSON.parse(JSON.stringify(t.operations)),o=i&&i.map(e=>(e.scopes=e.scopes.filter(e=>e!==n),e)),c=t.scopes.filter(e=>e.scope.name!==n),p=l;a({scopes:c,operations:o}).then(()=>{te.a.info(r.formatMessage({id:"Apis.Details.Resources.Resources.api.scope.deleted.successfully",defaultMessage:"API Scope deleted successfully!"})),p(!s)}).catch(e=>{console.error(e),te.a.error(r.formatMessage({id:"Apis.Details.Resources.Resources.something.went.wrong.while.updating.the.api",defaultMessage:"Error occurred while updating API"}))})})():l(!s)},open:s}))}Zp.propTypes={classes:s.a.shape({}).isRequired,scopeName:s.a.string.isRequired,intl:s.a.shape({}).isRequired};var Xp=Object(W.d)(Object(q.a)({appBar:{position:"relative"},flex:{flex:1},popupHeader:{display:"flex",flexDirection:"row",alignItems:"center"},splitWrapper:{padding:0},docName:{alignItems:"center",display:"flex"},button:{height:30,marginLeft:30}})(Zp));class $p extends i.a.Component{constructor(e){super(e),this.api=new X.a,this.api_uuid=e.match.params.api_uuid,this.api_data=e.api}render(){const{intl:e,classes:t,api:a}=this.props,n="APIProduct"===a.apiType?"api-products":"apis",{scopes:r}=a,s="/".concat(n,"/").concat(a.id,"/scopes/create"),l="/".concat(n,"/").concat(a.id,"/scopes/edit"),c=[e.formatMessage({id:"Apis.Details.Scopes.Scopes.table.header.name",defaultMessage:"Name"}),e.formatMessage({id:"Apis.Details.Scopes.Scopes.table.header.description",defaultMessage:"Description"}),{options:{customBodyRender:(e,t)=>{if(t.rowData){return(e||[]).join(",")}return!1},filter:!1,sort:!1,label:i.a.createElement(W.a,{id:"Apis.Details.Scopes.Scopes.table.header.roles",defaultMessage:"Roles"})}},{options:{customBodyRender:(e,a)=>!(!e||!a.rowData)&&i.a.createElement(Dn.a,{component:"nav",className:t.root},e.map(e=>i.a.createElement(Pn.a,{button:!0},i.a.createElement(ma.a,{primary:e})))),filter:!1,sort:!1,label:i.a.createElement(W.a,{id:"Apis.Details.Scopes.Scopes.table.header.usages",defaultMessage:"Used In"})}},{options:{customBodyRender:(e,n)=>{if(n.rowData){const e=n.rowData[0];return i.a.createElement("table",{className:t.actionTable},i.a.createElement("tr",null,i.a.createElement("td",null,i.a.createElement(B.b,{to:!Object(o.b)(["apim:api_create"],a)&&{pathname:l,state:{scopeName:e}}},i.a.createElement(je.a,{disabled:Object(o.b)(["apim:api_create"],a)},i.a.createElement(Dt.a,null,"edit"),i.a.createElement(W.a,{id:"Apis.Details.Documents.Edit.documents.text.editor.edit",defaultMessage:"Edit"})))),i.a.createElement("td",null,i.a.createElement(Xp,{scopeName:e,api:a,isAPIProduct:!0}))))}return!1},filter:!1,sort:!1,label:i.a.createElement(W.a,{id:"Apis.Details.Scopes.Scopes.table.header.actions",defaultMessage:"Actions"})}}],p=a.scopes.filter(e=>!e.shared).map(e=>{const t=[];t.push(e.scope.name),t.push(e.scope.description),t.push(e.scope.bindings);const n=a.operations&&a.operations.filter(t=>t.scopes.includes(e.scope.name)).map(e=>e.target+" "+e.verb);return t.push(n),t});return r?0===r.length?i.a.createElement("div",{className:t.root},i.a.createElement("div",{className:t.titleWrapper},i.a.createElement(J.a,{variant:"h4",align:"left",className:t.mainTitle},i.a.createElement(W.a,{id:"Apis.Details.Scopes.Scopes.heading.scope.heading",defaultMessage:"Local Scopes"})),i.a.createElement(se.a,{title:i.a.createElement(W.a,{id:"Apis.Details.Scopes.Scopes.heading.scope.title.tooltip",defaultMessage:"Manage scopes that are local to this API"}),placement:"top-end","aria-label":"Local Scopes"},i.a.createElement(Pt.a,{size:"small","aria-label":"delete"},i.a.createElement(Le.a,{fontSize:"small"})))),i.a.createElement(Yi.a,{type:"info",height:140},i.a.createElement("div",{className:t.contentWrapper},i.a.createElement(J.a,{variant:"h5",component:"h3",className:t.head},i.a.createElement(W.a,{id:"Apis.Details.Scopes.Scopes.create.scopes.title",defaultMessage:"Create API Local Scopes"})),i.a.createElement(J.a,{component:"p",className:t.content},i.a.createElement(W.a,{id:"Apis.Details.Scopes.Scopes.scopes.enable.fine.gained.access.control",defaultMessage:"Scopes enable fine-grained access control to API resources based on user roles."})),i.a.createElement("div",{className:t.actions},i.a.createElement(B.b,{to:!Object(o.b)(["apim:api_create"],a)&&s},i.a.createElement(je.a,{variant:"contained",color:"primary",className:t.button,disabled:Object(o.b)(["apim:api_create"],a)},i.a.createElement(W.a,{id:"Apis.Details.Scopes.Scopes.create.scopes.button",defaultMessage:"Create Scopes"}))))))):i.a.createElement("div",{className:t.heading},i.a.createElement("div",{className:t.titleWrapper},i.a.createElement(J.a,{variant:"h4",align:"left",className:t.mainTitle},i.a.createElement(W.a,{id:"Apis.Details.Scopes.Scopes.heading.scope.heading",defaultMessage:"Local Scopes"})),i.a.createElement(se.a,{title:i.a.createElement(W.a,{id:"Apis.Details.Scopes.Scopes.heading.scope.title.tooltip2",defaultMessage:"Manage scopes that are local to this API"}),placement:"top-end","aria-label":"Local Scopes"},i.a.createElement(Pt.a,{size:"small","aria-label":"delete"},i.a.createElement(Le.a,{fontSize:"small"}))),i.a.createElement(B.b,{to:!Object(o.b)(["apim:api_create"],a)&&s},i.a.createElement(je.a,{size:"small",className:t.button,disabled:Object(o.b)(["apim:api_create"],a)},i.a.createElement(Ki.a,{className:t.buttonIcon}),i.a.createElement(W.a,{id:"Apis.Details.Scopes.Scopes.heading.scope.add_new",defaultMessage:"Add New Local Scope"}))),Object(o.b)(["apim:api_create"],a)&&i.a.createElement(me.a,{item:!0},i.a.createElement(J.a,{variant:"body2",color:"primary"},i.a.createElement(W.a,{id:"Apis.Details.Scopes.Scopes.update.not.allowed",defaultMessage:"*You are not authorized to update scopes of the API due to insufficient permissions"})))),i.a.createElement(Hi.a,{title:!1,data:p,columns:c,options:{filterType:"multiselect",selectableRows:!1,title:!1,filter:!1,sort:!1,print:!1,download:!1,viewColumns:!1,customToolbar:!1}})):i.a.createElement(ee.a,null)}}$p.propTypes={match:s.a.shape({params:s.a.object}),api:s.a.instanceOf(Object).isRequired,classes:s.a.shape({}).isRequired,intl:s.a.shape({formatMessage:s.a.func}).isRequired},$p.defaultProps={match:{params:{}}};var ed=Object(W.d)(Object(ue.e)(Pc()(e=>({root:{paddingTop:0,paddingLeft:0},buttonProgress:{position:"relative",margin:e.spacing(1)},headline:{paddingTop:e.spacing(1.25),paddingLeft:e.spacing(2.5)},heading:{flexGrow:1,marginTop:10},titleWrapper:{display:"flex",flexDirection:"row",alignItems:"center",marginBottom:e.spacing(2)},mainTitle:{paddingLeft:0},button:{textDecoration:"none",color:e.palette.getContrastText(e.palette.primary.main),marginLeft:e.spacing(1)},buttonIcon:{marginRight:e.spacing(1)},content:{margin:"".concat(e.spacing(2),"px 0 ").concat(e.spacing(2),"px 0")},head:{fontWeight:200}}))($p)));function td(){return(td=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}const ad=()=>{const[e,t]=Object(ue.d)(),a=e.isAPIProduct()?"api-products":"apis";return i.a.createElement(U.Switch,null,i.a.createElement(U.Route,{exact:!0,path:"/"+a+"/:api_uuid/scopes/",component:ed}),i.a.createElement(U.Route,{exact:!0,path:"/"+a+"/:api_uuid/scopes/create",component:a=>i.a.createElement(Fp,td({api:e},a,{updateAPI:t}))}),i.a.createElement(U.Route,{exact:!0,path:"/"+a+"/:api_uuid/scopes/edit",component:a=>i.a.createElement(Qp,td({api:e},a,{updateAPI:t}))}),i.a.createElement(U.Route,{component:H.a}))};ad.propTypes={api:s.a.shape({id:s.a.string,additionalProperties:s.a.shape({key:s.a.string,value:s.a.string}).isRequired}).isRequired};var nd=ad;function id(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class rd extends n.Component{constructor(){super(...arguments),id(this,"state",{selectedPolicy:{uuid:"",name:"Select",policy:"",type:""},policies:[]}),id(this,"handleChange",()=>e=>{const t=e.target.value;(new X.a).getThreatProtectionPolicy(t).then(e=>{this.setState({selectedPolicy:e.obj})})}),id(this,"formatPolicy",e=>{let t=e;return t=(t=t.replace(":"," : ")).split(",").join(",\n")})}componentDidMount(){const e=new X.a;e.getThreatProtectionPolicies().then(e=>{this.setState({policies:e.obj.list})}),e.get(this.props.id).then(e=>{this.setState({currentApi:e.obj})})}handlePolicyAdd(){const{intl:e}=this.props,t=this.state.selectedPolicy;if(""!==t.uuid&&""!==t.name){if(this.state.currentApi){const{currentApi:t}=this.state;(new X.a).addThreatProtectionPolicyToApi(t.id,this.state.selectedPolicy.uuid).then(t=>{200===t.status?(te.a.info(e.formatMessage({id:"Apis.Details.Security.AddPolicy.threat.protection.policy.add.success",defaultMessage:"Threat protection policy added successfully."})),this.props.updateData()):te.a.error(e.formatMessage({id:"Apis.Details.Security.AddPolicy.threat.protection.policy.add.failure",defaultMessage:"Failed to add threat protection policy."}))})}}else te.a.error(e.formatMessage({id:"Apis.Details.Security.AddPolicy.select.policy",defaultMessage:"Please select a policy"}))}render(){const{classes:e}=this.props;return i.a.createElement("div",{className:e.contentWrapper},i.a.createElement("div",{className:e.addNewWrapper},i.a.createElement(J.a,{className:e.addNewHeader},i.a.createElement(W.a,{id:"Apis.Details.Security.AddPolicy.add.threat.protection.policy",defaultMessage:"Add New Threat Protection Policy"})),i.a.createElement(Ji.a,{className:e.divider}),i.a.createElement("div",{className:e.addNewOther},i.a.createElement(As.a,{htmlFor:"selectedPolicy"},i.a.createElement(W.a,{id:"Apis.Details.Security.AddPolicy.policy",defaultMessage:"Policy"})),"  ",i.a.createElement(Ot.a,{value:this.state.selectedPolicy.uuid,onChange:this.handleChange("selectedPolicy"),input:i.a.createElement(kl.a,{name:"selectedPolicy",id:"selectedPolicy"})},this.state.policies.map(e=>i.a.createElement(Yt.a,{key:e.uuid,value:e.uuid},e.name)),";"),i.a.createElement("br",null),i.a.createElement("br",null),i.a.createElement("p",null,i.a.createElement(W.a,{id:"Apis.Details.Security.AddPolicy.policy.type.label",defaultMessage:"Policy Type: "}),this.state.selectedPolicy.type),i.a.createElement("div",null,i.a.createElement("p",null,i.a.createElement(W.a,{id:"Apis.Details.Security.AddPolicy.policy.label",defaultMessage:"Policy: "})),i.a.createElement("div",{className:e.addJsonContent},this.formatPolicy(this.state.selectedPolicy.policy)))),i.a.createElement(Ji.a,{className:e.divider}),i.a.createElement("div",{className:e.addNewOther},i.a.createElement(je.a,{variant:"contained",color:"primary",onClick:()=>this.handlePolicyAdd()},i.a.createElement(W.a,{id:"Apis.Details.Security.AddPolicy.add.policy.to.api",defaultMessage:"Add Policy to API"})),i.a.createElement(je.a,{className:e.button,onClick:this.props.toggleShowAddPolicy},i.a.createElement(W.a,{id:"Apis.Details.Security.AddPolicy.cancel",defaultMessage:"Cancel"})))))}}rd.propTypes={classes:s.a.shape({}).isRequired,toggleShowAddPolicy:s.a.func.isRequired,id:s.a.string.isRequired,updateData:s.a.func.isRequired,intl:s.a.shape({}).isRequired};var sd=Object(W.d)(Object(q.a)(e=>({addNewWrapper:{backgroundColor:e.palette.background.paper,color:e.palette.getContrastText(e.palette.background.paper),border:"solid 1px "+e.palette.grey[300],borderRadius:e.shape.borderRadius,marginTop:e.spacing(2)},addNewHeader:{padding:e.spacing(2),backgroundColor:e.palette.grey[300],fontSize:e.typography.h6.fontSize,color:e.typography.h6.color,fontWeight:e.typography.h6.fontWeight},addNewOther:{padding:e.spacing(2)},button:{marginLeft:e.spacing(2),color:e.palette.getContrastText(e.palette.primary.main)},contentWrapper:{maxWidth:e.custom.contentAreaWidth},addJsonContent:{whiteSpace:"pre"}}))(rd));function od(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class ld extends n.Component{constructor(e){super(e),od(this,"toggleShowAddPolicy",()=>{this.setState({showAddPolicy:!this.state.showAddPolicy})}),od(this,"formatPolicy",e=>{let t=e;return t=(t=t.replace(":"," : ")).split(",").join(",\n")}),this.api=new X.a,this.state={api:{name:""},policies:[],showAddPolicy:!1},this.updateData=this.updateData.bind(this),this.toggleShowAddPolicy=this.toggleShowAddPolicy.bind(this),this.updateData=this.updateData.bind(this)}componentDidMount(){this.updateData()}updateData(){this.api.get(this.props.match.params.api_uuid).then(e=>{this.setState({api:e.obj}),this.updatePolicyData()})}updatePolicyData(){this.setState({policies:[]});const e=this.state.api.threatProtectionPolicies.list;for(let t=0;t<e.length;t++){const a=e[t].policyId;this.api.getThreatProtectionPolicy(a).then(e=>{const t=this.state.policies;t.push(e.obj),this.setState({policies:t})})}}deletePolicy(e){const{intl:t}=this.props,a=this.state.api;this.api.deleteThreatProtectionPolicyFromApi(a.id,e).then(n=>{if(200===n.status){te.a.info(t.formatMessage({id:"Apis.Details.Security.SecurityOverview.policy.remove.success",defaultMessage:"Policy removed successfully."}));const n=a.threatProtectionPolicies.list.indexOf({policyId:e});a.threatProtectionPolicies.list.splice(n,1),this.setState({api:a}),this.updatePolicyData()}else te.a.error(t.formatMessage({id:"Apis.Details.Security.SecurityOverview.policy.remove.failure",defaultMessage:"Failed to remove policy."}))})}render(){let e=[];this.state.policies&&(e=this.state.policies);const{classes:t}=this.props,{showAddPolicy:a}=this.state;return i.a.createElement("div",{className:t.root},i.a.createElement("div",{className:t.contentWrapper},i.a.createElement("div",{className:t.titleWrapper},i.a.createElement(J.a,{variant:"h4",align:"left",className:t.mainTitle},i.a.createElement(W.a,{id:"Apis.Details.Security.SecurityOverview.threat.protection.policies",defaultMessage:"Threat Protection Policies"})),i.a.createElement(je.a,{size:"small",className:t.button,onClick:this.toggleShowAddPolicy},i.a.createElement(Ki.a,{className:t.buttonIcon}),i.a.createElement(W.a,{id:"Apis.Details.Security.SecurityOverview.add.threat.protection.policy",defaultMessage:"Add New Threat Protection Policy"})))),i.a.createElement("div",{className:t.contentWrapper},a&&i.a.createElement(sd,{id:this.state.api.id,toggleShowAddPolicy:this.toggleShowAddPolicy,updateData:this.updateData})),i.a.createElement("br",null),i.a.createElement("div",{className:t.contentWrapper},i.a.createElement("div",{className:t.addNewWrapper},i.a.createElement(J.a,{className:t.addNewHeader},i.a.createElement(W.a,{id:"Apis.Details.Security.SecurityOverview.manage.threat.protection.policies",defaultMessage:"Manage Threat Protection Policies"})),i.a.createElement(Ji.a,{className:t.divider}),i.a.createElement(Oe.a,{className:t.table},i.a.createElement(Yn.a,null,i.a.createElement(Pe.a,null,i.a.createElement(De.a,null,i.a.createElement(W.a,{id:"Apis.Details.Security.SecurityOverview.policy.name",defaultMessage:"Policy Name"})),i.a.createElement(De.a,null,i.a.createElement(W.a,{id:"Apis.Details.Security.SecurityOverview.policy.type",defaultMessage:"Policy Type"})),i.a.createElement(De.a,null,i.a.createElement(W.a,{id:"Apis.Details.Security.SecurityOverview.policy",defaultMessage:"Policy"})),i.a.createElement(De.a,null))),i.a.createElement(Kn.a,null,e.map(e=>i.a.createElement(Pe.a,{key:e.uuid},i.a.createElement(De.a,null,e.name+("GLOBAL-JSON"===e.uuid?" (GLOBAL)":"")),i.a.createElement(De.a,null,e.type),i.a.createElement(De.a,null,i.a.createElement("div",{className:t.addJsonContent},this.formatPolicy(e.policy))),i.a.createElement(De.a,null,i.a.createElement("span",null,i.a.createElement(je.a,{color:"accent",onClick:()=>this.deletePolicy(e.uuid)},i.a.createElement(W.a,{id:"Apis.Details.Security.SecurityOverview.delete",defaultMessage:"Delete"})))))))))))}}ld.propTypes={classes:s.a.shape({}).isRequired,match:s.a.shape({params:s.a.shape({api_uuid:s.a.string})}).isRequired,intl:s.a.shape({}).isRequired};var cd=Object(W.d)(Object(q.a)(e=>({root:{flexGrow:1,marginTop:10},titleWrapper:{display:"flex",flexDirection:"row",alignItems:"center"},mainTitle:{paddingLeft:0},button:{marginLeft:e.spacing(2),color:e.palette.getContrastText(e.palette.primary.main)},buttonIcon:{marginRight:10},table:{"& td":{fontSize:e.typography.fontSize},"& th":{fontSize:1.2*e.typography.fontSize},tableLayout:"fixed"},addNewHeader:{padding:e.spacing(2),backgroundColor:e.palette.grey[300],fontSize:e.typography.h6.fontSize,color:e.typography.h6.color,fontWeight:e.typography.h6.fontWeight},addNewWrapper:{backgroundColor:e.palette.background.paper,color:e.palette.getContrastText(e.palette.background.paper),border:"solid 1px "+e.palette.grey[300],borderRadius:e.shape.borderRadius,marginTop:e.spacing(2)},contentWrapper:{maxWidth:e.custom.contentAreaWidth},addJsonContent:{whiteSpace:"pre"}}))(ld));var pd=()=>i.a.createElement(U.Switch,null,i.a.createElement(U.Route,{path:"/apis/:api_uuid/security",component:cd})),dd=a(1215),md=a.n(dd),ud=a(2850),gd=a.n(ud),hd=a(2851),fd=a.n(hd),Ed=a(966),bd=a.n(Ed),yd=a(2685),vd=(a(2686),a(161)),Cd=a(1406),Ad=a(3682),Sd=a(2688),Od=a.n(Sd);function Dd(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Pd extends n.Component{constructor(e){super(e),Dd(this,"getMuiTheme",()=>Object(vd.a)({typography:{useNextVariants:!0},overrides:{MUIDataTableBodyCell:{root:{width:"30%"}},MUIDataTableSelectCell:{root:{display:"none"}},MUIDataTableToolbarSelect:{title:{display:"none"}}}})),Dd(this,"getErrorMuiTheme",()=>Object(vd.a)({typography:{useNextVariants:!0},overrides:{MUIDataTableBodyCell:{root:{width:"100%"}},MUIDataTableSelectCell:{root:{display:"none"}},MUIDataTableToolbarSelect:{title:{display:"none"}}}})),Dd(this,"editorDidMount",(e,t,a)=>{const{classes:n}=this.props;if(""!==a){const i=[],r=a.split("/"),s=[];for(let e=0;e<r.length;e++)if(""!==r[e]&&"0"!==r[e]){let t='"'+r[e]+'":';t.includes("~1")&&(t=t.replace(/~1/i,"/")),s.push(t)}for(let t=0;t<s.length;t++)""!==s[t]&&(0!==t&&0!==i.length&&null!==i[i.length-1]?i.push(e.getModel().findNextMatch(s[t],{lineNumber:i[i.length-1].range.endLineNumber,column:1},!0,!0,null,!1)):i.push(e.getModel().findNextMatch(s[t],1,!0,!0,null,!0)));const o=i.length-1;null!=i[o]&&(e.revealLineInCenter(i[o].range.startLineNumber),e.deltaDecorations([],[{range:new t.Range(i[o].range.startLineNumber,i[o].range.startColumn,i[o].range.endLineNumber,i[o].range.endColumn),options:{isWholeLine:!0,className:n.inlineDecoration,glyphMarginClassName:n.contentLine}}]))}}),this.state={report:null,overallScore:0,numErrors:0,externalApiId:null,loading:!1,apiDefinition:null},this.criticalityObject={1:"INFO",2:"LOW",3:"MEDIUM",4:"HIGH",5:"CRITICAL"},this.searchTerm=null}componentDidMount(){this.setState({loading:!0});const{apiId:e,history:t,intl:a}=this.props,n=new X.a;n.getSwagger(e).then(e=>{this.setState({apiDefinition:JSON.stringify(e.obj,null,1)})}).catch(e=>{console.log(e)}),n.getSecurityAuditReport(e).then(e=>{this.setState({report:e.body.report,overallScore:e.body.grade,numErrors:e.body.numErrors,externalApiId:e.body.externalApiId,loading:!1})}).catch(n=>{console.log(n),this.setState({loading:!1}),te.a.error(a.formatMessage({id:"Apis.Details.APIDefinition.AuditApi.GetReportError",defaultMessage:"Something went wrong while retrieving the API Security Report"}));const i="/apis/"+e+"/api definition";t.push(i)})}getRowData(e,t,a){const n=[];for(const i in e)if({}.hasOwnProperty.call(e,i))for(let r=0;r<e[i].issues.length;r++){const s=[];"error"===a?e[i].issues[r].specificDescription?s.push(e[i].issues[r].specificDescription,e[i].issues[r].pointer,t,a,i):s.push(e[i].description,e[i].issues[r].pointer,t,a,i):"normal"===a&&(e[i].issues[r].specificDescription?s.push(this.criticalityObject[e[i].criticality],e[i].issues[r].specificDescription,this.roundScore(e[i].issues[r].score),e[i].issues[r].pointer,e[i].issues[r].tooManyImpacted,e[i].issues[r].pointersAffected,t,e[i].tooManyError,a,i):s.push(this.criticalityObject[e[i].criticality],e[i].description,this.roundScore(e[i].issues[r].score),e[i].issues[r].pointer,e[i].issues[r].tooManyImpacted,e[i].issues[r].pointersAffected,t,e[i].tooManyError,a,i)),n.push(s)}return n}getMoreDetailUrl(e){const t="https://apisecurity.io/ref/";let a="";switch(e){case"OpenAPI Format Requirements":a=t+"oasconformance/";break;case"Security":a=t+"security/";break;case"Data Validation":a=t+"datavalidation/datavalidation/";break;default:a=t}return a}roundScore(e){return 0!==e?Math.round(100*e)/100:0}render(){const{classes:e}=this.props,{report:t,overallScore:a,numErrors:n,externalApiId:r,loading:s,apiDefinition:o}=this.state,l=JSON.parse(t),c="https://platform.42crunch.com/apis/"+r+"/security-audit-report";if(s)return i.a.createElement("div",null,i.a.createElement(Yi.a,{type:"info",height:140},i.a.createElement("div",{className:e.contentWrapper},i.a.createElement(J.a,{variant:"h5",component:"h3",className:e.head},i.a.createElement(W.a,{id:"Apis.Details.APIDefinition.AuditApi.WaitForReport",defaultMessage:"Please wait..."})),i.a.createElement(J.a,{component:"p",className:e.content},i.a.createElement(W.a,{id:"Apis.Details.APIDefinition.AuditApi.WaitForReport.Content",defaultMessage:"Auditing an API for the first time will take some time"})))),i.a.createElement(wc.a,null));const p=[{name:"Severity",options:{filter:!0,sort:!0}},{name:"Description",options:{filter:!0,sort:!0}},{name:"Score Impact",options:{filter:!0,sort:!0}},{name:"Pointer",options:{display:"excluded",filter:!1,sort:!1}},{name:"Too Many Impacted",options:{display:"excluded",filter:!1,sort:!1}},{name:"Pointers Affected",options:{display:"excluded",filter:!1,sort:!1}},{name:"Issue Category",options:{display:"excluded",filter:!1,sort:!1}},{name:"Too Many Errors",options:{display:"excluded",filter:!1,sort:!1}},{name:"isError",options:{display:"excluded",filter:!1,sort:!1}},{name:"ReferenceUrl",options:{display:"excluded",filter:!1,sort:!1}}],d=[{name:"Description",options:{filter:!0,sort:!0}},{name:"Pointer",options:{display:"excluded",filter:!1,sort:!1}},{name:"Issue Category",options:{display:"excluded",filter:!1,sort:!1}},{name:"isError",options:{display:"excluded",filter:!1,sort:!1}},{name:"ReferenceUrl",options:{display:"excluded",filter:!1,sort:!1}}],m={selectOnLineNumbers:!0,readOnly:!0,smoothScrolling:!0,wordWrap:"on",glyphMargin:!0},u={filterType:"dropdown",responsive:"stacked",print:!1,download:!1,selectableRows:!1,expandableRows:!0,expandableRowsOnClick:!0,renderExpandableRow:t=>{let a=null;return"error"===t[3]?(a=l.index[t[1]],i.a.createElement(Pe.a,{className:e.tableRow},i.a.createElement(De.a,{className:e.columnOne},i.a.createElement(Od.a,{height:"250px",theme:"vs-dark",value:o,options:m,editorDidMount:(e,t)=>this.editorDidMount(e,t,a)})),i.a.createElement(De.a,{className:e.columnTwo},i.a.createElement(J.a,{variant:"body1",className:e.referenceErrorTypography},i.a.createElement(W.a,{id:"Apis.Details.APIDefinition.AuditApi.ReferenceSection",description:"Link to visit for detail on how to remedy issue",defaultMessage:"Visit this {link} to view a detailed description, possible exploits and remediation for this issue.",values:{link:i.a.createElement("strong",null,i.a.createElement("a",{href:this.getMoreDetailUrl(t[2]),target:"_blank",rel:"noopener noreferrer"},"link"))}}))))):(a=l.index[t[3]],i.a.createElement(Pe.a,{className:e.tableRow},i.a.createElement(De.a,{colSpan:"2"},i.a.createElement(Od.a,{width:"85%",height:"250px",theme:"vs-dark",value:o,options:m,editorDidMount:(e,t)=>this.editorDidMount(e,t,a)})),i.a.createElement(De.a,null,i.a.createElement(J.a,{variant:"body1",className:e.referenceTypography},i.a.createElement(W.a,{id:"Apis.Details.APIDefinition.AuditApi.ReferenceSection",description:"Link to visit for detail on how to remedy issue",defaultMessage:"Visit this {link} to view a detailed description, possible exploits and remediation for this issue.",values:{link:i.a.createElement("strong",null,i.a.createElement("a",{href:this.getMoreDetailUrl(t[6]),target:"_blank",rel:"noopener noreferrer"},"link"))}})))))}};return i.a.createElement("div",null,t&&i.a.createElement("div",{width:"100%",height:"calc(100vh - 51px)"},i.a.createElement(J.a,{variant:"h4",className:e.subheadingTypography},i.a.createElement(W.a,{id:"Apis.Details.APIDefinition.AuditApi.ApiSecurityAuditReport",defaultMessage:"API Security Audit Report"})),i.a.createElement("div",{className:e.paperDiv},i.a.createElement(de.a,{elevation:1,className:e.rootPaper},i.a.createElement("div",null,i.a.createElement(J.a,{variant:"h5",className:e.sectionHeadingTypography},i.a.createElement(W.a,{id:"Apis.Details.APIDefinition.AuditApi.AuditScoreSummary",defaultMessage:"Audit Score and Summary"})),i.a.createElement(J.a,{variant:"body1",className:e.linkText},i.a.createElement(W.a,{id:"Apis.Details.APIDefinition.AuditApi.LinkToDetailedReport",defaultMessage:"{linkToDetailedReportText} {link} {afterLinkText}",values:{linkToDetailedReportText:"Check out the ",link:i.a.createElement("b",null,i.a.createElement("a",{href:c,target:"_blank",rel:"noopener noreferrer"},"detailed Report")),afterLinkText:" from 42Crunch"}})),i.a.createElement("div",{className:e.auditSummaryDiv},i.a.createElement("div",{className:e.auditSummarySubDiv},i.a.createElement(yd.a,{value:a},i.a.createElement(J.a,{variant:"body1",className:e.circularProgressBarScore},i.a.createElement(W.a,{id:"Apis.Details.APIDefinition.AuditApi .OverallScoreProgress",defaultMessage:"{overallScore}",values:{overallScore:i.a.createElement("strong",null,Math.round(a))}})),i.a.createElement(J.a,{variant:"body1",className:e.circularProgressBarScoreFooter},i.a.createElement(W.a,{id:"Apis.Details.APIDefinition.AuditApi.ScoreFooter",defaultMessage:"out of 100"})))),i.a.createElement("div",{className:e.auditSummaryDivRight},{}.hasOwnProperty.call(l,"score")&&i.a.createElement(J.a,{variant:"body1"},i.a.createElement(W.a,{id:"Apis.Details.APIDefinition.AuditApi.overallScore",defaultMessage:"{overallScoreText} {overallScore} / 100",values:{overallScoreText:i.a.createElement("strong",null,"Overall Score:"),overallScore:this.roundScore(a)}})),null!==n&&i.a.createElement(J.a,{variant:"body1"},i.a.createElement(W.a,{id:"Apis.Details.APIDefinition.AuditApi.TotalNumOfErrors",defaultMessage:"{totalNumOfErrorsText} {totalNumOfErrors}",values:{totalNumOfErrorsText:i.a.createElement("strong",null,"Total Number of Errors: "),totalNumOfErrors:n}})),{}.hasOwnProperty.call(l,"criticality")&&i.a.createElement(i.a.Fragment,null,i.a.createElement(J.a,{variant:"body1"},i.a.createElement(W.a,{id:"Apis.Details.APIDefinition.AuditApi.OverallCriticality",defaultMessage:"{overallCriticalityText} {overallCriticality}",values:{overallCriticalityText:i.a.createElement("strong",null,"Overall Severity:"),overallCriticality:this.criticalityObject[l.criticality]}}),i.a.createElement(se.a,{placement:"right",classes:{tooltip:e.htmlTooltip},title:i.a.createElement(i.a.Fragment,null,i.a.createElement(W.a,{id:"Apis.Details.APIDefinition.AuditApi.tooltip.severity",defaultMessage:"Severity ranges from: "}),i.a.createElement("br",null),i.a.createElement(W.a,{id:"Apis.Details.APIDefinition.AuditApi.tooltip.info",defaultMessage:"1. INFO"}),i.a.createElement("br",null),i.a.createElement(W.a,{id:"Apis.Details.APIDefinition.AuditApi.tooltip.low",defaultMessage:"2. LOW"}),i.a.createElement("br",null),i.a.createElement(W.a,{id:"Apis.Details.APIDefinition.AuditApi.tooltip.medium",defaultMessage:"3. MEDIUM"}),i.a.createElement("br",null),i.a.createElement(W.a,{id:"Apis.Details.APIDefinition.AuditApi.tooltip.high",defaultMessage:"4. HIGH"}),i.a.createElement("br",null),i.a.createElement(W.a,{id:"Apis.Details.APIDefinition.AuditApi.tooltip.critical",defaultMessage:"5. CRITICAL"}),i.a.createElement("br",null))},i.a.createElement(je.a,{className:e.helpButton},i.a.createElement(Le.a,{className:e.helpIcon}))))),i.a.createElement("hr",null),{}.hasOwnProperty.call(l,"security")&&i.a.createElement(J.a,{variant:"body1"},i.a.createElement(W.a,{id:"Apis.Details.APIDefinition.AuditApi.SecuritySummary",defaultMessage:"{securitySummary}",values:{securitySummary:i.a.createElement("strong",null,"Security - (",this.roundScore(l.security.score)," ","/ 30)")}}),i.a.createElement(Ad.a,{percent:this.roundScore(l.security.score)/30*100,strokeColor:"#3d98c7"})),{}.hasOwnProperty.call(l,"data")&&i.a.createElement(J.a,{variant:"body1"},i.a.createElement(W.a,{id:"Apis.Details.APIDefinition.AuditApi.DataValidationSummary",defaultMessage:"{dataValidationSummary}",values:{dataValidationSummary:i.a.createElement("strong",null,"Data Validation - (",this.roundScore(l.data.score)," ","/ 70)")}}),i.a.createElement(Ad.a,{percent:this.roundScore(l.data.score)/70*100,strokeColor:"#3d98c7"})),{}.hasOwnProperty.call(l,"validationErrors")&&i.a.createElement(Yi.a,{type:"warning",height:140},i.a.createElement("div",{className:e.contentWrapper},i.a.createElement(J.a,{variant:"h5",component:"h3",className:e.head},i.a.createElement(W.a,{id:"Apis.Details.APIDefinition.AuditApi.FailedToValidate.Heading",defaultMessage:"Failed to Validate OpenAPI File"})),i.a.createElement(J.a,{component:"p",className:e.content},i.a.createElement(W.a,{id:"Apis.Details.APIDefinition.AuditApi.FailedToValidate.Content",defaultMessage:"Fix the critical errors shown below and run the audit again."}))))))))),i.a.createElement("div",{className:e.paperDiv},i.a.createElement(de.a,{elevation:1,className:e.rootPaper},i.a.createElement("div",null,i.a.createElement(J.a,{variant:"h5",className:e.sectionHeadingTypography},i.a.createElement(W.a,{id:"Apis.Details.APIDefinition.AuditApi.OpenApiFormatRequirements",defaultMessage:"OpenAPI Format Requirements"})),{}.hasOwnProperty.call(l,"semanticErrors")&&i.a.createElement(i.a.Fragment,null,i.a.createElement("div",null,i.a.createElement(J.a,{variant:"body1"},i.a.createElement(Cd.a,{theme:this.getMuiTheme()},i.a.createElement(Hi.a,{title:"Semantic Errors",data:this.getRowData(l.semanticErrors.issues,"OpenAPI Format Requirements","error"),columns:d,options:u}))))),{}.hasOwnProperty.call(l,"validationErrors")&&i.a.createElement(i.a.Fragment,null,i.a.createElement("div",null,i.a.createElement(J.a,{variant:"body1"},i.a.createElement(Cd.a,{theme:this.getErrorMuiTheme()},i.a.createElement(Hi.a,{title:"Structural Errors",data:this.getRowData(l.validationErrors.issues,"OpenAPI Format Requirements","error"),columns:d,options:u}))))),{}.hasOwnProperty.call(l,"warnings")&&i.a.createElement(i.a.Fragment,null,i.a.createElement("div",null,i.a.createElement(J.a,{variant:"body1"},i.a.createElement(Cd.a,{theme:this.getErrorMuiTheme()},i.a.createElement(Hi.a,{title:"Best Practices Issues",data:this.getRowData(l.warnings.issues,"OpenAPI Format Requirements","error"),columns:d,options:u}))))),!{}.hasOwnProperty.call(l,"validationErrors")&&!{}.hasOwnProperty.call(l,"semanticErrors")&&!{}.hasOwnProperty.call(l,"warnings")&&i.a.createElement(J.a,{variant:"body1"},i.a.createElement(W.a,{id:"Apis.Details.APIDefinition.AuditApi.OASNoIssuesFound",defaultMessage:"No Issues Found"}))))),{}.hasOwnProperty.call(l,"security")&&i.a.createElement("div",{className:e.paperDiv},i.a.createElement(de.a,{elevation:1,className:e.rootPaper},i.a.createElement("div",null,i.a.createElement(J.a,{variant:"h5",className:e.sectionHeadingTypography},i.a.createElement(W.a,{id:"Apis.Details.APIDefinition.AuditApi.Security",defaultMessage:"Security"})),i.a.createElement(J.a,{variant:"body1"},i.a.createElement(W.a,{id:"Apis.Details.APIDefinition.AuditApi.SecurityNumOfIssues",defaultMessage:"{securityNumOfIssuesText} {securityNumOfIssues}",values:{securityNumOfIssuesText:i.a.createElement("strong",null,"Number of Issues:"),securityNumOfIssues:l.security.issueCounter}})),i.a.createElement(J.a,{variant:"body1"},i.a.createElement(W.a,{id:"Apis.Details.APIDefinition.AuditApi.SecurityScore",defaultMessage:"{securityScoreText} {securityScore}  / 30",values:{securityScoreText:i.a.createElement("strong",null,"Score:"),securityScore:Math.round(100*l.security.score)/100}})),i.a.createElement(i.a.Fragment,null,i.a.createElement(J.a,{variant:"body1"},i.a.createElement(W.a,{id:"Apis.Details.APIDefinition.AuditApi.securityCriticality",defaultMessage:"{securityCriticalityText} {securityCriticality}",values:{securityCriticalityText:i.a.createElement("strong",null,"Severity:"),securityCriticality:this.criticalityObject[l.security.criticality]}}),i.a.createElement(se.a,{placement:"right",classes:{tooltip:e.htmlTooltip},title:i.a.createElement(i.a.Fragment,null,i.a.createElement(W.a,{id:"Apis.Details.APIDefinition.AuditApi.tooltip.severity",defaultMessage:"Severity ranges from: "}),i.a.createElement("br",null),i.a.createElement(W.a,{id:"Apis.Details.APIDefinition.AuditApi.tooltip.info",defaultMessage:"1. INFO"}),i.a.createElement("br",null),i.a.createElement(W.a,{id:"Apis.Details.APIDefinition.AuditApi.tooltip.low",defaultMessage:"2. LOW"}),i.a.createElement("br",null),i.a.createElement(W.a,{id:"Apis.Details.APIDefinition.AuditApi.tooltip.medium",defaultMessage:"3. MEDIUM"}),i.a.createElement("br",null),i.a.createElement(W.a,{id:"Apis.Details.APIDefinition.AuditApi.tooltip.high",defaultMessage:"4. HIGH"}),i.a.createElement("br",null),i.a.createElement(W.a,{id:"Apis.Details.APIDefinition.AuditApi.tooltip.critical",defaultMessage:"5. CRITICAL"}),i.a.createElement("br",null))},i.a.createElement(je.a,{className:e.helpButton},i.a.createElement(Le.a,{className:e.helpIcon}))))),0!==l.security.issueCounter&&i.a.createElement("div",null,i.a.createElement("hr",null),i.a.createElement(J.a,{variant:"body1"},i.a.createElement(Cd.a,{theme:this.getMuiTheme()},i.a.createElement(Hi.a,{title:"Issues",data:this.getRowData(l.security.issues,"Security","normal"),columns:p,options:u}))))))),{}.hasOwnProperty.call(l,"data")&&i.a.createElement("div",{className:e.paperDiv},i.a.createElement(de.a,{elevation:1,className:e.rootPaper},i.a.createElement("div",null,i.a.createElement(J.a,{variant:"h5",className:e.sectionHeadingTypography},i.a.createElement(W.a,{id:"Apis.Details.APIDefinition.AuditApi.DataValidation",defaultMessage:"Data Validation"})),i.a.createElement(J.a,{variant:"body1"},i.a.createElement(W.a,{id:"Apis.Details.APIDefinition.AuditApi.DataValidationNumOfIssues",defaultMessage:"{dataNumOfIssuesText} {dataNumOfIssues}",values:{dataNumOfIssuesText:i.a.createElement("strong",null,"Number of Issues:"),dataNumOfIssues:l.data.issueCounter}})),i.a.createElement(J.a,{variant:"body1"},i.a.createElement(W.a,{id:"Apis.Details.APIDefinition.AuditApi.DataValidationScore",defaultMessage:"{dataScoreText} {dataScore}  / 70",values:{dataScoreText:i.a.createElement("strong",null,"Score:"),dataScore:Math.round(100*l.data.score)/100}})),i.a.createElement(i.a.Fragment,null,i.a.createElement(J.a,{variant:"body1"},i.a.createElement(W.a,{id:"Apis.Details.APIDefinition.AuditApi.dataCriticality",defaultMessage:"{dataCriticalityText} {dataCriticality}",values:{dataCriticalityText:i.a.createElement("strong",null,"Severity:"),dataCriticality:this.criticalityObject[l.data.criticality]}}),i.a.createElement(se.a,{placement:"right",classes:{tooltip:e.htmlTooltip},title:i.a.createElement(i.a.Fragment,null,i.a.createElement(W.a,{id:"Apis.Details.APIDefinition.AuditApi.tooltip.severity",defaultMessage:"Severity ranges from: "}),i.a.createElement("br",null),i.a.createElement(W.a,{id:"Apis.Details.APIDefinition.AuditApi.tooltip.info",defaultMessage:"1. INFO"}),i.a.createElement("br",null),i.a.createElement(W.a,{id:"Apis.Details.APIDefinition.AuditApi.tooltip.low",defaultMessage:"2. LOW"}),i.a.createElement("br",null),i.a.createElement(W.a,{id:"Apis.Details.APIDefinition.AuditApi.tooltip.medium",defaultMessage:"3. MEDIUM"}),i.a.createElement("br",null),i.a.createElement(W.a,{id:"Apis.Details.APIDefinition.AuditApi.tooltip.high",defaultMessage:"4. HIGH"}),i.a.createElement("br",null),i.a.createElement(W.a,{id:"Apis.Details.APIDefinition.AuditApi.tooltip.critical",defaultMessage:"5. CRITICAL"}),i.a.createElement("br",null))},i.a.createElement(je.a,{className:e.helpButton},i.a.createElement(Le.a,{className:e.helpIcon}))))),0!==l.data.issueCounter&&i.a.createElement("div",null,i.a.createElement("hr",null),i.a.createElement(J.a,{variant:"body1"},i.a.createElement(Cd.a,{theme:this.getMuiTheme()},i.a.createElement(Hi.a,{title:"Issues",data:this.getRowData(l.data.issues,"Data Validation","normal"),columns:p,options:u})))))))))}}Pd.propTypes={classes:s.a.shape({}).isRequired,apiId:s.a.string.isRequired,theme:s.a.shape({}).isRequired,history:s.a.shape({push:s.a.func.isRequired}).isRequired,intl:s.a.shape({formatMessage:s.a.func}).isRequired};var wd=Object(U.withRouter)(Object(W.d)(Object(q.a)(e=>({rootPaper:{padding:e.spacing(3),margin:e.spacing(2)},inlineDecoration:{background:"#FF0000"},contentLine:{background:"#add8e6"},htmlToolTip:{backgroundColor:"#f5f5f9",color:"rgba(0, 0, 0, 0.87)",maxWidth:220,fontSize:e.typography.pxToRem(14),border:"1px solid #dadde9","& b":{fontWeight:e.typography.fontWeightMedium}},helpButton:{padding:0,minWidth:20,"margin-left":10},helpIcon:{fontSize:16},tableRow:{"background-color":"#d3d3d3"},referenceErrorTypography:{width:"70%",marginTop:"15%"},referenceTypography:{width:"70%"},subheadingTypography:{paddingTop:30,paddingLeft:20},paperDiv:{marginTop:30},sectionHeadingTypography:{marginBottom:18},auditSummaryDiv:{display:"flex",marginTop:25},auditSummarySubDiv:{width:250,marginLeft:40,marginRight:40,display:"table"},circularProgressBarScore:{fontSize:70,color:"#3d98c7",marginTop:18},circularProgressBarScoreFooter:{fontSize:18,marginTop:10},auditSummaryDivRight:{flexGrow:1,marginLeft:200,marginTop:10},columnOne:{display:"block",width:"50%",float:"left"},columnTwo:{width:"40%",float:"right"},head:{fontWeight:200,marginBottom:20},linkText:{float:"right"}}))(Pd))),Td=a(2849),xd=a.n(Td),Id=a(1762),Md=a(1764),Rd=a(1765);function kd(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function Nd(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?kd(a,!0).forEach(function(t){jd(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):kd(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function jd(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const _d=Object(He.a)(()=>({importDefinitionDialogHeader:{fontWeight:"600"},buttonIcon:{marginRight:10}}));function Ld(e){const{setSchemaDefinition:t}=e,a=_d(),[r,s]=Object(n.useState)(!1),[l,c]=Object(n.useState)(!1),[p]=Object(ue.d)(),d=Object(W.e)(),m=p.isGraphql(),u=p.isSOAP();const[g,h]=Object(n.useReducer)(function(e,t){const{action:a,value:n}=t;switch(a){case"inputValue":case"isFormValid":return Nd({},e,{[a]:n});case"inputType":return Nd({},e,{[a]:n,inputValue:"url"===n?"":null});case"preSetAPI":return Nd({},e,{content:n.content});default:return e}},{type:"",inputType:"url",inputValue:"",formValidity:!1,mode:"update"});function f(){const{inputValue:e}=g;X.a.validateGraphQLFile(e).then(e=>{const{isValid:a,graphQLInfo:n}=e.obj;!0===a&&function(e){p.updateGraphQLAPIDefinition(p.id,e).then(a=>{p.operations=a.obj,te.a.success(d.formatMessage({id:"Apis.Details.APIDefinition.APIDefinition.graphQLDefinition.updated.successfully",defaultMessage:"Schema Definition Updated Successfully"})),s(!1),t(e)}).catch(e=>{console.log(e),te.a.error(d.formatMessage({id:"Apis.Details.APIDefinition.APIDefinition.error.updating.graphQL.schema",defaultMessage:"Error while updating GraphQL schema"}))})}(n.graphQLSchema.schemaDefinition)}).catch(e=>{console.log(e),te.a.error(d.formatMessage({id:"Error.while.validating.the.imported.graphQLSchema",defaultMessage:"Error while validating the imported schema"}))})}function E(e){h({action:"isFormValid",value:e})}let b=i.a.createElement(W.a,{id:"Apis.Details.APIDefinition.APIDefinition.import.definition.oas",defaultMessage:"Import OpenAPI Definition"}),y=i.a.createElement(Md.a,{onValidate:E,apiInputs:g,inputsDispatcher:h}),v=i.a.createElement(W.a,{id:"Apis.Details.APIDefinition.APIDefinition.import.definition",defaultMessage:"Import Definition"});return m&&(b=i.a.createElement(W.a,{id:"Apis.Details.APIDefinition.APIDefinition.import.definition.graphql",defaultMessage:"Import GraphQL Schema Definition"}),y=i.a.createElement(Rd.a,{onValidate:E,apiInputs:g,inputsDispatcher:h})),u&&(b=i.a.createElement(W.a,{id:"Apis.Details.APIDefinition.APIDefinition.import.definition.wsdl",defaultMessage:"Import WSDL"}),y=i.a.createElement(Id.a,{onValidate:E,apiInputs:g,inputsDispatcher:h}),v=i.a.createElement(W.a,{id:"Apis.Details.APIDefinition.APIDefinition.import.wsdl",defaultMessage:"Import WSDL"})),i.a.createElement(i.a.Fragment,null,i.a.createElement(je.a,{size:"small",className:a.button,onClick:()=>{s(!0)},disabled:Object(o.b)(["apim:api_create"],p)},i.a.createElement(xd.a,{className:a.buttonIcon}),v),i.a.createElement(Et.a,{onBackdropClick:s,open:r},i.a.createElement(Fa.a,null,i.a.createElement(J.a,{className:a.importDefinitionDialogHeader},b)),i.a.createElement(yt.a,null,y),i.a.createElement(bt.a,null,i.a.createElement(je.a,{onClick:()=>{s(!1)}},i.a.createElement(W.a,{id:"Apis.Details.APIDefinition.APIDefinition.import.definition.cancel",defaultMessage:"Cancel"})),i.a.createElement(je.a,{onClick:function(){m?f():u?function(){const{inputType:e,inputValue:a}=g,n="file"===e;let i;(i=n?p.updateWSDLByFileOrArchive(p.id,a):p.updateWSDLByUrl(p.id,a)).then(()=>{te.a.success(d.formatMessage({id:"Apis.Details.APIDefinition.ImportDefinition.WSDL.updated.successfully",defaultMessage:"WSDL Updated Successfully"})),s(!1),t(n&&"application/zip"===a.type)}).catch(e=>{console.log(e),te.a.error(d.formatMessage({id:"Apis.Details.APIDefinition.ImportDefinition.error.updating.WSDL",defaultMessage:"Error while updating WSDL"}))})}():function(){c(!0);const{inputValue:e,inputType:a,content:n}=g,i="file"===a;if(i){const a=new FileReader,n=e.type.includes("yaml")?"yaml ":"json";a.onloadend=e=>{t(e.currentTarget.result,n)},a.readAsText(e)}const r=new X.a;(i?r.updateAPIDefinitionByFile(p.id,e):r.updateAPIDefinitionByUrl(p.id,e)).then(()=>{if(te.a.success(d.formatMessage({id:"Apis.Details.APIDefinition.APIDefinition.api.definition.updated.successfully",defaultMessage:"API Definition Updated Successfully"})),s(!1),!i){const e=RegExp(/^\s*{/).test(n)?"json":"yaml";t(n,e)}}).catch(e=>{console.error(e),te.a.error(d.formatMessage({id:"Apis.Details.APIDefinition.APIDefinition.error.while.updating.api.definition",defaultMessage:"Error while updating the API Definition"}))}).finally(()=>c(!1))}()},variant:"contained",color:"primary",disabled:!g.isFormValid||l},i.a.createElement(W.a,{id:"Apis.Details.APIDefinition.APIDefinition.import.definition.import",defaultMessage:"Import"}),l&&i.a.createElement($e.a,{size:20})))))}function qd(){return(qd=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}Ld.propTypes={setSchemaDefinition:s.a.func.isRequired};const Wd=Object(n.lazy)(()=>Promise.all([a.e(0),a.e(14),a.e(9)]).then(a.bind(null,3745))),Ud=Object(n.lazy)(()=>Promise.resolve().then(a.t.bind(null,2688,7)));class Bd extends i.a.Component{constructor(e){var t,a,n;super(e),n=(e,t)=>{const{api:a}=this.props;a.isGraphql()?this.setState({graphQL:e}):this.setState({swagger:e,swaggerModified:e,convertTo:this.getConvertToFormat(t),format:t})},(a="setSchemaDefinition")in(t=this)?Object.defineProperty(t,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[a]=n,this.state={openEditor:!1,swagger:null,swaggerModified:null,graphQL:null,format:null,convertTo:null,isAuditApiClicked:!1,securityAuditProperties:[],isSwaggerValid:!0,isUpdating:!1},this.handleNo=this.handleNo.bind(this),this.handleOk=this.handleOk.bind(this),this.openEditor=this.openEditor.bind(this),this.transition=this.transition.bind(this),this.closeEditor=this.closeEditor.bind(this),this.hasJsonStructure=this.hasJsonStructure.bind(this),this.getConvertToFormat=this.getConvertToFormat.bind(this),this.onAuditApiClick=this.onAuditApiClick.bind(this),this.onChangeFormatClick=this.onChangeFormatClick.bind(this),this.openUpdateConfirmation=this.openUpdateConfirmation.bind(this),this.updateSwaggerDefinition=this.updateSwaggerDefinition.bind(this),this.onChangeSwaggerContent=this.onChangeSwaggerContent.bind(this)}componentDidMount(){const{api:e}=this.props,{settings:t}=this.context;let a;a="GRAPHQL"===e.type?e.getSchema(e.id):e.getSwagger(e.id),this.setState({securityAuditProperties:t.securityAuditProperties}),a.then(t=>{"GRAPHQL"===e.type?this.setState({graphQL:t.obj.schemaDefinition,format:"txt"}):this.setState({swagger:bd.a.safeDump(bd.a.safeLoad(t.data)),swaggerModified:bd.a.safeDump(bd.a.safeLoad(t.data)),format:"yaml",convertTo:this.getConvertToFormat("yaml")})}).catch(e=>{const{status:t}=e;404===t?this.setState({notFound:!0}):401===t&&Object(ae.doRedirectToLogin)()})}onAuditApiClick(){this.setState({isAuditApiClicked:!0})}onChangeFormatClick(){const{format:e,swagger:t,convertTo:a}=this.state;let n="";n="json"===a?JSON.stringify(bd.a.load(t),null,1):bd.a.safeDump(bd.a.safeLoad(t)),this.setState({swagger:n,swaggerModified:n,format:a,convertTo:e})}onChangeSwaggerContent(e){const{format:t}=this.state;try{"json"===t?JSON.parse(e,null):bd.a.load(e),this.setState({isSwaggerValid:!0,swaggerModified:e})}catch(t){this.setState({isSwaggerValid:!1,swaggerModified:e})}}getConvertToFormat(e){return"json"===e?"yaml":"json"}hasJsonStructure(e){if("string"!=typeof e)return!1;try{const t=JSON.parse(e);return t&&"object"==typeof t}catch(e){return!1}}handleOk(){const{swaggerModified:e}=this.state;this.setState({openDialog:!1},()=>this.updateSwaggerDefinition(e,"",""))}handleNo(){this.setState({openDialog:!1})}openEditor(){this.setState({openEditor:!0})}closeEditor(){this.setState({openEditor:!1});const{intl:e,api:t,history:a}=this.props,{isAuditApiClicked:n}=this.state;if(!0===n){te.a.info(e.formatMessage({id:"Apis.Details.APIDefinition.info.updating.auditapi",defaultMessage:"To reflect the changes made, you need to click Audit API"}));const n="/apis/"+t.id+"/api definition";a.push(n)}}transition(e){return i.a.createElement(St.a,qd({direction:"up"},e))}openUpdateConfirmation(){this.setState({openDialog:!0})}updateSwaggerDefinition(e,t,a){const{api:n,intl:i,updateAPI:r}=this.props;this.setState({isUpdating:!0});let s={};if(this.hasJsonStructure(e))s=JSON.parse(e);else try{s=bd.a.load(e)}catch(e){return console.log(e),void te.a.error(i.formatMessage({id:"Apis.Details.APIDefinition.APIDefinition.error.while.updating.api.definition",defaultMessage:"Error occurred while updating the API Definition"}))}n.updateSwagger(s).then(s=>{const{endpointImplementationType:o}=n;"INLINE"===o&&n.generateMockScripts(n.id),s&&(te.a.success(i.formatMessage({id:"Apis.Details.APIDefinition.APIDefinition.api.definition.updated.successfully",defaultMessage:"API Definition updated successfully"})),t&&a?this.setState({swagger:e,format:t,convertTo:a}):this.setState({swagger:e})),r(),this.setState({isUpdating:!1})}).catch(e=>{console.log(e),te.a.error(i.formatMessage({id:"Apis.Details.APIDefinition.APIDefinition.error.while.updating.api.definition",defaultMessage:"Error occurred while updating the API Definition"})),this.setState({isUpdating:!1})})}render(){const{swagger:e,graphQL:t,openEditor:a,openDialog:r,format:s,convertTo:l,notFound:c,isAuditApiClicked:p,securityAuditProperties:d,isSwaggerValid:m,swaggerModified:u,isUpdating:g}=this.state,{classes:h,resourceNotFountMessage:f,api:E}=this.props;let b,y,v=0;null!==t?(b="data:text/"+s+";charset=utf-8,"+encodeURIComponent(t),y=E.provider+"-"+E.name+"-"+E.version+".graphql",v=1):(b="data:text/"+s+";charset=utf-8,"+encodeURIComponent(e),y="swagger."+s);return c?i.a.createElement(H.a,{message:f}):e||t||"undefined"!==E?i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:h.topBar},i.a.createElement("div",{className:h.titleWrapper},i.a.createElement(J.a,{variant:"h4"},t?i.a.createElement(W.a,{id:"Apis.Details.APIDefinition.APIDefinition.schema.definition",defaultMessage:"Schema Definition"}):i.a.createElement(W.a,{id:"Apis.Details.APIDefinition.APIDefinition.api.definition",defaultMessage:"API Definition"})),!(t||"APIProduct"===E.type)&&i.a.createElement(je.a,{size:"small",className:h.button,onClick:this.openEditor,disabled:Object(o.b)(["apim:api_create"],E)},i.a.createElement(rn.a,{className:h.buttonIcon}),i.a.createElement(W.a,{id:"Apis.Details.APIDefinition.APIDefinition.edit",defaultMessage:"Edit"})),"APIProduct"!==E.type&&i.a.createElement(Ld,{setSchemaDefinition:this.setSchemaDefinition}),i.a.createElement("a",{className:h.downloadLink,href:b,download:y},i.a.createElement(je.a,{size:"small",className:h.button},i.a.createElement(md.a,{className:h.buttonIcon}),i.a.createElement(W.a,{id:"Apis.Details.APIDefinition.APIDefinition.download.definition",defaultMessage:"Download Definition"}))),d.apiToken&&d.collectionId&&"GRAPHQL"!==E.type&&i.a.createElement(je.a,{size:"small",className:h.button,onClick:this.onAuditApiClick},i.a.createElement(gd.a,{className:h.buttonIcon}),i.a.createElement(W.a,{id:"Apis.Details.APIDefinition.APIDefinition.audit.api",defaultMessage:"Audit API"})),Object(o.b)(["apim:api_create"],E)&&i.a.createElement(J.a,{variant:"body2",color:"primary"},i.a.createElement(W.a,{id:"Apis.Details.APIDefinition.APIDefinition.update.not.allowed",defaultMessage:"Unauthorized: Insufficient permissions to update API Definition"}))),0===v&&i.a.createElement("div",{className:h.titleWrapper},i.a.createElement(je.a,{size:"small",className:h.button,onClick:this.onChangeFormatClick},i.a.createElement(fd.a,{className:h.buttonIcon}),i.a.createElement(W.a,{id:"Apis.Details.APIDefinition.APIDefinition.convert.to",defaultMessage:"Convert to"})," ",l))),i.a.createElement("div",null,i.a.createElement(n.Suspense,{fallback:i.a.createElement(ee.a,null)},p?i.a.createElement(wd,{apiId:E.id}):i.a.createElement(Ud,{language:s,width:"100%",height:"calc(100vh - 51px)",theme:"vs-dark",value:null!==e?e:t,options:{selectOnLineNumbers:!0,readOnly:!0,smoothScrolling:!0,wordWrap:"on"}}))),i.a.createElement(Et.a,{fullScreen:!0,open:a,onClose:this.closeEditor,TransitionComponent:this.transition},i.a.createElement(de.a,{square:!0,className:h.popupHeader},i.a.createElement(Pt.a,{className:h.button,color:"inherit",onClick:this.closeEditor,"aria-label":i.a.createElement(W.a,{id:"Apis.Details.APIDefinition.APIDefinition.btn.close",defaultMessage:"Close"})},i.a.createElement(Dt.a,null,"close")),i.a.createElement(je.a,{className:h.button,variant:"contained",color:"primary",onClick:this.openUpdateConfirmation,disabled:!m||g},i.a.createElement(W.a,{id:"Apis.Details.APIDefinition.APIDefinition.documents.swagger.editor.update.content",defaultMessage:"Update Content"}),g&&i.a.createElement($e.a,{className:h.progressLoader,size:24}))),i.a.createElement(n.Suspense,{fallback:i.a.createElement(ee.a,null)},i.a.createElement(Wd,{swagger:u,language:s,onEditContent:this.onChangeSwaggerContent}))),i.a.createElement(Et.a,{open:r,onClose:this.handleNo,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},i.a.createElement(Fa.a,{id:"alert-dialog-title"},i.a.createElement(J.a,{align:"left"},i.a.createElement(W.a,{id:"Apis.Details.APIDefinition.APIDefinition.save.api.definition",defaultMessage:"Save API Definition"}))),i.a.createElement(yt.a,null,i.a.createElement(Ba.a,{id:"alert-dialog-description"},i.a.createElement(W.a,{id:"Apis.Details.APIDefinition.APIDefinition.api.definition.save.confirmation",defaultMessage:"Are you sure you want to save the API Definition? This might affect the existing resources."}))),i.a.createElement(bt.a,null,i.a.createElement(je.a,{onClick:this.handleNo,color:"primary"},i.a.createElement(W.a,{id:"Apis.Details.APIDefinition.APIDefinition.btn.no",defaultMessage:"CANCEL"})),i.a.createElement(je.a,{onClick:this.handleOk,color:"primary",autoFocus:!0,variant:"contained"},i.a.createElement(W.a,{id:"Apis.Details.APIDefinition.APIDefinition.btn.yes",defaultMessage:"SAVE"}))))):i.a.createElement(ee.a,null)}}Bd.contextType=ne.b,Bd.propTypes={classes:s.a.shape({button:s.a.shape({}),popupHeader:s.a.shape({}),buttonIcon:s.a.shape({}),root:s.a.shape({}),topBar:s.a.shape({}),titleWrapper:s.a.shape({}),mainTitle:s.a.shape({}),converterWrapper:s.a.shape({}),dropzone:s.a.shape({}),downloadLink:s.a.shape({})}).isRequired,api:s.a.shape({updateSwagger:s.a.func,getSwagger:s.a.func,id:s.a.string,apiType:s.a.oneOf([X.a.CONSTS.API,X.a.CONSTS.APIProduct])}).isRequired,history:s.a.shape({push:s.a.object}).isRequired,location:s.a.shape({pathname:s.a.object}).isRequired,resourceNotFountMessage:s.a.shape({}).isRequired,theme:s.a.shape({}).isRequired,intl:s.a.shape({formatMessage:s.a.func}).isRequired,updateAPI:s.a.func.isRequired};var Fd=Object(U.withRouter)(Object(W.d)(Object(q.a)(e=>({titleWrapper:{display:"flex",flexDirection:"row",alignItems:"center"},swaggerEditorWrapper:{height:"100vh",overflowY:"auto"},buttonIcon:{marginRight:10},topBar:{display:"flex",flexDirection:"row",marginBottom:e.spacing(2)},converterWrapper:{display:"flex",alignItems:"center",justifyContent:"flex-end",flex:"1",fontSize:"0.6964285714285714rem"},downloadLink:{color:"black"},button:{marginLeft:e.spacing(1)},progressLoader:{marginLeft:e.spacing(1)}}),{withTheme:!0})(Bd)));const zd=Object(n.lazy)(()=>Promise.resolve().then(a.t.bind(null,2688,7)));class Vd extends i.a.Component{constructor(e){var t,a,n;super(e),n=e=>{if(this.setState({isArchive:e,wsdl:null}),!e){const{api:e}=this.props;this.loadWSDLInEditor(e)}},(a="setSchemaDefinition")in(t=this)?Object.defineProperty(t,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[a]=n,this.state={isArchive:!1,wsdl:null},this.loadWSDLInEditor=this.loadWSDLInEditor.bind(this),this.handleDownloadWSDLZip=this.handleDownloadWSDLZip.bind(this)}componentDidMount(){const{api:e,intl:t}=this.props;e.getWSDLInfo(e.id).then(t=>{"WSDL"===t.obj.type?this.loadWSDLInEditor(e):this.setState({isArchive:!0,wsdl:null})}).catch(e=>{const{status:a}=e;404===a?this.setState({notFound:!0}):te.a.error(t.formatMessage({id:"Apis.Details.APIDefinition.WSDL.error.loading.wsdl.info",defaultMessage:"Error loading WSDL"}))})}loadWSDLInEditor(e){const{intl:t}=this.props;e.getWSDL(e.id).then(e=>{e.data.text().then(e=>{this.setState({isArchive:!1,wsdl:e})})}).catch(e=>{const{status:a}=e;404===a?this.setState({notFound:!0}):te.a.error(t.formatMessage({id:"Apis.Details.APIDefinition.WSDL.error.loading.wsdl",defaultMessage:"Error loading WSDL"}))})}handleDownloadWSDLZip(){const{api:e,intl:t}=this.props;e.getWSDL(e.id).then(e=>{V.a.forceDownload(e)}).catch(e=>{te.a.error(t.formatMessage({id:"Apis.Details.APIDefinition.WSDL.download.error",defaultMessage:"Error downloading WSDL ZIP file"}))})}render(){const{wsdl:e,notFound:t,isArchive:a}=this.state,{classes:r,resourceNotFountMessage:s,api:l}=this.props;if(t)return i.a.createElement(H.a,{message:s});if(!a&&!e)return i.a.createElement(ee.a,null);let c;const p=i.a.createElement(i.a.Fragment,null,i.a.createElement(md.a,{className:r.buttonIcon}),i.a.createElement(W.a,{id:"Apis.Details.APIDefinition.WSDL.download.definition",defaultMessage:"Download WSDL"}));if(a)c=i.a.createElement(je.a,{size:"small",className:r.button,onClick:this.handleDownloadWSDLZip},p);else{const t="data:text/xml;charset=utf-8,"+encodeURIComponent(e),a=l.name+"-"+l.version+".wsdl";c=i.a.createElement("a",{className:r.downloadLink,href:t,download:a},i.a.createElement(je.a,{size:"small",className:r.button},p))}return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:r.topBar},i.a.createElement("div",{className:r.titleWrapper},i.a.createElement(J.a,{variant:"h4"},i.a.createElement(W.a,{id:"Apis.Details.APIDefinition.WSDL.wsdl.definition",defaultMessage:"WSDL Definition"})),i.a.createElement(Ld,{setSchemaDefinition:this.setSchemaDefinition}),c,Object(o.b)(["apim:api_create"],l)&&i.a.createElement(J.a,{variant:"body2",color:"primary"},i.a.createElement(W.a,{id:"Apis.Details.APIDefinition.WSDL.update.not.allowed",defaultMessage:"Unauthorized: Insufficient permissions to update WSDL Definition"})))),i.a.createElement("div",null,i.a.createElement(n.Suspense,{fallback:i.a.createElement(ee.a,null)},a?i.a.createElement(Yi.a,{type:"info",height:80,className:r.emptyBox},i.a.createElement("div",{className:r.contentWrapper},i.a.createElement(J.a,{component:"p",className:r.content},i.a.createElement(W.a,{id:"Apis.Details.APIDefinition.WSDL.preview.not.available",defaultMessage:"The API has a WSDL ZIP hence the preview is not available."})))):i.a.createElement(zd,{language:"xml",width:"100%",height:"calc(100vh - 51px)",theme:"vs-dark",value:e,options:{selectOnLineNumbers:!0,readOnly:!0,smoothScrolling:!0,wordWrap:"on",cursorStyle:"line-thin"}}))))}}Vd.contextType=ne.b,Vd.propTypes={classes:s.a.shape({button:s.a.shape({}),popupHeader:s.a.shape({}),buttonIcon:s.a.shape({}),root:s.a.shape({}),topBar:s.a.shape({}),titleWrapper:s.a.shape({}),mainTitle:s.a.shape({}),converterWrapper:s.a.shape({}),dropzone:s.a.shape({}),downloadLink:s.a.shape({})}).isRequired,api:s.a.shape({updateSwagger:s.a.func,getSwagger:s.a.func,id:s.a.string,apiType:s.a.oneOf([X.a.CONSTS.API,X.a.CONSTS.APIProduct])}).isRequired,history:s.a.shape({push:s.a.object}).isRequired,location:s.a.shape({pathname:s.a.object}).isRequired,resourceNotFountMessage:s.a.shape({}).isRequired,theme:s.a.shape({}).isRequired,intl:s.a.shape({formatMessage:s.a.func}).isRequired};var Hd=Object(U.withRouter)(Object(W.d)(Object(q.a)(e=>({titleWrapper:{display:"flex",flexDirection:"row",alignItems:"center"},swaggerEditorWrapper:{height:"100vh",overflowY:"auto"},buttonIcon:{marginRight:10},topBar:{display:"flex",flexDirection:"row",marginBottom:e.spacing(2)},converterWrapper:{display:"flex",alignItems:"center",justifyContent:"flex-end",flex:"1",fontSize:"0.6964285714285714rem"},downloadLink:{color:"black"},button:{marginLeft:e.spacing(1)}}),{withTheme:!0})(Vd))),Gd=a(1402);var Kd={common:[{label:"Overview",route:"overview"},{label:"MetaData",route:"overview"},{label:"Runtime Configurations",route:"runtime-configuration"},{label:"Transport Level Security",route:"runtime-configuration"},{label:"Mutual SSL",route:"runtime-configuration"},{label:"Design Configurations",route:"configuration"},{label:"Manage SSL Certificates",route:"configuration"},{label:"HTTP HTTPS enable disable",route:"runtime-configuration"},{label:"Application Level Security",route:"runtime-configuration"},{label:"Enable/Disable OAuth2",route:"runtime-configuration"},{label:"Enable/Disable Basic Auth",route:"runtime-configuration"},{label:"Enable/Disable Api Key",route:"runtime-configuration"},{label:"Authorization Headers",route:"runtime-configuration"},{label:"CORS Configuration",route:"runtime-configuration"},{label:"Backend Throughput",route:"runtime-configuration"},{label:"Message Mediation",route:"runtime-configuration"},{label:"Response",route:"runtime-configuration"},{label:"Request",route:"runtime-configuration"},{label:"Backend",route:"runtime-configuration"},{label:"Access Control Allow Origins",route:"configuration"},{label:"Access Control Allow Headers",route:"configuration"},{label:"Access Control Allow Credentials",route:"configuration"},{label:"Response caching",route:"runtime-configuration"},{label:"Publisher Access Control",route:"configuration"},{label:"Developer Portal Visibility",route:"configuration"},{label:"Tags",route:"configuration"},{label:"Default Version",route:"configuration"},{label:"Image",route:"configuration"},{label:"Description",route:"configuration"},{label:"Documents",route:"documents"},{label:"Add New Documents",route:"documents"},{label:"API Help",route:"documents"},{label:"Markdown Documents",route:"documents"},{label:"Business Information",route:"business info"},{label:"Business Owner",route:"business info"},{label:"Technical Owner",route:"business info"},{label:"Properties",route:"business info"},{label:"Subscriptions",route:"subscriptions"},{label:"Subscription Policies",route:"subscriptions"},{label:"Subscription Availability",route:"subscriptions"}],apiOnly:[{label:"API Gateways",route:"environments"},{label:"Microgateway Labels",route:"environments"},{label:"Environments",route:"environments"},{label:"Lifecycle",route:"lifecycle"},{label:"Publish API",route:"lifecycle"},{label:"Block API",route:"lifecycle"},{label:"Depricate API",route:"lifecycle"},{label:"Change Lifecycle",route:"lifecycle"},{label:"Deploy as a Prototype API",route:"lifecycle"},{label:"Requirements",route:"lifecycle"},{label:"Mediation Policies",route:"runtime-configuration"},{label:"Monetization",route:"monetization"},{label:"Monetization Properties",route:"monetization"},{label:"Commercial Policies",route:"monetization"},{label:"Create New Version",route:"new_version"},{label:"Prototyped API",route:"endpoints"},{label:"AWS Lambda Endpoints",route:"endpoints"},{label:"HTTP/HTTPS Endpoints",route:"endpoints"},{label:"HTTP/SOAP Endpoints",route:"endpoints"},{label:"Dynamic Endpoints",route:"endpoints"},{label:"Endpoint Security",route:"endpoints"},{label:"Certificates",route:"endpoints"},{label:"Production Endpoint",route:"endpoints"},{label:"Sandbox Endpoint",route:"endpoints"},{label:"Failover Endpoint",route:"endpoints"},{label:"Load Balance Endpoint",route:"endpoints"},{label:"Endpoints",route:"endpoints"},{label:"API Definition",route:"api definition"},{label:"Import API Definition",route:"api definition"},{label:"Download API Definition",route:"api definition"},{label:"Swagger",route:"api definition"},{label:"Import Swagger",route:"api definition"},{label:"Download Swagger",route:"api definition"},{label:"OAS",route:"api definition"},{label:"Import OAS",route:"api definition"},{label:"Download OAS",route:"api definition"},{label:"OpenAPI",route:"api definition"},{label:"Import OpenAPI",route:"api definition"},{label:"Download OpenAPI",route:"api definition"},{label:"Resources",route:"resources"},{label:"Resources Configuration",route:"resources"},{label:"Rate Limiting",route:"resources"},{label:"Operation Governance",route:"resources"},{label:"Scopes",route:"scopes"},{label:"Add New Scope",route:"scopes"},{label:"Schema validation",route:"runtime-configuration"},{label:"Fault",route:"runtime-configuration"},{label:"Endpoints",route:"runtime-configuration"},{label:"Properties",route:"properties"}],productOnly:[{label:"Product only feature",route:"configuration"},{label:"API Definition",route:"api definition"},{label:"Import API Definition",route:"api definition"},{label:"Download API Definition",route:"api definition"},{label:"Swagger",route:"api definition"},{label:"Import Swagger",route:"api definition"},{label:"Download Swagger",route:"api definition"},{label:"OAS",route:"api definition"},{label:"Import OAS",route:"api definition"},{label:"Download OAS",route:"api definition"},{label:"OpenAPI",route:"api definition"},{label:"Import OpenAPI",route:"api definition"},{label:"Download OpenAPI",route:"api definition"},{label:"Resources",route:"resources"},{label:"Resources Configuration",route:"resources"},{label:"Rate Limiting",route:"resources"},{label:"Operation Governance",route:"resources"},{label:"Schema validation",route:"runtime-configuration"}],graphqlOnly:[{label:"Operations",route:"operations"},{label:"Operation Type",route:"operations"},{label:"Operations Configuration",route:"operations"},{label:"Rate Limiting",route:"operations"},{label:"Schema Definition",route:"schema definition"},{label:"Scopes",route:"scopes"},{label:"Add New Scope",route:"scopes"},{label:"Fault",route:"runtime-configuration"},{label:"Endpoints",route:"runtime-configuration"},{label:"Environments",route:"environments"},{label:"API Gateways",route:"environments"},{label:"Microgateway Labels",route:"environments"},{label:"Lifecycle",route:"lifecycle"},{label:"Publish API",route:"lifecycle"},{label:"Block API",route:"lifecycle"},{label:"Depricate API",route:"lifecycle"},{label:"Change Lifecycle",route:"lifecycle"},{label:"Deploy as a Prototype API",route:"lifecycle"},{label:"Requirements",route:"lifecycle"},{label:"Monetization",route:"monetization"},{label:"Monetization Properties",route:"monetization"},{label:"Commercial Policies",route:"monetization"},{label:"Create New Version",route:"new_version"},{label:"Prototyped API",route:"endpoints"},{label:"AWS Lambda Endpoints",route:"endpoints"},{label:"HTTP/HTTPS Endpoints",route:"endpoints"},{label:"HTTP/SOAP Endpoints",route:"endpoints"},{label:"Dynamic Endpoints",route:"endpoints"},{label:"Endpoint Security",route:"endpoints"},{label:"Certificates",route:"endpoints"},{label:"Production Endpoint",route:"endpoints"},{label:"Sandbox Endpoint",route:"endpoints"},{label:"Failover Endpoint",route:"endpoints"},{label:"Load Balance Endpoint",route:"endpoints"},{label:"Endpoints",route:"endpoints"},{label:"Fault",route:"runtime-configuration"},{label:"Endpoints",route:"runtime-configuration"},{label:"Properties",route:"properties"}]};function Yd(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Jd(){return(Jd=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function Qd(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function Zd(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Qd(a,!0).forEach(function(t){Xd(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Qd(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function Xd(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function $d(e,t){if(null==e)return{};var a,n,i=function(e,t){if(null==e)return{};var a,n,i={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(i[a]=e[a]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}const em=Object(He.a)(e=>({root:{flexGrow:1,height:250},container:{flexGrow:1,position:"relative"},paper:{position:"absolute",zIndex:e.zIndex.goToSearch,marginTop:e.spacing(1),left:0,right:0},chip:{margin:e.spacing(.5,.25)},inputRoot:{flexWrap:"wrap"},inputInput:{width:"auto",flexGrow:1},divider:{height:e.spacing(2)},linkButton:{display:"flex",alignItems:"center",flexDirection:"column",padding:10,cursor:"pointer",minWidth:30},goToWrapper:{position:"relative"},downshiftWrapper:{position:"absolute",padding:e.spacing(1),right:60,top:0,width:300,background:"white",border:"solid 1px #ccc",borderRadius:5}}));function tm(e){const{InputProps:t,classes:a,ref:n}=e,r=$d(e,["InputProps","classes","ref"]);return i.a.createElement(Gt.a,Jd({autoFocus:!0,InputProps:Zd({inputRef:n,classes:{root:a.inputRoot,input:a.inputInput}},t)},r))}function am(e){const{suggestion:t,index:a,itemProps:n,highlightedIndex:r,api:s,isAPIProduct:o,handleClickAway:l}=e,c=r===a,p=o?"/api-products/".concat(s.id,"/").concat(t.route):"/apis/".concat(s.id,"/").concat(t.route);return i.a.createElement(B.b,{to:p,onClick:l},i.a.createElement(Pn.a,Jd({key:t.label},n,{selected:c,button:!0,"aria-haspopup":"true","aria-controls":"lock-menu","aria-label":"when device is locked"}),i.a.createElement(ma.a,{primary:t.label,secondary:t.route})))}function nm(e){const{isAPIProduct:t,api:a}=e,r=em(),[s,o]=Object(n.useState)(!1);let l=!1;"GRAPHQL"===a.type&&(l=!0);const c=()=>{o(!1)};return i.a.createElement(Gd.a,{onClickAway:c},i.a.createElement("div",{className:r.goToWrapper},i.a.createElement("a",{className:r.linkButton,onClick:()=>{o(!s)}},i.a.createElement(Dt.a,null,"find_in_page"),i.a.createElement(J.a,{variant:"caption"},i.a.createElement(W.a,{id:"Apis.Details.GoTo.GoTo.btn",defaultMessage:"Go To"}))),s&&i.a.createElement("div",{className:r.downshiftWrapper},i.a.createElement(ms.a,{id:"downshift-simple"},a=>{let{getInputProps:n,getItemProps:s,getLabelProps:o,getMenuProps:p,highlightedIndex:d,inputValue:m,isOpen:u,selectedItem:g}=a;const h=n({placeholder:"Type what you want to do.."}),{onBlur:f,onFocus:E}=h,b=$d(h,["onBlur","onFocus"]);return i.a.createElement("div",{className:r.container},tm({fullWidth:!0,classes:r,label:"Go to menu item",InputLabelProps:o({shrink:!0}),InputProps:{onBlur:f,onFocus:E},inputProps:b}),i.a.createElement("div",p(),u?i.a.createElement(de.a,{className:r.paper,square:!0},function(e,t,a){let{showEmpty:n=!1}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const i=ds()(e.trim()).toLowerCase(),r=i.length;let s=0;const o=Yd(Kd.common);return t?o.push.apply(o,Yd(Kd.productOnly)):a?o.push.apply(o,Yd(Kd.graphqlOnly)):o.push.apply(o,Yd(Kd.apiOnly)),0!==r||n?o.filter(e=>{const t=s<5&&e.label.slice(0,r).toLowerCase()===i;return t&&(s+=1),t}):[]}(m,t,l).map((t,a)=>am(Zd({suggestion:t,index:a,itemProps:s({item:t.label}),highlightedIndex:d,selectedItem:g,handleClickAway:c},e)))):null))}))))}tm.propTypes={classes:s.a.shape({}).isRequired,InputProps:s.a.shape({}).isRequired},am.propTypes={highlightedIndex:s.a.oneOfType([s.a.oneOf([null]),s.a.number]).isRequired,index:s.a.number.isRequired,itemProps:s.a.shape({}).isRequired,selectedItem:s.a.string.isRequired,suggestion:s.a.shape({label:s.a.string.isRequired}).isRequired},nm.propTypes={api:s.a.shape({}).isRequired,isAPIProduct:s.a.bool.isRequired};var im=nm,rm=a(1506),sm=a(2852),om=a.n(sm);function lm(e){const{api:t,classes:a}=e;return i.a.createElement(i.a.Fragment,null,i.a.createElement(bi.a,{resourceMethod:bi.b.POST,resourcePath:bi.c.API_COPY},i.a.createElement("div",{className:a.createNewVersionWrapper},i.a.createElement(xp.a,{height:70}),i.a.createElement(B.b,{className:a.createNewVersion,to:"/apis/"+t.id+"/new_version",style:{minWidth:95}},i.a.createElement("div",null,i.a.createElement(om.a,null)),i.a.createElement(J.a,{variant:"caption"},i.a.createElement(W.a,{id:"Apis.Details.components.CreateNewVersionButton.create.new.version",defaultMessage:"Create New Version"}))))))}lm.propTypes={api:s.a.shape({id:s.a.string}).isRequired,history:s.a.shape({push:s.a.func}).isRequired,classes:s.a.shape({}).isRequired};var cm=Object(U.withRouter)(Object(q.a)(e=>({root:{height:70,background:e.palette.background.paper,borderBottom:"solid 1px "+e.palette.grey.A200,display:"flex",alignItems:"center"},backLink:{alignItems:"center",textDecoration:"none",display:"flex"},backIcon:{color:e.palette.primary.main,fontSize:56,cursor:"pointer"},backText:{color:e.palette.primary.main,cursor:"pointer",fontFamily:e.typography.fontFamily},createNewVersionWrapper:{display:"flex",justifyContent:"flex-end"},createNewVersion:{display:"flex",flexDirection:"column",textAlign:"center",justifyContent:"center",cursor:"pointer",color:e.custom.createNewVersionButtonColor||"inherit"},linkText:{fontSize:e.typography.fontSize}}),{withTheme:!0})(lm));const pm=e=>{const{classes:t,theme:a,api:r,isAPIProduct:s,imageUpdate:o,intl:l}=e,c=["PROTOTYPED","PUBLISHED"].includes(r.lifeCycleStatus);const p=["API"].includes(r.apiType),{settings:d,user:m}=Object(ne.c)(),{tenantList:u}=Object(n.useContext)(ue.c),g=m.name.split("@"),h=g[g.length-1];let f="".concat(d.storeUrl,"/apis/").concat(r.id,"/overview");return u&&u.length>0&&(f="".concat(d.storeUrl,"/apis/").concat(r.id,"/overview?tenant=").concat(h)),i.a.createElement("div",{className:t.root},i.a.createElement(B.b,{to:s?"/api-products/".concat(r.id,"/overview"):"/apis/".concat(r.id,"/overview"),className:t.backLink},i.a.createElement(Ft,{api:r,width:70,height:50,imageUpdate:o}),i.a.createElement("div",{style:{marginLeft:a.spacing(1),maxWidth:500}},i.a.createElement(J.a,{variant:"h4",className:t.apiName},r.name," ",s?"":":"+r.version),i.a.createElement(J.a,{variant:"caption",gutterBottom:!0,align:"left"},i.a.createElement(W.a,{id:"Apis.Details.components.APIDetailsTopMenu.created.by",defaultMessage:"Created by:"})," ",r.provider))),i.a.createElement(xp.a,{height:70}),i.a.createElement("div",{className:t.infoItem},i.a.createElement(J.a,{variant:"subtitle1"},s?r.state:r.lifeCycleStatus),i.a.createElement(J.a,{variant:"caption",align:"left"},i.a.createElement(W.a,{id:"Apis.Details.components.APIDetailsTopMenu.state",defaultMessage:"State"}))),i.a.createElement("div",{className:t.dateWrapper}),i.a.createElement(xp.a,{height:70}),i.a.createElement(im,{api:r,isAPIProduct:s}),(c||s)&&i.a.createElement(xp.a,{height:70}),(c||s)&&i.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:f,className:t.viewInStoreLauncher,style:{minWidth:90}},i.a.createElement("div",null,i.a.createElement(be.a,null)),i.a.createElement(J.a,{variant:"caption"},i.a.createElement(W.a,{id:"Apis.Details.components.APIDetailsTopMenu.view.in.portal",defaultMessage:"View in Dev Portal"}))),s?null:i.a.createElement(cm,{buttonClass:t.viewInStoreLauncher,api:r}),p&&i.a.createElement(xp.a,{height:70}),i.a.createElement("div",{className:t.downloadApi},p&&i.a.createElement("a",{onClick:function(){return(new X.a).exportApi(r.id).then(e=>V.a.forceDownload(e)).catch(e=>{e.response?te.a.error(e.response.body.description):te.a.error(l.formatMessage({id:"Apis.Details.components.APIDetailsTopMenu.error",defaultMessage:"Something went wrong while downloading the API."})),console.error(e)})},onKeyDown:"null",className:t.downloadApiFlex},i.a.createElement("div",null,i.a.createElement(md.a,null)),i.a.createElement(J.a,{variant:"caption",align:"left"},i.a.createElement(W.a,{id:"Apis.Details.APIDetailsTopMenu.download.api",defaultMessage:"Download API"})))),i.a.createElement(rm.a,{buttonClass:t.viewInStoreLauncher,api:r,isAPIProduct:s}))};pm.propTypes={classes:s.a.shape({}).isRequired,theme:s.a.shape({}).isRequired,api:s.a.shape({}).isRequired,isAPIProduct:s.a.bool.isRequired,imageUpdate:s.a.number.isRequired};var dm=Object(W.d)(Object(q.a)(e=>({root:{height:70,background:e.palette.background.paper,borderBottom:"solid 1px "+e.palette.grey.A200,display:"flex",alignItems:"center"},backLink:{alignItems:"center",textDecoration:"none",display:"flex",color:e.palette.getContrastText(e.palette.background.paper)},backIcon:{color:e.palette.primary.main,fontSize:56,cursor:"pointer"},backText:{color:e.palette.primary.main,cursor:"pointer",fontFamily:e.typography.fontFamily},viewInStoreLauncher:{display:"flex",flexDirection:"column",color:e.palette.getContrastText(e.palette.background.paper),textAlign:"center",justifyContent:"center",height:70},linkText:{fontSize:e.typography.fontSize},dateWrapper:{flex:1,alignSelf:"center"},lastUpdatedTypography:{display:"inline-block",minWidth:30},apiName:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},downloadApi:{display:"flex",flexDirection:"column",textAlign:"center",justifyContent:"center",cursor:"pointer",height:70,color:e.palette.getContrastText(e.palette.background.paper)},downloadApiFlex:{display:"flex",flexDirection:"column"}}),{withTheme:!0})(pm));function mm(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class um extends i.a.Component{constructor(e){super(e),mm(this,"isValid",()=>this.isValidBusinessOwnerEmail&&this.isValidTechnicalOwnerEmail&&this.isFormUpdated),mm(this,"handleChange",e=>t=>{let{value:a}=t.target;const{checked:n}=t.target;if("accessControlRoles"===e||"visibleRoles"===e?a=a.split(","):"isDefaultVersion"===e?a="yes"===a:"responseCaching"===e&&(a=n?"Enabled":"Disabled"),"businessOwnerEmail"===e){const e=Zt.a.email.validate(a).error;this.isValidBusinessOwnerEmail=null===e||""===a}if("technicalOwnerEmail"===e){const e=Zt.a.email.validate(a).error;this.isValidTechnicalOwnerEmail=null===e||""===a}this.isFormUpdated=!0,this.setState({[e]:a})});const{businessOwner:t,businessOwnerEmail:a,technicalOwner:n,technicalOwnerEmail:i}=this.props.api.businessInformation;this.state={businessOwner:t,businessOwnerEmail:a,technicalOwner:n,technicalOwnerEmail:i},this.isFormUpdated=!1,this.isValidBusinessOwnerEmail=!0,this.isValidTechnicalOwnerEmail=!0}handleSubmit(e){const{businessOwner:t,businessOwnerEmail:a,technicalOwner:n,technicalOwnerEmail:i}=this.state;e({businessInformation:{businessOwner:t,businessOwnerEmail:a,technicalOwner:n,technicalOwnerEmail:i}})}render(){const{classes:e,api:t,updateAPI:a}=this.props,{businessOwner:n,businessOwnerEmail:r,technicalOwner:s,technicalOwnerEmail:l}=this.state;return i.a.createElement(i.a.Fragment,null,i.a.createElement(gt.a,{maxWidth:"md"},i.a.createElement(fe.a,{mb:3},i.a.createElement(J.a,{variant:"h4"},i.a.createElement(W.a,{id:"Apis.Details.BusinessInformation.BusinessInformation.business.info",defaultMessage:"Business Information"})),t.apiType===X.a.CONSTS.APIProduct?i.a.createElement(J.a,{variant:"caption"},i.a.createElement(W.a,{id:"Apis.Details.BusinessInformation.BusinessInformation.APIProduct.sub.heading",defaultMessage:"Business Information of the API"})):i.a.createElement(J.a,{variant:"caption"},i.a.createElement(W.a,{id:"Apis.Details.BusinessInformation.BusinessInformation.sub.heading",defaultMessage:"Business Information of the API"}))),i.a.createElement(de.a,{elevation:0},i.a.createElement(fe.a,{px:8,py:5},i.a.createElement("form",{noValidate:!0,autoComplete:"off"},i.a.createElement(Gt.a,{disabled:Object(o.b)(["apim:api_create","apim:api_publish"],t),fullWidth:!0,id:"name",label:i.a.createElement(i.a.Fragment,null,i.a.createElement(W.a,{id:"Apis.Details.BusinessInformation.BusinessInformation.business.owner.name",defaultMessage:"Business Owner"})),helperText:i.a.createElement(W.a,{id:"Apis.Details.BusinessInformation.BusinessInformation.business.owner.name.helper.text",defaultMessage:"Provide the name of the business owner"}),type:"text",name:"name",margin:"normal",variant:"outlined",value:n,onChange:this.handleChange("businessOwner"),autoFocus:!0}),i.a.createElement(Gt.a,{error:!this.isValidBusinessOwnerEmail,disabled:Object(o.b)(["apim:api_create","apim:api_publish"],t),fullWidth:!0,id:"name",label:i.a.createElement(i.a.Fragment,null,i.a.createElement(W.a,{id:"Apis.Details.BusinessInformation.BusinessInformation.business.owner.email",defaultMessage:"Business Owner Email"})),helperText:this.isValidBusinessOwnerEmail?i.a.createElement(W.a,{id:"Apis.Details.BusinessInformation.BusinessInformation.business.owner.email.helper.text",defaultMessage:"Provide the email of the business owner"}):i.a.createElement(W.a,{id:"Apis.Details.BusinessInformation.BusinessInformation.business.owner.email.helper.text.error",defaultMessage:"Please enter a valid email address"}),type:"email",name:"name",margin:"normal",value:r,onChange:this.handleChange("businessOwnerEmail"),variant:"outlined"}),i.a.createElement(Gt.a,{disabled:Object(o.b)(["apim:api_create","apim:api_publish"],t),fullWidth:!0,id:"name",label:i.a.createElement(i.a.Fragment,null,i.a.createElement(W.a,{id:"Apis.Details.BusinessInformation.BusinessInformation.technical.owner.name",defaultMessage:"Technical Owner"})),helperText:i.a.createElement(W.a,{id:"Apis.Details.BusinessInformation.BusinessInformation.technical.owner.name.helper.text",defaultMessage:"Provide the name of the technical owner"}),type:"text",name:"name",margin:"normal",value:s,onChange:this.handleChange("technicalOwner"),variant:"outlined"}),i.a.createElement(Gt.a,{error:!this.isValidTechnicalOwnerEmail,disabled:Object(o.b)(["apim:api_create","apim:api_publish"],t),fullWidth:!0,id:"name",label:i.a.createElement(W.a,{id:"Apis.Details.BusinessInformation.BusinessInformation.technical.owner.email",defaultMessage:"Technical Owner Email"}),helperText:this.isValidTechnicalOwnerEmail?i.a.createElement(W.a,{id:"Apis.Details.BusinessInformation.BusinessInformation.technical.owner.email.helper.text",defaultMessage:"Provide the email of the technical owner"}):i.a.createElement(W.a,{id:"Apis.Details.BusinessInformation.BusinessInformation.technical.owner.email.helper.text.error",defaultMessage:"Please enter a valid email address"}),type:"email",name:"name",margin:"normal",value:l,onChange:this.handleChange("technicalOwnerEmail"),variant:"outlined"})),i.a.createElement("div",{className:e.buttonWrapper},i.a.createElement(me.a,{container:!0,direction:"row",alignItems:"flex-start",spacing:1,className:e.buttonSection},i.a.createElement(me.a,{item:!0},i.a.createElement("div",null,i.a.createElement(je.a,{variant:"contained",color:"primary",onClick:()=>this.handleSubmit(a),disabled:Object(o.b)(["apim:api_create","apim:api_publish"],t)||!this.isValid()},i.a.createElement(W.a,{id:"save",defaultMessage:"Save"})))),i.a.createElement(me.a,{item:!0},i.a.createElement(B.b,{to:(t.apiType===X.a.CONSTS.APIProduct?"/api-products/":"/apis/")+t.id+"/overview"},i.a.createElement(je.a,null,i.a.createElement(W.a,{id:"cancel",defaultMessage:"Cancel"}))))))))))}}um.propTypes={state:s.a.shape({}).isRequired,classes:s.a.shape({}).isRequired,api:s.a.shape({id:s.a.string,businessInformation:s.a.shape({businessOwner:s.a.string,businessOwnerEmail:s.a.string,technicalOwner:s.a.string,technicalOwnerEmail:s.a.string,apiType:s.a.oneOf([X.a.CONSTS.API,X.a.CONSTS.APIProduct])}).isRequired}).isRequired,updateAPI:s.a.func.isRequired};var gm=Object(ue.e)(Object(q.a)(e=>({FormControl:{padding:0,width:"100%",marginTop:0},FormControlOdd:{padding:0,backgroundColor:e.palette.background.paper,width:"100%",marginTop:0},buttonWrapper:{paddingTop:20},paperRoot:{padding:20,marginTop:20}}))(um));const hm=Object(He.a)(()=>({link:{cursor:"pointer"}}));function fm(e){const{oldKey:t,oldValue:a,handleUpdateList:r,handleDelete:s,apiAdditionalProperties:o,intl:l,setEditing:c,isRestricted:p,api:d}=e,[m,u]=Object(n.useState)(t),[g,h]=Object(n.useState)(a),[f,E]=Object(n.useState)(!1),b=function(e){return null!==e&&""===e},y=function(){r({oldKey:t,oldValue:a},{newKey:m||t,newValue:g||a}),E(!1),c(!1)},v=function(e){"Enter"===e.key&&y()},C=hm();return i.a.createElement(Pe.a,null,f?i.a.createElement(De.a,null,i.a.createElement(Gt.a,{fullWidth:!0,required:!0,id:"outlined-required",label:l.formatMessage({id:"Apis.Details.Properties.Properties.editable.row.property.name",defaultMessage:"Property Name"}),margin:"normal",variant:"outlined",className:C.addProperty,value:m,onChange:e=>{const{value:t}=e.target;u(t)},onKeyDown:v,error:b(m)})):i.a.createElement(De.a,null,t),f?i.a.createElement(De.a,null,i.a.createElement(Gt.a,{fullWidth:!0,required:!0,id:"outlined-required",label:l.formatMessage({id:"Apis.Details.Properties.Properties.editable.row.edit.mode.property.name",defaultMessage:"Property Name"}),margin:"normal",variant:"outlined",className:C.addProperty,value:g,onChange:e=>{const{value:t}=e.target;h(t)},onKeyDown:v,error:b(g)})):i.a.createElement(De.a,null,a),i.a.createElement(De.a,{align:"right"},f?i.a.createElement(i.a.Fragment,null,i.a.createElement(Pt.a,{className:C.link,"aria-label":"save",onClick:y,onKeyDown:()=>{},disabled:b(m)||b(g),color:"inherit"},i.a.createElement(Vl.a,{className:C.buttonIcon}))):i.a.createElement(Pt.a,{className:C.link,"aria-label":"edit",onClick:function(){E(!f),c(!0)},onKeyDown:()=>{},color:"inherit",disabled:p(["apim:api_create","apim:api_publish"],d)},i.a.createElement(js.a,{className:C.buttonIcon})),i.a.createElement(Pt.a,{className:C.link,"aria-label":"remove",onClick:function(){s(o,t)},onKeyDown:()=>{},color:"inherit",disabled:p(["apim:api_create","apim:api_publish"],d)},i.a.createElement(Fl.a,{className:C.buttonIcon}))))}fm.propTypes={oldKey:s.a.shape({}).isRequired,oldValue:s.a.shape({}).isRequired,classes:s.a.shape({}).isRequired,handleUpdateList:s.a.shape({}).isRequired,handleDelete:s.a.shape({}).isRequired,apiAdditionalProperties:s.a.shape({}).isRequired,intl:s.a.shape({formatMessage:s.a.func}).isRequired,setEditing:s.a.func.isRequired};var Em=Object(W.d)(fm);function bm(){return(bm=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}const ym=Object(He.a)(e=>({root:{paddingTop:0,paddingLeft:0,maxWidth:e.custom.contentAreaWidth},titleWrapper:{display:"flex",flexDirection:"row",alignItems:"center"},button:{marginLeft:e.spacing(2),color:e.palette.getContrastText(e.palette.primary.main)},FormControl:{padding:0,width:"100%",marginTop:0,display:"flex",flexDirection:"row"},FormControlOdd:{padding:0,backgroundColor:e.palette.background.paper,width:"100%",marginTop:0},buttonWrapper:{paddingTop:e.spacing(3)},paperRoot:{padding:e.spacing(3),marginTop:e.spacing(3)},addNewHeader:{padding:e.spacing(2),backgroundColor:e.palette.grey[300],fontSize:e.typography.h6.fontSize,color:e.typography.h6.color,fontWeight:e.typography.h6.fontWeight},addNewOther:{padding:e.spacing(2)},addNewWrapper:{backgroundColor:e.palette.background.paper,color:e.palette.getContrastText(e.palette.background.paper),border:"solid 1px "+e.palette.grey[300],borderRadius:e.shape.borderRadius,marginTop:e.spacing(2)},addProperty:{marginRight:e.spacing(2)},buttonIcon:{marginRight:e.spacing(1)},link:{cursor:"pointer"},messageBox:{marginTop:20},actions:{padding:"20px 0","& button":{marginLeft:0}},head:{fontWeight:200,marginBottom:20},marginRight:{marginRight:e.spacing(1)},helpText:{paddingTop:e.spacing(1)}}));function vm(e){const{api:t,updateAPI:a}=Object(n.useContext)(ue.c),r=xa()(t.additionalProperties),[s,l]=Object(n.useState)(r),[c,p]=Object(n.useState)(!1),[d,m]=Object(n.useState)(null),[u,g]=Object(n.useState)(null),[h,f]=Object(n.useState)(!1),[E,b]=Object(n.useState)(!1),[y,v]=Object(n.useState)(!1);let C=!1;C=!!["provider","version","context","status","description","subcontext","doc","lcState","name","tags"].includes(d);const A=()=>{p(!c)},S=e=>t=>{const{value:a}=t.target;"propertyKey"===e?m(a):"propertyValue"===e&&g(a)},O=e=>null!==e&&""===e,D=(e,t)=>{const a=JSON.parse(JSON.stringify(s));Object.prototype.hasOwnProperty.call(a,t)&&delete a[t],l(a),a!==s&&v(!0)},P=(e,t)=>{const a=JSON.parse(JSON.stringify(s)),{oldKey:n,oldValue:i}=e,{newKey:r,newValue:o}=t;Object.prototype.hasOwnProperty.call(a,r)&&n===r?o&&i!==o&&(a[n]=o):(delete a[n],a[r]=o),l(a)},w=()=>{const e=JSON.parse(JSON.stringify(s));null!=e[d]?te.a.warning("Property name already exists"):(e[d]=u,l(e),m(null),g(null))},T=e=>{"Enter"===e.key&&w()},{intl:x}=e,I=ym();return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:I.titleWrapper},t.apiType===X.a.CONSTS.APIProduct?i.a.createElement(J.a,{variant:"h4",align:"left",className:I.mainTitle},i.a.createElement(W.a,{id:"Apis.Details.Properties.Properties.api.product.properties",defaultMessage:"API Properties"})):i.a.createElement(J.a,{variant:"h4",align:"left",className:I.mainTitle},i.a.createElement(W.a,{id:"Apis.Details.Properties.Properties.api.properties",defaultMessage:"API Properties"})),(!xr()(s)||c)&&i.a.createElement(je.a,{size:"small",className:I.button,onClick:A,disabled:c||Object(o.b)(["apim:api_create","apim:api_publish"],t)},i.a.createElement(Ki.a,{className:I.buttonIcon}),i.a.createElement(W.a,{id:"Apis.Details.Properties.Properties.add.new.property",defaultMessage:"Add New Property"}))),i.a.createElement(J.a,{variant:"caption",component:"div",className:I.helpText},i.a.createElement(W.a,{id:"Apis.Details.Properties.Properties.help.main",defaultMessage:"Usually, APIs have a pre-defined set of properties such as \n                        the name, version, context, etc. API Properties allows you to \n                         add specific custom properties to the API."})),xr()(s)&&!y&&!c&&i.a.createElement("div",{className:I.messageBox},i.a.createElement(Yi.a,{type:"info",height:140},i.a.createElement("div",{className:I.contentWrapper},i.a.createElement(J.a,{variant:"h5",component:"h3",className:I.head},i.a.createElement(W.a,{id:"Apis.Details.Properties.Properties.add.new.property.message.title",defaultMessage:"Create Additional Properties"})),t.apiType===X.a.CONSTS.APIProduct?i.a.createElement(J.a,{component:"p",className:I.content},i.a.createElement(W.a,{id:"Apis.Details.Properties.Properties.APIProduct. add.new.property.message.content",defaultMessage:"Add specific custom properties to your API here."})):i.a.createElement(J.a,{component:"p",className:I.content},i.a.createElement(W.a,{id:"Apis.Details.Properties.Properties.add.new.property.message.content",defaultMessage:"Add specific custom properties to your API here."})),i.a.createElement("div",{className:I.actions},i.a.createElement(je.a,{variant:"contained",color:"primary",className:I.button,onClick:A,disabled:Object(o.b)(["apim:api_create","apim:api_publish"],t)},i.a.createElement(W.a,{id:"Apis.Details.Properties.Properties.add.new.property",defaultMessage:"Add New Property"})))))),(!xr()(s)||c||y)&&i.a.createElement(me.a,{container:!0,spacing:7},i.a.createElement(me.a,{item:!0,xs:12},i.a.createElement(de.a,{className:I.paperRoot},i.a.createElement(Oe.a,{className:I.table},i.a.createElement(Yn.a,null,i.a.createElement(Pe.a,null,i.a.createElement(De.a,null,i.a.createElement(W.a,{id:"Apis.Details.Properties.Properties.add.new.property.table",defaultMessage:"Property Name"})),i.a.createElement(De.a,null,i.a.createElement(W.a,{id:"Apis.Details.Properties.Properties.add.new.property.value",defaultMessage:"Property Value"})),i.a.createElement(De.a,null))),i.a.createElement(Kn.a,null,c&&i.a.createElement(i.a.Fragment,null,i.a.createElement(Pe.a,null,i.a.createElement(De.a,null,i.a.createElement(Gt.a,{fullWidth:!0,required:!0,id:"outlined-required",label:x.formatMessage({id:"Apis.Details.Properties.Properties.\n                                                                show.add.property.property.name",defaultMessage:"Name"}),margin:"normal",variant:"outlined",className:I.addProperty,value:null===d?"":d,onChange:S("propertyKey"),onKeyDown:T("propertyKey"),helperText:O(d)?"":((e,t,a)=>e?t:a)(C,"Invalid property name",""),error:O(d)||C,disabled:Object(o.b)(["apim:api_create","apim:api_publish"],t)})),i.a.createElement(De.a,null,i.a.createElement(Gt.a,{fullWidth:!0,required:!0,id:"outlined-required",label:x.formatMessage({id:"Apis.Details.Properties.Properties.property.value",defaultMessage:"Value"}),margin:"normal",variant:"outlined",className:I.addProperty,value:null===u?"":u,onChange:S("propertyValue"),onKeyDown:T("propertyValue"),error:O(u),disabled:Object(o.b)(["apim:api_create","apim:api_publish"],t)})),i.a.createElement(De.a,{align:"right"},i.a.createElement(je.a,{variant:"contained",color:"primary",disabled:!u||!d||Object(o.b)(["apim:api_create","apim:api_publish"],t)||C,onClick:w,className:I.marginRight},i.a.createElement(W.a,{id:"Apis.Details.Properties.Properties.add",defaultMessage:"Add"})),i.a.createElement(je.a,{onClick:A},i.a.createElement(W.a,{id:"Apis.Details.Properties.Properties.cancel",defaultMessage:"Cancel"})))),i.a.createElement(Pe.a,null,i.a.createElement(De.a,{colSpan:3},i.a.createElement(J.a,{variant:"caption"},i.a.createElement(W.a,{id:"Apis.Details.Properties.Properties.help",defaultMessage:"Property name should be unique, should not contain spaces and cannot be any of the following reserved keywords : provider, version, context, status, description, subcontext, doc, lcState, name, tags."}))))),(()=>{const a=[];for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&a.push(i.a.createElement(Em,bm({oldKey:n,oldValue:s[n],handleUpdateList:P,handleDelete:D,apiAdditionalProperties:s},e,{setEditing:b,isRestricted:o.b,api:t})));return a})()))),i.a.createElement("div",{className:I.buttonWrapper},i.a.createElement(me.a,{container:!0,direction:"row",alignItems:"flex-start",spacing:1,className:I.buttonSection},i.a.createElement(me.a,{item:!0},i.a.createElement("div",null,i.a.createElement(je.a,{variant:"contained",color:"primary",onClick:()=>{f(!0),a({additionalProperties:s}).then(()=>{f(!1)}).catch(e=>{f(!1);const{status:t}=e;401===t&&Object(ae.doRedirectToLogin)()})},disabled:E||h||xr()(s)&&!y||Object(o.b)(["apim:api_create","apim:api_publish"],t)},h&&i.a.createElement(i.a.Fragment,null,i.a.createElement($e.a,{size:20}),i.a.createElement(W.a,{id:"Apis.Details.Properties.Properties.updating",defaultMessage:"Updating ..."})),!h&&i.a.createElement(W.a,{id:"Apis.Details.Properties.Properties.save",defaultMessage:"Save"})))),i.a.createElement(me.a,{item:!0},i.a.createElement(B.b,{to:"/apis/"+t.id+"/overview"},i.a.createElement(je.a,null,i.a.createElement(W.a,{id:"Apis.Details.Properties.Properties.cancel",defaultMessage:"Cancel"})))),Object(o.b)(["apim:api_create","apim:api_publish"],t)&&i.a.createElement(me.a,{item:!0,xs:12},i.a.createElement(J.a,{variant:"body2",color:"primary"},i.a.createElement(W.a,{id:"Apis.Details.Properties.Properties.update.not.allowed",defaultMessage:"*You are not authorized to update properties of the API due to insufficient permissions"}))))))))}vm.propTypes={state:s.a.shape({}).isRequired,intl:s.a.shape({formatMessage:s.a.func}).isRequired};var Cm=Object(ue.e)(Object(W.d)(vm));class Am extends n.Component{constructor(e){super(e),this.state={policies:[],monetizedPolices:null},this.monetizationQuery=this.monetizationQuery.bind(this)}componentDidMount(){const{api:e}=this.props;e.getSubscriptionPolicies(e.id).then(e=>{const t=e.filter(e=>"COMMERCIAL"===e.tierPlan);this.setState({policies:t})}),e.getMonetization(e.id).then(e=>{this.setState({monetizedPolices:e.properties})})}monetizationQuery(e){const{monetizedPolices:t}=this.state;return e in t}render(){const{policies:e,monetizedPolices:t}=this.state,{classes:a}=this.props;if(null===t)return i.a.createElement(ee.a,null);const n=e.map(e=>i.a.createElement(me.a,{item:!0,xs:12},i.a.createElement(Oe.a,{className:a.table},i.a.createElement(Pe.a,null,i.a.createElement(De.a,{variant:"head",colSpan:2,className:a.tableHeadCell},i.a.createElement(fe.a,{display:"flex"},i.a.createElement(J.a,{component:"div",className:a.tableHeadTitle,variant:"subtitle1"},e.name),this.monetizationQuery(e.name)?i.a.createElement("div",{className:a.stateWrapper},i.a.createElement("div",null,i.a.createElement(Qe.a,{color:"primary"})),i.a.createElement(J.a,{component:"div"},i.a.createElement(W.a,{id:"Apis.Details.Monetization.BusinessPlans.monetized",defaultMessage:"Monetized"}))):i.a.createElement("div",{className:a.stateWrapper},i.a.createElement("div",null,i.a.createElement(Xe.a,{color:"error"})),i.a.createElement(J.a,{component:"div"},i.a.createElement(W.a,{id:"Apis.Details.Monetization.BusinessPlans.not.monetized",defaultMessage:"Not Monetized"})))))),Object.keys(e.monetizationAttributes).map(t=>null!==e.monetizationAttributes[t]&&i.a.createElement(Pe.a,null,i.a.createElement(De.a,{className:a.tableCel,align:"left"},i.a.createElement(J.a,{component:"p",variant:"subtitle2"},t)),i.a.createElement(De.a,{align:"left"},e.monetizationAttributes[t]))))));return i.a.createElement(me.a,{container:!0,spacing:1},i.a.createElement(me.a,{item:!0,xs:12},i.a.createElement(J.a,{variant:"h6"},i.a.createElement(W.a,{id:"Apis.Details.Monetization.BusinessPlans.commercial.policies",defaultMessage:"Commercial Policies"}))),i.a.createElement(me.a,{item:!0,xs:12},i.a.createElement(me.a,{container:!0,direction:"row",spacing:3},n)),i.a.createElement(me.a,{item:!0,xs:12},e.length>0?i.a.createElement(yi.a,{disableActions:!0,dense:!0,paperProps:{elevation:1},type:"info",message:"Click Save to monetize all unmonetized policies"}):i.a.createElement(yi.a,{disableActions:!0,dense:!0,paperProps:{elevation:1},type:"info",message:"No commercial policies to monetize"})))}}Am.propTypes={api:s.a.instanceOf(X.a).isRequired,classes:s.a.shape({}).isRequired};var Sm=Object(q.a)(e=>({root:{flexGrow:1,paddingBottom:"10px"},margin:{margin:e.spacing()},rightDataColumn:{display:"flex",flex:1},grid:{marginTop:"10px",paddingRight:"10px",paddingBottom:"10px"},box:{display:"block"},tableCel:{width:50},table:{width:"100%",border:"solid 1px #ccc"},tableHeadCell:{color:"black",background:e.palette.grey[200]},stateWrapper:{display:"flex",flexDirection:"row"},tableHeadTitle:{flex:1,fontWeight:"bold"}}))(Am);function Om(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Dm extends n.Component{constructor(e){super(e),Om(this,"handleChange",e=>{this.setState({monStatus:e.target.checked})}),Om(this,"handleInputChange",e=>{const{name:t,value:a}=e.target;this.setState(e=>{const{property:n}=e;return n[t]=a,{property:n}})}),this.state={monetizationAttributes:[],monStatus:null,property:{}},this.handleChange=this.handleChange.bind(this),this.handleInputChange=this.handleInputChange.bind(this),this.handleSubmit=this.handleSubmit.bind(this)}componentDidMount(){this.getMonetizationData()}getMonetizationData(){const{api:e}=this.props;if("APIProduct"===e.apiType){const t=new $.a(e.name,e.context,e.policies);t.getSettings().then(e=>{null!=e.monetizationAttributes&&this.setState({monetizationAttributes:e.monetizationAttributes})}),t.getMonetization(this.props.api.id).then(e=>{this.setState({monStatus:e.enabled})})}else e.getSettings().then(e=>{null!=e.monetizationAttributes&&this.setState({monetizationAttributes:e.monetizationAttributes})}),e.getMonetization(this.props.api.id).then(e=>{this.setState({monStatus:e.enabled})})}handleSubmit(){const{api:e,intl:t}=this.props;if("APIProduct"===e.apiType){const a=this.state.property,n={enabled:this.state.monStatus,properties:a};new $.a(e.name,e.context,e.policies).configureMonetizationToApiProduct(e.id,n).then(e=>{JSON.parse(e.data).enabled?te.a.info(t.formatMessage({id:"Apis.Details.Monetization.Index.monetization.configured.successfully",defaultMessage:"Monetization Enabled Successfully"})):te.a.info(t.formatMessage({id:"Apis.Details.Monetization.Index.monetization.disabled.successfully",defaultMessage:"Monetization Disabled Successfully"})),this.setState(e=>({monStatus:!e.monStatus}))}).catch(e=>{console.error(e),e.response?te.a.error(e.response.body.description):te.a.error(t.formatMessage({id:"Apis.Details.Monetization.Index.something.went.wrong.while.configuring.monetization",defaultMessage:"Something went wrong while configuring monetization"}))})}else{const a=this.state.property,n={enabled:this.state.monStatus,properties:a};e.configureMonetizationToApi(this.props.api.id,n).then(e=>{JSON.parse(e.data).enabled?te.a.info(t.formatMessage({id:"Apis.Details.Monetization.Index.monetization.configured.successfully",defaultMessage:"Monetization Enabled Successfully"})):te.a.info(t.formatMessage({id:"Apis.Details.Monetization.Index.monetization.disabled.successfully",defaultMessage:"Monetization Disabled Successfully"})),this.setState(e=>({monStatus:!e.monStatus}))}).catch(e=>{console.error(e),e.response?te.a.error(e.response.body.description):te.a.error(t.formatMessage({id:"Apis.Details.Monetization.Index.something.went.wrong.while.configuring.monetization",defaultMessage:"Something went wrong while configuring monetization"}))})}}render(){const{api:e,classes:t}=this.props,{monetizationAttributes:a,monStatus:n}=this.state;return e&&Object(o.b)(["apim:api_publish"],e)?i.a.createElement(me.a,{container:!0,direction:"row",alignItems:"center",spacing:4,style:{marginTop:20}},i.a.createElement(me.a,{item:!0},i.a.createElement(J.a,{variant:"body2",color:"primary"},i.a.createElement(W.a,{id:"Apis.Details.Monetization.Index.update.not.allowed",defaultMessage:"* You are not authorized to update API monetization due to insufficient permissions"})))):a&&null!==n?i.a.createElement("form",{method:"post",onSubmit:this.handleSubmit},i.a.createElement(me.a,{container:!0,xs:6,spacing:2},i.a.createElement(me.a,{item:!0,xs:12},i.a.createElement(J.a,{variant:"h4"},i.a.createElement(W.a,{id:"Apis.Details.Monetization.Index.monetization",defaultMessage:"Monetization"}))),i.a.createElement(me.a,{item:!0,xs:12},i.a.createElement(At.a,{control:i.a.createElement(ua.a,{disabled:Object(o.b)(["apim:api_publish"],e),id:"monStatus",name:"monStatus",checked:n,onChange:this.handleChange,value:n,color:"primary"}),label:"Enable Monetization"})),i.a.createElement(me.a,{item:!0,xs:12},i.a.createElement(de.a,{className:t.root},i.a.createElement(me.a,{item:!0,xs:12,className:t.grid},i.a.createElement(J.a,{className:t.heading,variant:"h6"},i.a.createElement(W.a,{id:"Apis.Details.Monetization.Index.monetization.properties",defaultMessage:"Monetization Properties"})),a.length>0?a.map((t,a)=>i.a.createElement(Gt.a,{disabled:Object(o.b)(["apim:api_publish"],e),fullWidth:!0,id:"attribute"+a,label:t.displayName,placeholder:t.displayName,name:t.name,type:"text",margin:"normal",variant:"outlined",required:t.required,onChange:this.handleInputChange,autoFocus:!0})):i.a.createElement(J.a,null,i.a.createElement(W.a,{id:"Apis.Details.Monetization.Index.there.are.no .monetization.properties.configured",defaultMessage:"There are no monetization properties configured"}))))),i.a.createElement(me.a,{item:!0,xs:12},i.a.createElement(de.a,{className:t.root},i.a.createElement(me.a,{item:!0,xs:12,className:t.grid},i.a.createElement(Sm,{api:e,monStatus:n})))),i.a.createElement(me.a,{item:!0,xs:12},i.a.createElement(je.a,{onClick:this.handleSubmit,color:"primary",variant:"contained",className:t.button},i.a.createElement(W.a,{id:"Apis.Details.Monetization.Index.save",defaultMessage:"Save"})),i.a.createElement(B.b,{to:"/apis/"+e.id+"/overview"},i.a.createElement(je.a,null,i.a.createElement(W.a,{id:"Apis.Details.Monetization.Index.cancel",defaultMessage:"Cancel"})))))):i.a.createElement(ee.a,null)}}Dm.propTypes={api:s.a.instanceOf(X.a).isRequired,classes:s.a.shape({}).isRequired,intl:s.a.shape({formatMessage:s.a.func}).isRequired};var Pm=Object(W.d)(Object(U.withRouter)(Object(q.a)(e=>({root:{flexGrow:1},container:{display:"flex",flexWrap:"wrap"},margin:{margin:e.spacing()},paper:{padding:e.spacing(2),textAlign:"left",color:e.palette.text.secondary,paddingBottom:"10px"},grid:{paddingLeft:"10px",paddingRight:"10px",paddingBottom:"10px",minWidth:"50%"},button:{margin:e.spacing()}}))(Dm)));function wm(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}const Tm=Object(He.a)(e=>({root:{width:e.custom.contentAreaWidth,marginTop:e.spacing(3),overflowX:"auto"},table:{minWidth:650},viewInExStoreLink:{color:e.palette.common.black,textDecoration:"underline"}}));function xm(){const{api:e}=Object(n.useContext)(ue.a),{settings:t}=Object(ne.c)(),[a,r]=Object(n.useState)([]),[s,l]=Object(n.useState)([]),[c,p]=Object(n.useState)(!1),d=Tm(),m=Object(W.e)();if(!t.externalStoresEnabled){const t=Object(W.c)({titleMessage:{id:"Apis.Details.ExternalStores.ExternalStores.external.stores.not.found.title",defaultMessage:"External Developert Portals not found for the API : {apiUUID}"},bodyMessage:{id:"Apis.Details.ExternalStores.ExternalStores.external.stores.not.found.body",defaultMessage:"No External Developer Portals configured for the current tenant"}}),a={title:m.formatMessage(t.titleMessage,{apiUUID:"".concat(e.id)}),body:m.formatMessage(t.bodyMessage)};return i.a.createElement(H.a,{message:a})}function u(){X.a.getPublishedExternalStores(e.id).then(e=>{const t=e.body.list.map(e=>e.id);l(t)}).catch(e=>{const t=e.response&&e.response.obj,a=t&&"["+t.message+"] "+t.description;te.a.error(m.formatMessage({id:"Apis.Details.ExternalStores.ExternalStores.error.getting.published.external.stores",defaultMessage:"Error while getting published external developer portals!! {reason}"},{reason:a}))})}return Object(n.useEffect)(()=>{X.a.getAllExternalStores().then(e=>{r(wm(e.body.list))}),u()},[]),i.a.createElement("div",null,i.a.createElement("div",null,i.a.createElement(J.a,{variant:"h4",align:"left"},i.a.createElement(W.a,{id:"Apis.Details.ExternalStores.ExternalStores.external-stores",defaultMessage:"External Developer Portals"})),i.a.createElement(de.a,{className:d.root},i.a.createElement(Oe.a,{className:d.table},i.a.createElement(Yn.a,null,i.a.createElement(Pe.a,null,i.a.createElement(De.a,null),i.a.createElement(De.a,null,i.a.createElement(J.a,null,i.a.createElement(W.a,{id:"Apis.Details.ExternalStores.ExternalStores.name",defaultMessage:"Name"}))),i.a.createElement(De.a,null,i.a.createElement(J.a,null,i.a.createElement(W.a,{id:"Apis.Details.ExternalStores.ExternalStores.type",defaultMessage:"Type"}))),i.a.createElement(De.a,null,i.a.createElement(J.a,null,i.a.createElement(W.a,{id:"Apis.Details.ExternalStores.ExternalStores.endpoint",defaultMessage:"Endpoint"}))))),i.a.createElement(Kn.a,null,a.map(t=>i.a.createElement(Pe.a,{key:t.id},i.a.createElement(De.a,{padding:"checkbox"},i.a.createElement(ua.a,{checked:s.includes(t.id),disabled:"PUBLISHED"!==e.lifeCycleStatus||Object(o.b)(["apim:api_publish"],e),onChange:e=>{const{checked:t,name:a}=e.target;t?s.includes(a)||l([].concat(wm(s),[a])):l(s.filter(e=>e!==a))},name:t.id,color:"primary"})),i.a.createElement(De.a,{component:"th",scope:"row"},i.a.createElement(J.a,null," ",t.displayName," ")),i.a.createElement(De.a,null," ",i.a.createElement(J.a,null,t.type)),i.a.createElement(De.a,null,i.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:t.endpoint,className:d.viewInExStoreLink},i.a.createElement(J.a,null,t.endpoint)))))))),i.a.createElement(me.a,{container:!0},i.a.createElement(me.a,{container:!0,direction:"row",alignItems:"center",spacing:4,style:{marginTop:20}},i.a.createElement(me.a,{item:!0},i.a.createElement(je.a,{type:"submit",variant:"contained",color:"primary",disabled:c||"PUBLISHED"!==e.lifeCycleStatus||Object(o.b)(["apim:api_publish"],e),onClick:function(){p(!0),X.a.publishAPIToExternalStores(e.id,s).then(e=>{const t=e.body.list.map(e=>e.id);te.a.success(m.formatMessage({id:"Apis.Details.ExternalStores.ExternalStores.successfully.published.to.external.stores",defaultMessage:"Successfully Published to external developer portals: {successfulStores}"},{successfulStores:t}))}).catch(e=>{const t=e.response&&e.response.obj,a=t&&"["+t.message+"] "+t.description;te.a.error(m.formatMessage({id:"Apis.Details.ExternalStores.ExternalStores.error.while.updating.external.stores",defaultMessage:"Error while updating external developer portals!! {reason}"},{reason:a}))}).finally(()=>{p(!1),u()})}},i.a.createElement(W.a,{id:"Apis.Details.ExternalStores.ExternalStores.save",defaultMessage:"Save"}),c&&i.a.createElement($e.a,{size:20}))),i.a.createElement(me.a,{item:!0},i.a.createElement(B.b,{to:"/apis/"+e.id+"/overview"},i.a.createElement(je.a,null,i.a.createElement(W.a,{id:"Apis.Details.ExternalStores.ExternalStores.cancel",defaultMessage:"Cancel"})))),Object(o.b)(["apim:api_publish"],e)&&i.a.createElement(me.a,{item:!0},i.a.createElement(J.a,{variant:"body2",color:"primary"},i.a.createElement(W.a,{id:"Apis.Details.ExternalStores.ExternalStores.update.not.allowed",defaultMessage:"* You are not authorized to publish the API to external developer portals due to insufficient permissions"})))))))}function Im(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Mm extends i.a.Component{constructor(e){super(e),Im(this,"handleDefaultVersionChange",()=>e=>{const{value:t}=e.target;this.setState({isDefaultVersion:t})}),Im(this,"handleVersionChange",()=>e=>{const{value:t}=e.target;this.setState({newVersion:t,valid:{version:{empty:!t,alreadyExists:!1,hasSpecialChars:this.hasSpecialChars(t)}}})}),this.state={isDefaultVersion:"no",valid:{version:{empty:!1,alreadyExists:!1,hasSpecialChars:!1}}}}hasSpecialChars(e){return!/^[^~!@#;:%^*()+={}|\\<>"',&\/$]+$/.test(e)}handleSubmit(e,t,a){if(!t)return void this.setState({valid:{version:{empty:!0}}});const n="yes"===a,{intl:i}=this.props;e.createNewAPIVersion(t,n).then(e=>{this.setState({redirectToReferrer:!0,apiId:e.obj.id}),te.a.error(i.formatMessage({id:"Apis.Details.NewVersion.NewVersion.success",defaultMessage:"Successfully created new version"})+t)}).catch(e=>{409===e.status?this.setState({valid:{version:{alreadyExists:!0}}}):te.a.error(i.formatMessage({id:"Apis.Details.NewVersion.NewVersion.error",defaultMessage:"Something went wrong while creating a new version!. Error: "})+e.status)})}render(){const{classes:e,api:t}=this.props,{isDefaultVersion:a,newVersion:n,redirectToReferrer:r,apiId:s,valid:o}=this.state;if(r)return i.a.createElement(U.Redirect,{to:"/apis/"+s+"/overview"});let l="";return o.version.empty?l="This field cannot be empty":o.version.alreadyExists?l='An API with version "'+n+'" already exists.':o.version.hasSpecialChars&&(l="API Version should not contain special characters"),i.a.createElement(i.a.Fragment,null,i.a.createElement(gt.a,{maxWidth:"md"},i.a.createElement("div",{className:e.titleWrapper},i.a.createElement(J.a,{variant:"h4",align:"left",className:e.mainTitle},i.a.createElement(W.a,{id:"Apis.Details.NewVersion.NewVersion.create.new.version",defaultMessage:"Create New Version"}))),i.a.createElement(me.a,{container:!0,spacing:7},i.a.createElement(me.a,{item:!0,xs:12},i.a.createElement(de.a,{className:e.root,elevation:0},i.a.createElement(zt.a,{margin:"normal",className:e.FormControlOdd},i.a.createElement(Gt.a,{fullWidth:!0,id:"newVersion",error:o.version.empty||o.version.alreadyExists||o.version.hasSpecialChars,label:i.a.createElement(W.a,{id:"Apis.Details.NewVersion.NewVersion.new.version",defaultMessage:"New Version"}),helperText:l,type:"text",name:"newVersion",placeholder:"Eg: 2.0.0",value:n,variant:"outlined",onChange:this.handleVersionChange(),margin:"normal",InputLabelProps:{shrink:!0},autoFocus:!0})),i.a.createElement(zt.a,{margin:"normal",className:e.FormControl},i.a.createElement(Vt.a,{className:e.FormLabel,component:"legend"},i.a.createElement(W.a,{id:"Apis.Details.NewVersion.NewVersion.default",defaultMessage:"Make this the default version"}),i.a.createElement(se.a,{placement:"top",classes:{tooltip:e.htmlTooltip},title:i.a.createElement(i.a.Fragment,null,i.a.createElement(W.a,{id:"Apis.Details.NewVersion.NewVersion.tooltip",defaultMessage:"Indicates if this is the default version of the API. If an API is invoked without specifying a version, the API Gateway will route the request to the default version of the API."})),interactive:!0,"aria-label":"Default Version Selector",tabIndex:"-1"},i.a.createElement(je.a,{className:e.helpButton},i.a.createElement(Le.a,{className:e.helpIcon})))),i.a.createElement(Ct.a,{name:"isDefaultVersion",id:"isDefaultVersion",className:e.group,value:a,onChange:this.handleDefaultVersionChange()},i.a.createElement(At.a,{value:"yes",control:i.a.createElement(vt.a,{color:"primary"}),label:"Yes"}),i.a.createElement(At.a,{value:"no",control:i.a.createElement(vt.a,{color:"primary"}),label:"No"}))),i.a.createElement("div",{className:e.buttonWrapper},i.a.createElement(me.a,{container:!0,direction:"row",alignItems:"flex-start",spacing:1,className:e.buttonSection},i.a.createElement(me.a,{item:!0},i.a.createElement("div",null,i.a.createElement(je.a,{variant:"contained",color:"primary",id:"createBtn",onClick:()=>this.handleSubmit(t,n,a),disabled:o.version.empty||o.version.alreadyExists||o.version.hasSpecialChars},i.a.createElement(W.a,{id:"Apis.Details.NewVersion.NewVersion.create",defaultMessage:"Create"})))),i.a.createElement(me.a,{item:!0},i.a.createElement(B.b,{to:"/apis/"+t.id+"/overview"},i.a.createElement(je.a,{id:"cancelBtn"},i.a.createElement(W.a,{id:"Apis.Details.NewVersion.NewVersion.cancel",defaultMessage:"Cancel"})))))))))))}}Mm.propTypes={classes:s.a.shape({}).isRequired,api:s.a.shape({id:s.a.string}).isRequired,intl:s.a.shape({formatMessage:s.a.func}).isRequired};var Rm=Object(ue.e)(Object(q.a)(e=>({FormControl:{padding:0,width:"100%",marginTop:20},FormControlOdd:{padding:0,backgroundColor:e.palette.background.paper,width:"100%",marginTop:0},FormLabel:{transform:"translate(0, 1.5px) scale(0.75)",transformOrigin:"top left"},buttonWrapper:{paddingTop:20},root:{padding:20,marginTop:20},group:{flexDirection:"row"},helpButton:{padding:0,minWidth:20},helpIcon:{fontSize:16},htmlTooltip:{backgroundColor:"#f5f5f9",color:"rgba(0, 0, 0, 0.87)",maxWidth:220,fontSize:e.typography.pxToRem(14),border:"1px solid #dadde9","& b":{fontWeight:e.typography.fontWeightMedium}}}))(Mm)),km=(a(2853),a(1766),a(1953)),Nm=a(3718),jm=a(3721),_m=a(530),Lm=a.n(_m),qm=a(3125),Wm=a.n(qm),Um=a(3724),Bm=a(3732),Fm=a(3719),zm=a(3744),Vm=a(3722),Hm=a(3736),Gm=a(3728),Km=a(3743),Ym=a(3124),Jm=a.n(Ym),Qm=a(3723),Zm=a(3725),Xm=a(3726),$m=a(3742),eu=a(3727),tu=a(3741),au=a(3122),nu=a.n(au);var iu,ru,su,ou=()=>i.a.createElement("div",{className:"apim-dual-ring"}),lu=a(1769),cu=a.n(lu),pu=a(3096),du=a(505),mu=a.n(du),uu=a(3098),gu=a.n(uu),hu=a(1834),fu=a.n(hu),Eu=a(1818),bu=a.n(Eu);class yu{static getCookie(e,t){t=t||yu.getEnvironment().label;let a=document.cookie.split(";"),n=null;for(let i of a){let a=(i=i.split("="))[0].trim(),r=encodeURIComponent(i[1]);if(a==="".concat(e,"_").concat(t)){n=r;break}}return n}static getCookieWithoutEnvironment(e){const t=document.cookie.split(";");let a=null;for(let n of t){const t=(n=n.split("="))[0].trim();if("undefined"!==n[1]){const i=encodeURIComponent(n[1]);if(t===e){a=i;break}}}return a}static deleteCookie(e,t,a){a=a||yu.getEnvironment().label,document.cookie="".concat(e,"_").concat(a,"=; path=").concat(t,"; expires=Thu, 01 Jan 1970 00:00:01 GMT")}static setCookie(e,t,a){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"/",i=arguments.length>4?arguments[4]:void 0,r=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];i=i||yu.getEnvironment().label;let s="";const o=r?"; Secure":"";if(a){const e=new Date;e.setTime(e.getTime()+1e3*a),s="; expires="+e.toUTCString()}document.cookie="".concat(e,"_").concat(i,"=").concat(t,"; path=").concat(n).concat(s).concat(o)}static isEmptyObject(e){return 0===Object.keys(e).length&&e.constructor===Object}static getEnvironment(){if(yu._environment)return yu._environment;let e=localStorage.getItem(yu.CONST.LOCALSTORAGE_ENVIRONMENT);return e?JSON.parse(e):yu.getDefaultEnvironment()}static getCurrentEnvironment(){if(yu.environment)return yu.environment;const e=localStorage.getItem(yu.CONST.LOCAL_STORAGE_ENVIRONMENT);return e?JSON.parse(e):yu.getDefaultEnvironment()}static getDefaultEnvironment(){return{label:"Default",host:window.location.host,loginTokenPath:"/login/token",refreshTokenPath:"/services/refresh/refresh.jag"}}static getEnvironmentID(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:yu.getEnvironment().label;if(!t)return 0;for(let a=0;a<e.length;a++)if(t===e[a].label)return a;return-1}static setEnvironment(e){e||(e=yu.getDefaultEnvironment()),e.host||(e.host=window.location.host),yu._environment=e,localStorage.setItem(yu.CONST.LOCALSTORAGE_ENVIRONMENT,JSON.stringify(e))}static getPromised_DCRappInfo(e){return fu.a.get(yu.getDCRappInfoRequestURL(e))}static getDCRappInfoRequestURL(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:yu.getEnvironment();return"".concat(yu.CONST.PROTOCOL).concat(e.host).concat(yu.CONST.DCR_APP_INFO).concat(mu.a.app.context)}static getAppLogoutURL(){return yu.CONST.PROTOCOL+yu.getEnvironment().host+yu.CONST.LOGOUT+mu.a.app.context}static getLoginTokenPath(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:yu.getEnvironment();return"".concat(yu.CONST.PROTOCOL).concat(e.host).concat(yu.CONST.LOGIN_TOKEN_PATH).concat(mu.a.app.context)}static getSignUpTokenPath(e){return"".concat(yu.CONST.PROTOCOL).concat(e.host).concat(yu.CONST.LOGIN_SIGN_UP_PATH).concat(mu.a.app.context)}static getSwaggerURL(){return"https://"+yu.getEnvironment().host+yu.CONST.SWAGGER_YAML}static getBrowserLocal(){const e=navigator.languages&&navigator.languages[0]||navigator.language||navigator.userLanguage;return e.toLowerCase().split(/[_-]+/)[0]||e}}su=e=>{let t="";const a=e.headers["content-disposition"];if(a&&-1!==a.indexOf("attachment")){const e=/filename[^;=\n]*=((['"]).*?\2|[^;\n]*)/.exec(a);null!=e&&e[1]&&(t=e[1].replace(/['"]/g,""))}const n=e.headers["content-type"],i=new Blob([e.data],{type:n});if(void 0!==window.navigator.msSaveBlob)window.navigator.msSaveBlob(i,t);else{const e=window.URL||window.webkitURL,a=e.createObjectURL(i);if(t){const e=document.createElement("a");void 0===e.download?window.location=a:(e.href=a,e.download=t,document.body.appendChild(e),e.click())}else window.location=a;setTimeout(()=>{e.revokeObjectURL(a)},100)}},(ru="downloadFile")in(iu=yu)?Object.defineProperty(iu,ru,{value:su,enumerable:!0,configurable:!0,writable:!0}):iu[ru]=su,yu.CONST={LOCALSTORAGE_ENVIRONMENT:"environment_store",DCR_APP_INFO:"/login/login",LOGOUT:"/login/logout",LOGIN_TOKEN_PATH:"/login/token",LOGIN_SIGN_UP_PATH:"/login/signup",LOGOUT_CALLBACK:"/services/auth/callback/logout",SWAGGER_YAML:"/api/am/store/v1/swagger.yaml",PROTOCOL:"https://"},yu._environment=void 0;var vu=yu;class Cu{constructor(e,t,a){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=Cu._userMap.get(e);if(i)return i;this.name=t,this._scopes=[],this._idToken=a,this._remember=n,this._isSideBarOpen=!0,Cu._userMap.set(e,this)}get scopes(){return this._scopes}set scopes(e){Object.assign(this.scopes,e)}getPartialToken(){return vu.getCookie(Cu.CONST.WSO2_AM_TOKEN_1)}getRefreshPartialToken(){return vu.getCookie(Cu.CONST.WSO2_AM_REFRESH_TOKEN_1)}setPartialToken(e,t,a){vu.delete_cookie(Cu.CONST.WSO2_AM_TOKEN_1,a),vu.setCookie(Cu.CONST.WSO2_AM_TOKEN_1,e,t,a)}get isSideBarOpen(){return this._isSideBarOpen}set isSideBarOpen(e){this._isSideBarOpen=e}checkPermission(e){throw"Not implemented!"}toJson(){return{name:this.name,scopes:this._scopes,idToken:this._idToken,remember:this._remember,isSideBarOpen:this._isSideBarOpen}}static fromJson(e){if(!e.name)throw"Need to provide user `name` key in the JSON object, to create an user";const t=new Cu(vu.getEnvironment().label,e.name);return t.scopes=e.scopes,t.idToken=e.idToken,t.rememberMe=e.remember,t.isSideBarOpen=e.isSideBarOpen,t}}Cu.CONST={WSO2_AM_TOKEN_MSF4J:"WSO2_AM_TOKEN_MSF4J",WSO2_AM_TOKEN_1:"WSO2_AM_TOKEN_1",WSO2_AM_REFRESH_TOKEN_1:"WSO2_AM_REFRESH_TOKEN_1",LOCALSTORAGE_USER:"wso2_user_store",DEVPORTAL_CLIENT_ID:"CLIENT_ID",DEVPORTAL_SESSION_STATE:"devportal_session_state"},Cu._userMap=new Map;var Au={HTTP_METHODS:["get","put","post","delete","patch","head","options"],errorCodes:{INSUFFICIENT_PREVILEGES:"900403: Insufficient privileges to login",INVALID_TOKEN:"900401: Invalid token"},ISLOGINPERMITTED:"isLoginPermitted",LOGINSTATUS:"loginStatus"};class Su{constructor(){this.isLogged=!1,this.username=null}static unauthorizedErrorHandler(e){if(401!==e.status)throw e;if("undefined"==typeof noty)throw e;noty({text:"The session has expired.<br/> You will be redirect to the login page ...",type:"error",dismissQueue:!0,modal:!0,progressBar:!0,timeout:5e3,layout:"top",theme:"relax",maxVisible:10,callback:{afterClose(){window.location=loginPageUri}}})}static getUser(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vu.getCurrentEnvironment().label;const t=localStorage.getItem("".concat(Cu.CONST.LOCALSTORAGE_USER,"_").concat(e)),a=vu.getCookie(Cu.CONST.WSO2_AM_TOKEN_1,e),n=vu.getCookie(Cu.CONST.WSO2_AM_REFRESH_TOKEN_1,e);return vu.getCookie("IS_LOGIN","DEFAULT")?(vu.deleteCookie("IS_LOGIN",mu.a.app.context,"DEFAULT"),localStorage.removeItem("".concat(Cu.CONST.LOCALSTORAGE_USER,"_").concat(e)),null):t&&(a||n)?Cu.fromJson(JSON.parse(t),e):null}static hasBasicLoginPermission(e){return e.includes("apim:subscribe")}static getUserFromToken(){const e=vu.getCookie(Cu.CONST.WSO2_AM_TOKEN_1);return e?fetch(mu.a.app.context+"/services/auth/introspect",{credentials:"same-origin"}).then(e=>e.json()).then(t=>{let a,n=null;if(!t.active)throw console.warn("User with "+e+" is not active!"),new Error(Au.errorCodes.INVALID_TOKEN);{const i=vu.getCurrentEnvironment();a=t.username,n=new Cu(i.label,a);const r=t.scope.split(" ");if(!this.hasBasicLoginPermission(r))throw console.warn("The user with "+e+" doesn't have enough permission!"),new Error(Au.errorCodes.INSUFFICIENT_PREVILEGES);n.scopes=r,Su.setUser(n,i.label)}return n}):new Promise((e,t)=>t(new Error("No partial token found")))}static setUser(e,t){if(t=t||vu.getEnvironment().label,!(e instanceof Cu))throw new Error("Invalid user object");e&&localStorage.setItem("".concat(Cu.CONST.LOCALSTORAGE_USER,"_").concat(t),JSON.stringify(e.toJson()))}static hasScopes(e,t){const a=Su.getUser();if(a){const n=a.scopes;return Pu.getScopeForResource(e,t).then(e=>n.includes(e))}}authenticateUser(e,t,a){const n={username:e,password:t,grant_type:"password",validity_period:3600,scopes:"apim:subscribe apim:signup apim:workflow_approve apim:sub_alert_manage"},i=fu()(vu.getLoginTokenPath(a),{method:"POST",data:bu.a.stringify(n),headers:{Authorization:"Basic deidwe",Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"},withCredentials:!0}),r=vu.getEnvironment();return vu.setEnvironment(a),i.then(e=>{const{validityPeriod:t}=e.data,a=e.data.partialToken,n=new Cu(vu.getEnvironment().label,e.data.authUser,e.data.idToken);n.setPartialToken(a,t,mu.a.app.context),n.scopes=e.data.scopes.split(" "),Su.setUser(n)}).catch(e=>{console.error("Authentication Error:\n",e),vu.setEnvironment(r)}),i}logout(){const e="Bearer "+Su.getUser().getPartialToken(),t=vu.getAppLogoutURL(),a={Accept:"application/json","Content-Type":"application/json",Authorization:e};return fu.a.post(t,null,{headers:a}).then(e=>{vu.delete_cookie(Cu.CONST.WSO2_AM_TOKEN_1,mu.a.app.context),localStorage.removeItem(Cu.CONST.LOCALSTORAGE_USER),(new Tu).destroyAPIClient(vu.getEnvironment().label)})}static refresh(e){const t={refresh_token:Su.getUser(e.label).getRefreshPartialToken(),validity_period:-1,scopes:Su.CONST.USER_SCOPES},a=-1!==document.referrer.indexOf("https")?document.referrer:null,n=mu.a.app.context+e.refreshTokenPath,i={Accept:"application/json","Content-Type":"application/x-www-form-urlencoded","X-Alt-Referer":a};return fetch(n,{method:"POST",body:bu.a.stringify(t),headers:i})}registerUser(e){const t=fu()(vu.getSignUpTokenPath(e),{method:"POST",data:bu.a.stringify({grant_type:"client_credentials",validity_period:3600,scopes:"apim:self-signup"}),headers:{Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"},withCredentials:!1});return t.then(e=>{const{validityPeriod:t}=e.data,a=e.data.partialToken,n=new Cu(vu.getEnvironment().label,e.data.authUser,e.data.idToken);n.setPartialToken(a,t,mu.a.app.context),n.scopes=e.data.scopes,Su.setUser(n)}).catch(e=>{console.error("Authentication Error: ",e)}),t}}Su.CONST={USER_SCOPES:"apim:api_key apim:app_manage apim:app_update apim:dedicated_gateway apim:self-signup apim:store_settings apim:sub_alert_manage apim:sub_manage apim:subscribe openid"};var Ou=Su;class Du{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.host=e||location.host,this.environment=vu.getCurrentEnvironment();const a={OAuth2Security:{token:{access_token:Ou.getUser()?Ou.getUser().getPartialToken():""}}};cu.a.http.withCredentials=!0;const n=cu.a.resolve({url:vu.getSwaggerURL(),requestInterceptor:e=>{e.headers.Accept="text/yaml"}});Du.spec=n,this._client=n.then(e=>{const n=Object.assign(t,{spec:this._fixSpec(e.spec),authorizations:a,requestInterceptor:this._getRequestInterceptor(),responseInterceptor:this._getResponseInterceptor()});return cu.a.http.withCredentials=!0,new cu.a(n)}),this._client.catch(Ou.unauthorizedErrorHandler),this.mutex=new pu.Mutex}get client(){return this._client}static getETag(e){return sessionStorage.getItem("etag_"+e)}static addETag(e,t){sessionStorage.setItem("etag_"+e,t)}static getScopeForResource(e,t){return Du.spec||(cu.a.http.withCredentials=!0,Du.spec=cu.a.resolve({url:vu.getSwaggerURL()})),Du.spec.then(a=>a.spec.paths[e]&&a.spec.paths[e][t]&&a.spec.paths[e][t].security[0].OAuth2Security[0])}_fixSpec(e){return e.host=this.host,e.security=[{OAuth2Security:["apim:api_subscribe"]}],e}_getResponseInterceptor(){return e=>{if(e.headers.etag&&Du.addETag(e.url,e.headers.etag),401===e.status&&null!=e.obj&&"Unauthenticated request"===e.obj.description){const e=Ou.getUserFromToken();Ou.getUser(this.environment.label)?e.then(e=>{e&&(window.location=mu.a.app.context+vu.CONST.LOGOUT_CALLBACK)}).catch(e=>{console.error("Error occurred while checking token status. Hence redirecting to login",e),window.location=mu.a.app.context+vu.CONST.LOGOUT_CALLBACK}):console.error("Attempted a call to a protected API without a proper access token")}return e}}_getRequestInterceptor(){return e=>{const{location:t}=window;if(t){const{tenant:a}=gu.a.parse(t.search);a&&(e.headers["X-WSO2-Tenant"]=a)}if(!Ou.getUser(this.environment.label))return console.log("User not found. Token refreshing failed."),e;let a=Ou.getUser(this.environment.label).getPartialToken();const n=Ou.getUser(this.environment.label).getRefreshPartialToken();if(a)return e.headers.authorization="Bearer "+a,e;if(console.log("Access token is expired. Trying to refresh."),!n)return console.log("Refresh token not found. Token refreshing failed."),e;const i=this.environment,r=this.mutex.acquire().then(t=>(a=Ou.getUser(i.label).getPartialToken())?(e.headers.authorization="Bearer "+a,t(),e):Ou.refresh(i).then(e=>e.json()).then(()=>(e.headers.authorization="Bearer "+Ou.getUser(i.label).getPartialToken(),e)).catch(e=>{console.error("Error:",e)}).finally(()=>{t()}));return!Du.getETag(e.url)||"PUT"!==e.method&&"DELETE"!==e.method&&"POST"!==e.method||(e.headers["If-Match"]=Du.getETag(e.url)),r}}}Du.spec=null;var Pu=Du;class wu{constructor(){if(wu._instance)return wu._instance;this._APIClientMap=new Map,wu._instance=this}getAPIClient(e){let t=this._APIClientMap.get(e);return t||(t=new Pu(vu.getEnvironment().host),this._APIClientMap.set(e,t),t)}destroyAPIClient(e){this._APIClientMap.delete(e)}}wu._instance=null;var Tu=wu;class xu{static _requestMetaData(){return{requestContentType:(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})["Content-Type"]||"application/json"}}}var Iu=class extends xu{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;super(),this.apiClient=null==e?(new Tu).getAPIClient(vu.getCurrentEnvironment()).client:e}downloadWSDLForEnvironment(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.apiClient.then(a=>a.apis.APIs.getWSDLOfAPI({apiId:e,environmentName:t}))}};class Mu extends xu{constructor(){super(),this.client=(new Tu).getAPIClient(vu.getEnvironment().label).client,this.wsdlClient=new Iu(this.client),this._requestMetaData=xu._requestMetaData}getAllAPIs(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const a=this.client.then(t=>t.apis.APIs.get_apis(e,this._requestMetaData()));return t?a.then(t):a}getAPIById(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const a=this.client.then(t=>t.apis.APIs.get_apis__apiId_({apiId:e},this._requestMetaData()));return t?a.then(t):a}getInlineContentOfDocument(e,t){return this.client.then(a=>{const n={apiId:e,documentId:t};return a.apis["API Documents"].get_apis__apiId__documents__documentId__content(n)})}getDocumentsByAPIId(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const a=this.client.then(t=>t.apis["API Documents"].get_apis__apiId__documents({apiId:e},this._requestMetaData()));return t?a.then(t):a}getDocumentByDocId(e,t){return this.client.then(a=>{const n={apiId:e,documentId:t};return a.apis.Documents.get_apis__apiId__documents__documentId_(n,this._requestMetaData())})}getFileForDocument(e,t){return this.client.then(a=>{const n={apiId:e,documentId:t,Accept:"application/octet-stream"};return a.apis["API Documents"].get_apis__apiId__documents__documentId__content(n,this._requestMetaData({"Content-Type":"multipart/form-data"}))})}getSwaggerByAPIId(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const a=this.client.then(t=>t.apis.APIs.get_apis__apiId__swagger({apiId:e},this._requestMetaData()));return t?a.then(t):a}getGraphQLSchemaByAPIId(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const a=this.client.then(t=>t.apis.APIs.get_apis__apiId__graphql_schema({apiId:e},this._requestMetaData()));return t?a.then(t):a}getSwaggerByAPIIdAndEnvironment(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const n=this.client.then(a=>a.apis.APIs.get_apis__apiId__swagger({apiId:e,environmentName:t},this._requestMetaData()));return a?n.then(a):n}getSwaggerByAPIIdAndLabel(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const n=this.client.then(a=>a.apis.APIs.get_apis__apiId__swagger({apiId:e,labelName:t},this._requestMetaData()));return a?n.then(a):n}getSwaggerByAPIIdAndClusterName(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const n=this.client.then(a=>a.apis.APIs.get_apis__apiId__swagger({apiId:e,clusterName:t},this._requestMetaData()));return a?n.then(a):n}getApplication(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const a=this.client.then(t=>t.apis.Applications.get_applications__applicationId_({applicationId:e},this._requestMetaData()));return t?a.then(t):a}getAllApplications(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:25;const a=this.client.then(e=>e.apis.Applications.get_applications({limit:t},this._requestMetaData()));return e?a.then(e):a}getAllTiers(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const a=this.client.then(t=>t.apis["Throttling Policies"].get_throttling_policies__policyLevel_({policyLevel:e},this._requestMetaData()));return t?a.then(t):a}getAllApplicationAttributes(){return this.client.then(e=>e.apis.Settings.get_settings_application_attributes(this._requestMetaData()))}createApplication(e){return this.client.then(t=>{const a={body:e};return t.apis.Applications.post_applications(a,{"Content-Type":"application/json"})})}updateApplication(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const a=this.client.then(t=>{const a={applicationId:e.applicationId,body:e};return t.apis.Applications.put_applications__applicationId_(a,this._requestMetaData())});return t?a.then(t):a}addComment(e,t){return this.client.then(a=>{const n={apiId:e,body:t};return a.apis.Comments.addCommentToAPI(n,this._requestMetaData())})}getAllComments(e){return this.client.then(t=>t.apis.Comments.getAllCommentsOfAPI({apiId:e},this._requestMetaData()))}deleteComment(e,t){return this.client.then(a=>a.apis.Comments.deleteComment({apiId:e,commentId:t},this._requestMetaData()))}updateComment(e,t,a){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;const i=this.client.then(n=>n.apis["Comment (Individual)"].put_apis__apiId__comments__commentId_({apiId:e,commentId:t,body:a},this._requestMetaData())).catch(e=>{console.error(e)});return n?i.then(n):i}getRatingFromUser(e){return this.client.then(t=>t.apis.Ratings.get_apis__apiId__ratings({apiId:e},this._requestMetaData())).catch(e=>{console.error(e)})}removeRatingOfUser(e){return this.client.then(t=>t.apis.Ratings.delete_apis__apiId__user_rating({apiId:e},this._requestMetaData())).catch(e=>{console.error(e)})}addRating(e,t){return this.client.then(a=>a.apis.Ratings.put_apis__apiId__user_rating({apiId:e,body:t},this._requestMetaData())).catch(e=>{console.error(e)})}generateKeys(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const n=this.client.then(a=>{const n={applicationId:e,body:t};return a.apis.Applications.post_applications__applicationId__generate_keys(n,this._requestMetaData())});return a?n.then(a):n}generateToken(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const n=this.client.then(a=>{const n={applicationId:e,body:t};return a.apis.Applications.post_applications__applicationId__generate_token(n,this._requestMetaData())});return a?n.then(a):n}getKeys(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const a=this.client.then(t=>t.apis.Applications.get_applications__applicationId__keys({applicationId:e},this._requestMetaData()));return t?a.then(t):a}generateApiKey(e,t,a,n){return this.client.then(i=>{const r={applicationId:e,keyType:t,body:{validityPeriod:a,additionalProperties:n}};return i.apis["API Keys"].post_applications__applicationId__api_keys__keyType__generate(r,this._requestMetaData())})}getSubscriptions(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const n={apiId:e};t&&(n[t]=t);const i=this.client.then(e=>e.apis.Subscriptions.get_subscriptions(n,this._requestMetaData()));return a?i.then(a):i}subscribe(e,t,a){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;const i=this.client.then(n=>{let i=null;const r={body:i={apiId:e,applicationId:t,throttlingPolicy:a}};return n.apis.Subscriptions.post_subscriptions(r,{"Content-Type":"application/json"})});return n?i.then(n):i}labels(){return this.client.then(e=>e.apis["Label (Collection)"].get_labels({},this._requestMetaData()))}getSdkLanguages(){return this.client.then(e=>e.apis.SDKs.get_sdk_gen_languages({},this._requestMetaData()))}getSdk(e,t){const a={apiId:e,language:t};return this.client.then(e=>e.apis.SDKs.get_apis__apiId__sdks__language_(a,this._requestMetaData()))}getTierByName(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const n={policyId:e,policyLevel:t},i=this.client.then(e=>e.apis["Throttling Policies"].get_throttling_policies__policyLevel___policyId_(n,this._requestMetaData()));return a?i.then(a):i}createUser(e){const t={body:e};return this.client.then(e=>e.apis["Sign Up"].post_self_signup(t,{"Content-Type":"application/json"}))}getAllTags(){return this.client.then(e=>e.apis.Tags.get_tags(this._requestMetaData())).catch(e=>{console.error(e)})}getAPIThumbnail(e){return this.client.then(t=>t.apis.APIs.get_apis__apiId__thumbnail({apiId:e},this._requestMetaData()))}search(e){return this.client.then(t=>t.apis["Unified Search"].get_search(e,xu._requestMetaData()))}getWsdlClient(){return this.wsdlClient}getSettings(){return this.client.then(e=>e.apis.Settings.get_settings(this._requestMetaData()))}getKeyManagers(){return this.client.then(e=>e.apis["Key Managers (Collection)"].get_key_managers(this._requestMetaData()))}getSupportedAlertTypes(){return this.client.then(e=>e.apis.Alerts.getStoreAlertTypes(this._requestMetaData()))}getSubscribedAlertTypesByUser(){return this.client.then(e=>e.apis["Alert Subscriptions"].getSubscribedAlertTypes(this._requestMetaData()))}subscribeAlerts(e){return this.client.then(t=>t.apis["Alert Subscriptions"].subscribeToAlerts({body:e},this._requestMetaData()))}unsubscribeAlerts(){return this.client.then(e=>e.apis["Alert Subscriptions"].unsubscribeAllAlerts(this._requestMetaData()))}getAlertConfigurations(e){return this.client.then(t=>t.apis["Alert Configuration"].getAllAlertConfigs({alertType:e},this._requestMetaData()))}putAlertConfiguration(e,t,a){return this.client.then(n=>n.apis["Alert Configuration"].addAlertConfig({alertType:e,body:t,configurationId:a},this._requestMetaData()))}deleteAlertConfiguration(e,t){return this.client.then(a=>a.apis["Alert Configuration"].deleteAlertConfig({alertType:e,configurationId:t},this._requestMetaData()))}apiCategories(e){return this.client.then(t=>t.apis["API Category (Collection)"].get_api_categories(e,this._requestMetaData()))}getApiRecommendations(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.client.then(t=>t.apis.Recommendations.get_recommendations(e,this._requestMetaData()))}getGraphqlPoliciesComplexity(e){return this.client.then(t=>t.apis["GraphQL Policies"].get_apis__apiId__graphql_policies_complexity({apiId:e},this._requestMetaData())).then(e=>e.body)}getGraphqlPoliciesComplexityTypes(e){return this.client.then(t=>t.apis["GraphQL Policies"].get_apis__apiId__graphql_policies_complexity_types({apiId:e},this._requestMetaData())).then(e=>e.body)}changePassword(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const n=this.client.then(a=>{const n={currentPassword:e,newPassword:t};return a.apis.Users.changeUserPassword({body:n},this._requestMetaData())});return a?n.then(a):n}}class Ru extends xu{constructor(e,t,a,n){super(),this.id=n?n.applicationId:null,this.client=(new Tu).getAPIClient(vu.getEnvironment().label).client,this.productionKeys=new Map,this.sandboxKeys=new Map,this.productionTokens=new Map,this.sandboxTokens=new Map;for(const e in n)if(n.hasOwnProperty(e)){if("keys"===e){this._setKeys(n[e]);continue}this[e]=n[e]}}_setKeys(e){for(const t of e)"PRODUCTION"===t.keyType?this.productionKeys.set(t.keyManager,t):this.sandboxKeys.set(t.keyManager,t)}_setTokens(e){for(const t of e)"PRODUCTION"===t.keyType?this.productionTokens.set(t.keyManager,t.token):this.sandboxTokens.set(t.keyManager,t.token)}getKeys(e){return this.client.then(e=>e.apis["Application Keys"].get_applications__applicationId__oauth_keys({applicationId:this.applicationId})).then(t=>{const a=t.obj.list;return this._setKeys(a),this._setTokens(a),"PRODUCTION"===e?this.productionKeys:this.sandboxKeys})}generateToken(e,t,a,n){return this.getKeys().then(()=>this.client).then(i=>{let r;const s=(r="PRODUCTION"===t?this.productionKeys.get(e):this.sandboxKeys.get(e)).keyMappingId;let o;o="PRODUCTION"===t?this.productionTokens.get(e):this.sandboxTokens.get(e);const l={consumerSecret:r.consumerSecret,validityPeriod:a,revokeToken:o.accessToken,scopes:n,additionalProperties:r.additionalProperties},c={applicationId:this.id,keyMappingId:s,body:l};return i.apis["Application Tokens"].post_applications__applicationId__oauth_keys__keyMappingId__generate_token(c)}).then(a=>{const n=a.obj;return"PRODUCTION"===t?this.productionTokens.set(e,n):this.sandboxTokens.set(e,n),n})}generateKeys(e,t,a,n,i){return this.client.then(r=>{const s={keyType:e,grantTypesToBeSupported:t,callbackUrl:a,additionalProperties:n,keyManager:i,validityTime:3600,scopes:["default"]},o={applicationId:this.id,body:s};return r.apis["Application Keys"].post_applications__applicationId__generate_keys(o)}).then(t=>"PRODUCTION"===e?(this.productionKeys.set(i,t.obj),this.productionKeys.get(i)):(this.sandboxKeys.set(i,t.obj),this.sandboxKeys.get(i)))}cleanUpKeys(e,t,a){const n={keyType:e,keyMappingId:a,keyManager:t},i={applicationId:this.id,keyMappingId:a,body:n};return this.client.then(e=>e.apis["Application Keys"].post_applications__applicationId__oauth_keys__keyMappingId__clean_up(i)).then(t=>("PRODUCTION"===e?this.productionKeys=new Map:this.sandboxKeys=new Map,t.ok))}updateKeys(e,t,a,n,i,r,s,o,l){return this.client.then(c=>{const p={keyManager:o,keyMappingId:l,consumerKey:i,consumerSecret:r,supportedGrantTypes:a,callbackUrl:n,keyType:t,tokenType:e,additionalProperties:s},d={applicationId:this.id,keyMappingId:l,body:p};return c.apis["Application Keys"].put_applications__applicationId__oauth_keys__keyMappingId_(d)}).then(e=>"PRODUCTION"===t?(this.productionKeys.set(o,e.obj),this.productionKeys.get(o)):(this.sandboxKeys.set(o,e.obj),this.sandboxKeys.get(o)))}regenerateSecret(e,t,a,n){const i={keyManager:n,keyMappingId:a,consumerKey:e,keyType:t};return this.client.then(e=>{const t={applicationId:this.id,keyMappingId:a,body:i};return e.apis["Application Keys"].post_applications__applicationId__oauth_keys__keyMappingId__regenerate_secret(t)}).then(e=>{const a=e.obj;return"PRODUCTION"===t?this.productionKeys.set(n,e.obj):this.sandboxKeys.set(n,e.obj),a})}provideKeys(e,t,a,n){return this.client.then(i=>{const r={consumerKey:t,consumerSecret:a,keyType:e,keyManager:n},s={applicationId:this.id,body:r};return i.apis["Application Keys"].post_applications__applicationId__map_keys(s)}).then(t=>"PRODUCTION"===e?(this.productionKeys.set(n,t.obj),this.productionKeys.get(n)):(this.sandboxKeys.set(n,t.obj),this.sandboxKeys.get(n)))}static get(e){return(new Tu).getAPIClient(vu.getEnvironment()).client.then(t=>t.apis.Applications.get_applications__applicationId_({applicationId:e},this._requestMetaData())).then(e=>{const t=e.obj;return new Ru(t.name,t.description,t.throttlingTier,t)})}static all(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"asc",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"name",i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";return(new Tu).getAPIClient(vu.getEnvironment()).client.then(r=>r.apis.Applications.get_applications({limit:e,offset:t,sortOrder:a,sortBy:n,query:i},this._requestMetaData())).then(e=>e.obj)}static deleteApp(e){return(new Tu).getAPIClient(vu.getEnvironment()).client.then(t=>t.apis.Applications.delete_applications__applicationId_({applicationId:e},this._requestMetaData())).then(e=>e.ok)}}Ru.KEY_TYPES={PRODUCTION:"PRODUCTION",SANDBOX:"SANDBOX"},Ru.TOKEN_TYPES={JWT:{key:"JWT",displayName:"Self-contained (JWT)"},OAUTH:{key:"OAUTH",displayName:"Reference (Opaque)"}};var ku=a(551);var Nu=Object(ku.a)(e=>({centerItems:{margin:"auto"},tryoutHeading:{marginTop:e.spacing(1),fontWeight:400},menuItem:{color:e.palette.getContrastText(e.palette.background.paper)}}))(e=>{let{selectedApplication:t,selectedKeyType:a}=e;const{subscriptions:n,handleChanges:r,classes:s}=e,o=e=>{const{target:n}=e,{name:i,value:s}=n;switch(i){case"selectedApplication":t=s;break;case"selectedKeyType":a=s}r(e)};return i.a.createElement(i.a.Fragment,null,i.a.createElement(Nm.a,{x:12,md:6,className:s.centerItems},i.a.createElement(Bm.a,{fullWidth:!0,id:"selected-application",select:!0,label:i.a.createElement(km.a,{defaultMessage:"Applications",id:"Apis.Details.ApiConsole.SelectAppPanel.applications"}),value:t,name:"selectedApplication",onChange:o,SelectProps:n,helperText:i.a.createElement(km.a,{defaultMessage:"Subscribed applications",id:"Apis.Details.ApiConsole.SelectAppPanel.select.subscribed.application"}),margin:"normal",variant:"outlined"},n.map(e=>i.a.createElement($m.a,{value:e.applicationInfo.applicationId,key:e.applicationInfo.applicationId,className:s.menuItem},e.applicationInfo.name)))),i.a.createElement(Nm.a,{x:12,md:6,className:s.centerItems},i.a.createElement(jm.a,{variant:"h6",color:"textSecondary",className:s.tryoutHeading},i.a.createElement(km.a,{id:"Apis.Details.ApiConsole.SelectAppPanel.select.key.type.heading",defaultMessage:"Key Type"})),i.a.createElement(Fm.a,{component:"fieldKeyType"},i.a.createElement(zm.a,{name:"selectedKeyType",value:a,onChange:o,row:!0},null!=n&&"UNBLOCKED"===n.find(e=>e.applicationId===t).status&&i.a.createElement(Vm.a,{value:"PRODUCTION",control:i.a.createElement(Hm.a,null),label:i.a.createElement(km.a,{id:"Apis.Details.ApiConsole.SelectAppPanel.production.radio",defaultMessage:"Production"})}),i.a.createElement(Vm.a,{value:"SANDBOX",control:i.a.createElement(Hm.a,null),label:i.a.createElement(km.a,{id:"Apis.Details.ApiConsole.SelectAppPanel.sandbox.radio",defaultMessage:"Sandbox"})})))))});const ju=Object(Um.a)(e=>({centerItems:{margin:"auto"},tokenType:{margin:"auto",display:"flex","& .MuiButton-contained.Mui-disabled span.MuiButton-label":{color:"#999999"}},paper:{margin:e.spacing(1),padding:e.spacing(1)},grid:{marginTop:e.spacing(4),marginBottom:e.spacing(4),paddingRight:e.spacing(2),justifyContent:"center"},tryoutHeading:{fontWeight:400},genKeyButton:{width:e.spacing(20),height:e.spacing(5),marginTop:e.spacing(2.5),marginLeft:e.spacing(2)},gatewayEnvironment:{marginTop:e.spacing(4)},categoryHeading:{marginBottom:e.spacing(2),marginLeft:e.spacing(-5)},tooltip:{marginLeft:e.spacing(1)},menuItem:{color:e.palette.getContrastText(e.palette.background.paper)},warningIcon:{color:"#ff9a00",fontSize:25,marginRight:10}}));function _u(e){const{securitySchemeType:t,selectedEnvironment:a,environments:r,containerMngEnvironments:s,labels:l,productionAccessToken:c,sandboxAccessToken:p,selectedKeyType:d,setKeys:m,setSelectedKeyType:u,setSelectedKeyManager:g,setSelectedEnvironment:h,setProductionAccessToken:f,setSandboxAccessToken:E,scopes:b,setSecurityScheme:y,setUsername:v,setPassword:C,username:A,password:S,updateSwagger:O,setProductionApiKey:D,setSandboxApiKey:P,productionApiKey:w,sandboxApiKey:T,environmentObject:x,setURLs:I,api:M}=e;let{selectedKeyManager:R}=e;R=R||"Resident Key Manager";const k=ju(),[N,j]=Object(n.useState)(!1),[_,L]=Object(n.useState)(!1),[q,W]=Object(n.useState)(!1),[U,B]=Object(n.useState)([]),[F,z]=Object(n.useState)([]),[V,H]=Object(n.useState)([]),[G,K]=Object(n.useState)(null),[Y,J]=Object(n.useState)(!1),Q=M.id,Z=new Mu;function X(e){const{target:a}=e,{name:n,value:i}=a;switch(n){case"selectedEnvironment":if(h(i,!0),O(i),x){const e=x.find(e=>i===e.environmentName).URLs;I(e)}break;case"selectedApplication":f(""),E(""),D(""),P(""),z(i);break;case"selectedKeyManager":g(i,!0,F);break;case"selectedKeyType":u(i,!c||!p,F);break;case"securityScheme":y(i);break;case"username":v(i);break;case"password":C(i);break;case"accessToken":"API-KEY"===t&&"PRODUCTION"===d?D(i):"API-KEY"===t&&"SANDBOX"===d?P(i):"PRODUCTION"===d?f(i):E(i)}}Object(n.useEffect)(()=>{let e,t,n,i="PRODUCTION";if(M.lifeCycleStatus&&"prototyped"!==M.lifeCycleStatus.toLowerCase()){Z.getSubscriptions(Q).then(r=>{null!==r&&(e=r.obj.list.filter(e=>"UNBLOCKED"===e.status||"PROD_ONLY_BLOCKED"===e.status))&&e.length>0?(t=e[0].applicationId,Ru.get(t).then(e=>e.getKeys()).then(r=>{r.get(R)&&"SANDBOX"===r.get(R).keyType?(i="SANDBOX",({accessToken:n}=r.get(R).token)):r.get(R)&&"PRODUCTION"===r.get(R).keyType&&(i="PRODUCTION",({accessToken:n}=r.get(R).token)),z(t),B(e),m(r),h(a,!1),u(i,!1),"PRODUCTION"===d?f(n):E(n)})):(z(t),B(e),m(void 0),h(a,!1),"PRODUCTION"===d?f(n):E(n),u(d,!1))}).catch(e=>{const{status:t}=e;404===t&&W(!0)}),Z.getKeyManagers().then(e=>{const t=[];e.body.list.map(e=>t.push(e)),H(t);const a=t.filter(e=>e.name===R);a&&a.length>0&&K(a[0])}).catch(e=>{const{status:t}=e;404===t&&W(!0)})}},[]),Object(n.useEffect)(()=>{!function(){if(M.lifeCycleStatus&&"prototyped"!==M.lifeCycleStatus.toLowerCase()){let e,t;null!==U&&0!==U.length&&0!==F.length&&("PROD_ONLY_BLOCKED"===U.find(e=>e.applicationId===F).status?(u(d,!1),t="SANDBOX"):t=d),Ru.get(F).then(e=>e.getKeys(t||"PRODUCTION")).then(t=>{const a=t.get(R);a&&a.keyType===d&&({accessToken:e}=a.token),a&&"PRODUCTION"===a.keyType?f(e):a&&"SANDBOX"===a.keyType&&E(e),a&&a.consumerKey&&""!==a.consumerKey?J(!0):J(!1),m(t)})}}()},[F,d,a,t]);const $=o.a.getUser();if(null==M)return i.a.createElement(ou,null);if(q)return"API Not found !";let ee=!1,te=!1,ae=!1,ne=!1,ie=M.authorizationHeader?M.authorizationHeader:"Authorization",re="Bearer";M&&M.securityScheme&&(ee=M.securityScheme.includes("api_key"),te=M.securityScheme.includes("basic_auth"),ae=M.securityScheme.includes("oauth2"),ne=M.securityScheme.includes("test_auth"),ee&&"API-KEY"===t&&(ie="apikey",re=""),ne&&"TEST"===t&&(ie="testKey",re=""));const se=M.lifeCycleStatus&&"prototyped"===M.lifeCycleStatus.toLowerCase(),oe="published"===M.lifeCycleStatus.toLowerCase()||se&&!0===M.enableStore;let le="";le="API-KEY"===t?"PRODUCTION"===d?w:T:"PRODUCTION"===d?c:p;const ce=[];s&&s.filter(e=>e.clusterDetails.length>0).forEach(e=>{ce.push(i.a.createElement($m.a,{value:"",disabled:!0,className:k.menuItem},i.a.createElement("em",null,e.deploymentEnvironmentName))),e.clusterDetails.forEach(e=>{ce.push(i.a.createElement($m.a,{value:e.clusterName,key:e.clusterName,className:k.menuItem},e.clusterDisplayName))})});const pe="".concat(ie,": ").concat(re);return i.a.createElement(km.b,{locale:"en"},i.a.createElement(Nm.a,{x:12,md:6,className:k.centerItems},i.a.createElement(tu.a,null,"TEST"!==t&&i.a.createElement(i.a.Fragment,null,i.a.createElement(jm.a,{variant:"h5",color:"textPrimary",className:k.categoryHeading},i.a.createElement(km.a,{id:"api.console.security.heading",defaultMessage:"Security"})),i.a.createElement(tu.a,{mb:1},i.a.createElement(jm.a,{variant:"body1"},i.a.createElement(tu.a,{display:"flex",alignItems:"center"},G&&G.enabled&&i.a.createElement(km.a,{id:"Apis.Details.ApiConsole.TryOutController.default.km.msg.one",defaultMessage:"The Resident Key Manager is selected for try out console."}),G&&!G.enabled&&i.a.createElement(i.a.Fragment,null,i.a.createElement(nu.a,{className:k.warningIcon}),i.a.createElement("div",null,i.a.createElement(km.a,{id:"Apis.Details.ApiConsole.TryOutController.default.km.msg.two",defaultMessage:"Try it console is only accessible via the default key manager.But the default key manager is disabled at the moment."}))),G&&0===G.length&&i.a.createElement(km.a,{id:"Apis.Details.ApiConsole.TryOutController.default.km.msg.three",defaultMessage:"Try it console is only accessible via the default key manager.Something went wrong while selecting the default Key manager."})))),i.a.createElement(jm.a,{variant:"h6",color:"textSecondary",className:k.tryoutHeading},i.a.createElement(km.a,{id:"api.console.security.type.heading",defaultMessage:"Security Type"}))),(ee||te||ae)&&oe&&i.a.createElement(Fm.a,{component:"fieldset"},i.a.createElement(zm.a,{name:"securityScheme",value:t,onChange:X,row:!0},i.a.createElement(Vm.a,{value:"OAUTH",disabled:!ae,control:i.a.createElement(Hm.a,null),label:i.a.createElement(km.a,{id:"Apis.Details.ApiConsole.security.scheme.oauth",defaultMessage:"OAuth"})}),i.a.createElement(Vm.a,{value:"API-KEY",disabled:!ee,control:i.a.createElement(Hm.a,null),label:i.a.createElement(km.a,{id:"Apis.Details.ApiConsole.security.scheme.apikey",defaultMessage:"API Key"})}),i.a.createElement(Vm.a,{value:"BASIC",disabled:!te,control:i.a.createElement(Hm.a,null),label:i.a.createElement(km.a,{id:"Apis.Details.ApiConsole.security.scheme.basic",defaultMessage:"Basic"})}))))),!se&&i.a.createElement(Nm.a,{xs:12,md:12,item:!0},i.a.createElement(tu.a,{display:"block"},$&&U&&U.length>0&&"BASIC"!==t&&"TEST"!==t&&i.a.createElement(Nu,{subscriptions:U,handleChanges:X,selectedApplication:F,selectedKeyManager:R,selectedKeyType:d,keyManagers:V}),U&&0===U.length&&"TEST"!==t?i.a.createElement(Nm.a,{x:8,md:6,className:k.tokenType,item:!0},i.a.createElement(tu.a,{mb:1,alignItems:"center"},i.a.createElement(jm.a,{variant:"body1"},i.a.createElement(tu.a,{display:"flex"},i.a.createElement(nu.a,{className:k.warningIcon}),i.a.createElement("div",null,i.a.createElement(km.a,{id:"Apis.Details.ApiConsole.ApiConsole.subscribe.to.application",defaultMessage:"Please subscribe to an application"})))))):!Y&&i.a.createElement(Nm.a,{x:8,md:6,className:k.tokenType,item:!0},i.a.createElement(tu.a,{mb:1,alignItems:"center"},i.a.createElement(jm.a,{variant:"body1"},i.a.createElement(tu.a,{display:"flex"},i.a.createElement(nu.a,{className:k.warningIcon}),i.a.createElement("div",null,i.a.createElement(km.a,{id:"Apis.Details.ApiConsole.ApiConsole.keys.not.generated",defaultMessage:"Consumer key and secret not generated for the selected application on the {what} environment. ",values:{what:d}})))))),i.a.createElement(tu.a,{display:"block",justifyContent:"center"},i.a.createElement(Nm.a,{x:8,md:6,className:k.tokenType,item:!0},"BASIC"===t&&i.a.createElement(i.a.Fragment,null,i.a.createElement(Nm.a,{x:12,md:12,item:!0},i.a.createElement(Bm.a,{margin:"normal",variant:"outlined",label:i.a.createElement(km.a,{id:"username",defaultMessage:"Username"}),name:"username",onChange:X,value:A||"",fullWidth:!0}),i.a.createElement(Bm.a,{margin:"normal",variant:"outlined",label:i.a.createElement(km.a,{id:"password",defaultMessage:"Password"}),name:"password",onChange:X,value:S||"",fullWidth:!0}))),"BASIC"!==t&&"TEST"!==t&&i.a.createElement(Bm.a,{fullWidth:!0,margin:"normal",variant:"outlined",label:i.a.createElement(km.a,{id:"access.token",sdefaultMessage:"Access Token"}),name:"accessToken",onChange:X,type:N?"text":"password",value:le||"",helperText:i.a.createElement(km.a,{id:"enter.access.token",defaultMessage:"Enter access Token"}),id:"accessTokenInput",InputProps:{endAdornment:i.a.createElement(Zm.a,{position:"end"},i.a.createElement(Qm.a,{edge:"end","aria-label":"Toggle token visibility",onClick:function(){j(!N)}},N?i.a.createElement(Xm.a,null,"visibility_off"):i.a.createElement(Xm.a,null,"visibility"))),startAdornment:i.a.createElement(Zm.a,{style:{minWidth:7*pe.length},position:"start"},"".concat(ie,": ").concat(re))}}),"BASIC"!==t&&"TEST"!==t&&i.a.createElement(i.a.Fragment,null,i.a.createElement(eu.a,{onClick:"API-KEY"===t?function(){M.lifeCycleStatus&&"prototyped"!==M.lifeCycleStatus.toLowerCase()&&(L(!0),Z.generateApiKey(F,d,-1).then(e=>{console.log("Non empty response received",e),j(!1),"PRODUCTION"===d?D(e.body.apikey):P(e.body.apikey),L(!1)}).catch(e=>{console.log(e);const{status:t}=e;404===t&&W(!0),L(!1)}))}:function(){M.lifeCycleStatus&&"prototyped"!==M.lifeCycleStatus.toLowerCase()&&(L(!0),Ru.get(F).then(e=>e.generateToken(R,d,3600,b)).then(e=>{console.log("token generated successfully "+e),j(!1),"PRODUCTION"===d?f(e.accessToken):E(e.accessToken),L(!1)}).catch(e=>{console.error(e);const{status:t}=e;404===t&&W(!0),L(!1)}))},variant:"contained",className:k.genKeyButton,disabled:!$||U&&0===U.length||!Y},_&&i.a.createElement(Gm.a,{size:15}),i.a.createElement(km.a,{id:"Apis.Details.ApiCOnsole.generate.test.key",defaultMessage:"GET TEST KEY "})),i.a.createElement(Km.a,{placement:"right",interactive:!0,title:i.a.createElement(km.a,{id:"Apis.Details.TryOutConsole.access.token.tooltip",defaultMessage:"You can use your existing Access Token or you can generate a new Test Key."})},i.a.createElement(tu.a,{m:1,mt:2},i.a.createElement(Qm.a,{"aria-label":"Use existing Access Token or generate a new Test Key"},i.a.createElement(Jm.a,null))))))),i.a.createElement(tu.a,{display:"flex",justifyContent:"center",className:k.gatewayEnvironment},i.a.createElement(Nm.a,{xs:12,md:6,item:!0},(r&&r.length>0||ce.length>0||l&&l.length>0)&&i.a.createElement(i.a.Fragment,null,i.a.createElement(jm.a,{variant:"h5",color:"textPrimary",className:k.categoryHeading},i.a.createElement(km.a,{id:"api.console.gateway.heading",defaultMessage:"Gateway"})),i.a.createElement(Bm.a,{fullWidth:!0,select:!0,label:i.a.createElement(km.a,{defaultMessage:"Environment",id:"Apis.Details.ApiConsole.environment"}),value:a||r&&r[0],name:"selectedEnvironment",onChange:X,helperText:i.a.createElement(km.a,{defaultMessage:"Please select an environment",id:"Apis.Details.ApiConsole.SelectAppPanel.environment"}),margin:"normal",variant:"outlined"},r&&r.length>0&&i.a.createElement($m.a,{value:"",disabled:!0,className:k.menuItem},i.a.createElement("em",null,i.a.createElement(km.a,{id:"api.gateways",defaultMessage:"API Gateways"}))),r&&r.map(e=>i.a.createElement($m.a,{value:e,key:e,className:k.menuItem},e)),ce,l&&l.length>0&&i.a.createElement($m.a,{value:"",disabled:!0},i.a.createElement("em",null,i.a.createElement(km.a,{id:"gateways",defaultMessage:"Gateways",className:k.menuItem}))),l&&l.map(e=>i.a.createElement($m.a,{value:e,key:e,className:k.menuItem},e)))))))))}_u.propTypes={classes:Lm.a.shape({paper:Lm.a.string.isRequired,grid:Lm.a.string.isRequired,inputAdornmentStart:Lm.a.string.isRequired,centerItems:Lm.a.string.isRequired}).isRequired};var Lu=Wm()(Um.a)(_u),qu=(a(3147),a(3149)),Wu=a.n(qu);const Uu=function(){return{wrapComponents:{info:()=>()=>null,authorizeBtn:()=>()=>null}}},Bu=e=>{const{spec:t,accessTokenProvider:a,authorizationHeader:n,api:r,securitySchemeType:s}=e,o={spec:t,validatorUrl:null,defaultModelsExpandDepth:-1,docExpansion:"list",requestInterceptor:e=>{const{url:t}=e,{context:i}=r,o="".concat(i,"/*");if(e.headers[n]="apikey"===n?a():"BASIC"===s?"Basic "+a():"TEST"===s?a():"Bearer "+a(),t.endsWith(o))e.url=t.substring(0,t.length-2);else if(t.includes(o+"?")){const a=t.split("/*?");e.url=a.length>1?a[0]+"?"+a[1]:a[0]}return e},defaultModelExpandDepth:-1,plugins:[Uu]};return i.a.createElement(Wu.a,o)};Bu.propTypes={accessTokenProvider:Lm.a.func.isRequired,authorizationHeader:Lm.a.string.isRequired,api:Lm.a.shape({context:Lm.a.string.isRequired}).isRequired,spec:Lm.a.string.isRequired};var Fu=Bu,zu=a(3326),Vu=a.n(zu);class Hu extends i.a.Component{constructor(e){super(e),function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(this,"handleClick",()=>{const{apiObj:e}=this.props;X.a.updateLcState(e.id,"Deploy as a Prototype").then(t=>{const a=t.body.lifecycleState.state;console.log("new life cycle state"+a),this.context.updateAPI(),X.a.get(e.id).then(e=>{const t=e;t.enableStore=!1;const a=Vu()();t.testKey=a,this.context.updateAPI({enableStore:!1,testKey:a})}).catch(e=>{console.error(e)})}).catch(e=>{console.error(e)})}),this.state={securitySchemeType:"TEST",username:"",password:"",scopes:[],selectedKeyType:"PRODUCTION",keys:[]},this.accessTokenProvider=this.accessTokenProvider.bind(this),this.updateSwagger=this.updateSwagger.bind(this),this.setSecurityScheme=this.setSecurityScheme.bind(this),this.setSelectedEnvironment=this.setSelectedEnvironment.bind(this),this.setProductionAccessToken=this.setProductionAccessToken.bind(this),this.setSandboxAccessToken=this.setSandboxAccessToken.bind(this),this.setUsername=this.setUsername.bind(this),this.setPassword=this.setPassword.bind(this),this.setSelectedKeyType=this.setSelectedKeyType.bind(this),this.setKeys=this.setKeys.bind(this),this.updateAccessToken=this.updateAccessToken.bind(this),this.WORKFLOW_STATUS={CREATED:"CREATED",APPROVED:"APPROVED"}}componentDidMount(){const{apiObj:e}=this.props;let t,a,n,i,r,s,l,c,p,d;const m=o.a.getUser();X.a.getAPIById(e.id).then(e=>{s=e.obj.id,(t=e.obj).gatewayEnvironments&&(a=t.gatewayEnvironments.map(e=>e));const r=t.securityScheme;if(r.push("test_auth"),r.shift(),t.endpointURLs&&(a=t.endpointURLs.map(e=>e.environmentName)),t.labels&&(n=t.labels.map(e=>e.name)),t.scopes){const e=t.scopes.map(e=>e.name);this.setState({scopes:e})}return a&&a.length>0?([i]=a,X.a.getSwaggerByAPIIdAndEnvironment(e.obj.id,i)):n&&n.length>0?([i]=n,X.a.getSwaggerByAPIIdAndLabel(e.obj.id,i)):X.a.getSwaggerByAPIId(e.obj.id)}).then(e=>(r=e.obj,null!=m?(this.setState({api:t,swagger:r,environments:a,labels:n,productionAccessToken:void 0,sandboxAccessToken:void 0}),X.a.getSubscriptions(s)):null)).catch(e=>{this.setState({serverError:"".concat(e.statusCode," - ").concat(e.response.body.description)})});const u=X.a.getSettings(),g=[];u.then(e=>{e.environment&&(l=e.environment.map(e=>e.endpoints),c=l.map(e=>e.http),p=l.map(e=>e.https),d=t.context+"/"+t.version,g.push({url:p+t.context+"/"+t.version}),g.push({url:c+t.context+"/"+t.version})),this.setState({settings:g,host:p[0].split("//")[1],baseUrl:d})})}setSecurityScheme(e){this.setState({securitySchemeType:e})}setSelectedEnvironment(e){this.setState({selectedEnvironment:e})}setProductionAccessToken(e){this.setState({productionAccessToken:e})}setSandboxAccessToken(e){this.setState({sandboxAccessToken:e})}setUsername(e){this.setState({username:e})}setPassword(e){this.setState({password:e})}setSelectedKeyType(e,t){t?this.setState({selectedKeyType:e},this.updateAccessToken):this.setState({selectedKeyType:e})}setKeys(e){this.setState({keys:e})}updateSwagger(){const{selectedEnvironment:e,api:t,environments:a}=this.state;let n;(n=e?a.includes(e)?X.a.getSwaggerByAPIIdAndEnvironment(t.id,e):X.a.getSwaggerByAPIIdAndLabel(t.id,e):X.a.getSwaggerByAPIId(t.id)).then(e=>{this.setState({swagger:e.obj})})}accessTokenProvider(){const{securitySchemeType:e,username:t,password:a,productionAccessToken:n,sandboxAccessToken:i,selectedKeyType:r}=this.state;if("BASIC"===e){return btoa(t+":"+a)}return"TEST"===e?this.state.api.testKey:"PRODUCTION"===r?n:i}updateAccessToken(){const{keys:e,selectedKeyType:t}=this.state;let a;e.get(t)&&({accessToken:a}=e.get(t).token),"PRODUCTION"===t?this.setProductionAccessToken(a):this.setSandboxAccessToken(a)}render(){const{classes:e}=this.props,{swagger:t,api:a,securitySchemeType:n,selectedEnvironment:r,productionAccessToken:s,sandboxAccessToken:l,labels:c,environments:p,scopes:d,username:m,password:u,selectedKeyType:g,serverError:h,settings:f,host:E,baseUrl:b}=this.state;if(h)return i.a.createElement(J.a,{variant:"h4",className:e.titleSub},h);if(!a||!t||!f)return i.a.createElement(wc.a,null);let y=a.authorizationHeader?a.authorizationHeader:"Authorization";y="testkey",t.openapi?t.servers=f:(t.host=E,t.basePath=b,t.schemes=["https"]);const v="prototyped"===a.lifeCycleStatus.toLowerCase(),C=!1===a.enableStore;return i.a.createElement(i.a.Fragment,null,!v&&i.a.createElement(i.a.Fragment,null,i.a.createElement(J.a,{variant:"h4",align:"left",className:e.mainTitle},i.a.createElement(W.a,{id:"Apis.Details.index.Tryout",defaultMessage:"Test Console"})),i.a.createElement(J.a,{variant:"caption",component:"div",className:e.helpText},i.a.createElement(W.a,{id:"APis.Details.tryout.help.main",defaultMessage:"Test APIs while in the Development stage."})),i.a.createElement("div",{className:e.messageBox},i.a.createElement(Yi.a,{type:"info",height:140},i.a.createElement("div",{className:e.contentWrapper},i.a.createElement(J.a,{variant:"h5",component:"h3",className:e.head},i.a.createElement(W.a,{id:"Apis.Details.tryout.title",defaultMessage:"Start Testing"})),i.a.createElement(J.a,{component:"p"},i.a.createElement(W.a,{id:"Apis.Details.tryout.initialize.test",defaultMessage:"Initialize the API for the testing phase"})),i.a.createElement("div",{className:e.actions},i.a.createElement(je.a,{variant:"contained",color:"primary",className:e.button,disabled:Object(o.b)(["apim:api_create","apim:api_publish"],a),onClick:this.handleClick},i.a.createElement(W.a,{id:"Apis.Details.index.initTest",defaultMessage:"Initialize test"}))))))),v&&C&&i.a.createElement(de.a,{className:e.paper},i.a.createElement(J.a,{variant:"h4",className:e.titleSub},i.a.createElement(W.a,{id:"Apis.Details.index.Tryout",defaultMessage:"Test Console"})),i.a.createElement(Lu,{setSecurityScheme:this.setSecurityScheme,securitySchemeType:n,setSelectedEnvironment:this.setSelectedEnvironment,selectedEnvironment:r,productionAccessToken:s,setProductionAccessToken:this.setProductionAccessToken,sandboxAccessToken:l,setSandboxAccessToken:this.setSandboxAccessToken,swagger:t,labels:c,environments:p,scopes:d,setUsername:this.setUsername,setPassword:this.setPassword,username:m,password:u,setSelectedKeyType:this.setSelectedKeyType,selectedKeyType:g,updateSwagger:this.updateSwagger,setKeys:this.setKeys,api:this.state.api}),i.a.createElement(Fu,{api:this.state.api,accessTokenProvider:this.accessTokenProvider,spec:t,authorizationHeader:"testkey",securitySchemeType:n})),v&&!C&&i.a.createElement(yi.a,{disableActions:!0,dense:!0,paperProps:{elevation:1},type:"info",message:"API should be in prototype(testing) state. Please demote to created state and click on the initialize Test button in the Test Console left menu item."}))}}Hu.propTypes={classes:s.a.shape({paper:s.a.string.isRequired,titleSub:s.a.string.isRequired,grid:s.a.string.isRequired,userNotificationPaper:s.a.string.isRequired,buttonIcon:s.a.string.isRequired,lcState:s.a.shape({}).isRequired,theme:s.a.shape({}).isRequired,intl:s.a.shape({formatMessage:s.a.func}).isRequired}).isRequired},Hu.contextType=ue.c;var Gu=Object(ue.e)(Object(q.a)(e=>({centerItems:{margin:"auto"},categoryHeading:{marginBottom:e.spacing(2),marginLeft:e.spacing(-5)},contentWrapper:{maxWidth:e.custom.contentAreaWidth},buttonIcon:{marginRight:10},paper:{margin:e.spacing(1),padding:e.spacing(1),"& span, & h5, & label, & td, & li, & div, & input":{color:e.palette.getContrastText(e.palette.background.paper)}},grid:{marginTop:e.spacing(4),marginBottom:e.spacing(4),paddingRight:e.spacing(2),justifyContent:"center"},userNotificationPaper:{padding:e.spacing(2)},titleSub:{marginLeft:e.spacing(2),paddingTop:e.spacing(2),paddingBottom:e.spacing(2),color:e.palette.getContrastText(e.palette.background.default)},tryoutHeading:{fontWeight:400},noDataMessage:{display:"flex",alignItems:"center",justifyContent:"center",color:"#888888",width:"100%"},swaggerUIPaper:{showTryout:!0,swaggerUIBackground:"#efefef",documentBackground:"#efefef",tokenTextBoxBackground:"#efefef"},stateButton:{marginRight:e.spacing()},head:{fontWeight:200,marginBottom:20},emptyBox:{marginTop:e.spacing(2)},content:{display:"flex",flex:1,flexDirection:"column",marginLeft:e.custom.leftMenuWidth,paddingBottom:e.spacing(3)},actions:{padding:"20px 0","& button":{marginLeft:0}},helpText:{paddingTop:e.spacing(1)},messageBox:{marginTop:20}}))(Hu));class Ku extends n.Component{static isValidURL(e){for(const[t,a]of Object.entries(Ku.subPaths))if("BASE"!==t&&"BASE_PRODUCT"!==t){const t=Object(U.matchPath)(e,a);if(t)return t}return!1}constructor(e){super(e);this.state={api:null,apiNotFound:!1,isAPIProduct:null,imageUpdate:0},this.setAPI=this.setAPI.bind(this),this.setAPIProduct=this.setAPIProduct.bind(this),this.updateAPI=this.updateAPI.bind(this),this.setImageUpdate=this.setImageUpdate.bind(this)}componentDidMount(){const{location:{pathname:e},isAPIProduct:t}=this.props;if(Ku.isValidURL(e)){t?this.setAPIProduct():this.setAPI(),(new X.a).getTenantsByState("active").then(e=>{const{list:t}=e.body;this.setState({tenantList:t})}).catch(e=>{console.error("error when getting tenants "+e)})}}componentDidUpdate(){const{api:e}=this.state,{match:t,isAPIProduct:a}=this.props,{apiUUID:n}=t.params,{apiProdUUID:i}=t.params;e&&e.id!==n&&e.id!==i&&(a?this.setAPIProduct():this.setAPI())}setImageUpdate(){this.setState(e=>({imageUpdate:e.imageUpdate+1}))}setAPI(e){if(e)this.setState({api:e});else{const{match:e}=this.props,{apiUUID:t}=e.params;X.a.get(t).then(e=>{this.setState({api:e})}).catch(e=>{const{status:t}=e;404===t?this.setState({apiNotFound:!0}):401===t&&Object(ae.doRedirectToLogin)()})}}setAPIProduct(){const{match:e}=this.props,{apiProdUUID:t}=e.params,{isAPIProduct:a}=this.props;$.a.get(t).then(e=>{this.setState({isAPIProduct:a}),this.setState({api:e})}).catch(e=>{const{status:t}=e;404===t&&this.setState({apiNotFound:!0})})}getLeftMenuItemForDefinitionByType(e){const{isAPIProduct:t}=this.state,{intl:a,match:n}=this.props,r="/"+(t?"api-products":"apis")+"/"+(n.params.apiUUID||n.params.api_uuid||n.params.apiProdUUID)+"/",s=i.a.createElement(Z,{text:a.formatMessage({id:"Apis.Details.index.api.definition2",defaultMessage:"API definition"}),route:"api definition",to:r+"api definition",Icon:i.a.createElement(S.a,null)});switch(e){case"GRAPHQL":return i.a.createElement(i.a.Fragment,null,i.a.createElement(Z,{text:a.formatMessage({id:"Apis.Details.index.schema.definition",defaultMessage:"Schema Definition"}),route:"schema definition",to:r+"schema definition",Icon:i.a.createElement(S.a,null)}));case"WS":return"";case"SOAP":return i.a.createElement(i.a.Fragment,null,s,i.a.createElement(Z,{text:a.formatMessage({id:"Apis.Details.index.wsdl.definition",defaultMessage:"WSDL Definition"}),route:"wsdl",to:r+"wsdl",Icon:i.a.createElement(S.a,null)}));default:return i.a.createElement(i.a.Fragment,null,s)}}getLeftMenuItemForResourcesByType(e){const{isAPIProduct:t}=this.state,{intl:a,match:n}=this.props,r="/"+(t?"api-products":"apis")+"/"+(n.params.apiUUID||n.params.api_uuid||n.params.apiProdUUID)+"/";switch(e){case"GRAPHQL":return i.a.createElement(i.a.Fragment,null,i.a.createElement(Z,{text:a.formatMessage({id:"Apis.Details.index.operations",defaultMessage:"operations"}),to:r+"operations",Icon:i.a.createElement(h.a,null)}));case"WS":return"";default:return i.a.createElement(i.a.Fragment,null,i.a.createElement(Z,{text:a.formatMessage({id:"Apis.Details.index.resources",defaultMessage:"resources"}),to:r+"resources",Icon:i.a.createElement(h.a,null)}))}}updateAPI(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{api:t}=this.state;let a=!1;"APIProduct"===t.apiType&&(a=!0);const n=e instanceof X.a?e.toJson():e;let i;return(i=z()(n)?X.a.get(t.id):t.update(n)).then(e=>(te.a.info("".concat(e.name," API updated successfully")),this.setState({api:e}),e)).catch(e=>{throw console.error(e),te.a.error("Something went wrong while updating the ".concat(t.name," API!!")),this.setState({api:t}),e})}render(){const{api:e,apiNotFound:t,isAPIProduct:a,imageUpdate:n,tenantList:r}=this.state,{classes:s,theme:l,match:p,intl:m,location:g,location:{pathname:h}}=this.props,{settings:f}=this.context;if(!Ku.isValidURL(h))return i.a.createElement(H.a,{location:g});const b="/"+(a?"api-products":"apis")+"/"+(p.params.apiUUID||p.params.api_uuid||p.params.apiProdUUID)+"/",v=b;if(t){const{apiUUID:e}=p.params,t=Object(W.c)({titleMessage:{id:"Apis.Details.index.api.not.found.title",defaultMessage:"API is not found in the {environmentLabel} Environment"},bodyMessage:{id:"Apis.Details.index.api.not.found.body",defaultMessage:"Cannot find the API with the given id"}}),a={title:m.formatMessage(t.titleMessage,{environmentLabel:"".concat(V.a.getCurrentEnvironment().label)}),body:m.formatMessage(t.bodyMessage,{apiUUID:"".concat(e)})};return i.a.createElement(H.a,{message:a})}if(!e)return i.a.createElement(ee.a,null);const{leftMenuIconMainSize:A}=l.custom;return i.a.createElement(i.a.Fragment,null,i.a.createElement(ue.b,{value:{api:e,updateAPI:this.updateAPI,isAPIProduct:a,setAPI:this.setAPI,setImageUpdate:this.setImageUpdate,tenantList:r}},i.a.createElement("div",{className:s.LeftMenu},i.a.createElement(B.b,{to:"/"+(a?"api-products":"apis")+"/"},i.a.createElement("div",{className:s.leftLInkMain},i.a.createElement(G.a,{width:A,height:A,icon:a?"api-product":"api"}))),i.a.createElement(Z,{text:m.formatMessage({id:"Apis.Details.index.overview",defaultMessage:"overview"}),to:b+"overview",Icon:i.a.createElement(L.a,null)}),i.a.createElement(Z,{text:m.formatMessage({id:"Apis.Details.index.design.configs",defaultMessage:"Design Configurations"}),route:"configuration",to:b+"configuration",Icon:i.a.createElement(D.a,null)}),!e.isWebSocket()&&i.a.createElement(Z,{text:m.formatMessage({id:"Apis.Details.index.runtime.configs",defaultMessage:"Runtime Configurations"}),route:"runtime-configuration",to:b+"runtime-configuration",Icon:i.a.createElement(w.a,null)}),e.isWebSocket()&&i.a.createElement(Z,{text:m.formatMessage({id:"Apis.Details.index.runtime.configs",defaultMessage:"Runtime Configurations"}),route:"runtime-configuration",to:b+"runtime-configuration-websocket",Icon:i.a.createElement(w.a,null)}),this.getLeftMenuItemForResourcesByType(e.type),!a&&i.a.createElement(Z,{text:m.formatMessage({id:"Apis.Details.index.endpoints",defaultMessage:"endpoints"}),to:b+"endpoints",Icon:i.a.createElement(d.a,null)}),i.a.createElement(Z,{text:m.formatMessage({id:"Apis.Details.index.subscriptions",defaultMessage:"subscriptions"}),to:b+"subscriptions",Icon:i.a.createElement(M.a,null)}),!a&&!Object(o.b)(["apim:api_publish"],e)&&i.a.createElement(Z,{text:m.formatMessage({id:"Apis.Details.index.lifecycle",defaultMessage:"lifecycle"}),to:b+"lifecycle",Icon:i.a.createElement(c.a,null)}),this.getLeftMenuItemForDefinitionByType(e.type),!a&&i.a.createElement(Z,{text:m.formatMessage({id:"Apis.Details.index.environments",defaultMessage:"environments"}),route:"environments",to:b+"environments",Icon:i.a.createElement(u.a,null)}),!e.isWebSocket()&&!a&&i.a.createElement(Z,{text:m.formatMessage({id:"Apis.Details.index.left.menu.scope",defaultMessage:"Local Scopes"}),to:b+"scopes",Icon:i.a.createElement(E.a,null)}),i.a.createElement(Z,{text:m.formatMessage({id:"Apis.Details.index.business.info",defaultMessage:"business info"}),to:b+"business info",Icon:i.a.createElement(C.a,null)}),i.a.createElement(Z,{text:m.formatMessage({id:"Apis.Details.index.properties",defaultMessage:"properties"}),to:b+"properties",Icon:i.a.createElement(x.a,null)}),i.a.createElement(Z,{text:m.formatMessage({id:"Apis.Details.index.documents",defaultMessage:"documents"}),to:b+"documents",Icon:i.a.createElement(y.a,null)}),!e.isWebSocket()&&!a&&!e.isGraphql()&&!Object(o.b)(["apim:api_publish"],e)&&i.a.createElement(Z,{text:m.formatMessage({id:"Apis.Details.index.Tryout",defaultMessage:"test console"}),to:b+"test-console",iconText:"test"}),!e.isWebSocket()&&!Object(o.b)(["apim:api_publish"],e)&&i.a.createElement(Z,{text:m.formatMessage({id:"Apis.Details.index.monetization",defaultMessage:"monetization"}),to:b+"monetization",Icon:i.a.createElement(k.a,null)}),!a&&f.externalStoresEnabled&&i.a.createElement(Z,{text:m.formatMessage({id:"Apis.Details.index.external-stores",defaultMessage:"external dev portals"}),to:b+"external-devportals",Icon:i.a.createElement(j.a,null)})),i.a.createElement("div",{className:s.content},i.a.createElement(dm,{api:e,isAPIProduct:a,imageUpdate:n}),i.a.createElement("div",{className:s.contentInside},i.a.createElement(le,{lastUpdatedTime:e.lastUpdatedTime}),i.a.createElement(U.Switch,null,i.a.createElement(U.Redirect,{exact:!0,from:Ku.subPaths.BASE,to:v}),i.a.createElement(U.Route,{path:Ku.subPaths.OVERVIEW_PRODUCT,key:Ku.subPaths.OVERVIEW_PRODUCT,component:()=>i.a.createElement(ut,{api:e})}),i.a.createElement(U.Route,{path:Ku.subPaths.OVERVIEW,component:()=>i.a.createElement(ut,{api:e})}),i.a.createElement(U.Route,{path:Ku.subPaths.API_DEFINITION,component:()=>i.a.createElement(Fd,{api:e,updateAPI:this.updateAPI})}),i.a.createElement(U.Route,{path:Ku.subPaths.WSDL,component:()=>i.a.createElement(Hd,{api:e})}),i.a.createElement(U.Route,{path:Ku.subPaths.API_DEFINITION_PRODUCT,component:()=>i.a.createElement(Fd,{api:e})}),i.a.createElement(U.Route,{path:Ku.subPaths.SCHEMA_DEFINITION,component:()=>i.a.createElement(Fd,{api:e})}),i.a.createElement(U.Route,{path:Ku.subPaths.LIFE_CYCLE,component:()=>i.a.createElement(zi,{api:e})}),i.a.createElement(U.Route,{path:Ku.subPaths.CONFIGURATION,component:()=>i.a.createElement(Sa,{api:e})}),i.a.createElement(U.Route,{path:Ku.subPaths.RUNTIME_CONFIGURATION,component:()=>i.a.createElement(oi,{api:e})}),i.a.createElement(U.Route,{path:Ku.subPaths.RUNTIME_CONFIGURATION_WEBSOCKET,component:()=>i.a.createElement(Ei,{api:e})}),i.a.createElement(U.Route,{path:Ku.subPaths.CONFIGURATION_PRODUCT,component:()=>i.a.createElement(Sa,{api:e})}),i.a.createElement(U.Route,{path:Ku.subPaths.RUNTIME_CONFIGURATION_PRODUCT,component:()=>i.a.createElement(oi,{api:e})}),i.a.createElement(U.Route,{path:Ku.subPaths.ENDPOINTS,component:()=>i.a.createElement(fc,{api:e})}),i.a.createElement(U.Route,{path:Ku.subPaths.ENVIRONMENTS,component:()=>i.a.createElement(Oc,{api:e})}),i.a.createElement(U.Route,{path:Ku.subPaths.OPERATIONS,component:()=>i.a.createElement(Gr,{api:e,updateAPI:this.updateAPI})}),i.a.createElement(U.Route,{exact:!0,path:Ku.subPaths.RESOURCES_PRODUCT,component:Uo}),i.a.createElement(U.Route,{path:Ku.subPaths.RESOURCES_PRODUCT_EDIT,component:zo}),i.a.createElement(U.Route,{path:Ku.subPaths.RESOURCES,key:Ku.subPaths.RESOURCES,component:Wo}),i.a.createElement(U.Route,{path:Ku.subPaths.SCOPES,component:()=>i.a.createElement(nd,{api:e})}),i.a.createElement(U.Route,{path:Ku.subPaths.DOCUMENTS,component:()=>i.a.createElement(kr,{api:e})}),i.a.createElement(U.Route,{path:Ku.subPaths.DOCUMENTS_PRODUCT,component:()=>i.a.createElement(kr,{api:e})}),i.a.createElement(U.Route,{path:Ku.subPaths.SUBSCRIPTIONS,component:()=>i.a.createElement(Ep,{api:e,updateAPI:this.updateAPI})}),i.a.createElement(U.Route,{path:Ku.subPaths.SUBSCRIPTIONS_PRODUCT,component:()=>i.a.createElement(Ep,{api:e,updateAPI:this.updateAPI})}),i.a.createElement(U.Route,{path:Ku.subPaths.SECURITY,component:()=>i.a.createElement(pd,{api:e})}),i.a.createElement(U.Route,{path:Ku.subPaths.COMMENTS,component:()=>i.a.createElement(Wp,{api:e})}),i.a.createElement(U.Route,{path:Ku.subPaths.BUSINESS_INFO,component:()=>i.a.createElement(gm,{api:e})}),i.a.createElement(U.Route,{path:Ku.subPaths.BUSINESS_INFO_PRODUCT,component:()=>i.a.createElement(gm,{api:e})}),i.a.createElement(U.Route,{path:Ku.subPaths.PROPERTIES,component:()=>i.a.createElement(Cm,{api:e})}),i.a.createElement(U.Route,{path:Ku.subPaths.PROPERTIES_PRODUCT,component:()=>i.a.createElement(Cm,{api:e})}),i.a.createElement(U.Route,{path:Ku.subPaths.NEW_VERSION,component:()=>i.a.createElement(Rm,null)}),i.a.createElement(U.Route,{path:Ku.subPaths.SUBSCRIPTIONS,component:()=>i.a.createElement(Ep,null)}),i.a.createElement(U.Route,{path:Ku.subPaths.MONETIZATION,component:()=>i.a.createElement(Pm,{api:e})}),i.a.createElement(U.Route,{path:Ku.subPaths.MONETIZATION_PRODUCT,component:()=>i.a.createElement(Pm,{api:e})}),i.a.createElement(U.Route,{path:Ku.subPaths.TRYOUT,component:()=>i.a.createElement(Gu,{apiObj:e})}),i.a.createElement(U.Route,{path:Ku.subPaths.EXTERNAL_STORES,component:xm}))))))}}Ku.contextType=ne.b,Ku.subPaths={BASE:"/apis/:api_uuid",BASE_PRODUCT:"/api-products/:apiprod_uuid",OVERVIEW:"/apis/:api_uuid/overview",OVERVIEW_PRODUCT:"/api-products/:apiprod_uuid/overview",API_DEFINITION:"/apis/:api_uuid/api definition",WSDL:"/apis/:api_uuid/wsdl",API_DEFINITION_PRODUCT:"/api-products/:apiprod_uuid/api definition",SCHEMA_DEFINITION:"/apis/:api_uuid/schema definition",LIFE_CYCLE:"/apis/:api_uuid/lifecycle",CONFIGURATION:"/apis/:api_uuid/configuration",RUNTIME_CONFIGURATION:"/apis/:api_uuid/runtime-configuration",CONFIGURATION_PRODUCT:"/api-products/:apiprod_uuid/configuration",RUNTIME_CONFIGURATION_PRODUCT:"/api-products/:apiprod_uuid/runtime-configuration",RUNTIME_CONFIGURATION_WEBSOCKET:"/apis/:api_uuid/runtime-configuration-websocket",ENDPOINTS:"/apis/:api_uuid/endpoints",ENVIRONMENTS:"/apis/:api_uuid/environments",OPERATIONS:"/apis/:api_uuid/operations",RESOURCES:"/apis/:api_uuid/resources",RESOURCES_PRODUCT:"/api-products/:apiprod_uuid/resources",RESOURCES_PRODUCT_EDIT:"/api-products/:apiprod_uuid/resources/edit",SCOPES:"/apis/:api_uuid/scopes",DOCUMENTS:"/apis/:api_uuid/documents",DOCUMENTS_PRODUCT:"/api-products/:apiprod_uuid/documents",SUBSCRIPTIONS_PRODUCT:"/api-products/:apiprod_uuid/subscriptions",SUBSCRIPTIONS:"/apis/:api_uuid/subscriptions",SECURITY:"/apis/:api_uuid/security",COMMENTS:"/apis/:api_uuid/comments",BUSINESS_INFO:"/apis/:api_uuid/business info",BUSINESS_INFO_PRODUCT:"/api-products/:apiprod_uuid/business info",PROPERTIES:"/apis/:api_uuid/properties",PROPERTIES_PRODUCT:"/api-products/:apiprod_uuid/properties",NEW_VERSION:"/apis/:api_uuid/new_version",MONETIZATION:"/apis/:api_uuid/monetization",MONETIZATION_PRODUCT:"/api-products/:apiprod_uuid/monetization",EXTERNAL_STORES:"/apis/:api_uuid/external-devportals",TRYOUT:"/apis/:api_uuid/test-console",QUERYANALYSIS:"/apis/:api_uuid/queryanalysis"},Object.freeze(Ku.paths),Ku.propTypes={classes:s.a.shape({LeftMenu:s.a.string,content:s.a.string,leftLInkMain:s.a.string,contentInside:s.a.string}).isRequired,match:s.a.shape({params:s.a.object}).isRequired,location:s.a.shape({pathname:s.a.object}).isRequired,history:s.a.shape({push:s.a.object}).isRequired,theme:s.a.shape({custom:s.a.shape({leftMenuIconMainSize:s.a.number})}).isRequired,isAPIProduct:s.a.bool.isRequired,intl:s.a.shape({formatMessage:s.a.func}).isRequired};t.default=Object(W.d)(Object(q.a)(e=>({LeftMenu:{backgroundColor:e.palette.background.leftMenu,width:e.custom.leftMenuWidth,textAlign:"center",fontFamily:e.typography.fontFamily,position:"absolute",bottom:0,left:0,top:0,overflowY:"auto"},leftLInkMain:{borderRight:"solid 1px "+e.palette.background.leftMenu,paddingBottom:e.spacing(1),paddingTop:e.spacing(1),cursor:"pointer",backgroundColor:e.palette.background.leftMenuActive,color:e.palette.getContrastText(e.palette.background.leftMenuActive),textDecoration:"none"},detailsContent:{display:"flex",flex:1},content:{display:"flex",flex:1,flexDirection:"column",marginLeft:e.custom.leftMenuWidth,paddingBottom:e.spacing(3)},contentInside:{paddingLeft:e.spacing(3),paddingRight:e.spacing(3),paddingTop:e.spacing(2)}}),{withTheme:!0})(Ku))}}]);
//# sourceMappingURL=DeferredDetails.813f750b87d4618d13b5.bundle.js.map