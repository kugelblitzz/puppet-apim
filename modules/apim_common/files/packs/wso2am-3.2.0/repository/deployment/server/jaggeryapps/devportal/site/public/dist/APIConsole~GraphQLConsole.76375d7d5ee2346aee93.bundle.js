(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{1501:function(e,a,t){"use strict";var n=t(1),l=t.n(n),s=t(258),c=t(1388),i=t(1300),r=t(45),o=t.n(r),m=t(1162),u=t.n(m),d=t(1358),p=t(1313),g=t(1315),y=t(1415),E=t(1410),h=t(1492),f=t(1304),b=t(1331),T=t(1453),A=t.n(T),C=t(1333),S=t(1299),k=t(1364),v=t(18),O=t(1326),I=t(1371),N=t(1215),w=t(1167),D=t.n(w),K=t(132),P=t(259),M=t(981),x=t(930);var R=Object(x.a)(e=>({centerItems:{margin:"auto"},tryoutHeading:{marginTop:e.spacing(1),fontWeight:400},menuItem:{color:e.palette.getContrastText(e.palette.background.paper)}}))(e=>{let{selectedApplication:a,selectedKeyType:t}=e;const{subscriptions:n,handleChanges:r,classes:o}=e,m=e=>{const{target:n}=e,{name:l,value:s}=n;switch(l){case"selectedApplication":a=s;break;case"selectedKeyType":t=s}r(e)};return l.a.createElement(l.a.Fragment,null,l.a.createElement(c.a,{x:12,md:6,className:o.centerItems},l.a.createElement(p.a,{fullWidth:!0,id:"selected-application",select:!0,label:l.a.createElement(s.a,{defaultMessage:"Applications",id:"Apis.Details.ApiConsole.SelectAppPanel.applications"}),value:a,name:"selectedApplication",onChange:m,SelectProps:n,helperText:l.a.createElement(s.a,{defaultMessage:"Subscribed applications",id:"Apis.Details.ApiConsole.SelectAppPanel.select.subscribed.application"}),margin:"normal",variant:"outlined"},n.map(e=>l.a.createElement(O.a,{value:e.applicationInfo.applicationId,key:e.applicationInfo.applicationId,className:o.menuItem},e.applicationInfo.name)))),l.a.createElement(c.a,{x:12,md:6,className:o.centerItems},l.a.createElement(i.a,{variant:"h6",color:"textSecondary",className:o.tryoutHeading},l.a.createElement(s.a,{id:"Apis.Details.ApiConsole.SelectAppPanel.select.key.type.heading",defaultMessage:"Key Type"})),l.a.createElement(g.a,{component:"fieldKeyType"},l.a.createElement(y.a,{name:"selectedKeyType",value:t,onChange:m,row:!0},null!=n&&"UNBLOCKED"===n.find(e=>e.applicationId===a).status&&l.a.createElement(E.a,{value:"PRODUCTION",control:l.a.createElement(h.a,null),label:l.a.createElement(s.a,{id:"Apis.Details.ApiConsole.SelectAppPanel.production.radio",defaultMessage:"Production"})}),l.a.createElement(E.a,{value:"SANDBOX",control:l.a.createElement(h.a,null),label:l.a.createElement(s.a,{id:"Apis.Details.ApiConsole.SelectAppPanel.sandbox.radio",defaultMessage:"Sandbox"})})))))});const B=Object(d.a)(e=>({centerItems:{margin:"auto"},tokenType:{margin:"auto",display:"flex","& .MuiButton-contained.Mui-disabled span.MuiButton-label":{color:"#999999"}},paper:{margin:e.spacing(1),padding:e.spacing(1)},grid:{marginTop:e.spacing(4),marginBottom:e.spacing(4),paddingRight:e.spacing(2),justifyContent:"center"},tryoutHeading:{fontWeight:400},genKeyButton:{width:e.spacing(20),height:e.spacing(5),marginTop:e.spacing(2.5),marginLeft:e.spacing(2)},gatewayEnvironment:{marginTop:e.spacing(4)},categoryHeading:{marginBottom:e.spacing(2),marginLeft:e.spacing(-5)},tooltip:{marginLeft:e.spacing(1)},menuItem:{color:e.palette.getContrastText(e.palette.background.paper)},warningIcon:{color:"#ff9a00",fontSize:25,marginRight:10}}));function U(e){const{securitySchemeType:a,selectedEnvironment:t,environments:r,containerMngEnvironments:o,labels:m,productionAccessToken:u,sandboxAccessToken:d,selectedKeyType:T,setKeys:w,setSelectedKeyType:x,setSelectedKeyManager:U,setSelectedEnvironment:j,setProductionAccessToken:L,setSandboxAccessToken:H,scopes:Y,setSecurityScheme:W,setUsername:_,setPassword:F,username:X,password:q,updateSwagger:z,setProductionApiKey:G,setSandboxApiKey:$,productionApiKey:J,sandboxApiKey:Q,environmentObject:V,setURLs:Z,api:ee}=e;let{selectedKeyManager:ae}=e;ae=ae||"Resident Key Manager";const te=B(),[ne,le]=Object(n.useState)(!1),[se,ce]=Object(n.useState)(!1),[ie,re]=Object(n.useState)(!1),[oe,me]=Object(n.useState)([]),[ue,de]=Object(n.useState)([]),[pe,ge]=Object(n.useState)([]),[ye,Ee]=Object(n.useState)(null),[he,fe]=Object(n.useState)(!1),be=ee.id,Te=new P.a;function Ae(e){const{target:t}=e,{name:n,value:l}=t;switch(n){case"selectedEnvironment":if(j(l,!0),z(l),V){const e=V.find(e=>l===e.environmentName).URLs;Z(e)}break;case"selectedApplication":L(""),H(""),G(""),$(""),de(l);break;case"selectedKeyManager":U(l,!0,ue);break;case"selectedKeyType":x(l,!u||!d,ue);break;case"securityScheme":W(l);break;case"username":_(l);break;case"password":F(l);break;case"accessToken":"API-KEY"===a&&"PRODUCTION"===T?G(l):"API-KEY"===a&&"SANDBOX"===T?$(l):"PRODUCTION"===T?L(l):H(l)}}Object(n.useEffect)(()=>{let e,a,n,l="PRODUCTION";if(ee.lifeCycleStatus&&"prototyped"!==ee.lifeCycleStatus.toLowerCase()){Te.getSubscriptions(be).then(s=>{null!==s&&(e=s.obj.list.filter(e=>"UNBLOCKED"===e.status||"PROD_ONLY_BLOCKED"===e.status))&&e.length>0?(a=e[0].applicationId,M.a.get(a).then(e=>e.getKeys()).then(s=>{s.get(ae)&&"SANDBOX"===s.get(ae).keyType?(l="SANDBOX",({accessToken:n}=s.get(ae).token)):s.get(ae)&&"PRODUCTION"===s.get(ae).keyType&&(l="PRODUCTION",({accessToken:n}=s.get(ae).token)),de(a),me(e),w(s),j(t,!1),x(l,!1),"PRODUCTION"===T?L(n):H(n)})):(de(a),me(e),w(void 0),j(t,!1),"PRODUCTION"===T?L(n):H(n),x(T,!1))}).catch(e=>{const{status:a}=e;404===a&&re(!0)}),Te.getKeyManagers().then(e=>{const a=[];e.body.list.map(e=>a.push(e)),ge(a);const t=a.filter(e=>e.name===ae);t&&t.length>0&&Ee(t[0])}).catch(e=>{const{status:a}=e;404===a&&re(!0)})}},[]),Object(n.useEffect)(()=>{!function(){if(ee.lifeCycleStatus&&"prototyped"!==ee.lifeCycleStatus.toLowerCase()){let e,a;null!==oe&&0!==oe.length&&0!==ue.length&&("PROD_ONLY_BLOCKED"===oe.find(e=>e.applicationId===ue).status?(x(T,!1),a="SANDBOX"):a=T),M.a.get(ue).then(e=>e.getKeys(a||"PRODUCTION")).then(a=>{const t=a.get(ae);t&&t.keyType===T&&({accessToken:e}=t.token),t&&"PRODUCTION"===t.keyType?L(e):t&&"SANDBOX"===t.keyType&&H(e),t&&t.consumerKey&&""!==t.consumerKey?fe(!0):fe(!1),w(a)})}}()},[ue,T,t,a]);const Ce=v.a.getUser();if(null==ee)return l.a.createElement(K.a,null);if(ie)return"API Not found !";let Se=!1,ke=!1,ve=!1,Oe=!1,Ie=ee.authorizationHeader?ee.authorizationHeader:"Authorization",Ne="Bearer";ee&&ee.securityScheme&&(Se=ee.securityScheme.includes("api_key"),ke=ee.securityScheme.includes("basic_auth"),ve=ee.securityScheme.includes("oauth2"),Oe=ee.securityScheme.includes("test_auth"),Se&&"API-KEY"===a&&(Ie="apikey",Ne=""),Oe&&"TEST"===a&&(Ie="testKey",Ne=""));const we=ee.lifeCycleStatus&&"prototyped"===ee.lifeCycleStatus.toLowerCase(),De="published"===ee.lifeCycleStatus.toLowerCase()||we&&!0===ee.enableStore;let Ke="";Ke="API-KEY"===a?"PRODUCTION"===T?J:Q:"PRODUCTION"===T?u:d;const Pe=[];o&&o.filter(e=>e.clusterDetails.length>0).forEach(e=>{Pe.push(l.a.createElement(O.a,{value:"",disabled:!0,className:te.menuItem},l.a.createElement("em",null,e.deploymentEnvironmentName))),e.clusterDetails.forEach(e=>{Pe.push(l.a.createElement(O.a,{value:e.clusterName,key:e.clusterName,className:te.menuItem},e.clusterDisplayName))})});const Me=`${Ie}: ${Ne}`;return l.a.createElement(s.b,{locale:"en"},l.a.createElement(c.a,{x:12,md:6,className:te.centerItems},l.a.createElement(N.a,null,"TEST"!==a&&l.a.createElement(l.a.Fragment,null,l.a.createElement(i.a,{variant:"h5",color:"textPrimary",className:te.categoryHeading},l.a.createElement(s.a,{id:"api.console.security.heading",defaultMessage:"Security"})),l.a.createElement(N.a,{mb:1},l.a.createElement(i.a,{variant:"body1"},l.a.createElement(N.a,{display:"flex",alignItems:"center"},ye&&ye.enabled&&l.a.createElement(s.a,{id:"Apis.Details.ApiConsole.TryOutController.default.km.msg.one",defaultMessage:"The Resident Key Manager is selected for try out console."}),ye&&!ye.enabled&&l.a.createElement(l.a.Fragment,null,l.a.createElement(D.a,{className:te.warningIcon}),l.a.createElement("div",null,l.a.createElement(s.a,{id:"Apis.Details.ApiConsole.TryOutController.default.km.msg.two",defaultMessage:"Try it console is only accessible via the default key manager.But the default key manager is disabled at the moment."}))),ye&&0===ye.length&&l.a.createElement(s.a,{id:"Apis.Details.ApiConsole.TryOutController.default.km.msg.three",defaultMessage:"Try it console is only accessible via the default key manager.Something went wrong while selecting the default Key manager."})))),l.a.createElement(i.a,{variant:"h6",color:"textSecondary",className:te.tryoutHeading},l.a.createElement(s.a,{id:"api.console.security.type.heading",defaultMessage:"Security Type"}))),(Se||ke||ve)&&De&&l.a.createElement(g.a,{component:"fieldset"},l.a.createElement(y.a,{name:"securityScheme",value:a,onChange:Ae,row:!0},l.a.createElement(E.a,{value:"OAUTH",disabled:!ve,control:l.a.createElement(h.a,null),label:l.a.createElement(s.a,{id:"Apis.Details.ApiConsole.security.scheme.oauth",defaultMessage:"OAuth"})}),l.a.createElement(E.a,{value:"API-KEY",disabled:!Se,control:l.a.createElement(h.a,null),label:l.a.createElement(s.a,{id:"Apis.Details.ApiConsole.security.scheme.apikey",defaultMessage:"API Key"})}),l.a.createElement(E.a,{value:"BASIC",disabled:!ke,control:l.a.createElement(h.a,null),label:l.a.createElement(s.a,{id:"Apis.Details.ApiConsole.security.scheme.basic",defaultMessage:"Basic"})}))))),!we&&l.a.createElement(c.a,{xs:12,md:12,item:!0},l.a.createElement(N.a,{display:"block"},Ce&&oe&&oe.length>0&&"BASIC"!==a&&"TEST"!==a&&l.a.createElement(R,{subscriptions:oe,handleChanges:Ae,selectedApplication:ue,selectedKeyManager:ae,selectedKeyType:T,keyManagers:pe}),oe&&0===oe.length&&"TEST"!==a?l.a.createElement(c.a,{x:8,md:6,className:te.tokenType,item:!0},l.a.createElement(N.a,{mb:1,alignItems:"center"},l.a.createElement(i.a,{variant:"body1"},l.a.createElement(N.a,{display:"flex"},l.a.createElement(D.a,{className:te.warningIcon}),l.a.createElement("div",null,l.a.createElement(s.a,{id:"Apis.Details.ApiConsole.ApiConsole.subscribe.to.application",defaultMessage:"Please subscribe to an application"})))))):!he&&l.a.createElement(c.a,{x:8,md:6,className:te.tokenType,item:!0},l.a.createElement(N.a,{mb:1,alignItems:"center"},l.a.createElement(i.a,{variant:"body1"},l.a.createElement(N.a,{display:"flex"},l.a.createElement(D.a,{className:te.warningIcon}),l.a.createElement("div",null,l.a.createElement(s.a,{id:"Apis.Details.ApiConsole.ApiConsole.keys.not.generated",defaultMessage:"Consumer key and secret not generated for the selected application on the {what} environment. ",values:{what:T}})))))),l.a.createElement(N.a,{display:"block",justifyContent:"center"},l.a.createElement(c.a,{x:8,md:6,className:te.tokenType,item:!0},"BASIC"===a&&l.a.createElement(l.a.Fragment,null,l.a.createElement(c.a,{x:12,md:12,item:!0},l.a.createElement(p.a,{margin:"normal",variant:"outlined",label:l.a.createElement(s.a,{id:"username",defaultMessage:"Username"}),name:"username",onChange:Ae,value:X||"",fullWidth:!0}),l.a.createElement(p.a,{margin:"normal",variant:"outlined",label:l.a.createElement(s.a,{id:"password",defaultMessage:"Password"}),name:"password",onChange:Ae,value:q||"",fullWidth:!0}))),"BASIC"!==a&&"TEST"!==a&&l.a.createElement(p.a,{fullWidth:!0,margin:"normal",variant:"outlined",label:l.a.createElement(s.a,{id:"access.token",sdefaultMessage:"Access Token"}),name:"accessToken",onChange:Ae,type:ne?"text":"password",value:Ke||"",helperText:l.a.createElement(s.a,{id:"enter.access.token",defaultMessage:"Enter access Token"}),id:"accessTokenInput",InputProps:{endAdornment:l.a.createElement(S.a,{position:"end"},l.a.createElement(C.a,{edge:"end","aria-label":"Toggle token visibility",onClick:function(){le(!ne)}},ne?l.a.createElement(k.a,null,"visibility_off"):l.a.createElement(k.a,null,"visibility"))),startAdornment:l.a.createElement(S.a,{style:{minWidth:7*Me.length},position:"start"},`${Ie}: ${Ne}`)}}),"BASIC"!==a&&"TEST"!==a&&l.a.createElement(l.a.Fragment,null,l.a.createElement(I.a,{onClick:"API-KEY"===a?function(){if(ee.lifeCycleStatus&&"prototyped"!==ee.lifeCycleStatus.toLowerCase()){ce(!0),Te.generateApiKey(ue,T,-1).then(e=>{console.log("Non empty response received",e),le(!1),"PRODUCTION"===T?G(e.body.apikey):$(e.body.apikey),ce(!1)}).catch(e=>{console.log(e);const{status:a}=e;404===a&&re(!0),ce(!1)})}}:function(){if(ee.lifeCycleStatus&&"prototyped"!==ee.lifeCycleStatus.toLowerCase()){ce(!0),M.a.get(ue).then(e=>e.generateToken(ae,T,3600,Y)).then(e=>{console.log("token generated successfully "+e),le(!1),"PRODUCTION"===T?L(e.accessToken):H(e.accessToken),ce(!1)}).catch(e=>{console.error(e);const{status:a}=e;404===a&&re(!0),ce(!1)})}},variant:"contained",className:te.genKeyButton,disabled:!Ce||oe&&0===oe.length||!he},se&&l.a.createElement(f.a,{size:15}),l.a.createElement(s.a,{id:"Apis.Details.ApiCOnsole.generate.test.key",defaultMessage:"GET TEST KEY "})),l.a.createElement(b.a,{placement:"right",interactive:!0,title:l.a.createElement(s.a,{id:"Apis.Details.TryOutConsole.access.token.tooltip",defaultMessage:"You can use your existing Access Token or you can generate a new Test Key."})},l.a.createElement(N.a,{m:1,mt:2},l.a.createElement(C.a,{"aria-label":"Use existing Access Token or generate a new Test Key"},l.a.createElement(A.a,null))))))),l.a.createElement(N.a,{display:"flex",justifyContent:"center",className:te.gatewayEnvironment},l.a.createElement(c.a,{xs:12,md:6,item:!0},(r&&r.length>0||Pe.length>0||m&&m.length>0)&&l.a.createElement(l.a.Fragment,null,l.a.createElement(i.a,{variant:"h5",color:"textPrimary",className:te.categoryHeading},l.a.createElement(s.a,{id:"api.console.gateway.heading",defaultMessage:"Gateway"})),l.a.createElement(p.a,{fullWidth:!0,select:!0,label:l.a.createElement(s.a,{defaultMessage:"Environment",id:"Apis.Details.ApiConsole.environment"}),value:t||r&&r[0],name:"selectedEnvironment",onChange:Ae,helperText:l.a.createElement(s.a,{defaultMessage:"Please select an environment",id:"Apis.Details.ApiConsole.SelectAppPanel.environment"}),margin:"normal",variant:"outlined"},r&&r.length>0&&l.a.createElement(O.a,{value:"",disabled:!0,className:te.menuItem},l.a.createElement("em",null,l.a.createElement(s.a,{id:"api.gateways",defaultMessage:"API Gateways"}))),r&&r.map(e=>l.a.createElement(O.a,{value:e,key:e,className:te.menuItem},e)),Pe,m&&m.length>0&&l.a.createElement(O.a,{value:"",disabled:!0},l.a.createElement("em",null,l.a.createElement(s.a,{id:"gateways",defaultMessage:"Gateways",className:te.menuItem}))),m&&m.map(e=>l.a.createElement(O.a,{value:e,key:e,className:te.menuItem},e)))))))))}U.propTypes={classes:o.a.shape({paper:o.a.string.isRequired,grid:o.a.string.isRequired,inputAdornmentStart:o.a.string.isRequired,centerItems:o.a.string.isRequired}).isRequired};a.a=u()(d.a)(U)}}]);
//# sourceMappingURL=APIConsole~GraphQLConsole.76375d7d5ee2346aee93.bundle.js.map